
        <!DOCTYPE html>
        <html>
          <head>
          </head>
          <body style="background-color:#101010;">
          <script>
            (()=>{var tu=Object.create;var bi=Object.defineProperty;var eu=Object.getOwnPropertyDescriptor;var ru=Object.getOwnPropertyNames;var iu=Object.getPrototypeOf,nu=Object.prototype.hasOwnProperty;var ou=(h,o,s)=>o in h?bi(h,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[o]=s;var gr=(h,o)=>()=>(o||h((o={exports:{}}).exports,o),o.exports);var su=(h,o,s,f)=>{if(o&&typeof o=="object"||typeof o=="function")for(let y of ru(o))!nu.call(h,y)&&y!==s&&bi(h,y,{get:()=>o[y],enumerable:!(f=eu(o,y))||f.enumerable});return h};var fo=(h,o,s)=>(s=h!=null?tu(iu(h)):{},su(o||!h||!h.__esModule?bi(s,"default",{value:h,enumerable:!0}):s,h));var lt=(h,o,s)=>(ou(h,typeof o!="symbol"?o+"":o,s),s);var co=gr((Br,ki)=>{(function(o,s){typeof Br=="object"&&typeof ki=="object"?ki.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Br=="object"?Br.BrowserFS=s():o.BrowserFS=s()})(Br,function(){return function(h){var o={};function s(f){if(o[f])return o[f].exports;var y=o[f]={exports:{},id:f,loaded:!1};return h[f].call(y.exports,y,y.exports,s),y.loaded=!0,y.exports}return s.m=h,s.c=o,s.p="",s(0)}([function(h,o,s){(function(f,y,d,w){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var E=s(2),v=s(9),c;(function(i){i[i.EPERM=1]="EPERM",i[i.ENOENT=2]="ENOENT",i[i.EIO=5]="EIO",i[i.EBADF=9]="EBADF",i[i.EACCES=13]="EACCES",i[i.EBUSY=16]="EBUSY",i[i.EEXIST=17]="EEXIST",i[i.ENOTDIR=20]="ENOTDIR",i[i.EISDIR=21]="EISDIR",i[i.EINVAL=22]="EINVAL",i[i.EFBIG=27]="EFBIG",i[i.ENOSPC=28]="ENOSPC",i[i.EROFS=30]="EROFS",i[i.ENOTEMPTY=39]="ENOTEMPTY",i[i.ENOTSUP=95]="ENOTSUP"})(c||(c={}));var _={};_[c.EPERM]="Operation not permitted.",_[c.ENOENT]="No such file or directory.",_[c.EIO]="Input/output error.",_[c.EBADF]="Bad file descriptor.",_[c.EACCES]="Permission denied.",_[c.EBUSY]="Resource busy or locked.",_[c.EEXIST]="File exists.",_[c.ENOTDIR]="File is not a directory.",_[c.EISDIR]="File is a directory.",_[c.EINVAL]="Invalid argument.",_[c.EFBIG]="File is too big.",_[c.ENOSPC]="No space left on disk.",_[c.EROFS]="Cannot modify a read-only file system.",_[c.ENOTEMPTY]="Directory is not empty.",_[c.ENOTSUP]="Operation is not supported.";var p=function(i){function t(r,e,n){e===void 0&&(e=_[r]),i.call(this,e),this.syscall="",this.errno=r,this.code=c[r],this.path=n,this.stack=new i().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var n=new t(0);return n.errno=e.errno,n.code=e.code,n.path=e.path,n.stack=e.stack,n.message=e.message,n},t.fromBuffer=function(e,n){return n===void 0&&(n=0),t.fromJSON(JSON.parse(e.toString("utf8",n+4,n+4+e.readUInt32LE(n))))},t.FileError=function(e,n){return new t(e,_[e],n)},t.ENOENT=function(e){return this.FileError(c.ENOENT,e)},t.EEXIST=function(e){return this.FileError(c.EEXIST,e)},t.EISDIR=function(e){return this.FileError(c.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(c.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(c.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(c.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,n){e===void 0&&(e=f.alloc(this.bufferSize())),n===void 0&&(n=0);var a=e.write(JSON.stringify(this.toJSON()),n+4);return e.writeUInt32LE(a,n),e},t.prototype.bufferSize=function(){return 4+f.byteLength(JSON.stringify(this.toJSON()))},t}(Error),T=Object.freeze({get ErrorCode(){return c},ErrorStrings:_,ApiError:p}),A;(function(i){i[i.NOP=0]="NOP",i[i.THROW_EXCEPTION=1]="THROW_EXCEPTION",i[i.TRUNCATE_FILE=2]="TRUNCATE_FILE",i[i.CREATE_FILE=3]="CREATE_FILE"})(A||(A={}));var b=function i(t){if(this.flagStr=t,i.validFlagStrs.indexOf(t)<0)throw new p(c.EINVAL,"Invalid flag: "+t)};b.getFileFlag=function(t){return b.flagCache.hasOwnProperty(t)?b.flagCache[t]:b.flagCache[t]=new b(t)},b.prototype.getFlagString=function(){return this.flagStr},b.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},b.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},b.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},b.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},b.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},b.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},b.prototype.pathExistsAction=function(){return this.isExclusive()?A.THROW_EXCEPTION:this.isTruncating()?A.TRUNCATE_FILE:A.NOP},b.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?A.CREATE_FILE:A.THROW_EXCEPTION},b.flagCache={},b.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var L;(function(i){i[i.FILE=32768]="FILE",i[i.DIRECTORY=16384]="DIRECTORY",i[i.SYMLINK=40960]="SYMLINK"})(L||(L={}));var C=function(t,r,e,n,a,u){if(n===void 0&&(n=new Date),a===void 0&&(a=new Date),u===void 0&&(u=new Date),this.size=r,this.atime=n,this.mtime=a,this.ctime=u,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case L.FILE:this.mode=420;break;case L.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};C.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),n=t.readDoubleLE(8),a=t.readDoubleLE(16),u=t.readDoubleLE(24);return new C(e&61440,r,e&4095,new Date(n),new Date(a),new Date(u))},C.prototype.toBuffer=function(){var t=f.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},C.prototype.clone=function(){return new C(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},C.prototype.isFile=function(){return(this.mode&61440)===L.FILE},C.prototype.isDirectory=function(){return(this.mode&61440)===L.DIRECTORY},C.prototype.isSymbolicLink=function(){return(this.mode&61440)===L.SYMLINK},C.prototype.chmod=function(t){this.mode=this.mode&61440|t},C.prototype.isSocket=function(){return!1},C.prototype.isBlockDevice=function(){return!1},C.prototype.isCharacterDevice=function(){return!1},C.prototype.isFIFO=function(){return!1};var G=function(i,t){return i};function W(i){if(i)return i;throw new p(c.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function U(i,t){switch(typeof i){case"number":return i;case"string":var r=parseInt(i,8);return isNaN(r)?t:r;default:return t}}function _t(i){if(i instanceof Date)return i;if(typeof i=="number")return new Date(i*1e3);throw new p(c.EINVAL,"Invalid time.")}function et(i){if(i.indexOf("\0")>=0)throw new p(c.EINVAL,"Path must be a string without null bytes.");if(i==="")throw new p(c.EINVAL,"Path must not be empty.");return v.resolve(i)}function St(i,t,r,e){switch(typeof i){case"object":return{encoding:typeof i.encoding<"u"?i.encoding:t,flag:typeof i.flag<"u"?i.flag:r,mode:U(i.mode,e)};case"string":return{encoding:i,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function dt(){}var M=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};M.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new p(c.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},M.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},M.prototype.getRootFS=function(){return this.root?this.root:null},M.prototype.rename=function(t,r,e){e===void 0&&(e=dt);var n=G(e,1);try{W(this.root).rename(et(t),et(r),n)}catch(a){n(a)}},M.prototype.renameSync=function(t,r){W(this.root).renameSync(et(t),et(r))},M.prototype.exists=function(t,r){r===void 0&&(r=dt);var e=G(r,1);try{return W(this.root).exists(et(t),e)}catch{return e(!1)}},M.prototype.existsSync=function(t){try{return W(this.root).existsSync(et(t))}catch{return!1}},M.prototype.stat=function(t,r){r===void 0&&(r=dt);var e=G(r,2);try{return W(this.root).stat(et(t),!1,e)}catch(n){return e(n)}},M.prototype.statSync=function(t){return W(this.root).statSync(et(t),!1)},M.prototype.lstat=function(t,r){r===void 0&&(r=dt);var e=G(r,2);try{return W(this.root).stat(et(t),!0,e)}catch(n){return e(n)}},M.prototype.lstatSync=function(t){return W(this.root).statSync(et(t),!0)},M.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=dt);var n=0;typeof r=="function"?e=r:typeof r=="number"&&(n=r);var a=G(e,1);try{if(n<0)throw new p(c.EINVAL);return W(this.root).truncate(et(t),n,a)}catch(u){return a(u)}},M.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new p(c.EINVAL);return W(this.root).truncateSync(et(t),r)},M.prototype.unlink=function(t,r){r===void 0&&(r=dt);var e=G(r,1);try{return W(this.root).unlink(et(t),e)}catch(n){return e(n)}},M.prototype.unlinkSync=function(t){return W(this.root).unlinkSync(et(t))},M.prototype.open=function(t,r,e,n){var a=this;n===void 0&&(n=dt);var u=U(e,420);n=typeof e=="function"?e:n;var l=G(n,2);try{W(this.root).open(et(t),b.getFileFlag(r),u,function(S,x){x?l(S,a.getFdForFile(x)):l(S)})}catch(S){l(S)}},M.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(W(this.root).openSync(et(t),b.getFileFlag(r),U(e,420)))},M.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=dt);var n=St(r,null,"r",null);e=typeof r=="function"?r:e;var a=G(e,2);try{var u=b.getFileFlag(n.flag);return u.isReadable()?W(this.root).readFile(et(t),n.encoding,u,a):a(new p(c.EINVAL,"Flag passed to readFile must allow for reading."))}catch(l){return a(l)}},M.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=St(r,null,"r",null),n=b.getFileFlag(e.flag);if(!n.isReadable())throw new p(c.EINVAL,"Flag passed to readFile must allow for reading.");return W(this.root).readFileSync(et(t),e.encoding,n)},M.prototype.writeFile=function(t,r,e,n){e===void 0&&(e={}),n===void 0&&(n=dt);var a=St(e,"utf8","w",420);n=typeof e=="function"?e:n;var u=G(n,1);try{var l=b.getFileFlag(a.flag);return l.isWriteable()?W(this.root).writeFile(et(t),r,a.encoding,l,a.mode,u):u(new p(c.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(S){return u(S)}},M.prototype.writeFileSync=function(t,r,e){var n=St(e,"utf8","w",420),a=b.getFileFlag(n.flag);if(!a.isWriteable())throw new p(c.EINVAL,"Flag passed to writeFile must allow for writing.");return W(this.root).writeFileSync(et(t),r,n.encoding,a,n.mode)},M.prototype.appendFile=function(t,r,e,n){n===void 0&&(n=dt);var a=St(e,"utf8","a",420);n=typeof e=="function"?e:n;var u=G(n,1);try{var l=b.getFileFlag(a.flag);if(!l.isAppendable())return u(new p(c.EINVAL,"Flag passed to appendFile must allow for appending."));W(this.root).appendFile(et(t),r,a.encoding,l,a.mode,u)}catch(S){u(S)}},M.prototype.appendFileSync=function(t,r,e){var n=St(e,"utf8","a",420),a=b.getFileFlag(n.flag);if(!a.isAppendable())throw new p(c.EINVAL,"Flag passed to appendFile must allow for appending.");return W(this.root).appendFileSync(et(t),r,n.encoding,a,n.mode)},M.prototype.fstat=function(t,r){r===void 0&&(r=dt);var e=G(r,2);try{var n=this.fd2file(t);n.stat(e)}catch(a){e(a)}},M.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},M.prototype.close=function(t,r){var e=this;r===void 0&&(r=dt);var n=G(r,1);try{this.fd2file(t).close(function(a){a||e.closeFd(t),n(a)})}catch(a){n(a)}},M.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},M.prototype.ftruncate=function(t,r,e){e===void 0&&(e=dt);var n=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var a=G(e,1);try{var u=this.fd2file(t);if(n<0)throw new p(c.EINVAL);u.truncate(n,a)}catch(l){a(l)}},M.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new p(c.EINVAL);e.truncateSync(r)},M.prototype.fsync=function(t,r){r===void 0&&(r=dt);var e=G(r,1);try{this.fd2file(t).sync(e)}catch(n){e(n)}},M.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},M.prototype.fdatasync=function(t,r){r===void 0&&(r=dt);var e=G(r,1);try{this.fd2file(t).datasync(e)}catch(n){e(n)}},M.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},M.prototype.write=function(t,r,e,n,a,u){u===void 0&&(u=dt);var l,S,x,O=null;if(typeof r=="string"){var D="utf8";switch(typeof e){case"function":u=e;break;case"number":O=e,D=typeof n=="string"?n:"utf8",u=typeof a=="function"?a:u;break;default:return u=typeof n=="function"?n:typeof a=="function"?a:u,u(new p(c.EINVAL,"Invalid arguments."))}l=f.from(r,D),S=0,x=l.length}else l=r,S=e,x=n,O=typeof a=="number"?a:null,u=typeof a=="function"?a:u;var V=G(u,3);try{var $=this.fd2file(t);O==null&&(O=$.getPos()),$.write(l,S,x,O,V)}catch(rt){V(rt)}},M.prototype.writeSync=function(t,r,e,n,a){var u,l=0,S,x;if(typeof r=="string"){x=typeof e=="number"?e:null;var O=typeof n=="string"?n:"utf8";l=0,u=f.from(r,O),S=u.length}else u=r,l=e,S=n,x=typeof a=="number"?a:null;var D=this.fd2file(t);return x==null&&(x=D.getPos()),D.writeSync(u,l,S,x)},M.prototype.read=function(t,r,e,n,a,u){u===void 0&&(u=dt);var l,S,x,O,D;if(typeof r=="number"){x=r,l=e;var V=n;u=typeof a=="function"?a:u,S=0,O=f.alloc(x),D=G(function(rt,ft,gt){if(rt)return u(rt);u(rt,gt.toString(V),ft)},3)}else O=r,S=e,x=n,l=a,D=G(u,3);try{var $=this.fd2file(t);l==null&&(l=$.getPos()),$.read(O,S,x,l,D)}catch(rt){D(rt)}},M.prototype.readSync=function(t,r,e,n,a){var u=!1,l,S,x,O,D="utf8";typeof r=="number"?(x=r,O=e,D=n,S=0,l=f.alloc(x),u=!0):(l=r,S=e,x=n,O=a);var V=this.fd2file(t);O==null&&(O=V.getPos());var $=V.readSync(l,S,x,O);return u?[l.toString(D),$]:$},M.prototype.fchown=function(t,r,e,n){n===void 0&&(n=dt);var a=G(n,1);try{this.fd2file(t).chown(r,e,a)}catch(u){a(u)}},M.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},M.prototype.fchmod=function(t,r,e){var n=G(e,1);try{var a=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(a,n)}catch(u){n(u)}},M.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},M.prototype.futimes=function(t,r,e,n){n===void 0&&(n=dt);var a=G(n,1);try{var u=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),u.utimes(r,e,a)}catch(l){a(l)}},M.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(_t(r),_t(e))},M.prototype.rmdir=function(t,r){r===void 0&&(r=dt);var e=G(r,1);try{t=et(t),W(this.root).rmdir(t,e)}catch(n){e(n)}},M.prototype.rmdirSync=function(t){return t=et(t),W(this.root).rmdirSync(t)},M.prototype.mkdir=function(t,r,e){e===void 0&&(e=dt),typeof r=="function"&&(e=r,r=511);var n=G(e,1);try{t=et(t),W(this.root).mkdir(t,r,n)}catch(a){n(a)}},M.prototype.mkdirSync=function(t,r){W(this.root).mkdirSync(et(t),U(r,511))},M.prototype.readdir=function(t,r){r===void 0&&(r=dt);var e=G(r,2);try{t=et(t),W(this.root).readdir(t,e)}catch(n){e(n)}},M.prototype.readdirSync=function(t){return t=et(t),W(this.root).readdirSync(t)},M.prototype.link=function(t,r,e){e===void 0&&(e=dt);var n=G(e,1);try{t=et(t),r=et(r),W(this.root).link(t,r,n)}catch(a){n(a)}},M.prototype.linkSync=function(t,r){return t=et(t),r=et(r),W(this.root).linkSync(t,r)},M.prototype.symlink=function(t,r,e,n){n===void 0&&(n=dt);var a=typeof e=="string"?e:"file";n=typeof e=="function"?e:n;var u=G(n,1);try{if(a!=="file"&&a!=="dir")return u(new p(c.EINVAL,"Invalid type: "+a));t=et(t),r=et(r),W(this.root).symlink(t,r,a,u)}catch(l){u(l)}},M.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new p(c.EINVAL,"Invalid type: "+e);return t=et(t),r=et(r),W(this.root).symlinkSync(t,r,e)},M.prototype.readlink=function(t,r){r===void 0&&(r=dt);var e=G(r,2);try{t=et(t),W(this.root).readlink(t,e)}catch(n){e(n)}},M.prototype.readlinkSync=function(t){return t=et(t),W(this.root).readlinkSync(t)},M.prototype.chown=function(t,r,e,n){n===void 0&&(n=dt);var a=G(n,1);try{t=et(t),W(this.root).chown(t,!1,r,e,a)}catch(u){a(u)}},M.prototype.chownSync=function(t,r,e){t=et(t),W(this.root).chownSync(t,!1,r,e)},M.prototype.lchown=function(t,r,e,n){n===void 0&&(n=dt);var a=G(n,1);try{t=et(t),W(this.root).chown(t,!0,r,e,a)}catch(u){a(u)}},M.prototype.lchownSync=function(t,r,e){t=et(t),W(this.root).chownSync(t,!0,r,e)},M.prototype.chmod=function(t,r,e){e===void 0&&(e=dt);var n=G(e,1);try{var a=U(r,-1);if(a<0)throw new p(c.EINVAL,"Invalid mode.");W(this.root).chmod(et(t),!1,a,n)}catch(u){n(u)}},M.prototype.chmodSync=function(t,r){var e=U(r,-1);if(e<0)throw new p(c.EINVAL,"Invalid mode.");t=et(t),W(this.root).chmodSync(t,!1,e)},M.prototype.lchmod=function(t,r,e){e===void 0&&(e=dt);var n=G(e,1);try{var a=U(r,-1);if(a<0)throw new p(c.EINVAL,"Invalid mode.");W(this.root).chmod(et(t),!0,a,n)}catch(u){n(u)}},M.prototype.lchmodSync=function(t,r){var e=U(r,-1);if(e<1)throw new p(c.EINVAL,"Invalid mode.");W(this.root).chmodSync(et(t),!0,e)},M.prototype.utimes=function(t,r,e,n){n===void 0&&(n=dt);var a=G(n,1);try{W(this.root).utimes(et(t),_t(r),_t(e),a)}catch(u){a(u)}},M.prototype.utimesSync=function(t,r,e){W(this.root).utimesSync(et(t),_t(r),_t(e))},M.prototype.realpath=function(t,r,e){e===void 0&&(e=dt);var n=typeof r=="object"?r:{};e=typeof r=="function"?r:dt;var a=G(e,2);try{t=et(t),W(this.root).realpath(t,n,a)}catch(u){a(u)}},M.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=et(t),W(this.root).realpathSync(t,r)},M.prototype.watchFile=function(t,r,e){throw e===void 0&&(e=dt),new p(c.ENOTSUP)},M.prototype.unwatchFile=function(t,r){throw r===void 0&&(r=dt),new p(c.ENOTSUP)},M.prototype.watch=function(t,r,e){throw e===void 0&&(e=dt),new p(c.ENOTSUP)},M.prototype.access=function(t,r,e){throw e===void 0&&(e=dt),new p(c.ENOTSUP)},M.prototype.accessSync=function(t,r){throw new p(c.ENOTSUP)},M.prototype.createReadStream=function(t,r){throw new p(c.ENOTSUP)},M.prototype.createWriteStream=function(t,r){throw new p(c.ENOTSUP)},M.prototype.wrapCallbacks=function(t){G=t},M.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},M.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new p(c.EBADF,"Invalid file descriptor.")},M.prototype.closeFd=function(t){delete this.fdMap[t]},M.Stats=C;var tt=new M,ct={},Rt=M.prototype;Object.keys(Rt).forEach(function(i){typeof tt[i]=="function"?ct[i]=function(){return tt[i].apply(tt,arguments)}:ct[i]=tt[i]}),ct.changeFSModule=function(i){tt=i},ct.getFSModule=function(){return tt},ct.FS=M;function yt(i,t,r,e,n){return i<t||r<t?i>r?r+1:i+1:e===n?t:t+1}function Dt(i,t){if(i===t)return 0;if(i.length>t.length){var r=i;i=t,t=r}for(var e=i.length,n=t.length;e>0&&i.charCodeAt(e-1)===t.charCodeAt(n-1);)e--,n--;for(var a=0;a<e&&i.charCodeAt(a)===t.charCodeAt(a);)a++;if(e-=a,n-=a,e===0||n===1)return n;for(var u=new Array(e<<1),l=0;l<e;)u[e+l]=i.charCodeAt(a+l),u[l]=++l;var S,x,O,D,V;for(S=0;S+3<n;)for(var $=t.charCodeAt(a+(x=S)),rt=t.charCodeAt(a+(O=S+1)),ft=t.charCodeAt(a+(D=S+2)),gt=t.charCodeAt(a+(V=S+3)),It=S+=4,Zt=0;Zt<e;){var ae=u[e+Zt],Oe=u[Zt];x=yt(Oe,x,O,$,ae),O=yt(x,O,D,rt,ae),D=yt(O,D,V,ft,ae),It=yt(D,V,It,gt,ae),u[Zt++]=It,V=D,D=O,O=x,x=Oe}for(var Ae=0;S<n;){var yr=t.charCodeAt(a+(x=S));Ae=++S;for(var Pe=0;Pe<e;Pe++){var ze=u[Pe];u[Pe]=Ae=ze<x||Ae<x?ze>Ae?Ae+1:ze+1:yr===u[e+Pe]?x:x+1,x=ze}}return Ae}function Nt(i,t,r){i&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var Et=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Yt=typeof window>"u";function P(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function z(i,t,r){r.existsSync(i)||(z(v.dirname(i),t,r),r.mkdirSync(i,t))}function K(i){var t=ut(i),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function ut(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function bt(i){return i instanceof f?i:i instanceof Uint8Array?mt(i):f.from(i)}function mt(i){return i instanceof f?i:i.byteOffset===0&&i.byteLength===i.buffer.byteLength?Ft(i.buffer):f.from(i.buffer,i.byteOffset,i.byteLength)}function Ft(i){return f.from(i)}function Tt(i,t,r){if(t===void 0&&(t=0),r===void 0&&(r=i.length),t<0||r<0||r>i.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+i.length+": ["+t+", "+r+"]");if(i.length===0)return Bt();var e=ut(i),n=i[0],a=(n+1)%255;return i[0]=a,e[0]===a?(e[0]=n,mt(e.slice(t,r))):(i[0]=n,mt(e.subarray(t,r)))}var Wt=null;function Bt(){return Wt||(Wt=f.alloc(0))}function ee(i,t){f.isBuffer(i)?t():t(new p(c.EINVAL,"option must be a Buffer."))}function N(i,t,r){var e=i.Options,n=i.Name,a=0,u=!1,l=!1;function S(V){u||(V&&(u=!0,r(V)),a--,a===0&&l&&r())}var x=function(V){if(e.hasOwnProperty(V)){var $=e[V],rt=t[V];if(rt==null){if(!$.optional){var ft=Object.keys(t).filter(function(It){return!(It in e)}).map(function(It){return{str:It,distance:Dt(V,It)}}).filter(function(It){return It.distance<5}).sort(function(It,Zt){return It.distance-Zt.distance});return u?{}:(u=!0,{v:r(new p(c.EINVAL,"["+n+"] Required option '"+V+"' not provided."+(ft.length>0?" You provided unrecognized option '"+ft[0].str+"'; perhaps you meant to type '"+V+"'.":"")+`
Option description: `+$.description))})}}else{var gt=!1;if(Array.isArray($.type)?gt=$.type.indexOf(typeof rt)!==-1:gt=typeof rt===$.type,gt)$.validator&&(a++,$.validator(rt,S));else return u?{}:(u=!0,{v:r(new p(c.EINVAL,"["+n+"] Value provided for option "+V+" is not the proper type. Expected "+(Array.isArray($.type)?"one of {"+$.type.join(", ")+"}":$.type)+", but received "+typeof rt+`
Option description: `+$.description))})}}};for(var O in e){var D=x(O);if(D)return D.v}l=!0,a===0&&!u&&r()}var R=Object.freeze({deprecationMessage:Nt,isIE:Et,isWebWorker:Yt,fail:P,mkdirpSync:z,buffer2ArrayBuffer:K,buffer2Uint8array:ut,arrayish2Buffer:bt,uint8Array2Buffer:mt,arrayBuffer2Buffer:Ft,copyingSlice:Tt,emptyBuffer:Bt,bufferValidator:ee,checkOptions:N}),Y=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};Y.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(n){throw n.code?new e.ErrnoError(this.ERRNO_CODES[n.code]):n}},Y.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},Y.prototype.read=function(t,r,e,n,a){try{return this.nodefs.readSync(t.nfd,mt(r),e,n,a)}catch(u){throw new this.FS.ErrnoError(this.ERRNO_CODES[u.code])}},Y.prototype.write=function(t,r,e,n,a){try{return this.nodefs.writeSync(t.nfd,mt(r),e,n,a)}catch(u){throw new this.FS.ErrnoError(this.ERRNO_CODES[u.code])}},Y.prototype.llseek=function(t,r,e){var n=r;if(e===1)n+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var a=this.nodefs.fstatSync(t.nfd);n+=a.size}catch(u){throw new this.FS.ErrnoError(this.ERRNO_CODES[u.code])}if(n<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=n,n};var Q=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};Q.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(n){throw n.code?new this.FS.ErrnoError(this.ERRNO_CODES[n.code]):n}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},Q.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var n=new Date(r.timestamp);this.nodefs.utimesSync(e,n,n)}}catch(a){if(!a.code)throw a;if(a.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},Q.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),n=this.fs.getMode(e);return this.fs.createNode(t,r,n)},Q.prototype.mknod=function(t,r,e,n){var a=this.fs.createNode(t,r,e,n),u=this.fs.realPath(a);try{this.FS.isDir(a.mode)?this.nodefs.mkdirSync(u,a.mode):this.nodefs.writeFileSync(u,"",{mode:a.mode})}catch(l){throw l.code?new this.FS.ErrnoError(this.ERRNO_CODES[l.code]):l}return a},Q.prototype.rename=function(t,r,e){var n=this.fs.realPath(t),a=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(n,a),t.name=e,t.parent=r}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}},Q.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(n){throw n.code?new this.FS.ErrnoError(this.ERRNO_CODES[n.code]):n}},Q.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(n){throw n.code?new this.FS.ErrnoError(this.ERRNO_CODES[n.code]):n}},Q.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(n){throw n.code?new this.FS.ErrnoError(this.ERRNO_CODES[n.code]):n}},Q.prototype.symlink=function(t,r,e){var n=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,n)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},Q.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var pt=function(t,r,e,n){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),n===void 0&&(n=ct),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=n,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new Q(this),this.stream_ops=new Y(this)};pt.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},pt.prototype.createNode=function(t,r,e,n){var a=this.FS;if(!a.isDir(e)&&!a.isFile(e)&&!a.isLink(e))throw new a.ErrnoError(this.ERRNO_CODES.EINVAL);var u=a.createNode(t,r,e);return u.node_ops=this.node_ops,u.stream_ops=this.stream_ops,u},pt.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},pt.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},pt.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},pt.prototype.getNodeFS=function(){return this.nodefs},pt.prototype.getFS=function(){return this.FS},pt.prototype.getPATH=function(){return this.PATH},pt.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var it=function(){};it.prototype.supportsLinks=function(){return!1},it.prototype.diskSpace=function(t,r){r(0,0)},it.prototype.openFile=function(t,r,e){throw new p(c.ENOTSUP)},it.prototype.createFile=function(t,r,e,n){throw new p(c.ENOTSUP)},it.prototype.open=function(t,r,e,n){var a=this,u=function(l,S){if(l)switch(r.pathNotExistsAction()){case A.CREATE_FILE:return a.stat(v.dirname(t),!1,function(x,O){x?n(x):O&&!O.isDirectory()?n(p.ENOTDIR(v.dirname(t))):a.createFile(t,r,e,n)});case A.THROW_EXCEPTION:return n(p.ENOENT(t));default:return n(new p(c.EINVAL,"Invalid FileFlag object."))}else{if(S&&S.isDirectory())return n(p.EISDIR(t));switch(r.pathExistsAction()){case A.THROW_EXCEPTION:return n(p.EEXIST(t));case A.TRUNCATE_FILE:return a.openFile(t,r,function(x,O){x?n(x):O?O.truncate(0,function(){O.sync(function(){n(null,O)})}):P()});case A.NOP:return a.openFile(t,r,n);default:return n(new p(c.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,u)},it.prototype.rename=function(t,r,e){e(new p(c.ENOTSUP))},it.prototype.renameSync=function(t,r){throw new p(c.ENOTSUP)},it.prototype.stat=function(t,r,e){e(new p(c.ENOTSUP))},it.prototype.statSync=function(t,r){throw new p(c.ENOTSUP)},it.prototype.openFileSync=function(t,r,e){throw new p(c.ENOTSUP)},it.prototype.createFileSync=function(t,r,e){throw new p(c.ENOTSUP)},it.prototype.openSync=function(t,r,e){var n;try{n=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case A.CREATE_FILE:var a=this.statSync(v.dirname(t),!1);if(!a.isDirectory())throw p.ENOTDIR(v.dirname(t));return this.createFileSync(t,r,e);case A.THROW_EXCEPTION:throw p.ENOENT(t);default:throw new p(c.EINVAL,"Invalid FileFlag object.")}}if(n.isDirectory())throw p.EISDIR(t);switch(r.pathExistsAction()){case A.THROW_EXCEPTION:throw p.EEXIST(t);case A.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,n.mode);case A.NOP:return this.openFileSync(t,r,e);default:throw new p(c.EINVAL,"Invalid FileFlag object.")}},it.prototype.unlink=function(t,r){r(new p(c.ENOTSUP))},it.prototype.unlinkSync=function(t){throw new p(c.ENOTSUP)},it.prototype.rmdir=function(t,r){r(new p(c.ENOTSUP))},it.prototype.rmdirSync=function(t){throw new p(c.ENOTSUP)},it.prototype.mkdir=function(t,r,e){e(new p(c.ENOTSUP))},it.prototype.mkdirSync=function(t,r){throw new p(c.ENOTSUP)},it.prototype.readdir=function(t,r){r(new p(c.ENOTSUP))},it.prototype.readdirSync=function(t){throw new p(c.ENOTSUP)},it.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},it.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},it.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var n=t.split(v.sep),a=0;a<n.length;a++){var u=n.slice(0,a+1);n[a]=v.join.apply(null,u)}else this.exists(t,function(l){l?e(null,t):e(p.ENOENT(t))})},it.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(v.sep),n=0;n<e.length;n++){var a=e.slice(0,n+1);e[n]=v.join.apply(v,a)}return e.join(v.sep)}else{if(this.existsSync(t))return t;throw p.ENOENT(t)}},it.prototype.truncate=function(t,r,e){this.open(t,b.getFileFlag("r+"),420,function(n,a){if(n)return e(n);a.truncate(r,function(u){a.close(function(l){e(u||l)})})})},it.prototype.truncateSync=function(t,r){var e=this.openSync(t,b.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(n){throw n}finally{e.closeSync()}},it.prototype.readFile=function(t,r,e,n){var a=n;this.open(t,e,420,function(u,l){if(u)return n(u);n=function(S,x){l.close(function(O){return S||(S=O),a(S,x)})},l.stat(function(S,x){if(S)return n(S);var O=f.alloc(x.size);l.read(O,0,x.size,0,function(D){if(D)return n(D);if(r===null)return n(D,O);try{n(null,O.toString(r))}catch(V){n(V)}})})})},it.prototype.readFileSync=function(t,r,e){var n=this.openSync(t,e,420);try{var a=n.statSync(),u=f.alloc(a.size);return n.readSync(u,0,a.size,0),n.closeSync(),r===null?u:u.toString(r)}finally{n.closeSync()}},it.prototype.writeFile=function(t,r,e,n,a,u){var l=u;this.open(t,n,420,function(S,x){if(S)return u(S);u=function(O){x.close(function(D){l(O||D)})};try{typeof r=="string"&&(r=f.from(r,e))}catch(O){return u(O)}x.write(r,0,r.length,0,u)})},it.prototype.writeFileSync=function(t,r,e,n,a){var u=this.openSync(t,n,a);try{typeof r=="string"&&(r=f.from(r,e)),u.writeSync(r,0,r.length,0)}finally{u.closeSync()}},it.prototype.appendFile=function(t,r,e,n,a,u){var l=u;this.open(t,n,a,function(S,x){if(S)return u(S);u=function(O){x.close(function(D){l(O||D)})},typeof r=="string"&&(r=f.from(r,e)),x.write(r,0,r.length,null,u)})},it.prototype.appendFileSync=function(t,r,e,n,a){var u=this.openSync(t,n,a);try{typeof r=="string"&&(r=f.from(r,e)),u.writeSync(r,0,r.length,null)}finally{u.closeSync()}},it.prototype.chmod=function(t,r,e,n){n(new p(c.ENOTSUP))},it.prototype.chmodSync=function(t,r,e){throw new p(c.ENOTSUP)},it.prototype.chown=function(t,r,e,n,a){a(new p(c.ENOTSUP))},it.prototype.chownSync=function(t,r,e,n){throw new p(c.ENOTSUP)},it.prototype.utimes=function(t,r,e,n){n(new p(c.ENOTSUP))},it.prototype.utimesSync=function(t,r,e){throw new p(c.ENOTSUP)},it.prototype.link=function(t,r,e){e(new p(c.ENOTSUP))},it.prototype.linkSync=function(t,r){throw new p(c.ENOTSUP)},it.prototype.symlink=function(t,r,e,n){n(new p(c.ENOTSUP))},it.prototype.symlinkSync=function(t,r,e){throw new p(c.ENOTSUP)},it.prototype.readlink=function(t,r){r(new p(c.ENOTSUP))},it.prototype.readlinkSync=function(t){throw new p(c.ENOTSUP)};var xt=function(i){function t(){i.apply(this,arguments)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,n,a){try{this.renameSync(e,n),a()}catch(u){a(u)}},t.prototype.stat=function(e,n,a){try{a(null,this.statSync(e,n))}catch(u){a(u)}},t.prototype.open=function(e,n,a,u){try{u(null,this.openSync(e,n,a))}catch(l){u(l)}},t.prototype.unlink=function(e,n){try{this.unlinkSync(e),n()}catch(a){n(a)}},t.prototype.rmdir=function(e,n){try{this.rmdirSync(e),n()}catch(a){n(a)}},t.prototype.mkdir=function(e,n,a){try{this.mkdirSync(e,n),a()}catch(u){a(u)}},t.prototype.readdir=function(e,n){try{n(null,this.readdirSync(e))}catch(a){n(a)}},t.prototype.chmod=function(e,n,a,u){try{this.chmodSync(e,n,a),u()}catch(l){u(l)}},t.prototype.chown=function(e,n,a,u,l){try{this.chownSync(e,n,a,u),l()}catch(S){l(S)}},t.prototype.utimes=function(e,n,a,u){try{this.utimesSync(e,n,a),u()}catch(l){u(l)}},t.prototype.link=function(e,n,a){try{this.linkSync(e,n),a()}catch(u){a(u)}},t.prototype.symlink=function(e,n,a,u){try{this.symlinkSync(e,n,a),u()}catch(l){u(l)}},t.prototype.readlink=function(e,n){try{n(null,this.readlinkSync(e))}catch(a){n(a)}},t}(it),vt=function(){};vt.prototype.sync=function(t){t(new p(c.ENOTSUP))},vt.prototype.syncSync=function(){throw new p(c.ENOTSUP)},vt.prototype.datasync=function(t){this.sync(t)},vt.prototype.datasyncSync=function(){return this.syncSync()},vt.prototype.chown=function(t,r,e){e(new p(c.ENOTSUP))},vt.prototype.chownSync=function(t,r){throw new p(c.ENOTSUP)},vt.prototype.chmod=function(t,r){r(new p(c.ENOTSUP))},vt.prototype.chmodSync=function(t){throw new p(c.ENOTSUP)},vt.prototype.utimes=function(t,r,e){e(new p(c.ENOTSUP))},vt.prototype.utimesSync=function(t,r){throw new p(c.ENOTSUP)};var Gt=function(i){function t(r,e,n,a,u){if(i.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=n,this._stat=a,u?this._buffer=u:this._buffer=Bt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(n){e(n)}},t.prototype.syncSync=function(){throw new p(c.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(n){e(n)}},t.prototype.closeSync=function(){throw new p(c.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(n){e(n)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,n){try{this.truncateSync(e),this._flag.isSynchronous()&&!ct.getRootFS().supportsSynch()&&this.sync(n),n()}catch(a){return n(a)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new p(c.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var n=f.alloc(e-this._buffer.length,0);this.writeSync(n,0,n.length,this._buffer.length),this._flag.isSynchronous()&&ct.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var a=f.alloc(e);this._buffer.copy(a,0,0,e),this._buffer=a,this._flag.isSynchronous()&&ct.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,n,a,u,l){try{l(null,this.writeSync(e,n,a,u),e)}catch(S){l(S)}},t.prototype.writeSync=function(e,n,a,u){if(this._dirty=!0,u==null&&(u=this.getPos()),!this._flag.isWriteable())throw new p(c.EPERM,"File not opened with a writeable mode.");var l=u+a;if(l>this._stat.size&&(this._stat.size=l,l>this._buffer.length)){var S=f.alloc(l);this._buffer.copy(S),this._buffer=S}var x=e.copy(this._buffer,u,n,n+a);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),x):(this.setPos(u+x),x)},t.prototype.read=function(e,n,a,u,l){try{l(null,this.readSync(e,n,a,u),e)}catch(S){l(S)}},t.prototype.readSync=function(e,n,a,u){if(!this._flag.isReadable())throw new p(c.EPERM,"File not opened with a readable mode.");u==null&&(u=this.getPos());var l=u+a;l>this._stat.size&&(a=this._stat.size-u);var S=this._buffer.copy(e,n,u,u+a);return this._stat.atime=new Date,this._pos=u+a,S},t.prototype.chmod=function(e,n){try{this.chmodSync(e),n()}catch(a){n(a)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new p(c.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(vt),fe=function(i){function t(r,e,n,a,u){i.call(this,r,e,n,a,u)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(Gt),Ie=function(i){function t(r,e,n,a,u){i.call(this,r,e,n,a,u)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(Gt),I=function(i){function t(r,e,n){if(n===void 0&&(n=!0),i.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Nt(n,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){try{var a=new t(e.sync,e.async,!1);a.initialize(function(u){u?n(u):n(null,a)},!1)}catch(u){n(u)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,b.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,n){var a=this;n===void 0&&(n=!0),n&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var u=this._initializeCallbacks,l=function(D){a._isInitialized=!D,a._initializeCallbacks=[],u.forEach(function(V){return V(D)})};if(this._isInitialized)e();else if(u.push(e)===1){var S=function(D,V,$){D!=="/"&&a._sync.mkdirSync(D,V),a._async.readdir(D,function(rt,ft){var gt=0;function It(Zt){Zt?$(Zt):gt<ft.length?(O(v.join(D,ft[gt]),It),gt++):$()}rt?$(rt):It()})},x=function(D,V,$){a._async.readFile(D,null,b.getFileFlag("r"),function(rt,ft){if(rt)$(rt);else try{a._sync.writeFileSync(D,ft,null,b.getFileFlag("w"),V)}catch(gt){rt=gt}finally{$(rt)}})},O=function(D,V){a._async.stat(D,!1,function($,rt){$?V($):rt.isDirectory()?S(D,rt.mode,V):x(D,rt.mode,V)})};S("/",0,l)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,n){this.checkInitialized(),this._sync.renameSync(e,n),this.enqueueOp({apiMethod:"rename",arguments:[e,n]})},t.prototype.statSync=function(e,n){return this.checkInitialized(),this._sync.statSync(e,n)},t.prototype.openSync=function(e,n,a){this.checkInitialized();var u=this._sync.openSync(e,n,a);return u.closeSync(),new Ie(this,e,n,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,b.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,n){this.checkInitialized(),this._sync.mkdirSync(e,n),this.enqueueOp({apiMethod:"mkdir",arguments:[e,n]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,n,a){this.checkInitialized(),this._sync.chmodSync(e,n,a),this.enqueueOp({apiMethod:"chmod",arguments:[e,n,a]})},t.prototype.chownSync=function(e,n,a,u){this.checkInitialized(),this._sync.chownSync(e,n,a,u),this.enqueueOp({apiMethod:"chown",arguments:[e,n,a,u]})},t.prototype.utimesSync=function(e,n,a){this.checkInitialized(),this._sync.utimesSync(e,n,a),this.enqueueOp({apiMethod:"utimes",arguments:[e,n,a]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new p(c.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var n=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var a=function(u){if(u&&console.error("WARNING: File system has desynchronized. Received following error: "+u+`
$`),n._queue.length>0){var l=n._queue.shift(),S=l.arguments;S.push(a),n._async[l.apiMethod].apply(n._async,S)}else n._queueRunning=!1};a()}},t}(xt);I.Name="AsyncMirror",I.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function g(i,t,r){switch(r.length){case 0:return i.call(t);case 1:return i.call(t,r[0]);case 2:return i.call(t,r[0],r[1]);case 3:return i.call(t,r[0],r[1],r[2])}return i.apply(t,r)}var m=Math.max;function k(i,t,r){return t=m(t===void 0?i.length-1:t,0),function(){for(var e=arguments,n=-1,a=m(e.length-t,0),u=Array(a);++n<a;)u[n]=e[t+n];n=-1;for(var l=Array(t+1);++n<t;)l[n]=e[n];return l[t]=r(u),g(i,this,l)}}function B(i){return i}function Z(i,t){return k(i,t,B)}var J=function(i){return Z(function(t){var r=t.pop();i.call(this,t,r)})};function kt(i){return Z(function(t,r){var e=J(function(n,a){var u=this;return i(t,function(l,S){l.apply(u,n.concat(S))},a)});return r.length?e.apply(this,r):e})}var Lt=typeof y=="object"&&y&&y.Object===Object&&y,Ut=typeof self=="object"&&self&&self.Object===Object&&self,Jt=Lt||Ut||Function("return this")(),Ct=Jt.Symbol,be=Object.prototype,or=be.hasOwnProperty,Ze=be.toString,qe=Ct?Ct.toStringTag:void 0;function ai(i){var t=or.call(i,qe),r=i[qe];try{i[qe]=void 0;var e=!0}catch{}var n=Ze.call(i);return e&&(t?i[qe]=r:delete i[qe]),n}var ui=Object.prototype,fi=ui.toString;function j(i){return fi.call(i)}var ot="[object Null]",F="[object Undefined]",at=Ct?Ct.toStringTag:void 0;function Mt(i){return i==null?i===void 0?F:ot:at&&at in Object(i)?ai(i):j(i)}function nt(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}var ce="[object AsyncFunction]",st="[object Function]",Kt="[object GeneratorFunction]",X="[object Proxy]";function q(i){if(!nt(i))return!1;var t=Mt(i);return t==st||t==Kt||t==ce||t==X}var sr=9007199254740991;function Pt(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=sr}function ht(i){return i!=null&&Pt(i.length)&&!q(i)}var Xe={};function Ce(){}function Ht(i){return function(){if(i!==null){var t=i;i=null,t.apply(this,arguments)}}}var Ot=typeof Symbol=="function"&&Symbol.iterator,ie=function(i){return Ot&&i[Ot]&&i[Ot]()};function ue(i,t){for(var r=-1,e=Array(i);++r<i;)e[r]=t(r);return e}function ne(i){return i!=null&&typeof i=="object"}var ar="[object Arguments]";function Ye(i){return ne(i)&&Mt(i)==ar}var qt=Object.prototype,he=qt.hasOwnProperty,re=qt.propertyIsEnumerable,ke=Ye(function(){return arguments}())?Ye:function(i){return ne(i)&&he.call(i,"callee")&&!re.call(i,"callee")},Ee=Array.isArray;function zr(){return!1}var Wi=typeof o=="object"&&o&&!o.nodeType&&o,Hi=Wi&&typeof d=="object"&&d&&!d.nodeType&&d,qo=Hi&&Hi.exports===Wi,Vi=qo?Jt.Buffer:void 0,Xo=Vi?Vi.isBuffer:void 0,Yo=Xo||zr,Go=9007199254740991,Jo=/^(?:0|[1-9]\d*)$/;function Ko(i,t){return t=t??Go,!!t&&(typeof i=="number"||Jo.test(i))&&i>-1&&i%1==0&&i<t}var Qo="[object Arguments]",$o="[object Array]",ts="[object Boolean]",es="[object Date]",rs="[object Error]",is="[object Function]",ns="[object Map]",os="[object Number]",ss="[object Object]",as="[object RegExp]",us="[object Set]",cs="[object String]",hs="[object WeakMap]",ls="[object ArrayBuffer]",ps="[object DataView]",ds="[object Float32Array]",ys="[object Float64Array]",gs="[object Int8Array]",vs="[object Int16Array]",ms="[object Int32Array]",ws="[object Uint8Array]",Ss="[object Uint8ClampedArray]",Es="[object Uint16Array]",_s="[object Uint32Array]",zt={};zt[ds]=zt[ys]=zt[gs]=zt[vs]=zt[ms]=zt[ws]=zt[Ss]=zt[Es]=zt[_s]=!0,zt[Qo]=zt[$o]=zt[ls]=zt[ts]=zt[ps]=zt[es]=zt[rs]=zt[is]=zt[ns]=zt[os]=zt[ss]=zt[as]=zt[us]=zt[cs]=zt[hs]=!1;function xs(i){return ne(i)&&Pt(i.length)&&!!zt[Mt(i)]}function Fs(i){return function(t){return i(t)}}var Zi=typeof o=="object"&&o&&!o.nodeType&&o,qi=Zi&&typeof d=="object"&&d&&!d.nodeType&&d,Is=qi&&qi.exports===Zi,ci=Is&&Lt.process,Xi=function(){try{return ci&&ci.binding&&ci.binding("util")}catch{}}(),Yi=Xi&&Xi.isTypedArray,bs=Yi?Fs(Yi):xs,ks=Object.prototype,Ns=ks.hasOwnProperty;function Rs(i,t){var r=Ee(i),e=!r&&ke(i),n=!r&&!e&&Yo(i),a=!r&&!e&&!n&&bs(i),u=r||e||n||a,l=u?ue(i.length,String):[],S=l.length;for(var x in i)(t||Ns.call(i,x))&&!(u&&(x=="length"||n&&(x=="offset"||x=="parent")||a&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||Ko(x,S)))&&l.push(x);return l}var Ts=Object.prototype;function Os(i){var t=i&&i.constructor,r=typeof t=="function"&&t.prototype||Ts;return i===r}function As(i,t){return function(r){return i(t(r))}}var Ls=As(Object.keys,Object),Ds=Object.prototype,Cs=Ds.hasOwnProperty;function Bs(i){if(!Os(i))return Ls(i);var t=[];for(var r in Object(i))Cs.call(i,r)&&r!="constructor"&&t.push(r);return t}function Gi(i){return ht(i)?Rs(i):Bs(i)}function Us(i){var t=-1,r=i.length;return function(){return++t<r?{value:i[t],key:t}:null}}function Ms(i){var t=-1;return function(){var e=i.next();return e.done?null:(t++,{value:e.value,key:t})}}function Ps(i){var t=Gi(i),r=-1,e=t.length;return function(){var a=t[++r];return r<e?{value:i[a],key:a}:null}}function zs(i){if(ht(i))return Us(i);var t=ie(i);return t?Ms(t):Ps(i)}function Ji(i){return function(){if(i===null)throw new Error("Callback was already called.");var t=i;i=null,t.apply(this,arguments)}}function Ki(i){return function(t,r,e){if(e=Ht(e||Ce),i<=0||!t)return e(null);var n=zs(t),a=!1,u=0;function l(x,O){if(u-=1,x)a=!0,e(x);else{if(O===Xe||a&&u<=0)return a=!0,e(null);S()}}function S(){for(;u<i&&!a;){var x=n();if(x===null){a=!0,u<=0&&e(null);return}u+=1,r(x.value,x.key,Ji(l))}}S()}}function Qi(i,t,r,e){Ki(t)(i,r,e)}function hi(i,t){return function(r,e,n){return i(r,t,e,n)}}function js(i,t,r){r=Ht(r||Ce);var e=0,n=0,a=i.length;a===0&&r(null);function u(l,S){l?r(l):(++n===a||S===Xe)&&r(null)}for(;e<a;e++)t(i[e],e,Ji(u))}var Ws=hi(Qi,1/0),$i=function(i,t,r){var e=ht(i)?js:Ws;e(i,t,r)};function Hs(i){return function(t,r,e){return i($i,t,r,e)}}function tn(i,t,r,e){e=e||Ce,t=t||[];var n=[],a=0;i(t,function(u,l,S){var x=a++;r(u,function(O,D){n[x]=D,S(O)})},function(u){e(u,n)})}var Vs=Hs(tn);kt(Vs);function Zs(i){return function(t,r,e,n){return i(Ki(r),t,e,n)}}var qs=Zs(tn),Xs=hi(qs,1);kt(Xs),Z(function(i,t){return Z(function(r){return i.apply(null,t.concat(r))})});function Ys(i,t){for(var r=-1,e=i==null?0:i.length;++r<e&&t(i[r],r,i)!==!1;);return i}function Gs(i){return function(t,r,e){for(var n=-1,a=Object(t),u=e(t),l=u.length;l--;){var S=u[i?l:++n];if(r(a[S],S,a)===!1)break}return t}}var Js=Gs();function tf(i,t){return i&&Js(i,t,Gi)}function Ks(i,t,r,e){for(var n=i.length,a=r+(e?1:-1);e?a--:++a<n;)if(t(i[a],a,i))return a;return-1}function Qs(i){return i!==i}function $s(i,t,r){for(var e=r-1,n=i.length;++e<n;)if(i[e]===t)return e;return-1}function ef(i,t,r){return t===t?$s(i,t,r):Ks(i,Qs,r)}var en="\\ud800-\\udfff",ta="\\u0300-\\u036f",ea="\\ufe20-\\ufe2f",ra="\\u20d0-\\u20ff",ia=ta+ea+ra,na="\\ufe0e\\ufe0f",oa="["+en+"]",li="["+ia+"]",sa="\\ud83c[\\udffb-\\udfff]",aa="(?:"+li+"|"+sa+")",rn="[^"+en+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",on="[\\ud800-\\udbff][\\udc00-\\udfff]",ua="\\u200d",sn=aa+"?",an="["+na+"]?",fa="(?:"+ua+"(?:"+[rn,nn,on].join("|")+")"+an+sn+")*",rf=an+sn+fa,nf="(?:"+[rn+li+"?",li,nn,on,oa].join("|")+")",un=typeof setImmediate=="function"&&setImmediate,fn=typeof w=="object"&&typeof w.nextTick=="function";function cn(i){setTimeout(i,0)}function hn(i){return Z(function(t,r){i(function(){t.apply(null,r)})})}var jr;un?jr=setImmediate:fn?jr=w.nextTick:jr=cn,hn(jr);var ca=hi(Qi,1);function ha(i,t,r,e){e=Ht(e||Ce),ca(i,function(n,a,u){r(t,n,function(l,S){t=S,u(l)})},function(n){e(n,t)})}var la=Z(function(t){return Z(function(r){var e=this,n=r[r.length-1];typeof n=="function"?r.pop():n=Ce,ha(t,r,function(a,u,l){u.apply(e,a.concat(Z(function(S,x){l(S,x)})))},function(a,u){n.apply(e,[a].concat(u))})})});Z(function(i){return la.apply(null,i.reverse())}),Z(function(i){var t=[null].concat(i);return J(function(r,e){return e.apply(this,t)})});function ln(i){return Z(function(t,r){t.apply(null,r.concat(Z(function(e,n){typeof console=="object"&&(e?console.error&&console.error(e):console[i]&&Ys(n,function(a){console[i](a)}))})))})}ln("dir");function pa(i){return function(t,r,e){return i(t,e)}}function pn(i,t,r){$i(i,pa(t),r)}ln("log");var Wr;fn?Wr=w.nextTick:un?Wr=setImmediate:Wr=cn,hn(Wr);var of=Math.ceil,sf=Math.max,le;function da(){le||(le={},le[Dropbox.ApiError.NETWORK_ERROR]=c.EIO,le[Dropbox.ApiError.INVALID_PARAM]=c.EINVAL,le[Dropbox.ApiError.INVALID_TOKEN]=c.EPERM,le[Dropbox.ApiError.OAUTH_ERROR]=c.EPERM,le[Dropbox.ApiError.NOT_FOUND]=c.ENOENT,le[Dropbox.ApiError.INVALID_METHOD]=c.EINVAL,le[Dropbox.ApiError.NOT_ACCEPTABLE]=c.EINVAL,le[Dropbox.ApiError.CONFLICT]=c.EINVAL,le[Dropbox.ApiError.RATE_LIMITED]=c.EBUSY,le[Dropbox.ApiError.SERVER_ERROR]=c.EBUSY,le[Dropbox.ApiError.OVER_QUOTA]=c.ENOSPC)}function ya(i){return i&&i.stat.isFile}function ga(i){return i&&i.stat.isFolder}function va(i){return i==null||typeof i=="object"&&typeof i.byteLength=="number"}var se=function(t){this._cache={},this._client=t};se.prototype.readdir=function(t,r){var e=this,n=this.getCachedDirInfo(t);this._wrap(function(a){n!==null&&n.contents?e._client.readdir(t,{contentHash:n.stat.contentHash},a):e._client.readdir(t,a)},function(a,u,l,S){a?a.status===Dropbox.ApiError.NO_CONTENT&&n!==null?r(null,n.contents.slice(0)):r(a):(e.updateCachedDirInfo(t,l,u.slice(0)),S.forEach(function(x){e.updateCachedInfo(v.join(t,x.name),x)}),r(null,u))})},se.prototype.remove=function(t,r){var e=this;this._wrap(function(n){e._client.remove(t,n)},function(n,a){n||e.updateCachedInfo(t,a),r(n)})},se.prototype.move=function(t,r,e){var n=this;this._wrap(function(a){n._client.move(t,r,a)},function(a,u){a||(n.deleteCachedInfo(t),n.updateCachedInfo(r,u)),e(a)})},se.prototype.stat=function(t,r){var e=this;this._wrap(function(n){e._client.stat(t,n)},function(n,a){n||e.updateCachedInfo(t,a),r(n,a)})},se.prototype.readFile=function(t,r){var e=this,n=this.getCachedFileInfo(t);n!==null&&n.contents!==null?this.stat(t,function(a,u){a?r(a):u.contentHash===n.stat.contentHash?r(a,n.contents.slice(0),n.stat):e.readFile(t,r)}):this._wrap(function(a){e._client.readFile(t,{arrayBuffer:!0},a)},function(a,u,l){a||e.updateCachedInfo(t,l,u.slice(0)),r(a,u,l)})},se.prototype.writeFile=function(t,r,e){var n=this;this._wrap(function(a){n._client.writeFile(t,r,a)},function(a,u){a||n.updateCachedInfo(t,u,r.slice(0)),e(a,u)})},se.prototype.mkdir=function(t,r){var e=this;this._wrap(function(n){e._client.mkdir(t,n)},function(n,a){n||e.updateCachedInfo(t,a,[]),r(n)})},se.prototype._wrap=function(t,r){var e=0,n=function(a){var u=2;if(a&&3>++e)switch(a.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(n)},u*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(n)},se.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},se.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},se.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},se.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return ga(r)?r:null},se.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return ya(r)?r:null},se.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var n=this.getCachedInfo(t);r.contentHash!==null&&(n===void 0||n.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},se.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var n=this.getCachedInfo(t);r.versionTag!==null&&(n===void 0||n.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},se.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&va(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var ma=function(i){function t(r,e,n,a,u){i.call(this,r,e,n,a,u)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var n=this;if(this.isDirty()){var a=this.getBuffer(),u=K(a);this._fs._writeFileStrict(this.getPath(),u,function(l){l||n.resetDirty(),e(l)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(Gt),Hr=function(i){function t(r,e){e===void 0&&(e=!0),i.call(this),this._client=new se(r),Nt(e,t.Name,{client:"authenticated dropbox client instance"}),da()}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var n=this;this._client.readdir("/",function(a,u){if(a)e(n.convert(a,"/"));else{var l=function(x,O){var D=v.join("/",x);n._client.remove(D,function(V){O(V?n.convert(V,D):null)})},S=function(x){x?e(x):e()};pn(u,l,S)}})},t.prototype.rename=function(e,n,a){var u=this;this._client.move(e,n,function(l){l?u._client.stat(n,function(S,x){if(S||x.isFolder){var O=l.response.error.indexOf(e)>-1?e:n;a(u.convert(l,O))}else u._client.remove(n,function(D){D?a(u.convert(D,n)):u.rename(e,n,a)})}):a()})},t.prototype.stat=function(e,n,a){var u=this;this._client.stat(e,function(l,S){if(l)a(u.convert(l,e));else if(S&&S.isRemoved)a(p.FileError(c.ENOENT,e));else{var x=new C(u._statType(S),S.size);return a(null,x)}})},t.prototype.open=function(e,n,a,u){var l=this;this._client.readFile(e,function(S,x,O){if(S)if(n.isReadable())u(l.convert(S,e));else switch(S.status){case Dropbox.ApiError.NOT_FOUND:var D=new ArrayBuffer(0);return l._writeFileStrict(e,D,function(rt,ft){if(rt)u(rt);else{var gt=l._makeFile(e,n,ft,Ft(D));u(null,gt)}});default:return u(l.convert(S,e))}else{var V;x===null?V=Bt():V=Ft(x);var $=l._makeFile(e,n,O,V);return u(null,$)}})},t.prototype._writeFileStrict=function(e,n,a){var u=this,l=v.dirname(e);this.stat(l,!1,function(S,x){S?a(p.FileError(c.ENOENT,l)):u._client.writeFile(e,n,function(O,D){O?a(u.convert(O,e)):a(null,D)})})},t.prototype._statType=function(e){return e.isFile?L.FILE:L.DIRECTORY},t.prototype._makeFile=function(e,n,a,u){var l=this._statType(a),S=new C(l,a.size);return new ma(this,e,n,S,u)},t.prototype._remove=function(e,n,a){var u=this;this._client.stat(e,function(l,S){l?n(u.convert(l,e)):S.isFile&&!a?n(p.FileError(c.ENOTDIR,e)):!S.isFile&&a?n(p.FileError(c.EISDIR,e)):u._client.remove(e,function(x){n(x?u.convert(x,e):null)})})},t.prototype.unlink=function(e,n){this._remove(e,n,!0)},t.prototype.rmdir=function(e,n){this._remove(e,n,!1)},t.prototype.mkdir=function(e,n,a){var u=this,l=v.dirname(e);this._client.stat(l,function(S,x){S?a(u.convert(S,l)):u._client.mkdir(e,function(O){a(O?p.FileError(c.EEXIST,e):null)})})},t.prototype.readdir=function(e,n){var a=this;this._client.readdir(e,function(u,l){return u?n(a.convert(u)):n(null,l)})},t.prototype.convert=function(e,n){n===void 0&&(n=null);var a=le[e.status];return a===void 0&&(a=c.EIO),n?p.FileError(a,n):new p(a)},t}(it);Hr.Name="Dropbox",Hr.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(i,t){i.isAuthenticated&&i.isAuthenticated()?t():t(new p(c.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Xt(i,t){t===void 0&&(t="");for(var r=i.errno,e=i.node,n=[];e&&(n.unshift(e.name),e!==e.parent);)e=e.parent;return new p(r,_[r],n.length>0?"/"+n.join("/"):t)}var wa=function(i){function t(r,e,n,a){i.call(this),this._fs=r,this._FS=e,this._path=n,this._stream=a}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var n=null;try{this.closeSync()}catch(a){n=a}finally{e(n)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Xt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(n){e(n)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Xt(e,this._path)}},t.prototype.truncate=function(e,n){var a=null;try{this.truncateSync(e)}catch(u){a=u}finally{n(a)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(n){throw Xt(n,this._path)}},t.prototype.write=function(e,n,a,u,l){try{l(null,this.writeSync(e,n,a,u),e)}catch(S){l(S)}},t.prototype.writeSync=function(e,n,a,u){try{var l=ut(e),S=u===null?void 0:u;return this._FS.write(this._stream,l,n,a,S)}catch(x){throw Xt(x,this._path)}},t.prototype.read=function(e,n,a,u,l){try{l(null,this.readSync(e,n,a,u),e)}catch(S){l(S)}},t.prototype.readSync=function(e,n,a,u){try{var l=ut(e),S=u===null?void 0:u;return this._FS.read(this._stream,l,n,a,S)}catch(x){throw Xt(x,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,n,a){var u=null;try{this.chownSync(e,n)}catch(l){u=l}finally{a(u)}},t.prototype.chownSync=function(e,n){try{this._FS.fchown(this._stream.fd,e,n)}catch(a){throw Xt(a,this._path)}},t.prototype.chmod=function(e,n){var a=null;try{this.chmodSync(e)}catch(u){a=u}finally{n(a)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(n){throw Xt(n,this._path)}},t.prototype.utimes=function(e,n,a){var u=null;try{this.utimesSync(e,n)}catch(l){u=l}finally{a(u)}},t.prototype.utimesSync=function(e,n){this._fs.utimesSync(this._path,e,n)},t}(vt),Vr=function(i){function t(r){i.call(this),this._FS=r}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,n){try{this._FS.rename(e,n)}catch(a){throw a.errno===c.ENOENT?Xt(a,this.existsSync(e)?n:e):Xt(a)}},t.prototype.statSync=function(e,n){try{var a=n?this._FS.lstat(e):this._FS.stat(e),u=this.modeToFileType(a.mode);return new C(u,a.size,a.mode,a.atime,a.mtime,a.ctime)}catch(l){throw Xt(l,e)}},t.prototype.openSync=function(e,n,a){try{var u=this._FS.open(e,n.getFlagString(),a);if(this._FS.isDir(u.node.mode))throw this._FS.close(u),p.EISDIR(e);return new wa(this,this._FS,e,u)}catch(l){throw Xt(l,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(n){throw Xt(n,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(n){throw Xt(n,e)}},t.prototype.mkdirSync=function(e,n){try{this._FS.mkdir(e,n)}catch(a){throw Xt(a,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(n){return n!=="."&&n!==".."})}catch(n){throw Xt(n,e)}},t.prototype.truncateSync=function(e,n){try{this._FS.truncate(e,n)}catch(a){throw Xt(a,e)}},t.prototype.readFileSync=function(e,n,a){try{var u=this._FS.readFile(e,{flags:a.getFlagString()}),l=mt(u);return n?l.toString(n):l}catch(S){throw Xt(S,e)}},t.prototype.writeFileSync=function(e,n,a,u,l){try{a&&(n=f.from(n,a));var S=ut(n);this._FS.writeFile(e,S,{flags:u.getFlagString(),encoding:"binary"}),this._FS.chmod(e,l)}catch(x){throw Xt(x,e)}},t.prototype.chmodSync=function(e,n,a){try{n?this._FS.lchmod(e,a):this._FS.chmod(e,a)}catch(u){throw Xt(u,e)}},t.prototype.chownSync=function(e,n,a,u){try{n?this._FS.lchown(e,a,u):this._FS.chown(e,a,u)}catch(l){throw Xt(l,e)}},t.prototype.symlinkSync=function(e,n,a){try{this._FS.symlink(e,n)}catch(u){throw Xt(u)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(n){throw Xt(n,e)}},t.prototype.utimesSync=function(e,n,a){try{this._FS.utime(e,n.getTime(),a.getTime())}catch(u){throw Xt(u,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return L.DIRECTORY;if(this._FS.isFile(e))return L.FILE;if(this._FS.isLink(e))return L.SYMLINK;throw p.EPERM("Invalid mode: "+e)},t}(xt);Vr.Name="EmscriptenFileSystem",Vr.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var ur=function(i){function t(r,e){i.call(this),this._folder=r,this._wrapped=e}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var n=this;this._wrapped.exists(this._folder,function(a){a?e():n._wrapped.isReadOnly()?e(p.ENOENT(n._folder)):n._wrapped.mkdir(n._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(it);ur.Name="FolderAdapter",ur.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function dn(i,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+v.relative(i,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function Sa(i,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=dn(i,r)),t.apply(null,arguments)}:t}function yn(i,t,r){return i.slice(i.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=v.join(this._folder,arguments[0])),r&&(arguments[1]=v.join(this._folder,arguments[1])),arguments[arguments.length-1]=Sa(this._folder,arguments[arguments.length-1])),this._wrapped[i].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=v.join(this._folder,arguments[0])),r&&(arguments[1]=v.join(this._folder,arguments[1])),this._wrapped[i].apply(this._wrapped,arguments)}catch(e){throw dn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(i){ur.prototype[i]=yn(i,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(i){ur.prototype[i]=yn(i,!0,!0)});var Zr;typeof window<"u"?Zr=window:typeof self<"u"?Zr=self:Zr=y;var Qt=Zr;function Ea(i){return i.isDirectory}var pi=Qt.webkitRequestFileSystem||Qt.requestFileSystem||null;function _a(i,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(i){case Qt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case Qt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+i));break}else Qt.webkitStorageInfo.requestQuota(i,t,r,e)}function xa(i){return Array.prototype.slice.call(i||[],0)}function Ne(i,t,r){switch(i.name){case"PathExistsError":return p.EEXIST(t);case"QuotaExceededError":return p.FileError(c.ENOSPC,t);case"NotFoundError":return p.ENOENT(t);case"SecurityError":return p.FileError(c.EACCES,t);case"InvalidModificationError":return p.FileError(c.EPERM,t);case"TypeMismatchError":return p.FileError(r?c.ENOTDIR:c.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return p.FileError(c.EINVAL,t)}}var Fa=function(i){function t(r,e,n,a,u,l){i.call(this,r,n,a,u,l),this._entry=e}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var n=this;if(!this.isDirty())return e();this._entry.createWriter(function(a){var u=n.getBuffer(),l=new Blob([K(u)]),S=l.size;a.onwriteend=function(x){a.onwriteend=null,a.onerror=null,a.truncate(S),n.resetDirty(),e()},a.onerror=function(x){e(Ne(x,n.getPath(),!1))},a.write(l)})},t.prototype.close=function(e){this.sync(e)},t}(Gt),qr=function(i){function t(r,e,n){r===void 0&&(r=5),e===void 0&&(e=Qt.PERSISTENT),n===void 0&&(n=!0),i.call(this),this.size=1024*1024*r,this.type=e,Nt(n,t.Name,{size:r,type:e})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){var a=new t(e.size,e.type,!1);a.allocate(function(u){return u?n(u):n(null,a)},!1)},t.isAvailable=function(){return!!pi},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,n){var a=this;e===void 0&&(e=function(){}),n===void 0&&(n=!0),n&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var u=function(S){a.fs=S,e()},l=function(S){e(Ne(S,"/",!0))};this.type===Qt.PERSISTENT?_a(this.type,this.size,function(S){pi(a.type,S,u,l)},l):pi(this.type,this.size,u,l)},t.prototype.empty=function(e){this._readdir("/",function(n,a){if(n)console.error("Failed to empty FS"),e(n);else{var u=function(S){n?(console.error("Failed to empty FS"),e(n)):e()},l=function(S,x){var O=function(){x()},D=function(V){x(Ne(V,S.fullPath,!S.isDirectory))};Ea(S)?S.removeRecursively(O,D):S.remove(O,D)};pn(a,l,u)}})},t.prototype.rename=function(e,n,a){var u=this,l=2,S=0,x=this.fs.root,O=e,D=function($){--l<=0&&a(Ne($,O,!1))},V=function($){if(++S===2)return a(new p(c.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===n)return a();O=v.dirname(n),x.getDirectory(O,{},function(rt){O=v.basename(n),$.moveTo(rt,O,function(ft){a()},function(ft){$.isDirectory?(O=n,u.unlink(n,function(gt){gt?D(ft):u.rename(e,n,a)})):D(ft)})},D)};x.getFile(e,{},V,D),x.getDirectory(e,{},V,D)},t.prototype.stat=function(e,n,a){var u=this,l={create:!1},S=function(V){var $=function(rt){var ft=new C(L.FILE,rt.size);a(null,ft)};V.file($,O)},x=function(V){var $=4096,rt=new C(L.DIRECTORY,$);a(null,rt)},O=function(V){a(Ne(V,e,!1))},D=function(){u.fs.root.getDirectory(e,l,x,O)};this.fs.root.getFile(e,l,S,D)},t.prototype.open=function(e,n,a,u){var l=this,S=function(x){x.name==="InvalidModificationError"&&n.isExclusive()?u(p.EEXIST(e)):u(Ne(x,e,!1))};this.fs.root.getFile(e,{create:n.pathNotExistsAction()===A.CREATE_FILE,exclusive:n.isExclusive()},function(x){x.file(function(O){var D=new FileReader;D.onloadend=function(V){var $=l._makeFile(e,x,n,O,D.result);u(null,$)},D.onerror=function(V){S(D.error)},D.readAsArrayBuffer(O)},S)},S)},t.prototype.unlink=function(e,n){this._remove(e,n,!0)},t.prototype.rmdir=function(e,n){var a=this;this.readdir(e,function(u,l){u?n(u):l.length>0?n(p.ENOTEMPTY(e)):a._remove(e,n,!1)})},t.prototype.mkdir=function(e,n,a){var u={create:!0,exclusive:!0},l=function(x){a()},S=function(x){a(Ne(x,e,!0))};this.fs.root.getDirectory(e,u,l,S)},t.prototype.readdir=function(e,n){this._readdir(e,function(a,u){if(u){for(var l=[],S=0,x=u;S<x.length;S+=1){var O=x[S];l.push(O.name)}n(null,l)}else return n(a)})},t.prototype._makeFile=function(e,n,a,u,l){l===void 0&&(l=new ArrayBuffer(0));var S=new C(L.FILE,u.size),x=Ft(l);return new Fa(this,n,e,a,S,x)},t.prototype._readdir=function(e,n){var a=function(u){n(Ne(u,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(u){var l=u.createReader(),S=[],x=function(){l.readEntries(function(O){O.length?(S=S.concat(xa(O)),x()):n(null,S)},a)};x()},a)},t.prototype._remove=function(e,n,a){var u=function(x){var O=function(){n()},D=function(V){n(Ne(V,e,!a))};x.remove(O,D)},l=function(x){n(Ne(x,e,!a))},S={create:!1};a?this.fs.root.getFile(e,S,u,l):this.fs.root.getDirectory(e,S,u,l)},t}(it);qr.Name="HTML5FS",qr.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var pe=function(t,r,e,n,a,u){this.id=t,this.size=r,this.mode=e,this.atime=n,this.mtime=a,this.ctime=u};pe.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new pe(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},pe.prototype.toStats=function(){return new C((this.mode&61440)===L.DIRECTORY?L.DIRECTORY:L.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},pe.prototype.getSize=function(){return 30+this.id.length},pe.prototype.toBuffer=function(t){return t===void 0&&(t=f.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},pe.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var n=t.mtime.getTime();this.mtime!==n&&(this.mtime=n,r=!0);var a=t.ctime.getTime();return this.ctime!==a&&(this.ctime=a,r=!0),r},pe.prototype.isFile=function(){return(this.mode&61440)===L.FILE},pe.prototype.isDirectory=function(){return(this.mode&61440)===L.DIRECTORY};var We="/",di=null;function gn(){return di||(di=f.from("{}"))}function Xr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var t=Math.random()*16|0,r=i==="x"?t:t&3|8;return r.toString(16)})}function ve(i,t){return i?(t(i),!1):!0}function te(i,t,r){return i?(t.abort(function(){r(i)}),!1):!0}var Be=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};Be.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},Be.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},Be.prototype.del=function(t){this.markModified(t),this.store.del(t)},Be.prototype.commit=function(){},Be.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var n=e[r],a=t.originalData[n];a?t.store.put(n,a,!0):t.store.del(n)}},Be.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},Be.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var vn=function(i){function t(r,e,n,a,u){i.call(this,r,e,n,a,u)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(Gt),mn=function(i){function t(r){i.call(this),this.store=r.store,this.makeRootDirectory()}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,n){var a=this.store.beginTransaction("readwrite"),u=v.dirname(e),l=v.basename(e),S=v.dirname(n),x=v.basename(n),O=this.findINode(a,u),D=this.getDirListing(a,u,O);if(!D[l])throw p.ENOENT(e);var V=D[l];if(delete D[l],(S+"/").indexOf(e+"/")===0)throw new p(c.EBUSY,u);var $,rt;if(S===u?($=O,rt=D):($=this.findINode(a,S),rt=this.getDirListing(a,S,$)),rt[x]){var ft=this.getINode(a,n,rt[x]);if(ft.isFile())try{a.del(ft.id),a.del(rt[x])}catch(gt){throw a.abort(),gt}else throw p.EPERM(n)}rt[x]=V;try{a.put(O.id,f.from(JSON.stringify(D)),!0),a.put($.id,f.from(JSON.stringify(rt)),!0)}catch(gt){throw a.abort(),gt}a.commit()},t.prototype.statSync=function(e,n){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,n,a){var u=this.store.beginTransaction("readwrite"),l=Bt(),S=this.commitNewFile(u,e,L.FILE,a,l);return new vn(this,e,n,S.toStats(),l)},t.prototype.openFileSync=function(e,n){var a=this.store.beginTransaction("readonly"),u=this.findINode(a,e),l=a.get(u.id);if(l===void 0)throw p.ENOENT(e);return new vn(this,e,n,u.toStats(),l)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw p.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,n){var a=this.store.beginTransaction("readwrite"),u=f.from("{}");this.commitNewFile(a,e,L.DIRECTORY,n,u)},t.prototype.readdirSync=function(e){var n=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(n,e,this.findINode(n,e)))},t.prototype._syncSync=function(e,n,a){var u=this.store.beginTransaction("readwrite"),l=this._findINode(u,v.dirname(e),v.basename(e)),S=this.getINode(u,e,l),x=S.update(a);try{u.put(S.id,n,!0),x&&u.put(l,S.toBuffer(),!0)}catch(O){throw u.abort(),O}u.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(We)===void 0){var n=new Date().getTime(),a=new pe(Xr(),4096,511|L.DIRECTORY,n,n,n);e.put(a.id,gn(),!1),e.put(We,a.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,n,a){var u=this,l=function(S){var x=u.getDirListing(e,n,S);if(x[a])return x[a];throw p.ENOENT(v.resolve(n,a))};return n==="/"?a===""?We:l(this.getINode(e,n,We)):l(this.getINode(e,n+v.sep+a,this._findINode(e,v.dirname(n),v.basename(n))))},t.prototype.findINode=function(e,n){return this.getINode(e,n,this._findINode(e,v.dirname(n),v.basename(n)))},t.prototype.getINode=function(e,n,a){var u=e.get(a);if(u===void 0)throw p.ENOENT(n);return pe.fromBuffer(u)},t.prototype.getDirListing=function(e,n,a){if(!a.isDirectory())throw p.ENOTDIR(n);var u=e.get(a.id);if(u===void 0)throw p.ENOENT(n);return JSON.parse(u.toString())},t.prototype.addNewNode=function(e,n){for(var a=0,u;a<5;)try{return u=Xr(),e.put(u,n,!1),u}catch{}throw new p(c.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,n,a,u,l){var S=v.dirname(n),x=v.basename(n),O=this.findINode(e,S),D=this.getDirListing(e,S,O),V=new Date().getTime();if(n==="/"||D[x])throw p.EEXIST(n);var $;try{var rt=this.addNewNode(e,l);$=new pe(rt,l.length,u|a,V,V,V);var ft=this.addNewNode(e,$.toBuffer());D[x]=ft,e.put(O.id,f.from(JSON.stringify(D)),!0)}catch(gt){throw e.abort(),gt}return e.commit(),$},t.prototype.removeEntry=function(e,n){var a=this.store.beginTransaction("readwrite"),u=v.dirname(e),l=this.findINode(a,u),S=this.getDirListing(a,u,l),x=v.basename(e);if(!S[x])throw p.ENOENT(e);var O=S[x];delete S[x];var D=this.getINode(a,e,O);if(!n&&D.isDirectory())throw p.EISDIR(e);if(n&&!D.isDirectory())throw p.ENOTDIR(e);try{a.del(D.id),a.del(O),a.put(l.id,f.from(JSON.stringify(S)),!0)}catch(V){throw a.abort(),V}a.commit()},t}(xt),wn=function(i){function t(r,e,n,a,u){i.call(this,r,e,n,a,u)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var n=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(a){a||n.resetDirty(),e(a)}):e()},t.prototype.close=function(e){this.sync(e)},t}(Gt),Ia=function(i){function t(){i.apply(this,arguments)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,n){this.store=e,this.makeRootDirectory(n)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var n=this;this.store.clear(function(a){ve(a,e)&&n.makeRootDirectory(e)})},t.prototype.rename=function(e,n,a){var u=this,l=this.store.beginTransaction("readwrite"),S=v.dirname(e),x=v.basename(e),O=v.dirname(n),D=v.basename(n),V={},$={},rt=!1;if((O+"/").indexOf(e+"/")===0)return a(new p(c.EBUSY,S));var ft=function(){if(!(rt||!$.hasOwnProperty(S)||!$.hasOwnProperty(O))){var It=$[S],Zt=V[S],ae=$[O],Oe=V[O];if(!It[x])a(p.ENOENT(e));else{var Ae=It[x];delete It[x];var yr=function(){ae[D]=Ae,l.put(Zt.id,f.from(JSON.stringify(It)),!0,function(Pe){te(Pe,l,a)&&(S===O?l.commit(a):l.put(Oe.id,f.from(JSON.stringify(ae)),!0,function(ze){te(ze,l,a)&&l.commit(a)}))})};ae[D]?u.getINode(l,n,ae[D],function(Pe,ze){te(Pe,l,a)&&(ze.isFile()?l.del(ze.id,function(uo){te(uo,l,a)&&l.del(ae[D],function($a){te($a,l,a)&&yr()})}):l.abort(function(uo){a(p.EPERM(n))}))}):yr()}}},gt=function(It){u.findINodeAndDirListing(l,It,function(Zt,ae,Oe){Zt?rt||(rt=!0,l.abort(function(){a(Zt)})):(V[It]=ae,$[It]=Oe,ft())})};gt(S),S!==O&&gt(O)},t.prototype.stat=function(e,n,a){var u=this.store.beginTransaction("readonly");this.findINode(u,e,function(l,S){ve(l,a)&&a(null,S.toStats())})},t.prototype.createFile=function(e,n,a,u){var l=this,S=this.store.beginTransaction("readwrite"),x=Bt();this.commitNewFile(S,e,L.FILE,a,x,function(O,D){ve(O,u)&&u(null,new wn(l,e,n,D.toStats(),x))})},t.prototype.openFile=function(e,n,a){var u=this,l=this.store.beginTransaction("readonly");this.findINode(l,e,function(S,x){ve(S,a)&&l.get(x.id,function(O,D){ve(O,a)&&(D===void 0?a(p.ENOENT(e)):a(null,new wn(u,e,n,x.toStats(),D)))})})},t.prototype.unlink=function(e,n){this.removeEntry(e,!1,n)},t.prototype.rmdir=function(e,n){var a=this;this.readdir(e,function(u,l){u?n(u):l.length>0?n(p.ENOTEMPTY(e)):a.removeEntry(e,!0,n)})},t.prototype.mkdir=function(e,n,a){var u=this.store.beginTransaction("readwrite"),l=f.from("{}");this.commitNewFile(u,e,L.DIRECTORY,n,l,a)},t.prototype.readdir=function(e,n){var a=this,u=this.store.beginTransaction("readonly");this.findINode(u,e,function(l,S){ve(l,n)&&a.getDirListing(u,e,S,function(x,O){ve(x,n)&&n(null,Object.keys(O))})})},t.prototype._sync=function(e,n,a,u){var l=this,S=this.store.beginTransaction("readwrite");this._findINode(S,v.dirname(e),v.basename(e),function(x,O){te(x,S,u)&&l.getINode(S,e,O,function(D,V){if(te(D,S,u)){var $=V.update(a);S.put(V.id,n,!0,function(rt){te(rt,S,u)&&($?S.put(O,V.toBuffer(),!0,function(ft){te(ft,S,u)&&S.commit(u)}):S.commit(u))})}})})},t.prototype.makeRootDirectory=function(e){var n=this.store.beginTransaction("readwrite");n.get(We,function(a,u){if(a||u===void 0){var l=new Date().getTime(),S=new pe(Xr(),4096,511|L.DIRECTORY,l,l,l);n.put(S.id,gn(),!1,function(x){te(x,n,e)&&n.put(We,S.toBuffer(),!1,function(O){O?n.abort(function(){e(O)}):n.commit(e)})})}else n.commit(e)})},t.prototype._findINode=function(e,n,a,u){var l=this,S=function(x,O,D){x?u(x):D[a]?u(null,D[a]):u(p.ENOENT(v.resolve(n,a)))};n==="/"?a===""?u(null,We):this.getINode(e,n,We,function(x,O){ve(x,u)&&l.getDirListing(e,n,O,function(D,V){S(D,O,V)})}):this.findINodeAndDirListing(e,n,S)},t.prototype.findINode=function(e,n,a){var u=this;this._findINode(e,v.dirname(n),v.basename(n),function(l,S){ve(l,a)&&u.getINode(e,n,S,a)})},t.prototype.getINode=function(e,n,a,u){e.get(a,function(l,S){ve(l,u)&&(S===void 0?u(p.ENOENT(n)):u(null,pe.fromBuffer(S)))})},t.prototype.getDirListing=function(e,n,a,u){a.isDirectory()?e.get(a.id,function(l,S){if(ve(l,u))try{u(null,JSON.parse(S.toString()))}catch{u(p.ENOENT(n))}}):u(p.ENOTDIR(n))},t.prototype.findINodeAndDirListing=function(e,n,a){var u=this;this.findINode(e,n,function(l,S){ve(l,a)&&u.getDirListing(e,n,S,function(x,O){ve(x,a)&&a(null,S,O)})})},t.prototype.addNewNode=function(e,n,a){var u=0,l,S=function(){++u===5?a(new p(c.EIO,"Unable to commit data to key-value store.")):(l=Xr(),e.put(l,n,!1,function(x,O){x||!O?S():a(null,l)}))};S()},t.prototype.commitNewFile=function(e,n,a,u,l,S){var x=this,O=v.dirname(n),D=v.basename(n),V=new Date().getTime();if(n==="/")return S(p.EEXIST(n));this.findINodeAndDirListing(e,O,function($,rt,ft){te($,e,S)&&(ft[D]?e.abort(function(){S(p.EEXIST(n))}):x.addNewNode(e,l,function(gt,It){if(te(gt,e,S)){var Zt=new pe(It,l.length,u|a,V,V,V);x.addNewNode(e,Zt.toBuffer(),function(ae,Oe){te(ae,e,S)&&(ft[D]=Oe,e.put(rt.id,f.from(JSON.stringify(ft)),!0,function(Ae){te(Ae,e,S)&&e.commit(function(yr){te(yr,e,S)&&S(null,Zt)})}))})}}))})},t.prototype.removeEntry=function(e,n,a){var u=this,l=this.store.beginTransaction("readwrite"),S=v.dirname(e),x=v.basename(e);this.findINodeAndDirListing(l,S,function(O,D,V){if(te(O,l,a))if(!V[x])l.abort(function(){a(p.ENOENT(e))});else{var $=V[x];delete V[x],u.getINode(l,e,$,function(rt,ft){te(rt,l,a)&&(!n&&ft.isDirectory()?l.abort(function(){a(p.EISDIR(e))}):n&&!ft.isDirectory()?l.abort(function(){a(p.ENOTDIR(e))}):l.del(ft.id,function(gt){te(gt,l,a)&&l.del($,function(It){te(It,l,a)&&l.put(D.id,f.from(JSON.stringify(V)),!0,function(Zt){te(Zt,l,a)&&l.commit(a)})})}))})}})},t}(it),Ge=function(){this.store={}};Ge.prototype.name=function(){return fr.Name},Ge.prototype.clear=function(){this.store={}},Ge.prototype.beginTransaction=function(t){return new Be(this)},Ge.prototype.get=function(t){return this.store[t]},Ge.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},Ge.prototype.del=function(t){delete this.store[t]};var fr=function(i){function t(){i.call(this,{store:new Ge})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t)},t}(mn);fr.Name="InMemory",fr.Options={};var yi=Qt.indexedDB||Qt.mozIndexedDB||Qt.webkitIndexedDB||Qt.msIndexedDB;function xr(i,t){switch(t===void 0&&(t=i.toString()),i.name){case"NotFoundError":return new p(c.ENOENT,t);case"QuotaExceededError":return new p(c.ENOSPC,t);default:return new p(c.EIO,t)}}function Fr(i,t,r){return t===void 0&&(t=c.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),i(new p(t,r!==null?r:void 0))}}var gi=function(t,r){this.tx=t,this.store=r};gi.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=Fr(r),e.onsuccess=function(n){var a=n.target.result;a===void 0?r(null,a):r(null,Ft(a))}}catch(n){r(xr(n))}};var ba=function(i){function t(r,e){i.call(this,r,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.put=function(e,n,a,u){try{var l=K(n),S;a?S=this.store.put(l,e):S=this.store.add(l,e),S.onerror=Fr(u),S.onsuccess=function(x){u(null,!0)}}catch(x){u(xr(x))}},t.prototype.del=function(e,n){try{var a=this.store.delete(e);a.onerror=Fr(n),a.onsuccess=function(u){n()}}catch(u){n(xr(u))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var n=null;try{this.tx.abort()}catch(a){n=xr(a)}finally{e(n)}},t}(gi),Yr=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var n=yi.open(this.storeName,1);n.onupgradeneeded=function(a){var u=a.target.result;u.objectStoreNames.contains(e.storeName)&&u.deleteObjectStore(e.storeName),u.createObjectStore(e.storeName)},n.onsuccess=function(a){e.db=a.target.result,t(null,e)},n.onerror=Fr(t,c.EACCES)};Yr.prototype.name=function(){return Ir.Name+" - "+this.storeName},Yr.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),n=e.clear();n.onsuccess=function(a){setTimeout(t,0)},n.onerror=Fr(t)}catch(a){t(xr(a))}},Yr.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new ba(r,e);if(t==="readonly")return new gi(r,e);throw new p(c.EINVAL,"Invalid transaction type.")};var Ir=function(i){function t(r,e,n){var a=this;n===void 0&&(n=!0),i.call(this),this.store=new Yr(function(u){u?r(u):a.init(a.store,function(l){r(l,a)})},e),Nt(n,t.Name,{storeName:e})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){new t(n,e.storeName,!1)},t.isAvailable=function(){try{return typeof yi<"u"&&yi.open("__browserfs_test__")!==null}catch{return!1}},t}(Ia);Ir.Name="IndexedDB",Ir.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var vi=!1,br;try{Qt.localStorage.setItem("__test__",String.fromCharCode(55296)),vi=Qt.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{vi=!1}br=vi?"binary_string":"binary_string_ie",f.isEncoding(br)||(br="base64");var Je=function(){};Je.prototype.name=function(){return kr.Name},Je.prototype.clear=function(){Qt.localStorage.clear()},Je.prototype.beginTransaction=function(t){return new Be(this)},Je.prototype.get=function(t){try{var r=Qt.localStorage.getItem(t);if(r!==null)return f.from(r,br)}catch{}},Je.prototype.put=function(t,r,e){try{return!e&&Qt.localStorage.getItem(t)!==null?!1:(Qt.localStorage.setItem(t,r.toString(br)),!0)}catch{throw new p(c.ENOSPC,"LocalStorage is full.")}},Je.prototype.del=function(t){try{Qt.localStorage.removeItem(t)}catch(r){throw new p(c.EIO,"Unable to delete key "+t+": "+r)}};var kr=function(i){function t(){i.call(this,{store:new Je})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){n(null,new t)},t.isAvailable=function(){return typeof Qt.localStorage<"u"},t}(mn);kr.Name="LocalStorage",kr.Options={};var cr=function(i){function t(){i.call(this),this.mountList=[],this.mntMap={},this.rootFs=new fr}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){var a=new t;Object.keys(e).forEach(function(u){a.mount(u,e[u])}),n(null,a)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,n){if(e[0]!=="/"&&(e="/"+e),e=v.resolve(e),this.mntMap[e])throw new p(c.EINVAL,"Mount point "+e+" is already taken.");z(e,511,this.rootFs),this.mntMap[e]=n,this.mountList.push(e),this.mountList=this.mountList.sort(function(a,u){return u.length-a.length})},t.prototype.umount=function(e){var n=this;if(e[0]!=="/"&&(e="/"+e),e=v.resolve(e),!this.mntMap[e])throw new p(c.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&n.rootFs.readdirSync(e).length===0;)n.rootFs.rmdirSync(e),e=v.dirname(e)},t.prototype._getFs=function(e){for(var n=this,a=this.mountList,u=a.length,l=0;l<u;l++){var S=a[l];if(S.length<=e.length&&e.indexOf(S)===0)return e=e.substr(S.length>1?S.length:0),e===""&&(e="/"),{fs:n.mntMap[S],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,n){n(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,n,a){var u=e.message.indexOf(n);return u!==-1&&(e.message=e.message.substr(0,u)+a+e.message.substr(u+n.length),e.path=a),e},t.prototype.rename=function(e,n,a){var u=this,l=this._getFs(e),S=this._getFs(n);return l.fs===S.fs?l.fs.rename(l.path,S.path,function(x){x&&u.standardizeError(u.standardizeError(x,l.path,e),S.path,n),a(x)}):ct.readFile(e,function(x,O){if(x)return a(x);ct.writeFile(n,O,function(D){if(D)return a(D);ct.unlink(e,a)})})},t.prototype.renameSync=function(e,n){var a=this._getFs(e),u=this._getFs(n);if(a.fs===u.fs)try{return a.fs.renameSync(a.path,u.path)}catch(S){throw this.standardizeError(this.standardizeError(S,a.path,e),u.path,n),S}var l=ct.readFileSync(e);return ct.writeFileSync(n,l),ct.unlinkSync(e)},t.prototype.readdirSync=function(e){var n=this._getFs(e),a=null;if(n.fs!==this.rootFs)try{a=this.rootFs.readdirSync(e)}catch{}try{var u=n.fs.readdirSync(n.path);return a===null?u:u.concat(a.filter(function(l){return u.indexOf(l)===-1}))}catch(l){if(a===null)throw this.standardizeError(l,n.path,e);return a}},t.prototype.readdir=function(e,n){var a=this,u=this._getFs(e);u.fs.readdir(u.path,function(l,S){if(u.fs!==a.rootFs)try{var x=a.rootFs.readdirSync(e);S?S=S.concat(x.filter(function(O){return S.indexOf(O)===-1})):S=x}catch{if(l)return n(a.standardizeError(l,u.path,e))}else if(l)return n(a.standardizeError(l,u.path,e));n(null,S)})},t.prototype.rmdirSync=function(e){var n=this._getFs(e);if(this._containsMountPt(e))throw p.ENOTEMPTY(e);try{n.fs.rmdirSync(n.path)}catch(a){throw this.standardizeError(a,n.path,e)}},t.prototype.rmdir=function(e,n){var a=this,u=this._getFs(e);this._containsMountPt(e)?n(p.ENOTEMPTY(e)):u.fs.rmdir(u.path,function(l){n(l?a.standardizeError(l,u.path,e):null)})},t.prototype._containsMountPt=function(e){for(var n=this.mountList,a=n.length,u=0;u<a;u++){var l=n[u];if(l.length>=e.length&&l.slice(0,e.length)===e)return!0}return!1},t}(it);cr.Name="MountableFileSystem",cr.Options={};function Sn(i,t,r){return t?function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var a=e[0],u=this._getFs(a);e[0]=u.path;try{return u.fs[i].apply(u.fs,e)}catch(l){throw this.standardizeError(l,u.path,a),l}}:function(){for(var e=this,n=[],a=arguments.length;a--;)n[a]=arguments[a];var u=n[0],l=this._getFs(u);if(n[0]=l.path,typeof n[n.length-1]=="function"){var S=n[n.length-1];n[n.length-1]=function(){for(var x=[],O=arguments.length;O--;)x[O]=arguments[O];x.length>0&&x[0]instanceof p&&e.standardizeError(x[0],l.path,u),S.apply(null,x)}}return l.fs[i].apply(l.fs,n)}}for(var En=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Nr=0;Nr<En.length;Nr++)for(var ka=En[Nr],mi=0,_n=ka;mi<_n.length;mi+=1){var Gr=_n[mi];cr.prototype[Gr]=Sn(Gr,!1,Nr+1),cr.prototype[Gr+"Sync"]=Sn(Gr+"Sync",!0,Nr+1)}var Rr;if(typeof setImmediate<"u")Rr=setImmediate;else{var _e=Qt,hr=[],xn="zero-timeout-message",Na=function(){if(typeof _e.importScripts<"u"||!_e.postMessage)return!1;var i=!0,t=_e.onmessage;return _e.onmessage=function(){i=!1},_e.postMessage("","*"),_e.onmessage=t,i};if(Na()){Rr=function(i){hr.push(i),_e.postMessage(xn,"*")};var Fn=function(i){if(i.source===self&&i.data===xn&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0,hr.length>0)){var t=hr.shift();return t()}};_e.addEventListener?_e.addEventListener("message",Fn,!0):_e.attachEvent("onmessage",Fn)}else if(_e.MessageChannel){var In=new _e.MessageChannel;In.port1.onmessage=function(i){if(hr.length>0)return hr.shift()()},Rr=function(i){hr.push(i),In.port2.postMessage("")}}else Rr=function(i){return setTimeout(i,0)}}var wi=Rr,Tr=function(){this._locked=!1,this._waiters=[]};Tr.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},Tr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){wi(t);return}this._locked=!1},Tr.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},Tr.prototype.isLocked=function(){return this._locked};var wt=function(t){this._fs=t,this._mu=new Tr};wt.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},wt.prototype.getFSUnlocked=function(){return this._fs},wt.prototype.initialize=function(t){this._fs.initialize(t)},wt.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},wt.prototype.isReadOnly=function(){return this._fs.isReadOnly()},wt.prototype.supportsLinks=function(){return this._fs.supportsLinks()},wt.prototype.supportsProps=function(){return this._fs.supportsProps()},wt.prototype.supportsSynch=function(){return this._fs.supportsSynch()},wt.prototype.rename=function(t,r,e){var n=this;this._mu.lock(function(){n._fs.rename(t,r,function(a){n._mu.unlock(),e(a)})})},wt.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},wt.prototype.stat=function(t,r,e){var n=this;this._mu.lock(function(){n._fs.stat(t,r,function(a,u){n._mu.unlock(),e(a,u)})})},wt.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},wt.prototype.open=function(t,r,e,n){var a=this;this._mu.lock(function(){a._fs.open(t,r,e,function(u,l){a._mu.unlock(),n(u,l)})})},wt.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},wt.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(n){e._mu.unlock(),r(n)})})},wt.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},wt.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(n){e._mu.unlock(),r(n)})})},wt.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},wt.prototype.mkdir=function(t,r,e){var n=this;this._mu.lock(function(){n._fs.mkdir(t,r,function(a){n._mu.unlock(),e(a)})})},wt.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},wt.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(n,a){e._mu.unlock(),r(n,a)})})},wt.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},wt.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(n){e._mu.unlock(),r(n)})})},wt.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},wt.prototype.realpath=function(t,r,e){var n=this;this._mu.lock(function(){n._fs.realpath(t,r,function(a,u){n._mu.unlock(),e(a,u)})})},wt.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},wt.prototype.truncate=function(t,r,e){var n=this;this._mu.lock(function(){n._fs.truncate(t,r,function(a){n._mu.unlock(),e(a)})})},wt.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},wt.prototype.readFile=function(t,r,e,n){var a=this;this._mu.lock(function(){a._fs.readFile(t,r,e,function(u,l){a._mu.unlock(),n(u,l)})})},wt.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},wt.prototype.writeFile=function(t,r,e,n,a,u){var l=this;this._mu.lock(function(){l._fs.writeFile(t,r,e,n,a,function(S){l._mu.unlock(),u(S)})})},wt.prototype.writeFileSync=function(t,r,e,n,a){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,n,a)},wt.prototype.appendFile=function(t,r,e,n,a,u){var l=this;this._mu.lock(function(){l._fs.appendFile(t,r,e,n,a,function(S){l._mu.unlock(),u(S)})})},wt.prototype.appendFileSync=function(t,r,e,n,a){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,n,a)},wt.prototype.chmod=function(t,r,e,n){var a=this;this._mu.lock(function(){a._fs.chmod(t,r,e,function(u){a._mu.unlock(),n(u)})})},wt.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},wt.prototype.chown=function(t,r,e,n,a){var u=this;this._mu.lock(function(){u._fs.chown(t,r,e,n,function(l){u._mu.unlock(),a(l)})})},wt.prototype.chownSync=function(t,r,e,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,n)},wt.prototype.utimes=function(t,r,e,n){var a=this;this._mu.lock(function(){a._fs.utimes(t,r,e,function(u){a._mu.unlock(),n(u)})})},wt.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},wt.prototype.link=function(t,r,e){var n=this;this._mu.lock(function(){n._fs.link(t,r,function(a){n._mu.unlock(),e(a)})})},wt.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},wt.prototype.symlink=function(t,r,e,n){var a=this;this._mu.lock(function(){a._fs.symlink(t,r,e,function(u){a._mu.unlock(),n(u)})})},wt.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},wt.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(n,a){e._mu.unlock(),r(n,a)})})},wt.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Ue="/.deletedFiles.log";function bn(i){return 146|i}function me(i){return b.getFileFlag(i)}var kn=function(i){function t(r,e,n,a,u){i.call(this,r,e,n,a,u)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var n=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(a){n.resetDirty(),e(a)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(Gt),Nn=function(i){function t(r,e){if(i.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new p(c.EINVAL,"Writable file system must be writable.")}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,n){var a=this;this.createParentDirectoriesAsync(e.getPath(),function(u){if(u)return n(u);a._writable.writeFile(e.getPath(),e.getBuffer(),null,me("w"),e.getStats().mode,n)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,me("w"),e.getStats().mode)},t.prototype.getName=function(){return Or.Name},t.prototype.initialize=function(e){var n=this,a=this._initializeCallbacks,u=function(l){n._isInitialized=!l,n._initializeCallbacks=[],a.forEach(function(S){return S(l)})};if(this._isInitialized)return e();a.push(e),a.length===1&&this._writable.readFile(Ue,"utf8",me("r"),function(l,S){if(l){if(l.errno!==c.ENOENT)return u(l)}else n._deleteLog=S;n._reparseDeletionLog(),u()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,n,a){var u=this;if(!(!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.checkPathAsync(n,a))){if(e===Ue||n===Ue)return a(p.EPERM("Cannot rename deletion log."));if(e===n)return a();this.stat(e,!1,function(l,S){return l?a(l):u.stat(n,!1,function(x,O){var D=u;function V(rt){var ft=rt.shift();if(!ft)return a();var gt=v.resolve(e,ft),It=v.resolve(n,ft);D.rename(gt,It,function(Zt){if(Zt)return a(Zt);V(rt)})}var $=511;if(S.isDirectory()){if(x)return x.errno!==c.ENOENT?a(x):u._writable.exists(e,function(rt){if(rt)return u._writable.rename(e,n,a);u._writable.mkdir(n,$,function(ft){if(ft)return a(ft);u._readable.readdir(e,function(gt,It){if(gt)return a();V(It)})})});if($=O.mode,!O.isDirectory())return a(p.ENOTDIR(n));u.readdir(n,function(rt,ft){if(ft&&ft.length)return a(p.ENOTEMPTY(n));u._readable.readdir(e,function(gt,It){if(gt)return a();V(It)})})}if(O&&O.isDirectory())return a(p.EISDIR(n));u.readFile(e,null,me("r"),function(rt,ft){return rt?a(rt):u.writeFile(n,ft,null,me("w"),S.mode,function(gt){return gt?a(gt):u.unlink(e,a)})})})})}},t.prototype.renameSync=function(e,n){var a=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(n),e===Ue||n===Ue)throw p.EPERM("Cannot rename deletion log.");var u=this.statSync(e,!1);if(u.isDirectory()){if(e===n)return;var l=511;if(this.existsSync(n)){var S=this.statSync(n,!1);if(l=S.mode,S.isDirectory()){if(this.readdirSync(n).length>0)throw p.ENOTEMPTY(n)}else throw p.ENOTDIR(n)}this._writable.existsSync(e)?this._writable.renameSync(e,n):this._writable.existsSync(n)||this._writable.mkdirSync(n,l),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(x){a.renameSync(v.resolve(e,x),v.resolve(n,x))})}else{if(this.existsSync(n)&&this.statSync(n,!1).isDirectory())throw p.EISDIR(n);this.writeFileSync(n,this.readFileSync(e,null,me("r")),null,me("w"),u.mode)}e!==n&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,n,a){var u=this;!this.checkInitAsync(a)||this._writable.stat(e,n,function(l,S){l&&l.errno===c.ENOENT?(u._deletedFiles[e]&&a(p.ENOENT(e)),u._readable.stat(e,n,function(x,O){O&&(O=O.clone(),O.mode=bn(O.mode)),a(x,O)})):a(l,S)})},t.prototype.statSync=function(e,n){this.checkInitialized();try{return this._writable.statSync(e,n)}catch{if(this._deletedFiles[e])throw p.ENOENT(e);var a=this._readable.statSync(e,n).clone();return a.mode=bn(a.mode),a}},t.prototype.open=function(e,n,a,u){var l=this;!this.checkInitAsync(u)||this.checkPathAsync(e,u)||this.stat(e,!1,function(S,x){if(x)switch(n.pathExistsAction()){case A.TRUNCATE_FILE:return l.createParentDirectoriesAsync(e,function(O){if(O)return u(O);l._writable.open(e,n,a,u)});case A.NOP:return l._writable.exists(e,function(O){O?l._writable.open(e,n,a,u):(x=x.clone(),x.mode=a,l._readable.readFile(e,null,me("r"),function(D,V){if(D)return u(D);x.size===-1&&(x.size=V.length);var $=new kn(l,e,n,x,V);u(null,$)}))});default:return u(p.EEXIST(e))}else switch(n.pathNotExistsAction()){case A.CREATE_FILE:return l.createParentDirectoriesAsync(e,function(O){return O?u(O):l._writable.open(e,n,a,u)});default:return u(p.ENOENT(e))}})},t.prototype.openSync=function(e,n,a){if(this.checkInitialized(),this.checkPath(e),e===Ue)throw p.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(n.pathExistsAction()){case A.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,n,a);case A.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,n,a);var u=this._readable.readFileSync(e,null,me("r")),l=this._readable.statSync(e,!1).clone();return l.mode=a,new kn(this,e,n,l,u);default:throw p.EEXIST(e)}else switch(n.pathNotExistsAction()){case A.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,n,a);default:throw p.ENOENT(e)}},t.prototype.unlink=function(e,n){var a=this;!this.checkInitAsync(n)||this.checkPathAsync(e,n)||this.exists(e,function(u){if(!u)return n(p.ENOENT(e));a._writable.exists(e,function(l){if(l)return a._writable.unlink(e,function(S){if(S)return n(S);a.exists(e,function(x){x&&a.deletePath(e),n(null)})});a.deletePath(e),n(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw p.ENOENT(e)},t.prototype.rmdir=function(e,n){var a=this;if(!!this.checkInitAsync(n)){var u=function(){a.readdir(e,function(l,S){if(l)return n(l);if(S.length)return n(p.ENOTEMPTY(e));a.deletePath(e),n(null)})};this.exists(e,function(l){if(!l)return n(p.ENOENT(e));a._writable.exists(e,function(S){S?a._writable.rmdir(e,function(x){if(x)return n(x);a._readable.exists(e,function(O){O?u():n()})}):u()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw p.ENOTEMPTY(e);this.deletePath(e)}}else throw p.ENOENT(e)},t.prototype.mkdir=function(e,n,a){var u=this;!this.checkInitAsync(a)||this.exists(e,function(l){if(l)return a(p.EEXIST(e));u.createParentDirectoriesAsync(e,function(S){if(S)return a(S);u._writable.mkdir(e,n,a)})})},t.prototype.mkdirSync=function(e,n){if(this.checkInitialized(),this.existsSync(e))throw p.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,n)},t.prototype.readdir=function(e,n){var a=this;!this.checkInitAsync(n)||this.stat(e,!1,function(u,l){if(u)return n(u);if(!l.isDirectory())return n(p.ENOTDIR(e));a._writable.readdir(e,function(S,x){if(S&&S.code!=="ENOENT")return n(S);(S||!x)&&(x=[]),a._readable.readdir(e,function(O,D){(O||!D)&&(D=[]);var V={},$=x.concat(D.filter(function(rt){return!a._deletedFiles[e+"/"+rt]})).filter(function(rt){var ft=!V[rt];return V[rt]=!0,ft});n(null,$)})})})},t.prototype.readdirSync=function(e){var n=this;this.checkInitialized();var a=this.statSync(e,!1);if(!a.isDirectory())throw p.ENOTDIR(e);var u=[];try{u=u.concat(this._writable.readdirSync(e))}catch{}try{u=u.concat(this._readable.readdirSync(e).filter(function(S){return!n._deletedFiles[e+"/"+S]}))}catch{}var l={};return u.filter(function(S){var x=!l[S];return l[S]=!0,x})},t.prototype.exists=function(e,n){var a=this;this.checkInitialized(),this._writable.exists(e,function(u){if(u)return n(!0);a._readable.exists(e,function(l){n(l&&a._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,n,a,u){var l=this;!this.checkInitAsync(u)||this.operateOnWritableAsync(e,function(S){if(S)return u(S);l._writable.chmod(e,n,a,u)})},t.prototype.chmodSync=function(e,n,a){var u=this;this.checkInitialized(),this.operateOnWritable(e,function(){u._writable.chmodSync(e,n,a)})},t.prototype.chown=function(e,n,a,u,l){var S=this;!this.checkInitAsync(l)||this.operateOnWritableAsync(e,function(x){if(x)return l(x);S._writable.chown(e,n,a,u,l)})},t.prototype.chownSync=function(e,n,a,u){var l=this;this.checkInitialized(),this.operateOnWritable(e,function(){l._writable.chownSync(e,n,a,u)})},t.prototype.utimes=function(e,n,a,u){var l=this;!this.checkInitAsync(u)||this.operateOnWritableAsync(e,function(S){if(S)return u(S);l._writable.utimes(e,n,a,u)})},t.prototype.utimesSync=function(e,n,a){var u=this;this.checkInitialized(),this.operateOnWritable(e,function(){u._writable.utimesSync(e,n,a)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var n=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Ue,this._deleteLog,"utf8",b.getFileFlag("w"),420,function(a){n._deleteLogUpdatePending=!1,a?n._deleteLogError=a:n._deleteLogUpdateNeeded&&(n._deleteLogUpdateNeeded=!1,n.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(n){e._deletedFiles[n.slice(1)]=n.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new p(c.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var n=this._deleteLogError;return this._deleteLogError=null,e(n),!1}}else return e(new p(c.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Ue)throw p.EPERM(e)},t.prototype.checkPathAsync=function(e,n){return e===Ue?(n(p.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,n){var a=v.dirname(e),u=[],l=this;this._writable.stat(a,!1,S);function S(O,D){O?(u.push(a),a=v.dirname(a),l._writable.stat(a,!1,S)):x()}function x(){if(!u.length)return n();var O=u.pop();l._readable.stat(O,!1,function(D,V){if(!V)return n();l._writable.mkdir(O,V.mode,function($){if($)return n($);x()})})}},t.prototype.createParentDirectories=function(e){for(var n=this,a=v.dirname(e),u=[];!this._writable.existsSync(a);)u.push(a),a=v.dirname(a);u=u.reverse(),u.forEach(function(l){n._writable.mkdirSync(l,n.statSync(l,!1).mode)})},t.prototype.operateOnWritable=function(e,n){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),n();else throw p.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,n){var a=this;this.exists(e,function(u){if(!u)return n(p.ENOENT(e));a._writable.exists(e,function(l){if(l)n();else return a.copyToWritableAsync(e,n)})})},t.prototype.copyToWritable=function(e){var n=this.statSync(e,!1);n.isDirectory()?this._writable.mkdirSync(e,n.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,me("r")),null,me("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,n){var a=this;this.stat(e,!1,function(u,l){if(u)return n(u);if(l.isDirectory())return a._writable.mkdir(e,l.mode,n);a._readable.readFile(e,null,me("r"),function(S,x){if(S)return n(S);a.writeFile(e,x,null,me("w"),l.mode,n)})})},t}(it),Or=function(i){function t(r,e,n){n===void 0&&(n=!0),i.call(this,new Nn(r,e)),Nt(n,t.Name,{readable:"readable file system",writable:"writable file system"})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){try{var a=new t(e.writable,e.readable,!1);a.initialize(function(u){n(u,a)},!1)}catch(u){n(u)}},t.isAvailable=function(){return Nn.isAvailable()},t.prototype.initialize=function(e,n){n===void 0&&(n=!0),n&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),i.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return i.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return i.prototype.getFSUnlocked.call(this)},t}(wt);Or.Name="OverlayFS",Or.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Vt;(function(i){i[i.CB=0]="CB",i[i.FD=1]="FD",i[i.API_ERROR=2]="API_ERROR",i[i.STATS=3]="STATS",i[i.PROBE=4]="PROBE",i[i.FILEFLAG=5]="FILEFLAG",i[i.BUFFER=6]="BUFFER",i[i.ERROR=7]="ERROR"})(Vt||(Vt={}));var Si=function(){this._callbacks={},this._nextId=0};Si.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Vt.CB,id:r}},Si.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var Jr=function(){this._fileDescriptors={},this._nextId=0};Jr.prototype.toRemoteArg=function(t,r,e,n){var a=this._nextId++,u,l;this._fileDescriptors[a]=t,t.stat(function(S,x){S?n(S):(l=Ke(x.toBuffer()),e.isReadable()?t.read(f.alloc(x.size),0,x.size,0,function(O,D,V){O?n(O):(u=Ke(V),n(null,{type:Vt.FD,id:a,data:u,stat:l,path:r,flag:e.getFlagString()}))}):n(null,{type:Vt.FD,id:a,data:new ArrayBuffer(0),stat:l,path:r,flag:e.getFlagString()}))})},Jr.prototype.applyFdAPIRequest=function(t,r){var e=this,n=t.args[0];this._applyFdChanges(n,function(a,u){a?r(a):u[t.method](function(l){t.method==="close"&&delete e._fileDescriptors[n.id],r(l)})})},Jr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],n=Qe(t.data),a=C.fromBuffer(Qe(t.stat)),u=b.getFileFlag(t.flag);u.isWriteable()?e.write(n,0,n.length,u.isAppendable()?e.getPos():0,function(l){function S(){e.stat(function(x,O){x?r(x):O.mode!==a.mode?e.chmod(a.mode,function(D){r(D,e)}):r(x,e)})}l?r(l):u.isAppendable()?S():e.truncate(n.length,function(){S()})}):r(null,e)};function Kr(i){return{type:Vt.API_ERROR,errorData:Ke(i.writeToBuffer())}}function Rn(i){return p.fromBuffer(Qe(i.errorData))}function Tn(i){return{type:Vt.ERROR,name:i.name,message:i.message,stack:i.stack}}function On(i){var t=Qt[i.name];typeof t!="function"&&(t=Error);var r=new t(i.message);return r.stack=i.stack,r}function An(i){return{type:Vt.STATS,statsData:Ke(i.toBuffer())}}function Ln(i){return C.fromBuffer(Qe(i.statsData))}function Dn(i){return{type:Vt.FILEFLAG,flagStr:i.getFlagString()}}function Cn(i){return b.getFileFlag(i.flagStr)}function Ke(i){return K(i)}function Qe(i){return Ft(i)}function Bn(i){return{type:Vt.BUFFER,data:Ke(i)}}function Un(i){return Qe(i.data)}function Ra(i){return i&&typeof i=="object"&&i.hasOwnProperty("browserfsMessage")&&i.browserfsMessage}function Ta(i){return i&&typeof i=="object"&&i.hasOwnProperty("browserfsMessage")&&i.browserfsMessage}var Mn=function(i){function t(r,e,n,a,u,l){i.call(this,r,e,n,a,l),this._remoteFdId=u}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Vt.FD,id:this._remoteFdId,data:Ke(this.getBuffer()),stat:Ke(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,n){var a=this;this.isDirty()?this._fs.syncClose(e,this,function(u){u||a.resetDirty(),n(u)}):n()},t}(Gt),Qr=function(i){function t(r,e){var n=this;e===void 0&&(e=!0),i.call(this),this._callbackConverter=new Si,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,Nt(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(a){var u=a.data;if(Ta(u)){var l,S=u.args,x=new Array(S.length);for(l=0;l<x.length;l++)x[l]=n._argRemote2Local(S[l]);n._callbackConverter.toLocalArg(u.cbId).apply(null,x)}})}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){var a=new t(e.worker,!1);a.initialize(function(){n(null,a)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var n=new Jr;function a(l,S,x){switch(typeof l){case"object":l instanceof C?x(null,An(l)):l instanceof p?x(null,Kr(l)):l instanceof vt?x(null,n.toRemoteArg(l,S[0],S[1],x)):l instanceof b?x(null,Dn(l)):l instanceof f?x(null,Bn(l)):l instanceof Error?x(null,Tn(l)):x(null,l);break;default:x(null,l);break}}function u(l,S){if(!l)return l;switch(typeof l){case"object":if(typeof l.type=="number"){var x=l;switch(x.type){case Vt.CB:var O=l.id;return function(){var D=arguments,V,$=new Array(arguments.length),rt,ft=arguments.length;function gt(It){ft>0&&(ft=-1,rt={browserfsMessage:!0,cbId:O,args:[Kr(It)]},e.postMessage(rt))}for(V=0;V<arguments.length;V++)(function(It,Zt){a(Zt,S,function(ae,Oe){$[It]=Oe,ae?gt(ae):--ft===0&&(rt={browserfsMessage:!0,cbId:O,args:$},e.postMessage(rt))})})(V,D[V]);arguments.length===0&&(rt={browserfsMessage:!0,cbId:O,args:$},e.postMessage(rt))};case Vt.API_ERROR:return Rn(x);case Vt.STATS:return Ln(x);case Vt.FILEFLAG:return Cn(x);case Vt.BUFFER:return Un(x);case Vt.ERROR:return On(x);default:return l}}else return l;default:return l}}e.addEventListener("message",function(l){var S=l.data;if(Ra(S)){var x=S.args,O=new Array(x.length);switch(S.method){case"close":case"sync":(function(){var $=x[1];n.applyFdAPIRequest(S,function(rt){var ft={browserfsMessage:!0,cbId:$.id,args:rt?[Kr(rt)]:[]};e.postMessage(ft)})})();break;case"probe":(function(){var $=ct.getRootFS(),rt=x[1],ft={type:Vt.PROBE,isReadOnly:$.isReadOnly(),supportsLinks:$.supportsLinks(),supportsProps:$.supportsProps()},gt={browserfsMessage:!0,cbId:rt.id,args:[ft]};e.postMessage(gt)})();break;default:for(var D=0;D<x.length;D++)O[D]=u(x[D],O);var V=ct.getRootFS();V[S.method].apply(V,O);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var n=this;if(this._isInitialized)e();else{var a={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Bt()),this._callbackConverter.toRemoteArg(function(u){n._isInitialized=!0,n._isReadOnly=u.isReadOnly,n._supportLinks=u.supportsLinks,n._supportProps=u.supportsProps,e()})]};this._worker.postMessage(a)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,n,a){this._rpc("rename",arguments)},t.prototype.stat=function(e,n,a){this._rpc("stat",arguments)},t.prototype.open=function(e,n,a,u){this._rpc("open",arguments)},t.prototype.unlink=function(e,n){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,n){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,n,a){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,n){this._rpc("readdir",arguments)},t.prototype.exists=function(e,n){this._rpc("exists",arguments)},t.prototype.realpath=function(e,n,a){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,n,a){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,n,a,u){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,n,a,u,l,S){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,n,a,u,l,S){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,n,a,u){this._rpc("chmod",arguments)},t.prototype.chown=function(e,n,a,u,l){this._rpc("chown",arguments)},t.prototype.utimes=function(e,n,a,u){this._rpc("utimes",arguments)},t.prototype.link=function(e,n,a){this._rpc("link",arguments)},t.prototype.symlink=function(e,n,a,u){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,n){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,n,a){this._worker.postMessage({browserfsMessage:!0,method:e,args:[n.toRemoteArg(),this._callbackConverter.toRemoteArg(a)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var n=e;switch(n.type){case Vt.API_ERROR:return Rn(n);case Vt.FD:var a=n;return new Mn(this,a.path,b.getFileFlag(a.flag),C.fromBuffer(Qe(a.stat)),a.id,Qe(a.data));case Vt.STATS:return Ln(n);case Vt.FILEFLAG:return Cn(n);case Vt.BUFFER:return Un(n);case Vt.ERROR:return On(n);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,n){for(var a=this,u=new Array(n.length),l=0;l<n.length;l++)u[l]=a._argLocal2Remote(n[l]);var S={browserfsMessage:!0,method:e,args:u};this._worker.postMessage(S)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof C?An(e):e instanceof p?Kr(e):e instanceof Mn?e.toRemoteArg():e instanceof b?Dn(e):e instanceof f?Bn(e):e instanceof Error?Tn(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(it);Qr.Name="WorkerFS",Qr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(i,t){i.postMessage?t():t(new p(c.EINVAL,"option must be a Web Worker instance."))}}};function Oa(i,t,r){var e=new XMLHttpRequest;e.open("GET",i,!0);var n=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",n=e.responseType==="json"}catch{n=!1}break;default:return r(new p(c.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(a){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?f.from(e.response):Bt());case"json":return n?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new p(e.status,"XHR error."))},e.send()}function Aa(i,t){var r=new XMLHttpRequest;r.open("GET",i,!1);var e=null,n=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(a){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var u=r.responseText;e=f.alloc(u.length);for(var l=0;l<u.length;l++)e[l]=u.charCodeAt(l);return;case"json":e=JSON.parse(r.responseText);return}else{n=new p(r.status,"XHR error.");return}},r.send(),n)throw n;return e}function La(i,t){var r=new XMLHttpRequest;switch(r.open("GET",i,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new p(c.EINVAL,"Invalid download type: "+t)}var e,n;if(r.onreadystatechange=function(a){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=f.from(r.response);break;case"json":e=JSON.parse(r.response);break}else n=new p(r.status,"XHR error.")},r.send(),n)throw n;return e}function Pn(i,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,i),e.onreadystatechange=function(n){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new p(c.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new p(e.status,"XHR HEAD error."))},e.send()}var zn=Oa,Da=Et&&typeof Blob<"u"?La:Aa;function Ca(i){var t=-1;return Pn(!1,i,function(r,e){if(r)throw r;t=e}),t}function Ba(i,t){Pn(!0,i,t)}var xe=function(){this._index={},this.addPath("/",new de)};xe.fromListing=function(t){var r=new xe,e=new de;r._index["/"]=e;for(var n=[["",t,e]];n.length>0;){var a=void 0,u=n.pop(),l=u[0],S=u[1],x=u[2];for(var O in S)if(S.hasOwnProperty(O)){var D=S[O],V=l+"/"+O;D?(r._index[V]=a=new de,n.push([V,D,a])):a=new lr(new C(L.FILE,-1,365)),x&&(x._ls[O]=a)}}return r},xe.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var n=r._index[e],a=n.getListing(),u=0,l=a;u<l.length;u+=1){var S=l[u],x=n.getItem(S);Me(x)&&t(x.getData())}},xe.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),n=e[0],a=e[1],u=this._index[n];return u===void 0&&t!=="/"&&(u=new de,!this.addPath(n,u))||t!=="/"&&!u.addItem(a,r)?!1:(He(r)&&(this._index[t]=r),!0)},xe.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),n=e===0?"/":t.substring(0,e),a=t.substring(e+1),u=this._index[n];return u===void 0&&(u=new de,this.addPathFast(n,u)),u.addItem(a,r)?(r.isDir()&&(this._index[t]=r),!0):!1},xe.prototype.removePath=function(t){var r=this,e=this._split_path(t),n=e[0],a=e[1],u=this._index[n];if(u===void 0)return null;var l=u.remItem(a);if(l===null)return null;if(He(l)){for(var S=l.getListing(),x=0,O=S;x<O.length;x+=1){var D=O[x];r.removePath(t+"/"+D)}t!=="/"&&delete this._index[t]}return l},xe.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},xe.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],n=r[1],a=this._index[e];return a===void 0?null:e===t?a:a.getItem(n)},xe.prototype._split_path=function(t){var r=v.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var lr=function(t){this.data=t};lr.prototype.isFile=function(){return!0},lr.prototype.isDir=function(){return!1},lr.prototype.getData=function(){return this.data},lr.prototype.setData=function(t){this.data=t};var de=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};de.prototype.isFile=function(){return!1},de.prototype.isDir=function(){return!0},de.prototype.getData=function(){return this.data},de.prototype.getStats=function(){return new C(L.DIRECTORY,4096,365)},de.prototype.getListing=function(){return Object.keys(this._ls)},de.prototype.getItem=function(t){var r=this._ls[t];return r||null},de.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},de.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function Me(i){return!!i&&i.isFile()}function He(i){return!!i&&i.isDir()}function Ua(i,t,r){try{r(null,i.toString(t))}catch(e){r(e)}}var $r=function(i){function t(r,e,n){e===void 0&&(e=""),n===void 0&&(n=!0),i.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var a=null;if(typeof r=="string"){if(a=this._requestFileSync(r,"json"),!a)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else a=r;Nt(n,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=xe.fromListing(a)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,n,e.baseUrl,!1):n(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,n,a,u){a===void 0&&(a=e.slice(0,e.lastIndexOf("/")+1)),u===void 0&&(u=!0),u&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+a+`" }, cb)' instead.`),zn(e,"json",function(l,S){l?n(l):n(null,new t(S,a,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,n){n(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,n){var a=this._index.getInode(e);if(Me(a)){if(a===null)throw p.ENOENT(e);var u=a.getData();u.size=n.length,u.fileData=n}else throw p.EISDIR(e)},t.prototype.stat=function(e,n,a){var u=this._index.getInode(e);if(u===null)return a(p.ENOENT(e));var l;Me(u)?(l=u.getData(),l.size<0?this._requestFileSizeAsync(e,function(S,x){if(S)return a(S);l.size=x,a(null,l.clone())}):a(null,l.clone())):He(u)?(l=u.getStats(),a(null,l)):a(p.FileError(c.EINVAL,e))},t.prototype.statSync=function(e,n){var a=this._index.getInode(e);if(a===null)throw p.ENOENT(e);var u;if(Me(a))u=a.getData(),u.size<0&&(u.size=this._requestFileSizeSync(e));else if(He(a))u=a.getStats();else throw p.FileError(c.EINVAL,e);return u},t.prototype.open=function(e,n,a,u){if(n.isWriteable())return u(new p(c.EPERM,e));var l=this,S=this._index.getInode(e);if(S===null)return u(p.ENOENT(e));if(Me(S)){var x=S.getData();switch(n.pathExistsAction()){case A.THROW_EXCEPTION:case A.TRUNCATE_FILE:return u(p.EEXIST(e));case A.NOP:if(x.fileData)return u(null,new fe(l,e,n,x.clone(),x.fileData));this._requestFileAsync(e,"buffer",function(O,D){return O?u(O):(x.size=D.length,x.fileData=D,u(null,new fe(l,e,n,x.clone(),D)))});break;default:return u(new p(c.EINVAL,"Invalid FileMode object."))}}else return u(p.EISDIR(e))},t.prototype.openSync=function(e,n,a){if(n.isWriteable())throw new p(c.EPERM,e);var u=this._index.getInode(e);if(u===null)throw p.ENOENT(e);if(Me(u)){var l=u.getData();switch(n.pathExistsAction()){case A.THROW_EXCEPTION:case A.TRUNCATE_FILE:throw p.EEXIST(e);case A.NOP:if(l.fileData)return new fe(this,e,n,l.clone(),l.fileData);var S=this._requestFileSync(e,"buffer");return l.size=S.length,l.fileData=S,new fe(this,e,n,l.clone(),S);default:throw new p(c.EINVAL,"Invalid FileMode object.")}}else throw p.EISDIR(e)},t.prototype.readdir=function(e,n){try{n(null,this.readdirSync(e))}catch(a){n(a)}},t.prototype.readdirSync=function(e){var n=this._index.getInode(e);if(n===null)throw p.ENOENT(e);if(He(n))return n.getListing();throw p.ENOTDIR(e)},t.prototype.readFile=function(e,n,a,u){var l=u;this.open(e,a,420,function(S,x){if(S)return u(S);u=function(V,$){x.close(function(rt){return V||(V=rt),l(V,$)})};var O=x,D=O.getBuffer();n===null?u(S,Tt(D)):Ua(D,n,u)})},t.prototype.readFileSync=function(e,n,a){var u=this.openSync(e,a,420);try{var l=u,S=l.getBuffer();return n===null?Tt(S):S.toString(n)}finally{u.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,n,a){zn(this.getXhrPath(e),n,a)},t.prototype._requestFileSync=function(e,n){return Da(this.getXhrPath(e),n)},t.prototype._requestFileSizeAsync=function(e,n){Ba(this.getXhrPath(e),n)},t.prototype._requestFileSizeSync=function(e){return Ca(this.getXhrPath(e))},t}(it);$r.Name="XmlHttpRequest",$r.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var $e=function(){};$e.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,n=0;n<e;n++){var a=t.charCodeAt(n);if(a>127){var u=$e.extendedChars.indexOf(t.charAt(n));u>-1&&(a=u+128)}r[a]=n}return e},$e.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var n=t[e];n>127?r[e]=$e.extendedChars[n-128]:r[e]=String.fromCharCode(n)}return r.join("")},$e.byteLength=function(t){return t.length},$e.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var Ma=s(31).inflateRaw,jn={},Wn;(function(i){i[i.MSDOS=0]="MSDOS",i[i.AMIGA=1]="AMIGA",i[i.OPENVMS=2]="OPENVMS",i[i.UNIX=3]="UNIX",i[i.VM_CMS=4]="VM_CMS",i[i.ATARI_ST=5]="ATARI_ST",i[i.OS2_HPFS=6]="OS2_HPFS",i[i.MAC=7]="MAC",i[i.Z_SYSTEM=8]="Z_SYSTEM",i[i.CP_M=9]="CP_M",i[i.NTFS=10]="NTFS",i[i.MVS=11]="MVS",i[i.VSE=12]="VSE",i[i.ACORN_RISC=13]="ACORN_RISC",i[i.VFAT=14]="VFAT",i[i.ALT_MVS=15]="ALT_MVS",i[i.BEOS=16]="BEOS",i[i.TANDEM=17]="TANDEM",i[i.OS_400=18]="OS_400",i[i.OSX=19]="OSX"})(Wn||(Wn={}));var pr;(function(i){i[i.STORED=0]="STORED",i[i.SHRUNK=1]="SHRUNK",i[i.REDUCED_1=2]="REDUCED_1",i[i.REDUCED_2=3]="REDUCED_2",i[i.REDUCED_3=4]="REDUCED_3",i[i.REDUCED_4=5]="REDUCED_4",i[i.IMPLODE=6]="IMPLODE",i[i.DEFLATE=8]="DEFLATE",i[i.DEFLATE64=9]="DEFLATE64",i[i.TERSE_OLD=10]="TERSE_OLD",i[i.BZIP2=12]="BZIP2",i[i.LZMA=14]="LZMA",i[i.TERSE_NEW=18]="TERSE_NEW",i[i.LZ77=19]="LZ77",i[i.WAVPACK=97]="WAVPACK",i[i.PPMD=98]="PPMD"})(pr||(pr={}));function Hn(i,t){var r=t&31,e=(t>>5&15)-1,n=(t>>9)+1980,a=i&31,u=i>>5&63,l=i>>11;return new Date(n,e,r,l,u,a)}function ti(i,t,r,e){return e===0?"":t?i.toString("utf8",r,r+e):$e.byte2str(i.slice(r,r+e))}var we=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new p(c.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};we.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},we.prototype.flags=function(){return this.data.readUInt16LE(6)},we.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},we.prototype.lastModFileTime=function(){return Hn(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},we.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},we.prototype.crc32=function(){return this.data.readUInt32LE(14)},we.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},we.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},we.prototype.fileName=function(){return ti(this.data,this.useUTF8(),30,this.fileNameLength())},we.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},we.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},we.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var Ar=function(t,r,e){this.header=t,this.record=r,this.data=e};Ar.prototype.decompress=function(){var t=this.header.compressionMethod(),r=jn[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=pr[t];throw e||(e="Unknown: "+t),new p(c.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},Ar.prototype.getHeader=function(){return this.header},Ar.prototype.getRecord=function(){return this.record},Ar.prototype.getRawData=function(){return this.data};var Ei=function(t){this.data=t};Ei.prototype.crc32=function(){return this.data.readUInt32LE(0)},Ei.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},Ei.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)};var Vn=function(t){if(this.data=t,this.data.readUInt32LE(0)!==134630224)throw new p(c.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};Vn.prototype.length=function(){return this.data.readUInt32LE(4)},Vn.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())};var Zn=function(t){if(this.data=t,this.data.readUInt32LE(0)!==84233040)throw new p(c.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};Zn.prototype.size=function(){return this.data.readUInt16LE(4)},Zn.prototype.signatureData=function(){return this.data.slice(6,6+this.size())};var At=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new p(c.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};At.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},At.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},At.prototype.flag=function(){return this.data.readUInt16LE(8)},At.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},At.prototype.lastModFileTime=function(){return Hn(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},At.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},At.prototype.crc32=function(){return this.data.readUInt32LE(16)},At.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},At.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},At.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},At.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},At.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},At.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},At.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},At.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},At.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},At.prototype.produceFilename=function(){var t=ti(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},At.prototype.fileName=function(){return this._filename},At.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},At.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},At.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return ti(this.data,this.useUTF8(),t,this.fileCommentLength())},At.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},At.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},At.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},At.prototype.isFile=function(){return!this.isDirectory()},At.prototype.useUTF8=function(){return(this.flag()&2048)===2048},At.prototype.isEncrypted=function(){return(this.flag()&1)===1},At.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new we(this.zipData.slice(t));return new Ar(r,this,this.zipData.slice(t+r.totalSize()))},At.prototype.getData=function(){return this.getFileData().decompress()},At.prototype.getRawData=function(){return this.getFileData().getRawData()},At.prototype.getStats=function(){return new C(L.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Re=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new p(c.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Re.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Re.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Re.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Re.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Re.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Re.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Re.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Re.prototype.cdZipComment=function(){return ti(this.data,!0,22,this.cdZipCommentLength())},Re.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var qn=function(t,r,e,n){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=n},tr=function(i){function t(r,e,n){e===void 0&&(e=""),n===void 0&&(n=!0),i.call(this),this.name=e,this._index=new xe,this._directoryEntries=[],this._eocd=null,Nt(n,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof qn?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){try{t.computeIndex(e.zipData,function(a){var u=new t(a,e.name,!1);n(null,u)},!1)}catch(a){n(a)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,n){jn[e]=n},t.computeIndex=function(e,n,a){a===void 0&&(a=!0),a&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var u=new xe,l=t.getEOCD(e);if(l.diskNumber()!==l.cdDiskNumber())throw new p(c.EINVAL,"ZipFS does not support spanned zip files.");var S=l.cdOffset();if(S===4294967295)throw new p(c.EINVAL,"ZipFS does not support Zip64.");var x=S+l.cdSize();t.computeIndexResponsive(e,u,S,x,n,[],l)},t.getEOCD=function(e){for(var n=22,a=Math.min(n+65535,e.length-1),u=n;u<a;u++)if(e.readUInt32LE(e.length-u)===101010256)return new Re(e.slice(e.length-u));throw new p(c.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,n){var a=e.fileName();if(a.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");a.charAt(a.length-1)==="/"&&(a=a.substr(0,a.length-1)),e.isDirectory()?n.addPathFast("/"+a,new de(e)):n.addPathFast("/"+a,new lr(e))},t.computeIndexResponsive=function(e,n,a,u,l,S,x){if(a<u){for(var O=0;O++<200&&a<u;){var D=new At(e,e.slice(a));t.addToIndex(D,n),a+=D.totalSize(),S.push(D)}wi(function(){t.computeIndexResponsive(e,n,a,u,l,S,x)})}else l(new qn(n,S,x,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var n=this._index.getInode(e);if(n===null)throw p.ENOENT(e);if(Me(n))return n.getData();if(He(n))return n.getData();throw p.EPERM("Invalid inode: "+n)},t.prototype.getCentralDirectoryEntryAt=function(e){var n=this._directoryEntries[e];if(!n)throw new RangeError("Invalid directory index: "+e+".");return n},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,n){n(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,n){var a=this._index.getInode(e);if(a===null)throw p.ENOENT(e);var u;if(Me(a))u=a.getData().getStats();else if(He(a))u=a.getStats();else throw new p(c.EINVAL,"Invalid inode.");return u},t.prototype.openSync=function(e,n,a){if(n.isWriteable())throw new p(c.EPERM,e);var u=this._index.getInode(e);if(u)if(Me(u)){var l=u.getData(),S=l.getStats();switch(n.pathExistsAction()){case A.THROW_EXCEPTION:case A.TRUNCATE_FILE:throw p.EEXIST(e);case A.NOP:return new fe(this,e,n,S,l.getData());default:throw new p(c.EINVAL,"Invalid FileMode object.")}}else throw p.EISDIR(e);else throw p.ENOENT(e)},t.prototype.readdirSync=function(e){var n=this._index.getInode(e);if(n){if(He(n))return n.getListing();throw p.ENOTDIR(e)}else throw p.ENOENT(e)},t.prototype.readFileSync=function(e,n,a){var u=this.openSync(e,a,420);try{var l=u,S=l.getBuffer();return n===null?Tt(S):S.toString(n)}finally{u.closeSync()}},t.prototype.populateIndex=function(){var e=this,n=this._eocd=t.getEOCD(this.data);if(n.diskNumber()!==n.cdDiskNumber())throw new p(c.EINVAL,"ZipFS does not support spanned zip files.");var a=n.cdOffset();if(a===4294967295)throw new p(c.EINVAL,"ZipFS does not support Zip64.");for(var u=a+n.cdSize();a<u;){var l=new At(e.data,e.data.slice(a));a+=l.totalSize(),t.addToIndex(l,e._index),e._directoryEntries.push(l)}},t}(xt);tr.Name="ZipFS",tr.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:ee},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},tr.CompressionMethod=pr,tr.RegisterDecompressionMethod(pr.DEFLATE,function(i,t,r){return bt(Ma(i.slice(0,t),{chunkSize:r}))}),tr.RegisterDecompressionMethod(pr.STORED,function(i,t,r){return Tt(i,0,r)});var Pa="IEEE_P1282";function ye(i,t,r){return i.toString("ascii",t,t+r).trim()}function _i(i,t,r){if(r===1)return String.fromCharCode(i[t]);for(var e=Math.floor(r/2),n=new Array(e),a=0;a<e;a++){var u=t+(a<<1);n[a]=String.fromCharCode(i[u+1]|i[u]<<8)}return n.join("")}function Te(i,t){var r=parseInt(ye(i,t,4),10),e=parseInt(ye(i,t+4,2),10),n=parseInt(ye(i,t+6,2),10),a=parseInt(ye(i,t+8,2),10),u=parseInt(ye(i,t+10,2),10),l=parseInt(ye(i,t+12,2),10),S=parseInt(ye(i,t+14,2),10);return new Date(r,e,n,a,u,l,S*100)}function er(i,t){var r=i[t],e=i[t+1],n=i[t+2],a=i[t+3],u=i[t+4],l=i[t+5];return new Date(r,e-1,n,a,u,l)}function za(i,t){var r=i.slice(t),e=new $t(r);switch(e.signatureWord()){case 17221:return new Kn(r);case 20548:return new Ha(r);case 21328:return new Qn(r);case 21332:return new $n(r);case 17746:return new to(r);case 17747:return new Va(r);case 20568:return new ro(r);case 20558:return new Za(r);case 21324:return new xi(r);case 20045:return new io(r);case 17228:return new Fi(r);case 20556:return new qa(r);case 21061:return new no(r);case 21574:return new oo(r);case 21318:return new Xa(r);case 21074:return new eo(r);default:return e}}function Xn(i,t,r,e){r=r-4;for(var n=new Array;t<r;){var a=za(i,t),u=a.length();if(u===0)return n;if(t+=u,a instanceof $n)break;a instanceof Kn?n=n.concat(a.getEntries(e)):n.push(a)}return n}var dr=function(t){this._data=t};dr.prototype.type=function(){return this._data[0]},dr.prototype.standardIdentifier=function(){return ye(this._data,1,5)},dr.prototype.version=function(){return this._data[6]},dr.prototype.data=function(){return this._data.slice(7,2048)};var Yn=function(i){function t(r){i.call(this,r),this._root=null}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Te(this._data,813)},t.prototype.volumeModificationDate=function(){return Te(this._data,830)},t.prototype.volumeExpirationDate=function(){return Te(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Te(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},t.prototype.reserved=function(){return this._data.slice(1395,1395+653)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(dr),ja=function(i){function t(r){if(i.call(this,r),this.type()!==1)throw new p(c.EIO,"Invalid primary volume descriptor.")}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new Gn(e,-1)},t.prototype._getString=function(e,n){return this._getString(e,n)},t}(Yn),Wa=function(i){function t(r){if(i.call(this,r),this.type()!==2)throw new p(c.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),n=e[2];if(e[0]!==37||e[1]!==47||n!==64&&n!==67&&n!==69)throw new p(c.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new Jn(e,-1)},t.prototype._getString=function(e,n){return _i(this._data,e,n)},t}(Yn),jt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};jt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},jt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},jt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},jt.prototype.length=function(){return this._data[0]},jt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},jt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},jt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},jt.prototype.recordingDate=function(){return er(this._data,18)},jt.prototype.fileFlags=function(){return this._data[25]},jt.prototype.fileUnitSize=function(){return this._data[26]},jt.prototype.interleaveGapSize=function(){return this._data[27]},jt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},jt.prototype.identifier=function(){return this._getString(33,this._data[32])},jt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var n=e.indexOf(";");return n===-1?e:e[n-1]==="."?e.slice(0,n-1):e.slice(0,n)},jt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof Fi}).length>0),r},jt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof xi}).length>0},jt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),n=this._getGetString(),a=0,u=e;a<u.length;a+=1){var l=u[a];if(l instanceof xi){for(var S=l.componentRecords(),x=0,O=S;x<O.length;x+=1){var D=O[x],V=D.flags();V&2?r+="./":V&4?r+="../":V&8?r+="/":(r+=D.content(n),V&1||(r+="/"))}if(!l.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},jt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},jt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},jt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},jt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(S){return S instanceof io});if(r.length===0||r[0].flags()&6)return null;for(var e="",n=this._getGetString(),a=0,u=r;a<u.length;a+=1){var l=u[a];if(e+=l.name(n),!(l.flags()&1))break}return e},jt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=Xn(this._data,r,this.length(),t)},jt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof Qn&&e.checkBytesPass())for(var n=1;n<r.length;n++){var a=r[n];if(a instanceof eo||a instanceof to&&a.extensionIdentifier()===Pa)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var Gn=function(i){function t(r,e){i.call(this,r,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,n){return ye(this._data,e,n)},t.prototype._constructDirectory=function(e){return new Ya(this,e)},t.prototype._getGetString=function(){return ye},t}(jt),Jn=function(i){function t(r,e){i.call(this,r,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,n){return _i(this._data,e,n)},t.prototype._constructDirectory=function(e){return new Ga(this,e)},t.prototype._getGetString=function(){return _i},t}(jt),$t=function(t){this._data=t};$t.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},$t.prototype.signatureWordString=function(){return ye(this._data,0,2)},$t.prototype.length=function(){return this._data[2]},$t.prototype.suVersion=function(){return this._data[3]};var Kn=function(i){function t(r){i.call(this,r),this._entries=null}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var n=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=Xn(e,n,this.continuationLength(),e)}return this._entries},t}($t),Ha=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}($t),Qn=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}($t),$n=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}($t),to=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return ye(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return ye(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return ye(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}($t),Va=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}($t),eo=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}($t),ro=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}($t),Za=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}($t),xi=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,n=new Array,a=5;a<this.length();){var u=new Lr(e._data.slice(a));n.push(u),a+=u.length()}return n},t}($t),Lr=function(t){this._data=t};Lr.prototype.flags=function(){return this._data[0]},Lr.prototype.length=function(){return 2+this.componentLength()},Lr.prototype.componentLength=function(){return this._data[1]},Lr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var io=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}($t),Fi=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}($t),qa=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}($t),no=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}($t),oo=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?Te(this._data,5):er(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Te(this._data,5+e*17):er(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Te(this._data,5+e*17):er(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Te(this._data,5+e*17):er(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Te(this._data,5+e*17):er(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Te(this._data,5+e*17):er(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}($t),Xa=function(i){function t(r){i.call(this,r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}($t),Dr=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var n=t.lba(),a=n+t.dataLength();if(!(t.fileFlags()&2)){var u=t.getSUEntries(r).filter(function(O){return O instanceof Fi})[0];n=u.childDirectoryLba()*2048,a=1/0}for(;n<a;){var l=r[n];if(l===0){n++;continue}var S=e._constructDirectoryRecord(r.slice(n)),x=S.fileName(r);x!=="\0"&&x!==""?(!S.hasRockRidge()||S.getSUEntries(r).filter(function(O){return O instanceof no}).length===0)&&(e._fileMap[x]=S,e._fileList.push(x)):a===1/0&&(a=n+S.dataLength()),n+=S.length()}};Dr.prototype.getRecord=function(t){return this._fileMap[t]},Dr.prototype.getFileList=function(){return this._fileList},Dr.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var Ya=function(i){function t(r,e){i.call(this,r,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Gn(e,this._record.getRockRidgeOffset())},t}(Dr),Ga=function(i){function t(r,e){i.call(this,r,e)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Jn(e,this._record.getRockRidgeOffset())},t}(Dr),ei=function(i){function t(r,e,n){var a=this;e===void 0&&(e=""),n===void 0&&(n=!0),i.call(this),this._data=r,Nt(n,t.Name,{data:"ISO data as a Buffer",name:e});for(var u=!1,l=16*2048,S=new Array;!u;){var x=r.slice(l),O=new dr(x);switch(O.type()){case 1:S.push(new ja(x));break;case 2:S.push(new Wa(x));break;case 255:u=!0;break}l+=2048}if(S.length===0)throw new p(c.EIO,"Unable to find a suitable volume descriptor.");S.forEach(function(D){(!a._pvd||a._pvd.type()!==2)&&(a._pvd=D)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=function(e,n){var a,u;try{a=new t(e.data,e.name,!1)}catch(l){l=l}finally{n(u,a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,n){n(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,n){var a=this._getDirectoryRecord(e);if(a===null)throw p.ENOENT(e);return this._getStats(e,a)},t.prototype.openSync=function(e,n,a){if(n.isWriteable())throw new p(c.EPERM,e);var u=this._getDirectoryRecord(e);if(u){if(u.isSymlink(this._data))return this.openSync(v.resolve(e,u.getSymlinkPath(this._data)),n,a);if(u.isDirectory(this._data))throw p.EISDIR(e);var l=u.getFile(this._data),S=this._getStats(e,u);switch(n.pathExistsAction()){case A.THROW_EXCEPTION:case A.TRUNCATE_FILE:throw p.EEXIST(e);case A.NOP:return new fe(this,e,n,S,l);default:throw new p(c.EINVAL,"Invalid FileMode object.")}}else throw p.ENOENT(e)},t.prototype.readdirSync=function(e){var n=this._getDirectoryRecord(e);if(n){if(n.isDirectory(this._data))return n.getDirectory(this._data).getFileList().slice(0);throw p.ENOTDIR(e)}else throw p.ENOENT(e)},t.prototype.readFileSync=function(e,n,a){var u=this.openSync(e,a,420);try{var l=u,S=l.getBuffer();return n===null?Tt(S):S.toString(n)}finally{u.closeSync()}},t.prototype._getDirectoryRecord=function(e){var n=this;if(e==="/")return this._root;for(var a=e.split("/").slice(1),u=this._root,l=0,S=a;l<S.length;l+=1){var x=S[l];if(u.isDirectory(n._data)){if(u=u.getDirectory(n._data).getRecord(x),!u)return null}else return null}return u},t.prototype._getStats=function(e,n){if(n.isSymlink(this._data)){var a=v.resolve(e,n.getSymlinkPath(this._data)),u=this._getDirectoryRecord(a);return u?this._getStats(a,u):null}else{var l=n.dataLength(),S=365,x=n.recordingDate(),O=x,D=x,V=x;if(n.hasRockRidge())for(var $=n.getSUEntries(this._data),rt=0,ft=$;rt<ft.length;rt+=1){var gt=ft[rt];if(gt instanceof ro)S=gt.mode();else if(gt instanceof oo){var It=gt.flags();It&4&&(O=gt.access()),It&2&&(D=gt.modify()),It&1&&(V=gt.creation())}}return S=S&365,new C(n.isDirectory(this._data)?L.DIRECTORY:L.FILE,l,S,O,D,V)}},t}(xt);ei.Name="IsoFS",ei.Options={data:{type:"object",description:"The ISO file in a buffer",validator:ee}},[I,Hr,Vr,ur,qr,fr,Ir,ei,kr,cr,Or,Qr,$r,tr].forEach(function(i){var t=i.Create;i.Create=function(r,e){var n=typeof r=="function",a=n?r:e,u=n?{}:r;function l(S){S?a(S):t.call(i,u,a)}N(i,u,l)}});var ri={AsyncMirror:I,Dropbox:Hr,Emscripten:Vr,FolderAdapter:ur,HTML5FS:qr,InMemory:fr,IndexedDB:Ir,IsoFS:ei,LocalStorage:kr,MountableFileSystem:cr,OverlayFS:Or,WorkerFS:Qr,XmlHttpRequest:$r,ZipFS:tr};w.initializeTTYs&&w.initializeTTYs();function Ja(i){i.Buffer=f,i.process=w;var t=i.require?i.require:null;i.require=function(r){var e=so(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function Ka(i,t){ri[i]=t}function so(i){switch(i){case"fs":return ct;case"path":return v;case"buffer":return E;case"process":return w;case"bfs_utils":return R;default:return ri[i]}}function ao(i){return ct.initialize(i)}function Qa(i,t){Ii(i,function(r,e){e?(ao(e),t()):t(r)})}function Ii(i,t){var r=i.fs;if(!r)return t(new p(c.EPERM,'Missing "fs" property on configuration object.'));var e=i.options,n=0,a=!1;function u(){if(!a){a=!0;var x=ri[r];x?x.Create(e,t):t(new p(c.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var l=!1,S=Object.keys(e).filter(function(x){return x!=="fs"});S.forEach(function(x){var O=e[x];O!==null&&typeof O=="object"&&O.fs&&(n++,Ii(O,function(D,V){if(n--,D){if(a)return;a=!0,t(D)}else e[x]=V,n===0&&l&&u()}))}),l=!0}n===0&&u()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(i){return function(t,r){return t<0&&(t=this.length+t),i.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(i,t){i===void 0&&(i=0),t===void 0&&(t=this.length);var r=this;return i<0&&(i=this.length+i,i<0&&(i=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<i&&(t=i),new Uint8Array(r.buffer,r.byteOffset+i,t-i)})),o.install=Ja,o.registerFileSystem=Ka,o.BFSRequire=so,o.initialize=ao,o.configure=Qa,o.getFileSystem=Ii,o.EmscriptenFS=pt,o.FileSystem=ri,o.Errors=T,o.setImmediate=wi}).call(o,s(1),function(){return this}(),s(5)(h),s(6))},function(h,o,s){h.exports=s(2).Buffer},function(h,o,s){(function(c){"use strict";var y=s(3),d=s(4);o.Buffer=c,o.SlowBuffer=U,o.INSPECT_MAX_BYTES=50;var w=2147483647;o.kMaxLength=w,c.TYPED_ARRAY_SUPPORT=E(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var I=new Uint8Array(1);return I.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},I.foo()===42}catch{return!1}}function v(I){if(I>w)throw new RangeError("Invalid typed array length");var g=new Uint8Array(I);return g.__proto__=c.prototype,g}function c(I,g,m){if(typeof I=="number"){if(typeof g=="string")throw new Error("If encoding is specified then the first argument must be a string");return A(I)}return _(I,g,m)}typeof Symbol<"u"&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192;function _(I,g,m){if(typeof I=="number")throw new TypeError('"value" argument must not be a number');return Gt(I)?C(I,g,m):typeof I=="string"?b(I,g):G(I)}c.from=function(I,g,m){return _(I,g,m)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array;function p(I){if(typeof I!="number")throw new TypeError('"size" argument must be a number');if(I<0)throw new RangeError('"size" argument must not be negative')}function T(I,g,m){return p(I),I<=0?v(I):g!==void 0?typeof m=="string"?v(I).fill(g,m):v(I).fill(g):v(I)}c.alloc=function(I,g,m){return T(I,g,m)};function A(I){return p(I),v(I<0?0:W(I)|0)}c.allocUnsafe=function(I){return A(I)},c.allocUnsafeSlow=function(I){return A(I)};function b(I,g){if((typeof g!="string"||g==="")&&(g="utf8"),!c.isEncoding(g))throw new TypeError('"encoding" must be a valid string encoding');var m=_t(I,g)|0,k=v(m),B=k.write(I,g);return B!==m&&(k=k.slice(0,B)),k}function L(I){for(var g=I.length<0?0:W(I.length)|0,m=v(g),k=0;k<g;k+=1)m[k]=I[k]&255;return m}function C(I,g,m){if(g<0||I.byteLength<g)throw new RangeError("'offset' is out of bounds");if(I.byteLength<g+(m||0))throw new RangeError("'length' is out of bounds");var k;return g===void 0&&m===void 0?k=new Uint8Array(I):m===void 0?k=new Uint8Array(I,g):k=new Uint8Array(I,g,m),k.__proto__=c.prototype,k}function G(I){if(c.isBuffer(I)){var g=W(I.length)|0,m=v(g);return m.length===0||I.copy(m,0,0,g),m}if(I){if(fe(I)||"length"in I)return typeof I.length!="number"||Ie(I.length)?v(0):L(I);if(I.type==="Buffer"&&Array.isArray(I.data))return L(I.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function W(I){if(I>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return I|0}function U(I){return+I!=I&&(I=0),c.alloc(+I)}c.isBuffer=function(g){return g!=null&&g._isBuffer===!0},c.compare=function(g,m){if(!c.isBuffer(g)||!c.isBuffer(m))throw new TypeError("Arguments must be Buffers");if(g===m)return 0;for(var k=g.length,B=m.length,Z=0,J=Math.min(k,B);Z<J;++Z)if(g[Z]!==m[Z]){k=g[Z],B=m[Z];break}return k<B?-1:B<k?1:0},c.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(g,m){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return c.alloc(0);var k;if(m===void 0)for(m=0,k=0;k<g.length;++k)m+=g[k].length;var B=c.allocUnsafe(m),Z=0;for(k=0;k<g.length;++k){var J=g[k];if(!c.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(B,Z),Z+=J.length}return B};function _t(I,g){if(c.isBuffer(I))return I.length;if(fe(I)||Gt(I))return I.byteLength;typeof I!="string"&&(I=""+I);var m=I.length;if(m===0)return 0;for(var k=!1;;)switch(g){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":case void 0:return Q(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return xt(I).length;default:if(k)return Q(I).length;g=(""+g).toLowerCase(),k=!0}}c.byteLength=_t;function et(I,g,m){var k=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,g>>>=0,m<=g))return"";for(I||(I="utf8");;)switch(I){case"hex":return bt(this,g,m);case"utf8":case"utf-8":return Yt(this,g,m);case"ascii":return K(this,g,m);case"latin1":case"binary":return ut(this,g,m);case"base64":return Et(this,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,g,m);default:if(k)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),k=!0}}c.prototype._isBuffer=!0;function St(I,g,m){var k=I[g];I[g]=I[m],I[m]=k}c.prototype.swap16=function(){var g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<g;m+=2)St(this,m,m+1);return this},c.prototype.swap32=function(){var g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<g;m+=4)St(this,m,m+3),St(this,m+1,m+2);return this},c.prototype.swap64=function(){var g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<g;m+=8)St(this,m,m+7),St(this,m+1,m+6),St(this,m+2,m+5),St(this,m+3,m+4);return this},c.prototype.toString=function(){var g=this.length;return g===0?"":arguments.length===0?Yt(this,0,g):et.apply(this,arguments)},c.prototype.equals=function(g){if(!c.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:c.compare(this,g)===0},c.prototype.inspect=function(){var g="",m=o.INSPECT_MAX_BYTES;return this.length>0&&(g=this.toString("hex",0,m).match(/.{2}/g).join(" "),this.length>m&&(g+=" ... ")),"<Buffer "+g+">"},c.prototype.compare=function(g,m,k,B,Z){if(!c.isBuffer(g))throw new TypeError("Argument must be a Buffer");if(m===void 0&&(m=0),k===void 0&&(k=g?g.length:0),B===void 0&&(B=0),Z===void 0&&(Z=this.length),m<0||k>g.length||B<0||Z>this.length)throw new RangeError("out of range index");if(B>=Z&&m>=k)return 0;if(B>=Z)return-1;if(m>=k)return 1;if(m>>>=0,k>>>=0,B>>>=0,Z>>>=0,this===g)return 0;for(var J=Z-B,kt=k-m,Lt=Math.min(J,kt),Ut=this.slice(B,Z),Jt=g.slice(m,k),Ct=0;Ct<Lt;++Ct)if(Ut[Ct]!==Jt[Ct]){J=Ut[Ct],kt=Jt[Ct];break}return J<kt?-1:kt<J?1:0};function dt(I,g,m,k,B){if(I.length===0)return-1;if(typeof m=="string"?(k=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Ie(m)&&(m=B?0:I.length-1),m<0&&(m=I.length+m),m>=I.length){if(B)return-1;m=I.length-1}else if(m<0)if(B)m=0;else return-1;if(typeof g=="string"&&(g=c.from(g,k)),c.isBuffer(g))return g.length===0?-1:M(I,g,m,k,B);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(I,g,m):Uint8Array.prototype.lastIndexOf.call(I,g,m):M(I,[g],m,k,B);throw new TypeError("val must be string, number or Buffer")}function M(I,g,m,k,B){var Z=1,J=I.length,kt=g.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(I.length<2||g.length<2)return-1;Z=2,J/=2,kt/=2,m/=2}function Lt(or,Ze){return Z===1?or[Ze]:or.readUInt16BE(Ze*Z)}var Ut;if(B){var Jt=-1;for(Ut=m;Ut<J;Ut++)if(Lt(I,Ut)===Lt(g,Jt===-1?0:Ut-Jt)){if(Jt===-1&&(Jt=Ut),Ut-Jt+1===kt)return Jt*Z}else Jt!==-1&&(Ut-=Ut-Jt),Jt=-1}else for(m+kt>J&&(m=J-kt),Ut=m;Ut>=0;Ut--){for(var Ct=!0,be=0;be<kt;be++)if(Lt(I,Ut+be)!==Lt(g,be)){Ct=!1;break}if(Ct)return Ut}return-1}c.prototype.includes=function(g,m,k){return this.indexOf(g,m,k)!==-1},c.prototype.indexOf=function(g,m,k){return dt(this,g,m,k,!0)},c.prototype.lastIndexOf=function(g,m,k){return dt(this,g,m,k,!1)};function tt(I,g,m,k){m=Number(m)||0;var B=I.length-m;k?(k=Number(k),k>B&&(k=B)):k=B;var Z=g.length;if(Z%2!==0)throw new TypeError("Invalid hex string");k>Z/2&&(k=Z/2);for(var J=0;J<k;++J){var kt=parseInt(g.substr(J*2,2),16);if(Ie(kt))return J;I[m+J]=kt}return J}function ct(I,g,m,k){return vt(Q(g,I.length-m),I,m,k)}function Rt(I,g,m,k){return vt(pt(g),I,m,k)}function yt(I,g,m,k){return Rt(I,g,m,k)}function Dt(I,g,m,k){return vt(xt(g),I,m,k)}function Nt(I,g,m,k){return vt(it(g,I.length-m),I,m,k)}c.prototype.write=function(g,m,k,B){if(m===void 0)B="utf8",k=this.length,m=0;else if(k===void 0&&typeof m=="string")B=m,k=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(k)?(k=k>>>0,B===void 0&&(B="utf8")):(B=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Z=this.length-m;if((k===void 0||k>Z)&&(k=Z),g.length>0&&(k<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");for(var J=!1;;)switch(B){case"hex":return tt(this,g,m,k);case"utf8":case"utf-8":return ct(this,g,m,k);case"ascii":return Rt(this,g,m,k);case"latin1":case"binary":return yt(this,g,m,k);case"base64":return Dt(this,g,m,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Nt(this,g,m,k);default:if(J)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),J=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Et(I,g,m){return g===0&&m===I.length?y.fromByteArray(I):y.fromByteArray(I.slice(g,m))}function Yt(I,g,m){m=Math.min(I.length,m);for(var k=[],B=g;B<m;){var Z=I[B],J=null,kt=Z>239?4:Z>223?3:Z>191?2:1;if(B+kt<=m){var Lt,Ut,Jt,Ct;switch(kt){case 1:Z<128&&(J=Z);break;case 2:Lt=I[B+1],(Lt&192)===128&&(Ct=(Z&31)<<6|Lt&63,Ct>127&&(J=Ct));break;case 3:Lt=I[B+1],Ut=I[B+2],(Lt&192)===128&&(Ut&192)===128&&(Ct=(Z&15)<<12|(Lt&63)<<6|Ut&63,Ct>2047&&(Ct<55296||Ct>57343)&&(J=Ct));break;case 4:Lt=I[B+1],Ut=I[B+2],Jt=I[B+3],(Lt&192)===128&&(Ut&192)===128&&(Jt&192)===128&&(Ct=(Z&15)<<18|(Lt&63)<<12|(Ut&63)<<6|Jt&63,Ct>65535&&Ct<1114112&&(J=Ct))}}J===null?(J=65533,kt=1):J>65535&&(J-=65536,k.push(J>>>10&1023|55296),J=56320|J&1023),k.push(J),B+=kt}return z(k)}var P=4096;function z(I){var g=I.length;if(g<=P)return String.fromCharCode.apply(String,I);for(var m="",k=0;k<g;)m+=String.fromCharCode.apply(String,I.slice(k,k+=P));return m}function K(I,g,m){var k="";m=Math.min(I.length,m);for(var B=g;B<m;++B)k+=String.fromCharCode(I[B]&127);return k}function ut(I,g,m){var k="";m=Math.min(I.length,m);for(var B=g;B<m;++B)k+=String.fromCharCode(I[B]);return k}function bt(I,g,m){var k=I.length;(!g||g<0)&&(g=0),(!m||m<0||m>k)&&(m=k);for(var B="",Z=g;Z<m;++Z)B+=Y(I[Z]);return B}function mt(I,g,m){for(var k=I.slice(g,m),B="",Z=0;Z<k.length;Z+=2)B+=String.fromCharCode(k[Z]+k[Z+1]*256);return B}c.prototype.slice=function(g,m){var k=this.length;g=~~g,m=m===void 0?k:~~m,g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),m<0?(m+=k,m<0&&(m=0)):m>k&&(m=k),m<g&&(m=g);var B=this.subarray(g,m);return B.__proto__=c.prototype,B};function Ft(I,g,m){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+g>m)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(g,m,k){g=g>>>0,m=m>>>0,k||Ft(g,m,this.length);for(var B=this[g],Z=1,J=0;++J<m&&(Z*=256);)B+=this[g+J]*Z;return B},c.prototype.readUIntBE=function(g,m,k){g=g>>>0,m=m>>>0,k||Ft(g,m,this.length);for(var B=this[g+--m],Z=1;m>0&&(Z*=256);)B+=this[g+--m]*Z;return B},c.prototype.readUInt8=function(g,m){return g=g>>>0,m||Ft(g,1,this.length),this[g]},c.prototype.readUInt16LE=function(g,m){return g=g>>>0,m||Ft(g,2,this.length),this[g]|this[g+1]<<8},c.prototype.readUInt16BE=function(g,m){return g=g>>>0,m||Ft(g,2,this.length),this[g]<<8|this[g+1]},c.prototype.readUInt32LE=function(g,m){return g=g>>>0,m||Ft(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},c.prototype.readUInt32BE=function(g,m){return g=g>>>0,m||Ft(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},c.prototype.readIntLE=function(g,m,k){g=g>>>0,m=m>>>0,k||Ft(g,m,this.length);for(var B=this[g],Z=1,J=0;++J<m&&(Z*=256);)B+=this[g+J]*Z;return Z*=128,B>=Z&&(B-=Math.pow(2,8*m)),B},c.prototype.readIntBE=function(g,m,k){g=g>>>0,m=m>>>0,k||Ft(g,m,this.length);for(var B=m,Z=1,J=this[g+--B];B>0&&(Z*=256);)J+=this[g+--B]*Z;return Z*=128,J>=Z&&(J-=Math.pow(2,8*m)),J},c.prototype.readInt8=function(g,m){return g=g>>>0,m||Ft(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},c.prototype.readInt16LE=function(g,m){g=g>>>0,m||Ft(g,2,this.length);var k=this[g]|this[g+1]<<8;return k&32768?k|4294901760:k},c.prototype.readInt16BE=function(g,m){g=g>>>0,m||Ft(g,2,this.length);var k=this[g+1]|this[g]<<8;return k&32768?k|4294901760:k},c.prototype.readInt32LE=function(g,m){return g=g>>>0,m||Ft(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},c.prototype.readInt32BE=function(g,m){return g=g>>>0,m||Ft(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},c.prototype.readFloatLE=function(g,m){return g=g>>>0,m||Ft(g,4,this.length),d.read(this,g,!0,23,4)},c.prototype.readFloatBE=function(g,m){return g=g>>>0,m||Ft(g,4,this.length),d.read(this,g,!1,23,4)},c.prototype.readDoubleLE=function(g,m){return g=g>>>0,m||Ft(g,8,this.length),d.read(this,g,!0,52,8)},c.prototype.readDoubleBE=function(g,m){return g=g>>>0,m||Ft(g,8,this.length),d.read(this,g,!1,52,8)};function Tt(I,g,m,k,B,Z){if(!c.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>B||g<Z)throw new RangeError('"value" argument is out of bounds');if(m+k>I.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(g,m,k,B){if(g=+g,m=m>>>0,k=k>>>0,!B){var Z=Math.pow(2,8*k)-1;Tt(this,g,m,k,Z,0)}var J=1,kt=0;for(this[m]=g&255;++kt<k&&(J*=256);)this[m+kt]=g/J&255;return m+k},c.prototype.writeUIntBE=function(g,m,k,B){if(g=+g,m=m>>>0,k=k>>>0,!B){var Z=Math.pow(2,8*k)-1;Tt(this,g,m,k,Z,0)}var J=k-1,kt=1;for(this[m+J]=g&255;--J>=0&&(kt*=256);)this[m+J]=g/kt&255;return m+k},c.prototype.writeUInt8=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,1,255,0),this[m]=g&255,m+1},c.prototype.writeUInt16LE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,2,65535,0),this[m]=g&255,this[m+1]=g>>>8,m+2},c.prototype.writeUInt16BE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,2,65535,0),this[m]=g>>>8,this[m+1]=g&255,m+2},c.prototype.writeUInt32LE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,4,4294967295,0),this[m+3]=g>>>24,this[m+2]=g>>>16,this[m+1]=g>>>8,this[m]=g&255,m+4},c.prototype.writeUInt32BE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,4,4294967295,0),this[m]=g>>>24,this[m+1]=g>>>16,this[m+2]=g>>>8,this[m+3]=g&255,m+4},c.prototype.writeIntLE=function(g,m,k,B){if(g=+g,m=m>>>0,!B){var Z=Math.pow(2,8*k-1);Tt(this,g,m,k,Z-1,-Z)}var J=0,kt=1,Lt=0;for(this[m]=g&255;++J<k&&(kt*=256);)g<0&&Lt===0&&this[m+J-1]!==0&&(Lt=1),this[m+J]=(g/kt>>0)-Lt&255;return m+k},c.prototype.writeIntBE=function(g,m,k,B){if(g=+g,m=m>>>0,!B){var Z=Math.pow(2,8*k-1);Tt(this,g,m,k,Z-1,-Z)}var J=k-1,kt=1,Lt=0;for(this[m+J]=g&255;--J>=0&&(kt*=256);)g<0&&Lt===0&&this[m+J+1]!==0&&(Lt=1),this[m+J]=(g/kt>>0)-Lt&255;return m+k},c.prototype.writeInt8=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,1,127,-128),g<0&&(g=255+g+1),this[m]=g&255,m+1},c.prototype.writeInt16LE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,2,32767,-32768),this[m]=g&255,this[m+1]=g>>>8,m+2},c.prototype.writeInt16BE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,2,32767,-32768),this[m]=g>>>8,this[m+1]=g&255,m+2},c.prototype.writeInt32LE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,4,2147483647,-2147483648),this[m]=g&255,this[m+1]=g>>>8,this[m+2]=g>>>16,this[m+3]=g>>>24,m+4},c.prototype.writeInt32BE=function(g,m,k){return g=+g,m=m>>>0,k||Tt(this,g,m,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[m]=g>>>24,this[m+1]=g>>>16,this[m+2]=g>>>8,this[m+3]=g&255,m+4};function Wt(I,g,m,k,B,Z){if(m+k>I.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Bt(I,g,m,k,B){return g=+g,m=m>>>0,B||Wt(I,g,m,4,34028234663852886e22,-34028234663852886e22),d.write(I,g,m,k,23,4),m+4}c.prototype.writeFloatLE=function(g,m,k){return Bt(this,g,m,!0,k)},c.prototype.writeFloatBE=function(g,m,k){return Bt(this,g,m,!1,k)};function ee(I,g,m,k,B){return g=+g,m=m>>>0,B||Wt(I,g,m,8,17976931348623157e292,-17976931348623157e292),d.write(I,g,m,k,52,8),m+8}c.prototype.writeDoubleLE=function(g,m,k){return ee(this,g,m,!0,k)},c.prototype.writeDoubleBE=function(g,m,k){return ee(this,g,m,!1,k)},c.prototype.copy=function(g,m,k,B){if(k||(k=0),!B&&B!==0&&(B=this.length),m>=g.length&&(m=g.length),m||(m=0),B>0&&B<k&&(B=k),B===k||g.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("sourceStart out of bounds");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),g.length-m<B-k&&(B=g.length-m+k);var Z=B-k,J;if(this===g&&k<m&&m<B)for(J=Z-1;J>=0;--J)g[J+m]=this[J+k];else if(Z<1e3)for(J=0;J<Z;++J)g[J+m]=this[J+k];else Uint8Array.prototype.set.call(g,this.subarray(k,k+Z),m);return Z},c.prototype.fill=function(g,m,k,B){if(typeof g=="string"){if(typeof m=="string"?(B=m,m=0,k=this.length):typeof k=="string"&&(B=k,k=this.length),g.length===1){var Z=g.charCodeAt(0);Z<256&&(g=Z)}if(B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!c.isEncoding(B))throw new TypeError("Unknown encoding: "+B)}else typeof g=="number"&&(g=g&255);if(m<0||this.length<m||this.length<k)throw new RangeError("Out of range index");if(k<=m)return this;m=m>>>0,k=k===void 0?this.length:k>>>0,g||(g=0);var J;if(typeof g=="number")for(J=m;J<k;++J)this[J]=g;else{var kt=c.isBuffer(g)?g:new c(g,B),Lt=kt.length;for(J=0;J<k-m;++J)this[J+m]=kt[J%Lt]}return this};var N=/[^+/0-9A-Za-z-_]/g;function R(I){if(I=I.trim().replace(N,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function Y(I){return I<16?"0"+I.toString(16):I.toString(16)}function Q(I,g){g=g||1/0;for(var m,k=I.length,B=null,Z=[],J=0;J<k;++J){if(m=I.charCodeAt(J),m>55295&&m<57344){if(!B){if(m>56319){(g-=3)>-1&&Z.push(239,191,189);continue}else if(J+1===k){(g-=3)>-1&&Z.push(239,191,189);continue}B=m;continue}if(m<56320){(g-=3)>-1&&Z.push(239,191,189),B=m;continue}m=(B-55296<<10|m-56320)+65536}else B&&(g-=3)>-1&&Z.push(239,191,189);if(B=null,m<128){if((g-=1)<0)break;Z.push(m)}else if(m<2048){if((g-=2)<0)break;Z.push(m>>6|192,m&63|128)}else if(m<65536){if((g-=3)<0)break;Z.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((g-=4)<0)break;Z.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return Z}function pt(I){for(var g=[],m=0;m<I.length;++m)g.push(I.charCodeAt(m)&255);return g}function it(I,g){for(var m,k,B,Z=[],J=0;J<I.length&&!((g-=2)<0);++J)m=I.charCodeAt(J),k=m>>8,B=m%256,Z.push(B),Z.push(k);return Z}function xt(I){return y.toByteArray(R(I))}function vt(I,g,m,k){for(var B=0;B<k&&!(B+m>=g.length||B>=I.length);++B)g[B+m]=I[B];return B}function Gt(I){return I instanceof ArrayBuffer||I!=null&&I.constructor!=null&&I.constructor.name==="ArrayBuffer"&&typeof I.byteLength=="number"}function fe(I){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(I)}function Ie(I){return I!==I}}).call(o,s(1))},function(h,o){"use strict";o.byteLength=c,o.toByteArray=_,o.fromByteArray=A;for(var s=[],f=[],y=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,E=d.length;w<E;++w)s[w]=d[w],f[d.charCodeAt(w)]=w;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function v(b){var L=b.length;if(L%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return b[L-2]==="="?2:b[L-1]==="="?1:0}function c(b){return b.length*3/4-v(b)}function _(b){var L,C,G,W,U,_t,et=b.length;U=v(b),_t=new y(et*3/4-U),G=U>0?et-4:et;var St=0;for(L=0,C=0;L<G;L+=4,C+=3)W=f[b.charCodeAt(L)]<<18|f[b.charCodeAt(L+1)]<<12|f[b.charCodeAt(L+2)]<<6|f[b.charCodeAt(L+3)],_t[St++]=W>>16&255,_t[St++]=W>>8&255,_t[St++]=W&255;return U===2?(W=f[b.charCodeAt(L)]<<2|f[b.charCodeAt(L+1)]>>4,_t[St++]=W&255):U===1&&(W=f[b.charCodeAt(L)]<<10|f[b.charCodeAt(L+1)]<<4|f[b.charCodeAt(L+2)]>>2,_t[St++]=W>>8&255,_t[St++]=W&255),_t}function p(b){return s[b>>18&63]+s[b>>12&63]+s[b>>6&63]+s[b&63]}function T(b,L,C){for(var G,W=[],U=L;U<C;U+=3)G=(b[U]<<16)+(b[U+1]<<8)+b[U+2],W.push(p(G));return W.join("")}function A(b){for(var L,C=b.length,G=C%3,W="",U=[],_t=16383,et=0,St=C-G;et<St;et+=_t)U.push(T(b,et,et+_t>St?St:et+_t));return G===1?(L=b[C-1],W+=s[L>>2],W+=s[L<<4&63],W+="=="):G===2&&(L=(b[C-2]<<8)+b[C-1],W+=s[L>>10],W+=s[L>>4&63],W+=s[L<<2&63],W+="="),U.push(W),U.join("")}},function(h,o){o.read=function(s,f,y,d,w){var E,v,c=w*8-d-1,_=(1<<c)-1,p=_>>1,T=-7,A=y?w-1:0,b=y?-1:1,L=s[f+A];for(A+=b,E=L&(1<<-T)-1,L>>=-T,T+=c;T>0;E=E*256+s[f+A],A+=b,T-=8);for(v=E&(1<<-T)-1,E>>=-T,T+=d;T>0;v=v*256+s[f+A],A+=b,T-=8);if(E===0)E=1-p;else{if(E===_)return v?NaN:(L?-1:1)*(1/0);v=v+Math.pow(2,d),E=E-p}return(L?-1:1)*v*Math.pow(2,E-d)},o.write=function(s,f,y,d,w,E){var v,c,_,p=E*8-w-1,T=(1<<p)-1,A=T>>1,b=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=d?0:E-1,C=d?1:-1,G=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(c=isNaN(f)?1:0,v=T):(v=Math.floor(Math.log(f)/Math.LN2),f*(_=Math.pow(2,-v))<1&&(v--,_*=2),v+A>=1?f+=b/_:f+=b*Math.pow(2,1-A),f*_>=2&&(v++,_/=2),v+A>=T?(c=0,v=T):v+A>=1?(c=(f*_-1)*Math.pow(2,w),v=v+A):(c=f*Math.pow(2,A-1)*Math.pow(2,w),v=0));w>=8;s[y+L]=c&255,L+=C,c/=256,w-=8);for(v=v<<w|c,p+=w;p>0;s[y+L]=v&255,L+=C,v/=256,p-=8);s[y+L-C]|=G*128}},function(h,o){h.exports=function(s){return s.webpackPolyfill||(s.deprecate=function(){},s.paths=[],s.children=[],s.webpackPolyfill=1),s}},function(h,o,s){"use strict";var f=s(7),y=new f,d={};function w(v){d[v]||(typeof y[v]=="function"?d[v]=function(){return y[v].apply(y,arguments)}:d[v]=y[v])}for(var E in y)w(E);d.initializeTTYs=function(){y.stdin===null&&(y.initializeTTYs(),d.stdin=y.stdin,d.stdout=y.stdout,d.stderr=y.stderr)},y.nextTick(function(){d.initializeTTYs()}),h.exports=d},function(h,o,s){(function(f){"use strict";var y=this&&this.__extends||function(_,p){for(var T in p)p.hasOwnProperty(T)&&(_[T]=p[T]);function A(){this.constructor=_}_.prototype=p===null?Object.create(p):(A.prototype=p.prototype,new A)},d=s(8),w=null,E=function(){function _(p,T){this.fun=p,this.array=T}return _.prototype.run=function(){this.fun.apply(null,this.array)},_}(),v=function(){function _(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return _.prototype.push=function(p){var T=this;this._queue.push(p)===1&&!this._draining&&setTimeout(function(){return T._drainQueue()},0)},_.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},_.prototype._drainQueue=function(){var p=this;if(!this._draining){var T=setTimeout(function(){return p._cleanUpNextTick()});this._draining=!0;for(var A=this._queue.length;A;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<A;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,A=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(T)}},_}(),c=function(_){y(p,_);function p(){_.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new v,this.execPath=f,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return p.prototype.chdir=function(T){w===null&&(w=s(9)),this._cwd=w.resolve(T)},p.prototype.cwd=function(){return this._cwd},p.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},p.prototype.nextTick=function(T){for(var A=[],b=1;b<arguments.length;b++)A[b-1]=arguments[b];this._queue.push(new E(T,A))},p.prototype.abort=function(){this.emit("abort")},p.prototype.exit=function(T){this.exitCode=T,this.emit("exit",[T])},p.prototype.getgid=function(){return this._gid},p.prototype.setgid=function(T){typeof T=="number"?this._gid=T:this._gid=1},p.prototype.getuid=function(){return this._uid},p.prototype.setuid=function(T){typeof T=="number"?this._uid=T:this._uid=1},p.prototype.kill=function(T,A){this.emit("kill",[T,A])},p.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},p.prototype.umask=function(T){T===void 0&&(T=this._mask);var A=this._mask;return this._mask=T,this.emit("umask",[T]),A},p.prototype.hrtime=function(){var T;typeof performance<"u"?T=performance.now():Date.now?T=Date.now():T=new Date().getTime();var A=T/1e3|0;return T-=A*1e3,T=T*1e6|0,[A,T]},p.prototype.initializeTTYs=function(){if(this.stdout===null){var T=s(10);this.stdout=new T,this.stderr=new T,this.stdin=new T}},p.prototype.disconnect=function(){},p}(d.EventEmitter);h.exports=c}).call(o,"/")},function(h,o){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}h.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(E){if(!y(E)||E<0||isNaN(E))throw TypeError("n must be a positive number");return this._maxListeners=E,this},s.prototype.emit=function(E){var v,c,_,p,T,A;if(this._events||(this._events={}),E==="error"&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){if(v=arguments[1],v instanceof Error)throw v;var b=new Error('Uncaught, unspecified "error" event. ('+v+")");throw b.context=v,b}if(c=this._events[E],w(c))return!1;if(f(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:p=Array.prototype.slice.call(arguments,1),c.apply(this,p)}else if(d(c))for(p=Array.prototype.slice.call(arguments,1),A=c.slice(),_=A.length,T=0;T<_;T++)A[T].apply(this,p);return!0},s.prototype.addListener=function(E,v){var c;if(!f(v))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",E,f(v.listener)?v.listener:v),this._events[E]?d(this._events[E])?this._events[E].push(v):this._events[E]=[this._events[E],v]:this._events[E]=v,d(this._events[E])&&!this._events[E].warned&&(w(this._maxListeners)?c=s.defaultMaxListeners:c=this._maxListeners,c&&c>0&&this._events[E].length>c&&(this._events[E].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[E].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(E,v){if(!f(v))throw TypeError("listener must be a function");var c=!1;function _(){this.removeListener(E,_),c||(c=!0,v.apply(this,arguments))}return _.listener=v,this.on(E,_),this},s.prototype.removeListener=function(E,v){var c,_,p,T;if(!f(v))throw TypeError("listener must be a function");if(!this._events||!this._events[E])return this;if(c=this._events[E],p=c.length,_=-1,c===v||f(c.listener)&&c.listener===v)delete this._events[E],this._events.removeListener&&this.emit("removeListener",E,v);else if(d(c)){for(T=p;T-- >0;)if(c[T]===v||c[T].listener&&c[T].listener===v){_=T;break}if(_<0)return this;c.length===1?(c.length=0,delete this._events[E]):c.splice(_,1),this._events.removeListener&&this.emit("removeListener",E,v)}return this},s.prototype.removeAllListeners=function(E){var v,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[E]&&delete this._events[E],this;if(arguments.length===0){for(v in this._events)v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[E],f(c))this.removeListener(E,c);else if(c)for(;c.length;)this.removeListener(E,c[c.length-1]);return delete this._events[E],this},s.prototype.listeners=function(E){var v;return!this._events||!this._events[E]?v=[]:f(this._events[E])?v=[this._events[E]]:v=this._events[E].slice(),v},s.prototype.listenerCount=function(E){if(this._events){var v=this._events[E];if(f(v))return 1;if(v)return v.length}return 0},s.listenerCount=function(E,v){return E.listenerCount(v)};function f(E){return typeof E=="function"}function y(E){return typeof E=="number"}function d(E){return typeof E=="object"&&E!==null}function w(E){return E===void 0}},function(h,o,s){(function(f){"use strict";var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function d(v){var c=y.exec(v);return c.shift(),c}var w=function(){function v(){}return v.normalize=function(c){c===""&&(c=".");var _=c.charAt(0)===v.sep;c=v._removeDuplicateSeps(c);for(var p=c.split(v.sep),T=[],A=0;A<p.length;A++){var b=p[A];b!=="."&&(b===".."&&(_||!_&&T.length>0&&T[0]!=="..")?T.pop():T.push(b))}if(!_&&T.length<2)switch(T.length){case 1:T[0]===""&&T.unshift(".");break;default:T.push(".")}return c=T.join(v.sep),_&&c.charAt(0)!==v.sep&&(c=v.sep+c),c},v.join=function(){for(var c=[],_=0;_<arguments.length;_++)c[_-0]=arguments[_];for(var p=[],T=0;T<c.length;T++){var A=c[T];if(typeof A!="string")throw new TypeError("Invalid argument type to path.join: "+typeof A);A!==""&&p.push(A)}return v.normalize(p.join(v.sep))},v.resolve=function(){for(var c=[],_=0;_<arguments.length;_++)c[_-0]=arguments[_];for(var p=[],T=0;T<c.length;T++){var A=c[T];if(typeof A!="string")throw new TypeError("Invalid argument type to path.join: "+typeof A);A!==""&&(A.charAt(0)===v.sep&&(p=[]),p.push(A))}var b=v.normalize(p.join(v.sep));if(b.length>1&&b.charAt(b.length-1)===v.sep)return b.substr(0,b.length-1);if(b.charAt(0)!==v.sep){b.charAt(0)==="."&&(b.length===1||b.charAt(1)===v.sep)&&(b=b.length===1?"":b.substr(2));var L=f.cwd();b!==""?b=this.normalize(L+(L!=="/"?v.sep:"")+b):b=L}return b},v.relative=function(c,_){var p;c=v.resolve(c),_=v.resolve(_);var T=c.split(v.sep),A=_.split(v.sep);A.shift(),T.shift();var b=0,L=[];for(p=0;p<T.length;p++){var C=T[p];if(C!==A[p]){b=T.length-p;break}}L=A.slice(p),T.length===1&&T[0]===""&&(b=0),b>T.length&&(b=T.length);var G="";for(p=0;p<b;p++)G+="../";return G+=L.join(v.sep),G.length>1&&G.charAt(G.length-1)===v.sep&&(G=G.substr(0,G.length-1)),G},v.dirname=function(c){c=v._removeDuplicateSeps(c);var _=c.charAt(0)===v.sep,p=c.split(v.sep);return p.pop()===""&&p.length>0&&p.pop(),p.length>1||p.length===1&&!_?p.join(v.sep):_?v.sep:"."},v.basename=function(c,_){if(_===void 0&&(_=""),c==="")return c;c=v.normalize(c);var p=c.split(v.sep),T=p[p.length-1];if(T===""&&p.length>1)return p[p.length-2];if(_.length>0){var A=T.substr(T.length-_.length);if(A===_)return T.substr(0,T.length-_.length)}return T},v.extname=function(c){c=v.normalize(c);var _=c.split(v.sep);if(c=_.pop(),c===""&&_.length>0&&(c=_.pop()),c==="..")return"";var p=c.lastIndexOf(".");return p===-1||p===0?"":c.substr(p)},v.isAbsolute=function(c){return c.length>0&&c.charAt(0)===v.sep},v._makeLong=function(c){return c},v.parse=function(c){var _=d(c);return{root:_[0],dir:_[0]+_[1].slice(0,-1),base:_[2],ext:_[3],name:_[2].slice(0,_[2].length-_[3].length)}},v.format=function(c){if(c===null||typeof c!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof c);var _=c.root||"";if(typeof _!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof c.root);var p=c.dir?c.dir+v.sep:"",T=c.base||"";return p+T},v._removeDuplicateSeps=function(c){return c=c.replace(this._replaceRegex,this.sep),c},v.sep="/",v._replaceRegex=new RegExp("//+","g"),v.delimiter=":",v.posix=v,v.win32=v,v}(),E=w;h.exports=w}).call(o,s(6))},function(h,o,s){(function(f){"use strict";var y=this&&this.__extends||function(E,v){for(var c in v)v.hasOwnProperty(c)&&(E[c]=v[c]);function _(){this.constructor=E}E.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)},d=s(11),w=function(E){y(v,E);function v(){E.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return v.prototype.setRawMode=function(c){this.isRaw!==c&&(this.isRaw=c,this.emit("modeChange"))},v.prototype.changeColumns=function(c){c!==this.columns&&(this.columns=c,this.emit("resize"))},v.prototype.changeRows=function(c){c!==this.rows&&(this.rows=c,this.emit("resize"))},v.isatty=function(c){return c&&c instanceof v},v.prototype._write=function(c,_,p){var T;try{var A;typeof c=="string"?A=new f(c,_):A=c,this._bufferedWrites.push(A),this._waitingForWrites&&this._read(1024)}catch(b){T=b}finally{p(T)}},v.prototype._read=function(c){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},v}(d.Duplex);h.exports=w}).call(o,s(1))},function(h,o,s){h.exports=d;var f=s(8).EventEmitter,y=s(12);y(d,f),d.Readable=s(13),d.Writable=s(27),d.Duplex=s(28),d.Transform=s(29),d.PassThrough=s(30),d.Stream=d;function d(){f.call(this)}d.prototype.pipe=function(w,E){var v=this;function c(C){w.writable&&w.write(C)===!1&&v.pause&&v.pause()}v.on("data",c);function _(){v.readable&&v.resume&&v.resume()}w.on("drain",_),!w._isStdio&&(!E||E.end!==!1)&&(v.on("end",T),v.on("close",A));var p=!1;function T(){p||(p=!0,w.end())}function A(){p||(p=!0,typeof w.destroy=="function"&&w.destroy())}function b(C){if(L(),f.listenerCount(this,"error")===0)throw C}v.on("error",b),w.on("error",b);function L(){v.removeListener("data",c),w.removeListener("drain",_),v.removeListener("end",T),v.removeListener("close",A),v.removeListener("error",b),w.removeListener("error",b),v.removeListener("end",L),v.removeListener("close",L),w.removeListener("close",L)}return v.on("end",L),v.on("close",L),w.on("close",L),w.emit("pipe",v),w}},function(h,o){typeof Object.create=="function"?h.exports=function(f,y){f.super_=y,f.prototype=Object.create(y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:h.exports=function(f,y){f.super_=y;var d=function(){};d.prototype=y.prototype,f.prototype=new d,f.prototype.constructor=f}},function(h,o,s){(function(f){var y=function(){try{return s(11)}catch{}}();o=h.exports=s(14),o.Stream=y||o,o.Readable=o,o.Writable=s(22),o.Duplex=s(21),o.Transform=s(25),o.PassThrough=s(26),!f.browser&&f.env.READABLE_STREAM==="disable"&&y&&(h.exports=y)}).call(o,s(6))},function(h,o,s){(function(f){"use strict";h.exports=U;var y=s(15),d=s(16),w;U.ReadableState=W;var E=s(8).EventEmitter,v=function(N,R){return N.listeners(R).length},c;(function(){try{c=s(11)}catch{}finally{c||(c=s(8).EventEmitter)}})();var _=s(2).Buffer,p=s(17),T=s(18);T.inherits=s(12);var A=s(19),b=void 0;A&&A.debuglog?b=A.debuglog("stream"):b=function(){};var L=s(20),C;T.inherits(U,c);function G(N,R,Y){if(typeof N.prependListener=="function")return N.prependListener(R,Y);!N._events||!N._events[R]?N.on(R,Y):d(N._events[R])?N._events[R].unshift(Y):N._events[R]=[Y,N._events[R]]}function W(N,R){w=w||s(21),N=N||{},this.objectMode=!!N.objectMode,R instanceof w&&(this.objectMode=this.objectMode||!!N.readableObjectMode);var Y=N.highWaterMark,Q=this.objectMode?16:16*1024;this.highWaterMark=Y||Y===0?Y:Q,this.highWaterMark=~~this.highWaterMark,this.buffer=new L,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=N.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,N.encoding&&(C||(C=s(24).StringDecoder),this.decoder=new C(N.encoding),this.encoding=N.encoding)}function U(N){if(w=w||s(21),!(this instanceof U))return new U(N);this._readableState=new W(N,this),this.readable=!0,N&&typeof N.read=="function"&&(this._read=N.read),c.call(this)}U.prototype.push=function(N,R){var Y=this._readableState;return!Y.objectMode&&typeof N=="string"&&(R=R||Y.defaultEncoding,R!==Y.encoding&&(N=p.from(N,R),R="")),_t(this,Y,N,R,!1)},U.prototype.unshift=function(N){var R=this._readableState;return _t(this,R,N,"",!0)},U.prototype.isPaused=function(){return this._readableState.flowing===!1};function _t(N,R,Y,Q,pt){var it=tt(R,Y);if(it)N.emit("error",it);else if(Y===null)R.reading=!1,ct(N,R);else if(R.objectMode||Y&&Y.length>0)if(R.ended&&!pt){var xt=new Error("stream.push() after EOF");N.emit("error",xt)}else if(R.endEmitted&&pt){var vt=new Error("stream.unshift() after end event");N.emit("error",vt)}else{var Gt;R.decoder&&!pt&&!Q&&(Y=R.decoder.write(Y),Gt=!R.objectMode&&Y.length===0),pt||(R.reading=!1),Gt||(R.flowing&&R.length===0&&!R.sync?(N.emit("data",Y),N.read(0)):(R.length+=R.objectMode?1:Y.length,pt?R.buffer.unshift(Y):R.buffer.push(Y),R.needReadable&&Rt(N))),Dt(N,R)}else pt||(R.reading=!1);return et(R)}function et(N){return!N.ended&&(N.needReadable||N.length<N.highWaterMark||N.length===0)}U.prototype.setEncoding=function(N){return C||(C=s(24).StringDecoder),this._readableState.decoder=new C(N),this._readableState.encoding=N,this};var St=8388608;function dt(N){return N>=St?N=St:(N--,N|=N>>>1,N|=N>>>2,N|=N>>>4,N|=N>>>8,N|=N>>>16,N++),N}function M(N,R){return N<=0||R.length===0&&R.ended?0:R.objectMode?1:N!==N?R.flowing&&R.length?R.buffer.head.data.length:R.length:(N>R.highWaterMark&&(R.highWaterMark=dt(N)),N<=R.length?N:R.ended?R.length:(R.needReadable=!0,0))}U.prototype.read=function(N){b("read",N),N=parseInt(N,10);var R=this._readableState,Y=N;if(N!==0&&(R.emittedReadable=!1),N===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return b("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?Tt(this):Rt(this),null;if(N=M(N,R),N===0&&R.ended)return R.length===0&&Tt(this),null;var Q=R.needReadable;b("need readable",Q),(R.length===0||R.length-N<R.highWaterMark)&&(Q=!0,b("length less than watermark",Q)),R.ended||R.reading?(Q=!1,b("reading or ended",Q)):Q&&(b("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(N=M(Y,R)));var pt;return N>0?pt=ut(N,R):pt=null,pt===null?(R.needReadable=!0,N=0):R.length-=N,R.length===0&&(R.ended||(R.needReadable=!0),Y!==N&&R.ended&&Tt(this)),pt!==null&&this.emit("data",pt),pt};function tt(N,R){var Y=null;return!_.isBuffer(R)&&typeof R!="string"&&R!==null&&R!==void 0&&!N.objectMode&&(Y=new TypeError("Invalid non-string/buffer chunk")),Y}function ct(N,R){if(!R.ended){if(R.decoder){var Y=R.decoder.end();Y&&Y.length&&(R.buffer.push(Y),R.length+=R.objectMode?1:Y.length)}R.ended=!0,Rt(N)}}function Rt(N){var R=N._readableState;R.needReadable=!1,R.emittedReadable||(b("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?y(yt,N):yt(N))}function yt(N){b("emit readable"),N.emit("readable"),K(N)}function Dt(N,R){R.readingMore||(R.readingMore=!0,y(Nt,N,R))}function Nt(N,R){for(var Y=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(b("maybeReadMore read 0"),N.read(0),Y!==R.length);)Y=R.length;R.readingMore=!1}U.prototype._read=function(N){this.emit("error",new Error("_read() is not implemented"))},U.prototype.pipe=function(N,R){var Y=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=N;break;case 1:Q.pipes=[Q.pipes,N];break;default:Q.pipes.push(N);break}Q.pipesCount+=1,b("pipe count=%d opts=%j",Q.pipesCount,R);var pt=(!R||R.end!==!1)&&N!==f.stdout&&N!==f.stderr,it=pt?vt:Ie;Q.endEmitted?y(it):Y.once("end",it),N.on("unpipe",xt);function xt(J){b("onunpipe"),J===Y&&Ie()}function vt(){b("onend"),N.end()}var Gt=Et(Y);N.on("drain",Gt);var fe=!1;function Ie(){b("cleanup"),N.removeListener("close",k),N.removeListener("finish",B),N.removeListener("drain",Gt),N.removeListener("error",m),N.removeListener("unpipe",xt),Y.removeListener("end",vt),Y.removeListener("end",Ie),Y.removeListener("data",g),fe=!0,Q.awaitDrain&&(!N._writableState||N._writableState.needDrain)&&Gt()}var I=!1;Y.on("data",g);function g(J){b("ondata"),I=!1;var kt=N.write(J);kt===!1&&!I&&((Q.pipesCount===1&&Q.pipes===N||Q.pipesCount>1&&ee(Q.pipes,N)!==-1)&&!fe&&(b("false write response, pause",Y._readableState.awaitDrain),Y._readableState.awaitDrain++,I=!0),Y.pause())}function m(J){b("onerror",J),Z(),N.removeListener("error",m),v(N,"error")===0&&N.emit("error",J)}G(N,"error",m);function k(){N.removeListener("finish",B),Z()}N.once("close",k);function B(){b("onfinish"),N.removeListener("close",k),Z()}N.once("finish",B);function Z(){b("unpipe"),Y.unpipe(N)}return N.emit("pipe",Y),Q.flowing||(b("pipe resume"),Y.resume()),N};function Et(N){return function(){var R=N._readableState;b("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&v(N,"data")&&(R.flowing=!0,K(N))}}U.prototype.unpipe=function(N){var R=this._readableState;if(R.pipesCount===0)return this;if(R.pipesCount===1)return N&&N!==R.pipes?this:(N||(N=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,N&&N.emit("unpipe",this),this);if(!N){var Y=R.pipes,Q=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var pt=0;pt<Q;pt++)Y[pt].emit("unpipe",this);return this}var it=ee(R.pipes,N);return it===-1?this:(R.pipes.splice(it,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),N.emit("unpipe",this),this)},U.prototype.on=function(N,R){var Y=c.prototype.on.call(this,N,R);if(N==="data")this._readableState.flowing!==!1&&this.resume();else if(N==="readable"){var Q=this._readableState;!Q.endEmitted&&!Q.readableListening&&(Q.readableListening=Q.needReadable=!0,Q.emittedReadable=!1,Q.reading?Q.length&&Rt(this,Q):y(Yt,this))}return Y},U.prototype.addListener=U.prototype.on;function Yt(N){b("readable nexttick read 0"),N.read(0)}U.prototype.resume=function(){var N=this._readableState;return N.flowing||(b("resume"),N.flowing=!0,P(this,N)),this};function P(N,R){R.resumeScheduled||(R.resumeScheduled=!0,y(z,N,R))}function z(N,R){R.reading||(b("resume read 0"),N.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,N.emit("resume"),K(N),R.flowing&&!R.reading&&N.read(0)}U.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function K(N){var R=N._readableState;for(b("flow",R.flowing);R.flowing&&N.read()!==null;);}U.prototype.wrap=function(N){var R=this._readableState,Y=!1,Q=this;N.on("end",function(){if(b("wrapped end"),R.decoder&&!R.ended){var xt=R.decoder.end();xt&&xt.length&&Q.push(xt)}Q.push(null)}),N.on("data",function(xt){if(b("wrapped data"),R.decoder&&(xt=R.decoder.write(xt)),!(R.objectMode&&xt==null)&&!(!R.objectMode&&(!xt||!xt.length))){var vt=Q.push(xt);vt||(Y=!0,N.pause())}});for(var pt in N)this[pt]===void 0&&typeof N[pt]=="function"&&(this[pt]=function(xt){return function(){return N[xt].apply(N,arguments)}}(pt));var it=["error","close","destroy","pause","resume"];return Bt(it,function(xt){N.on(xt,Q.emit.bind(Q,xt))}),Q._read=function(xt){b("wrapped _read",xt),Y&&(Y=!1,N.resume())},Q},U._fromList=ut;function ut(N,R){if(R.length===0)return null;var Y;return R.objectMode?Y=R.buffer.shift():!N||N>=R.length?(R.decoder?Y=R.buffer.join(""):R.buffer.length===1?Y=R.buffer.head.data:Y=R.buffer.concat(R.length),R.buffer.clear()):Y=bt(N,R.buffer,R.decoder),Y}function bt(N,R,Y){var Q;return N<R.head.data.length?(Q=R.head.data.slice(0,N),R.head.data=R.head.data.slice(N)):N===R.head.data.length?Q=R.shift():Q=Y?mt(N,R):Ft(N,R),Q}function mt(N,R){var Y=R.head,Q=1,pt=Y.data;for(N-=pt.length;Y=Y.next;){var it=Y.data,xt=N>it.length?it.length:N;if(xt===it.length?pt+=it:pt+=it.slice(0,N),N-=xt,N===0){xt===it.length?(++Q,Y.next?R.head=Y.next:R.head=R.tail=null):(R.head=Y,Y.data=it.slice(xt));break}++Q}return R.length-=Q,pt}function Ft(N,R){var Y=p.allocUnsafe(N),Q=R.head,pt=1;for(Q.data.copy(Y),N-=Q.data.length;Q=Q.next;){var it=Q.data,xt=N>it.length?it.length:N;if(it.copy(Y,Y.length-N,0,xt),N-=xt,N===0){xt===it.length?(++pt,Q.next?R.head=Q.next:R.head=R.tail=null):(R.head=Q,Q.data=it.slice(xt));break}++pt}return R.length-=pt,Y}function Tt(N){var R=N._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,y(Wt,R,N))}function Wt(N,R){!N.endEmitted&&N.length===0&&(N.endEmitted=!0,R.readable=!1,R.emit("end"))}function Bt(N,R){for(var Y=0,Q=N.length;Y<Q;Y++)R(N[Y],Y)}function ee(N,R){for(var Y=0,Q=N.length;Y<Q;Y++)if(N[Y]===R)return Y;return-1}}).call(o,s(6))},function(h,o,s){(function(f){"use strict";!f.version||f.version.indexOf("v0.")===0||f.version.indexOf("v1.")===0&&f.version.indexOf("v1.8.")!==0?h.exports=y:h.exports=f.nextTick;function y(d,w,E,v){if(typeof d!="function")throw new TypeError('"callback" argument must be a function');var c=arguments.length,_,p;switch(c){case 0:case 1:return f.nextTick(d);case 2:return f.nextTick(function(){d.call(null,w)});case 3:return f.nextTick(function(){d.call(null,w,E)});case 4:return f.nextTick(function(){d.call(null,w,E,v)});default:for(_=new Array(c-1),p=0;p<_.length;)_[p++]=arguments[p];return f.nextTick(function(){d.apply(null,_)})}}}).call(o,s(6))},function(h,o){var s={}.toString;h.exports=Array.isArray||function(f){return s.call(f)=="[object Array]"}},function(h,o,s){(function(f){"use strict";var y=s(2),d=y.Buffer,w=y.SlowBuffer,E=y.kMaxLength||2147483647;o.alloc=function(c,_,p){if(typeof d.alloc=="function")return d.alloc(c,_,p);if(typeof p=="number")throw new TypeError("encoding must not be number");if(typeof c!="number")throw new TypeError("size must be a number");if(c>E)throw new RangeError("size is too large");var T=p,A=_;A===void 0&&(T=void 0,A=0);var b=new d(c);if(typeof A=="string")for(var L=new d(A,T),C=L.length,G=-1;++G<c;)b[G]=L[G%C];else b.fill(A);return b},o.allocUnsafe=function(c){if(typeof d.allocUnsafe=="function")return d.allocUnsafe(c);if(typeof c!="number")throw new TypeError("size must be a number");if(c>E)throw new RangeError("size is too large");return new d(c)},o.from=function(c,_,p){if(typeof d.from=="function"&&(!f.Uint8Array||Uint8Array.from!==d.from))return d.from(c,_,p);if(typeof c=="number")throw new TypeError('"value" argument must not be a number');if(typeof c=="string")return new d(c,_);if(typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer){var T=_;if(arguments.length===1)return new d(c);typeof T>"u"&&(T=0);var A=p;if(typeof A>"u"&&(A=c.byteLength-T),T>=c.byteLength)throw new RangeError("'offset' is out of bounds");if(A>c.byteLength-T)throw new RangeError("'length' is out of bounds");return new d(c.slice(T,T+A))}if(d.isBuffer(c)){var b=new d(c.length);return c.copy(b,0,0,c.length),b}if(c){if(Array.isArray(c)||typeof ArrayBuffer<"u"&&c.buffer instanceof ArrayBuffer||"length"in c)return new d(c);if(c.type==="Buffer"&&Array.isArray(c.data))return new d(c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},o.allocUnsafeSlow=function(c){if(typeof d.allocUnsafeSlow=="function")return d.allocUnsafeSlow(c);if(typeof c!="number")throw new TypeError("size must be a number");if(c>=E)throw new RangeError("size is too large");return new w(c)}}).call(o,function(){return this}())},function(h,o,s){(function(f){function y(U){return Array.isArray?Array.isArray(U):W(U)==="[object Array]"}o.isArray=y;function d(U){return typeof U=="boolean"}o.isBoolean=d;function w(U){return U===null}o.isNull=w;function E(U){return U==null}o.isNullOrUndefined=E;function v(U){return typeof U=="number"}o.isNumber=v;function c(U){return typeof U=="string"}o.isString=c;function _(U){return typeof U=="symbol"}o.isSymbol=_;function p(U){return U===void 0}o.isUndefined=p;function T(U){return W(U)==="[object RegExp]"}o.isRegExp=T;function A(U){return typeof U=="object"&&U!==null}o.isObject=A;function b(U){return W(U)==="[object Date]"}o.isDate=b;function L(U){return W(U)==="[object Error]"||U instanceof Error}o.isError=L;function C(U){return typeof U=="function"}o.isFunction=C;function G(U){return U===null||typeof U=="boolean"||typeof U=="number"||typeof U=="string"||typeof U=="symbol"||typeof U>"u"}o.isPrimitive=G,o.isBuffer=f.isBuffer;function W(U){return Object.prototype.toString.call(U)}}).call(o,s(1))},function(h,o){},function(h,o,s){"use strict";var f=s(2).Buffer,y=s(17);h.exports=d;function d(){this.head=null,this.tail=null,this.length=0}d.prototype.push=function(w){var E={data:w,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length},d.prototype.unshift=function(w){var E={data:w,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length},d.prototype.shift=function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}},d.prototype.clear=function(){this.head=this.tail=null,this.length=0},d.prototype.join=function(w){if(this.length===0)return"";for(var E=this.head,v=""+E.data;E=E.next;)v+=w+E.data;return v},d.prototype.concat=function(w){if(this.length===0)return y.alloc(0);if(this.length===1)return this.head.data;for(var E=y.allocUnsafe(w>>>0),v=this.head,c=0;v;)v.data.copy(E,c),c+=v.data.length,v=v.next;return E}},function(h,o,s){"use strict";var f=Object.keys||function(L){var C=[];for(var G in L)C.push(G);return C};h.exports=p;var y=s(15),d=s(18);d.inherits=s(12);var w=s(14),E=s(22);d.inherits(p,w);for(var v=f(E.prototype),c=0;c<v.length;c++){var _=v[c];p.prototype[_]||(p.prototype[_]=E.prototype[_])}function p(L){if(!(this instanceof p))return new p(L);w.call(this,L),E.call(this,L),L&&L.readable===!1&&(this.readable=!1),L&&L.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,L&&L.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",T)}function T(){this.allowHalfOpen||this._writableState.ended||y(A,this)}function A(L){L.end()}function b(L,C){for(var G=0,W=L.length;G<W;G++)C(L[G],G)}},function(h,o,s){(function(f){"use strict";h.exports=C;var y=s(15),d=!f.browser&&["v0.10","v0.9."].indexOf(f.version.slice(0,5))>-1?setImmediate:y,w;C.WritableState=b;var E=s(18);E.inherits=s(12);var v={deprecate:s(23)},c;(function(){try{c=s(11)}catch{}finally{c||(c=s(8).EventEmitter)}})();var _=s(2).Buffer,p=s(17);E.inherits(C,c);function T(){}function A(P,z,K){this.chunk=P,this.encoding=z,this.callback=K,this.next=null}function b(P,z){w=w||s(21),P=P||{},this.objectMode=!!P.objectMode,z instanceof w&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var K=P.highWaterMark,ut=this.objectMode?16:16*1024;this.highWaterMark=K||K===0?K:ut,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var bt=P.decodeStrings===!1;this.decodeStrings=!bt,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(mt){M(z,mt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Yt(this)}b.prototype.getBuffer=function(){for(var z=this.bufferedRequest,K=[];z;)K.push(z),z=z.next;return K},function(){try{Object.defineProperty(b.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(P){return L.call(this,P)?!0:P&&P._writableState instanceof b}})):L=function(P){return P instanceof this};function C(P){if(w=w||s(21),!L.call(C,this)&&!(this instanceof w))return new C(P);this._writableState=new b(P,this),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev)),c.call(this)}C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function G(P,z){var K=new Error("write after end");P.emit("error",K),y(z,K)}function W(P,z,K,ut){var bt=!0,mt=!1;return K===null?mt=new TypeError("May not write null values to stream"):typeof K!="string"&&K!==void 0&&!z.objectMode&&(mt=new TypeError("Invalid non-string/buffer chunk")),mt&&(P.emit("error",mt),y(ut,mt),bt=!1),bt}C.prototype.write=function(P,z,K){var ut=this._writableState,bt=!1,mt=_.isBuffer(P);return typeof z=="function"&&(K=z,z=null),mt?z="buffer":z||(z=ut.defaultEncoding),typeof K!="function"&&(K=T),ut.ended?G(this,K):(mt||W(this,ut,P,K))&&(ut.pendingcb++,bt=_t(this,ut,mt,P,z,K)),bt},C.prototype.cork=function(){var P=this._writableState;P.corked++},C.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.finished&&!P.bufferProcessing&&P.bufferedRequest&&Rt(this,P))},C.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+z);return this._writableState.defaultEncoding=z,this};function U(P,z,K){return!P.objectMode&&P.decodeStrings!==!1&&typeof z=="string"&&(z=p.from(z,K)),z}function _t(P,z,K,ut,bt,mt){K||(ut=U(z,ut,bt),_.isBuffer(ut)&&(bt="buffer"));var Ft=z.objectMode?1:ut.length;z.length+=Ft;var Tt=z.length<z.highWaterMark;if(Tt||(z.needDrain=!0),z.writing||z.corked){var Wt=z.lastBufferedRequest;z.lastBufferedRequest=new A(ut,bt,mt),Wt?Wt.next=z.lastBufferedRequest:z.bufferedRequest=z.lastBufferedRequest,z.bufferedRequestCount+=1}else et(P,z,!1,Ft,ut,bt,mt);return Tt}function et(P,z,K,ut,bt,mt,Ft){z.writelen=ut,z.writecb=Ft,z.writing=!0,z.sync=!0,K?P._writev(bt,z.onwrite):P._write(bt,mt,z.onwrite),z.sync=!1}function St(P,z,K,ut,bt){--z.pendingcb,K?y(bt,ut):bt(ut),P._writableState.errorEmitted=!0,P.emit("error",ut)}function dt(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function M(P,z){var K=P._writableState,ut=K.sync,bt=K.writecb;if(dt(K),z)St(P,K,ut,z,bt);else{var mt=yt(K);!mt&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&Rt(P,K),ut?d(tt,P,K,mt,bt):tt(P,K,mt,bt)}}function tt(P,z,K,ut){K||ct(P,z),z.pendingcb--,ut(),Nt(P,z)}function ct(P,z){z.length===0&&z.needDrain&&(z.needDrain=!1,P.emit("drain"))}function Rt(P,z){z.bufferProcessing=!0;var K=z.bufferedRequest;if(P._writev&&K&&K.next){var ut=z.bufferedRequestCount,bt=new Array(ut),mt=z.corkedRequestsFree;mt.entry=K;for(var Ft=0;K;)bt[Ft]=K,K=K.next,Ft+=1;et(P,z,!0,z.length,bt,"",mt.finish),z.pendingcb++,z.lastBufferedRequest=null,mt.next?(z.corkedRequestsFree=mt.next,mt.next=null):z.corkedRequestsFree=new Yt(z)}else{for(;K;){var Tt=K.chunk,Wt=K.encoding,Bt=K.callback,ee=z.objectMode?1:Tt.length;if(et(P,z,!1,ee,Tt,Wt,Bt),K=K.next,z.writing)break}K===null&&(z.lastBufferedRequest=null)}z.bufferedRequestCount=0,z.bufferedRequest=K,z.bufferProcessing=!1}C.prototype._write=function(P,z,K){K(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(P,z,K){var ut=this._writableState;typeof P=="function"?(K=P,P=null,z=null):typeof z=="function"&&(K=z,z=null),P!=null&&this.write(P,z),ut.corked&&(ut.corked=1,this.uncork()),!ut.ending&&!ut.finished&&Et(this,ut,K)};function yt(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function Dt(P,z){z.prefinished||(z.prefinished=!0,P.emit("prefinish"))}function Nt(P,z){var K=yt(z);return K&&(z.pendingcb===0?(Dt(P,z),z.finished=!0,P.emit("finish")):Dt(P,z)),K}function Et(P,z,K){z.ending=!0,Nt(P,z),K&&(z.finished?y(K):P.once("finish",K)),z.ended=!0,P.writable=!1}function Yt(P){var z=this;this.next=null,this.entry=null,this.finish=function(K){var ut=z.entry;for(z.entry=null;ut;){var bt=ut.callback;P.pendingcb--,bt(K),ut=ut.next}P.corkedRequestsFree?P.corkedRequestsFree.next=z:P.corkedRequestsFree=z}}}).call(o,s(6))},function(h,o){(function(s){h.exports=f;function f(d,w){if(y("noDeprecation"))return d;var E=!1;function v(){if(!E){if(y("throwDeprecation"))throw new Error(w);y("traceDeprecation")?console.trace(w):console.warn(w),E=!0}return d.apply(this,arguments)}return v}function y(d){try{if(!s.localStorage)return!1}catch{return!1}var w=s.localStorage[d];return w==null?!1:String(w).toLowerCase()==="true"}}).call(o,function(){return this}())},function(h,o,s){var f=s(2).Buffer,y=f.isEncoding||function(_){switch(_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function d(_){if(_&&!y(_))throw new Error("Unknown encoding: "+_)}var w=o.StringDecoder=function(_){switch(this.encoding=(_||"utf8").toLowerCase().replace(/[-_]/,""),d(_),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=v;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:this.write=E;return}this.charBuffer=new f(6),this.charReceived=0,this.charLength=0};w.prototype.write=function(_){for(var p="";this.charLength;){var T=_.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:_.length;if(_.copy(this.charBuffer,this.charReceived,0,T),this.charReceived+=T,this.charReceived<this.charLength)return"";_=_.slice(T,_.length),p=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var b=p.charCodeAt(p.length-1);if(b>=55296&&b<=56319){this.charLength+=this.surrogateSize,p="";continue}if(this.charReceived=this.charLength=0,_.length===0)return p;break}this.detectIncompleteChar(_);var A=_.length;this.charLength&&(_.copy(this.charBuffer,0,_.length-this.charReceived,A),A-=this.charReceived),p+=_.toString(this.encoding,0,A);var A=p.length-1,b=p.charCodeAt(A);if(b>=55296&&b<=56319){var L=this.surrogateSize;return this.charLength+=L,this.charReceived+=L,this.charBuffer.copy(this.charBuffer,L,0,L),_.copy(this.charBuffer,0,0,L),p.substring(0,A)}return p},w.prototype.detectIncompleteChar=function(_){for(var p=_.length>=3?3:_.length;p>0;p--){var T=_[_.length-p];if(p==1&&T>>5==6){this.charLength=2;break}if(p<=2&&T>>4==14){this.charLength=3;break}if(p<=3&&T>>3==30){this.charLength=4;break}}this.charReceived=p},w.prototype.end=function(_){var p="";if(_&&_.length&&(p=this.write(_)),this.charReceived){var T=this.charReceived,A=this.charBuffer,b=this.encoding;p+=A.slice(0,T).toString(b)}return p};function E(_){return _.toString(this.encoding)}function v(_){this.charReceived=_.length%2,this.charLength=this.charReceived?2:0}function c(_){this.charReceived=_.length%3,this.charLength=this.charReceived?3:0}},function(h,o,s){"use strict";h.exports=E;var f=s(21),y=s(18);y.inherits=s(12),y.inherits(E,f);function d(c){this.afterTransform=function(_,p){return w(c,_,p)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function w(c,_,p){var T=c._transformState;T.transforming=!1;var A=T.writecb;if(!A)return c.emit("error",new Error("no writecb in Transform class"));T.writechunk=null,T.writecb=null,p!=null&&c.push(p),A(_);var b=c._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&c._read(b.highWaterMark)}function E(c){if(!(this instanceof E))return new E(c);f.call(this,c),this._transformState=new d(this);var _=this;this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(p,T){v(_,p,T)}):v(_)})}E.prototype.push=function(c,_){return this._transformState.needTransform=!1,f.prototype.push.call(this,c,_)},E.prototype._transform=function(c,_,p){throw new Error("_transform() is not implemented")},E.prototype._write=function(c,_,p){var T=this._transformState;if(T.writecb=p,T.writechunk=c,T.writeencoding=_,!T.transforming){var A=this._readableState;(T.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},E.prototype._read=function(c){var _=this._transformState;_.writechunk!==null&&_.writecb&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0};function v(c,_,p){if(_)return c.emit("error",_);p!=null&&c.push(p);var T=c._writableState,A=c._transformState;if(T.length)throw new Error("Calling transform done when ws.length != 0");if(A.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}},function(h,o,s){"use strict";h.exports=d;var f=s(25),y=s(18);y.inherits=s(12),y.inherits(d,f);function d(w){if(!(this instanceof d))return new d(w);f.call(this,w)}d.prototype._transform=function(w,E,v){v(null,w)}},function(h,o,s){h.exports=s(22)},function(h,o,s){h.exports=s(21)},function(h,o,s){h.exports=s(25)},function(h,o,s){h.exports=s(26)},function(h,o,s){"use strict";var f=s(32),y=s(33),d=s(38),w=s(39),E=s(40),v=s(41),c=s(42),_=Object.prototype.toString;function p(b){if(!(this instanceof p))return new p(b);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},b||{});var L=this.options;L.raw&&L.windowBits>=0&&L.windowBits<16&&(L.windowBits=-L.windowBits,L.windowBits===0&&(L.windowBits=-15)),L.windowBits>=0&&L.windowBits<16&&!(b&&b.windowBits)&&(L.windowBits+=32),L.windowBits>15&&L.windowBits<48&&(L.windowBits&15)===0&&(L.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var C=f.inflateInit2(this.strm,L.windowBits);if(C!==w.Z_OK)throw new Error(E[C]);this.header=new c,f.inflateGetHeader(this.strm,this.header)}p.prototype.push=function(b,L){var C=this.strm,G=this.options.chunkSize,W=this.options.dictionary,U,_t,et,St,dt,M,tt=!1;if(this.ended)return!1;_t=L===~~L?L:L===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof b=="string"?C.input=d.binstring2buf(b):_.call(b)==="[object ArrayBuffer]"?C.input=new Uint8Array(b):C.input=b,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new y.Buf8(G),C.next_out=0,C.avail_out=G),U=f.inflate(C,w.Z_NO_FLUSH),U===w.Z_NEED_DICT&&W&&(typeof W=="string"?M=d.string2buf(W):_.call(W)==="[object ArrayBuffer]"?M=new Uint8Array(W):M=W,U=f.inflateSetDictionary(this.strm,M)),U===w.Z_BUF_ERROR&&tt===!0&&(U=w.Z_OK,tt=!1),U!==w.Z_STREAM_END&&U!==w.Z_OK)return this.onEnd(U),this.ended=!0,!1;C.next_out&&(C.avail_out===0||U===w.Z_STREAM_END||C.avail_in===0&&(_t===w.Z_FINISH||_t===w.Z_SYNC_FLUSH))&&(this.options.to==="string"?(et=d.utf8border(C.output,C.next_out),St=C.next_out-et,dt=d.buf2string(C.output,et),C.next_out=St,C.avail_out=G-St,St&&y.arraySet(C.output,C.output,et,St,0),this.onData(dt)):this.onData(y.shrinkBuf(C.output,C.next_out))),C.avail_in===0&&C.avail_out===0&&(tt=!0)}while((C.avail_in>0||C.avail_out===0)&&U!==w.Z_STREAM_END);return U===w.Z_STREAM_END&&(_t=w.Z_FINISH),_t===w.Z_FINISH?(U=f.inflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===w.Z_OK):(_t===w.Z_SYNC_FLUSH&&(this.onEnd(w.Z_OK),C.avail_out=0),!0)},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};function T(b,L){var C=new p(L);if(C.push(b,!0),C.err)throw C.msg||E[C.err];return C.result}function A(b,L){return L=L||{},L.raw=!0,T(b,L)}o.Inflate=p,o.inflate=T,o.inflateRaw=A,o.ungzip=T},function(h,o,s){"use strict";var f=s(33),y=s(34),d=s(35),w=s(36),E=s(37),v=0,c=1,_=2,p=4,T=5,A=6,b=0,L=1,C=2,G=-2,W=-3,U=-4,_t=-5,et=8,St=1,dt=2,M=3,tt=4,ct=5,Rt=6,yt=7,Dt=8,Nt=9,Et=10,Yt=11,P=12,z=13,K=14,ut=15,bt=16,mt=17,Ft=18,Tt=19,Wt=20,Bt=21,ee=22,N=23,R=24,Y=25,Q=26,pt=27,it=28,xt=29,vt=30,Gt=31,fe=32,Ie=852,I=592,g=15,m=g;function k(j){return(j>>>24&255)+(j>>>8&65280)+((j&65280)<<8)+((j&255)<<24)}function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Z(j){var ot;return!j||!j.state?G:(ot=j.state,j.total_in=j.total_out=ot.total=0,j.msg="",ot.wrap&&(j.adler=ot.wrap&1),ot.mode=St,ot.last=0,ot.havedict=0,ot.dmax=32768,ot.head=null,ot.hold=0,ot.bits=0,ot.lencode=ot.lendyn=new f.Buf32(Ie),ot.distcode=ot.distdyn=new f.Buf32(I),ot.sane=1,ot.back=-1,b)}function J(j){var ot;return!j||!j.state?G:(ot=j.state,ot.wsize=0,ot.whave=0,ot.wnext=0,Z(j))}function kt(j,ot){var F,at;return!j||!j.state||(at=j.state,ot<0?(F=0,ot=-ot):(F=(ot>>4)+1,ot<48&&(ot&=15)),ot&&(ot<8||ot>15))?G:(at.window!==null&&at.wbits!==ot&&(at.window=null),at.wrap=F,at.wbits=ot,J(j))}function Lt(j,ot){var F,at;return j?(at=new B,j.state=at,at.window=null,F=kt(j,ot),F!==b&&(j.state=null),F):G}function Ut(j){return Lt(j,m)}var Jt=!0,Ct,be;function or(j){if(Jt){var ot;for(Ct=new f.Buf32(512),be=new f.Buf32(32),ot=0;ot<144;)j.lens[ot++]=8;for(;ot<256;)j.lens[ot++]=9;for(;ot<280;)j.lens[ot++]=7;for(;ot<288;)j.lens[ot++]=8;for(E(c,j.lens,0,288,Ct,0,j.work,{bits:9}),ot=0;ot<32;)j.lens[ot++]=5;E(_,j.lens,0,32,be,0,j.work,{bits:5}),Jt=!1}j.lencode=Ct,j.lenbits=9,j.distcode=be,j.distbits=5}function Ze(j,ot,F,at){var Mt,nt=j.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new f.Buf8(nt.wsize)),at>=nt.wsize?(f.arraySet(nt.window,ot,F-nt.wsize,nt.wsize,0),nt.wnext=0,nt.whave=nt.wsize):(Mt=nt.wsize-nt.wnext,Mt>at&&(Mt=at),f.arraySet(nt.window,ot,F-at,Mt,nt.wnext),at-=Mt,at?(f.arraySet(nt.window,ot,F-at,at,0),nt.wnext=at,nt.whave=nt.wsize):(nt.wnext+=Mt,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=Mt))),0}function qe(j,ot){var F,at,Mt,nt,ce,st,Kt,X,q,sr,Pt,ht,Xe,Ce,Ht=0,Ot,ie,ue,ne,ar,Ye,qt,he,re=new f.Buf8(4),ke,Ee,zr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return G;F=j.state,F.mode===P&&(F.mode=z),ce=j.next_out,Mt=j.output,Kt=j.avail_out,nt=j.next_in,at=j.input,st=j.avail_in,X=F.hold,q=F.bits,sr=st,Pt=Kt,he=b;t:for(;;)switch(F.mode){case St:if(F.wrap===0){F.mode=z;break}for(;q<16;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(F.wrap&2&&X===35615){F.check=0,re[0]=X&255,re[1]=X>>>8&255,F.check=d(F.check,re,2,0),X=0,q=0,F.mode=dt;break}if(F.flags=0,F.head&&(F.head.done=!1),!(F.wrap&1)||(((X&255)<<8)+(X>>8))%31){j.msg="incorrect header check",F.mode=vt;break}if((X&15)!==et){j.msg="unknown compression method",F.mode=vt;break}if(X>>>=4,q-=4,qt=(X&15)+8,F.wbits===0)F.wbits=qt;else if(qt>F.wbits){j.msg="invalid window size",F.mode=vt;break}F.dmax=1<<qt,j.adler=F.check=1,F.mode=X&512?Et:P,X=0,q=0;break;case dt:for(;q<16;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(F.flags=X,(F.flags&255)!==et){j.msg="unknown compression method",F.mode=vt;break}if(F.flags&57344){j.msg="unknown header flags set",F.mode=vt;break}F.head&&(F.head.text=X>>8&1),F.flags&512&&(re[0]=X&255,re[1]=X>>>8&255,F.check=d(F.check,re,2,0)),X=0,q=0,F.mode=M;case M:for(;q<32;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}F.head&&(F.head.time=X),F.flags&512&&(re[0]=X&255,re[1]=X>>>8&255,re[2]=X>>>16&255,re[3]=X>>>24&255,F.check=d(F.check,re,4,0)),X=0,q=0,F.mode=tt;case tt:for(;q<16;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}F.head&&(F.head.xflags=X&255,F.head.os=X>>8),F.flags&512&&(re[0]=X&255,re[1]=X>>>8&255,F.check=d(F.check,re,2,0)),X=0,q=0,F.mode=ct;case ct:if(F.flags&1024){for(;q<16;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}F.length=X,F.head&&(F.head.extra_len=X),F.flags&512&&(re[0]=X&255,re[1]=X>>>8&255,F.check=d(F.check,re,2,0)),X=0,q=0}else F.head&&(F.head.extra=null);F.mode=Rt;case Rt:if(F.flags&1024&&(ht=F.length,ht>st&&(ht=st),ht&&(F.head&&(qt=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),f.arraySet(F.head.extra,at,nt,ht,qt)),F.flags&512&&(F.check=d(F.check,at,ht,nt)),st-=ht,nt+=ht,F.length-=ht),F.length))break t;F.length=0,F.mode=yt;case yt:if(F.flags&2048){if(st===0)break t;ht=0;do qt=at[nt+ht++],F.head&&qt&&F.length<65536&&(F.head.name+=String.fromCharCode(qt));while(qt&&ht<st);if(F.flags&512&&(F.check=d(F.check,at,ht,nt)),st-=ht,nt+=ht,qt)break t}else F.head&&(F.head.name=null);F.length=0,F.mode=Dt;case Dt:if(F.flags&4096){if(st===0)break t;ht=0;do qt=at[nt+ht++],F.head&&qt&&F.length<65536&&(F.head.comment+=String.fromCharCode(qt));while(qt&&ht<st);if(F.flags&512&&(F.check=d(F.check,at,ht,nt)),st-=ht,nt+=ht,qt)break t}else F.head&&(F.head.comment=null);F.mode=Nt;case Nt:if(F.flags&512){for(;q<16;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(X!==(F.check&65535)){j.msg="header crc mismatch",F.mode=vt;break}X=0,q=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),j.adler=F.check=0,F.mode=P;break;case Et:for(;q<32;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}j.adler=F.check=k(X),X=0,q=0,F.mode=Yt;case Yt:if(F.havedict===0)return j.next_out=ce,j.avail_out=Kt,j.next_in=nt,j.avail_in=st,F.hold=X,F.bits=q,C;j.adler=F.check=1,F.mode=P;case P:if(ot===T||ot===A)break t;case z:if(F.last){X>>>=q&7,q-=q&7,F.mode=pt;break}for(;q<3;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}switch(F.last=X&1,X>>>=1,q-=1,X&3){case 0:F.mode=K;break;case 1:if(or(F),F.mode=Wt,ot===A){X>>>=2,q-=2;break t}break;case 2:F.mode=mt;break;case 3:j.msg="invalid block type",F.mode=vt}X>>>=2,q-=2;break;case K:for(X>>>=q&7,q-=q&7;q<32;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if((X&65535)!==(X>>>16^65535)){j.msg="invalid stored block lengths",F.mode=vt;break}if(F.length=X&65535,X=0,q=0,F.mode=ut,ot===A)break t;case ut:F.mode=bt;case bt:if(ht=F.length,ht){if(ht>st&&(ht=st),ht>Kt&&(ht=Kt),ht===0)break t;f.arraySet(Mt,at,nt,ht,ce),st-=ht,nt+=ht,Kt-=ht,ce+=ht,F.length-=ht;break}F.mode=P;break;case mt:for(;q<14;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(F.nlen=(X&31)+257,X>>>=5,q-=5,F.ndist=(X&31)+1,X>>>=5,q-=5,F.ncode=(X&15)+4,X>>>=4,q-=4,F.nlen>286||F.ndist>30){j.msg="too many length or distance symbols",F.mode=vt;break}F.have=0,F.mode=Ft;case Ft:for(;F.have<F.ncode;){for(;q<3;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}F.lens[zr[F.have++]]=X&7,X>>>=3,q-=3}for(;F.have<19;)F.lens[zr[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,ke={bits:F.lenbits},he=E(v,F.lens,0,19,F.lencode,0,F.work,ke),F.lenbits=ke.bits,he){j.msg="invalid code lengths set",F.mode=vt;break}F.have=0,F.mode=Tt;case Tt:for(;F.have<F.nlen+F.ndist;){for(;Ht=F.lencode[X&(1<<F.lenbits)-1],Ot=Ht>>>24,ie=Ht>>>16&255,ue=Ht&65535,!(Ot<=q);){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(ue<16)X>>>=Ot,q-=Ot,F.lens[F.have++]=ue;else{if(ue===16){for(Ee=Ot+2;q<Ee;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(X>>>=Ot,q-=Ot,F.have===0){j.msg="invalid bit length repeat",F.mode=vt;break}qt=F.lens[F.have-1],ht=3+(X&3),X>>>=2,q-=2}else if(ue===17){for(Ee=Ot+3;q<Ee;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}X>>>=Ot,q-=Ot,qt=0,ht=3+(X&7),X>>>=3,q-=3}else{for(Ee=Ot+7;q<Ee;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}X>>>=Ot,q-=Ot,qt=0,ht=11+(X&127),X>>>=7,q-=7}if(F.have+ht>F.nlen+F.ndist){j.msg="invalid bit length repeat",F.mode=vt;break}for(;ht--;)F.lens[F.have++]=qt}}if(F.mode===vt)break;if(F.lens[256]===0){j.msg="invalid code -- missing end-of-block",F.mode=vt;break}if(F.lenbits=9,ke={bits:F.lenbits},he=E(c,F.lens,0,F.nlen,F.lencode,0,F.work,ke),F.lenbits=ke.bits,he){j.msg="invalid literal/lengths set",F.mode=vt;break}if(F.distbits=6,F.distcode=F.distdyn,ke={bits:F.distbits},he=E(_,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,ke),F.distbits=ke.bits,he){j.msg="invalid distances set",F.mode=vt;break}if(F.mode=Wt,ot===A)break t;case Wt:F.mode=Bt;case Bt:if(st>=6&&Kt>=258){j.next_out=ce,j.avail_out=Kt,j.next_in=nt,j.avail_in=st,F.hold=X,F.bits=q,w(j,Pt),ce=j.next_out,Mt=j.output,Kt=j.avail_out,nt=j.next_in,at=j.input,st=j.avail_in,X=F.hold,q=F.bits,F.mode===P&&(F.back=-1);break}for(F.back=0;Ht=F.lencode[X&(1<<F.lenbits)-1],Ot=Ht>>>24,ie=Ht>>>16&255,ue=Ht&65535,!(Ot<=q);){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(ie&&(ie&240)===0){for(ne=Ot,ar=ie,Ye=ue;Ht=F.lencode[Ye+((X&(1<<ne+ar)-1)>>ne)],Ot=Ht>>>24,ie=Ht>>>16&255,ue=Ht&65535,!(ne+Ot<=q);){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}X>>>=ne,q-=ne,F.back+=ne}if(X>>>=Ot,q-=Ot,F.back+=Ot,F.length=ue,ie===0){F.mode=Q;break}if(ie&32){F.back=-1,F.mode=P;break}if(ie&64){j.msg="invalid literal/length code",F.mode=vt;break}F.extra=ie&15,F.mode=ee;case ee:if(F.extra){for(Ee=F.extra;q<Ee;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}F.length+=X&(1<<F.extra)-1,X>>>=F.extra,q-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=N;case N:for(;Ht=F.distcode[X&(1<<F.distbits)-1],Ot=Ht>>>24,ie=Ht>>>16&255,ue=Ht&65535,!(Ot<=q);){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if((ie&240)===0){for(ne=Ot,ar=ie,Ye=ue;Ht=F.distcode[Ye+((X&(1<<ne+ar)-1)>>ne)],Ot=Ht>>>24,ie=Ht>>>16&255,ue=Ht&65535,!(ne+Ot<=q);){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}X>>>=ne,q-=ne,F.back+=ne}if(X>>>=Ot,q-=Ot,F.back+=Ot,ie&64){j.msg="invalid distance code",F.mode=vt;break}F.offset=ue,F.extra=ie&15,F.mode=R;case R:if(F.extra){for(Ee=F.extra;q<Ee;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}F.offset+=X&(1<<F.extra)-1,X>>>=F.extra,q-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){j.msg="invalid distance too far back",F.mode=vt;break}F.mode=Y;case Y:if(Kt===0)break t;if(ht=Pt-Kt,F.offset>ht){if(ht=F.offset-ht,ht>F.whave&&F.sane){j.msg="invalid distance too far back",F.mode=vt;break}ht>F.wnext?(ht-=F.wnext,Xe=F.wsize-ht):Xe=F.wnext-ht,ht>F.length&&(ht=F.length),Ce=F.window}else Ce=Mt,Xe=ce-F.offset,ht=F.length;ht>Kt&&(ht=Kt),Kt-=ht,F.length-=ht;do Mt[ce++]=Ce[Xe++];while(--ht);F.length===0&&(F.mode=Bt);break;case Q:if(Kt===0)break t;Mt[ce++]=F.length,Kt--,F.mode=Bt;break;case pt:if(F.wrap){for(;q<32;){if(st===0)break t;st--,X|=at[nt++]<<q,q+=8}if(Pt-=Kt,j.total_out+=Pt,F.total+=Pt,Pt&&(j.adler=F.check=F.flags?d(F.check,Mt,Pt,ce-Pt):y(F.check,Mt,Pt,ce-Pt)),Pt=Kt,(F.flags?X:k(X))!==F.check){j.msg="incorrect data check",F.mode=vt;break}X=0,q=0}F.mode=it;case it:if(F.wrap&&F.flags){for(;q<32;){if(st===0)break t;st--,X+=at[nt++]<<q,q+=8}if(X!==(F.total&4294967295)){j.msg="incorrect length check",F.mode=vt;break}X=0,q=0}F.mode=xt;case xt:he=L;break t;case vt:he=W;break t;case Gt:return U;case fe:default:return G}return j.next_out=ce,j.avail_out=Kt,j.next_in=nt,j.avail_in=st,F.hold=X,F.bits=q,(F.wsize||Pt!==j.avail_out&&F.mode<vt&&(F.mode<pt||ot!==p))&&Ze(j,j.output,j.next_out,Pt-j.avail_out)?(F.mode=Gt,U):(sr-=j.avail_in,Pt-=j.avail_out,j.total_in+=sr,j.total_out+=Pt,F.total+=Pt,F.wrap&&Pt&&(j.adler=F.check=F.flags?d(F.check,Mt,Pt,j.next_out-Pt):y(F.check,Mt,Pt,j.next_out-Pt)),j.data_type=F.bits+(F.last?64:0)+(F.mode===P?128:0)+(F.mode===Wt||F.mode===ut?256:0),(sr===0&&Pt===0||ot===p)&&he===b&&(he=_t),he)}function ai(j){if(!j||!j.state)return G;var ot=j.state;return ot.window&&(ot.window=null),j.state=null,b}function ui(j,ot){var F;return!j||!j.state||(F=j.state,(F.wrap&2)===0)?G:(F.head=ot,ot.done=!1,b)}function fi(j,ot){var F=ot.length,at,Mt,nt;return!j||!j.state||(at=j.state,at.wrap!==0&&at.mode!==Yt)?G:at.mode===Yt&&(Mt=1,Mt=y(Mt,ot,F,0),Mt!==at.check)?W:(nt=Ze(j,ot,F,F),nt?(at.mode=Gt,U):(at.havedict=1,b))}o.inflateReset=J,o.inflateReset2=kt,o.inflateResetKeep=Z,o.inflateInit=Ut,o.inflateInit2=Lt,o.inflate=qe,o.inflateEnd=ai,o.inflateGetHeader=ui,o.inflateSetDictionary=fi,o.inflateInfo="pako inflate (from Nodeca project)"},function(h,o){"use strict";var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var w=Array.prototype.slice.call(arguments,1);w.length;){var E=w.shift();if(!!E){if(typeof E!="object")throw new TypeError(E+"must be non-object");for(var v in E)E.hasOwnProperty(v)&&(d[v]=E[v])}}return d},o.shrinkBuf=function(d,w){return d.length===w?d:d.subarray?d.subarray(0,w):(d.length=w,d)};var f={arraySet:function(d,w,E,v,c){if(w.subarray&&d.subarray){d.set(w.subarray(E,E+v),c);return}for(var _=0;_<v;_++)d[c+_]=w[E+_]},flattenChunks:function(d){var w,E,v,c,_,p;for(v=0,w=0,E=d.length;w<E;w++)v+=d[w].length;for(p=new Uint8Array(v),c=0,w=0,E=d.length;w<E;w++)_=d[w],p.set(_,c),c+=_.length;return p}},y={arraySet:function(d,w,E,v,c){for(var _=0;_<v;_++)d[c+_]=w[E+_]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,f)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,y))},o.setTyped(s)},function(h,o){"use strict";function s(f,y,d,w){for(var E=f&65535|0,v=f>>>16&65535|0,c=0;d!==0;){c=d>2e3?2e3:d,d-=c;do E=E+y[w++]|0,v=v+E|0;while(--c);E%=65521,v%=65521}return E|v<<16|0}h.exports=s},function(h,o){"use strict";function s(){for(var d,w=[],E=0;E<256;E++){d=E;for(var v=0;v<8;v++)d=d&1?3988292384^d>>>1:d>>>1;w[E]=d}return w}var f=s();function y(d,w,E,v){var c=f,_=v+E;d^=-1;for(var p=v;p<_;p++)d=d>>>8^c[(d^w[p])&255];return d^-1}h.exports=y},function(h,o){"use strict";var s=30,f=12;h.exports=function(d,w){var E,v,c,_,p,T,A,b,L,C,G,W,U,_t,et,St,dt,M,tt,ct,Rt,yt,Dt,Nt,Et;E=d.state,v=d.next_in,Nt=d.input,c=v+(d.avail_in-5),_=d.next_out,Et=d.output,p=_-(w-d.avail_out),T=_+(d.avail_out-257),A=E.dmax,b=E.wsize,L=E.whave,C=E.wnext,G=E.window,W=E.hold,U=E.bits,_t=E.lencode,et=E.distcode,St=(1<<E.lenbits)-1,dt=(1<<E.distbits)-1;t:do{U<15&&(W+=Nt[v++]<<U,U+=8,W+=Nt[v++]<<U,U+=8),M=_t[W&St];e:for(;;){if(tt=M>>>24,W>>>=tt,U-=tt,tt=M>>>16&255,tt===0)Et[_++]=M&65535;else if(tt&16){ct=M&65535,tt&=15,tt&&(U<tt&&(W+=Nt[v++]<<U,U+=8),ct+=W&(1<<tt)-1,W>>>=tt,U-=tt),U<15&&(W+=Nt[v++]<<U,U+=8,W+=Nt[v++]<<U,U+=8),M=et[W&dt];r:for(;;){if(tt=M>>>24,W>>>=tt,U-=tt,tt=M>>>16&255,tt&16){if(Rt=M&65535,tt&=15,U<tt&&(W+=Nt[v++]<<U,U+=8,U<tt&&(W+=Nt[v++]<<U,U+=8)),Rt+=W&(1<<tt)-1,Rt>A){d.msg="invalid distance too far back",E.mode=s;break t}if(W>>>=tt,U-=tt,tt=_-p,Rt>tt){if(tt=Rt-tt,tt>L&&E.sane){d.msg="invalid distance too far back",E.mode=s;break t}if(yt=0,Dt=G,C===0){if(yt+=b-tt,tt<ct){ct-=tt;do Et[_++]=G[yt++];while(--tt);yt=_-Rt,Dt=Et}}else if(C<tt){if(yt+=b+C-tt,tt-=C,tt<ct){ct-=tt;do Et[_++]=G[yt++];while(--tt);if(yt=0,C<ct){tt=C,ct-=tt;do Et[_++]=G[yt++];while(--tt);yt=_-Rt,Dt=Et}}}else if(yt+=C-tt,tt<ct){ct-=tt;do Et[_++]=G[yt++];while(--tt);yt=_-Rt,Dt=Et}for(;ct>2;)Et[_++]=Dt[yt++],Et[_++]=Dt[yt++],Et[_++]=Dt[yt++],ct-=3;ct&&(Et[_++]=Dt[yt++],ct>1&&(Et[_++]=Dt[yt++]))}else{yt=_-Rt;do Et[_++]=Et[yt++],Et[_++]=Et[yt++],Et[_++]=Et[yt++],ct-=3;while(ct>2);ct&&(Et[_++]=Et[yt++],ct>1&&(Et[_++]=Et[yt++]))}}else if((tt&64)===0){M=et[(M&65535)+(W&(1<<tt)-1)];continue r}else{d.msg="invalid distance code",E.mode=s;break t}break}}else if((tt&64)===0){M=_t[(M&65535)+(W&(1<<tt)-1)];continue e}else if(tt&32){E.mode=f;break t}else{d.msg="invalid literal/length code",E.mode=s;break t}break}}while(v<c&&_<T);ct=U>>3,v-=ct,U-=ct<<3,W&=(1<<U)-1,d.next_in=v,d.next_out=_,d.avail_in=v<c?5+(c-v):5-(v-c),d.avail_out=_<T?257+(T-_):257-(_-T),E.hold=W,E.bits=U}},function(h,o,s){"use strict";var f=s(33),y=15,d=852,w=592,E=0,v=1,c=2,_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(L,C,G,W,U,_t,et,St){var dt=St.bits,M=0,tt=0,ct=0,Rt=0,yt=0,Dt=0,Nt=0,Et=0,Yt=0,P=0,z,K,ut,bt,mt,Ft=null,Tt=0,Wt,Bt=new f.Buf16(y+1),ee=new f.Buf16(y+1),N=null,R=0,Y,Q,pt;for(M=0;M<=y;M++)Bt[M]=0;for(tt=0;tt<W;tt++)Bt[C[G+tt]]++;for(yt=dt,Rt=y;Rt>=1&&Bt[Rt]===0;Rt--);if(yt>Rt&&(yt=Rt),Rt===0)return U[_t++]=1<<24|64<<16|0,U[_t++]=1<<24|64<<16|0,St.bits=1,0;for(ct=1;ct<Rt&&Bt[ct]===0;ct++);for(yt<ct&&(yt=ct),Et=1,M=1;M<=y;M++)if(Et<<=1,Et-=Bt[M],Et<0)return-1;if(Et>0&&(L===E||Rt!==1))return-1;for(ee[1]=0,M=1;M<y;M++)ee[M+1]=ee[M]+Bt[M];for(tt=0;tt<W;tt++)C[G+tt]!==0&&(et[ee[C[G+tt]]++]=tt);if(L===E?(Ft=N=et,Wt=19):L===v?(Ft=_,Tt-=257,N=p,R-=257,Wt=256):(Ft=T,N=A,Wt=-1),P=0,tt=0,M=ct,mt=_t,Dt=yt,Nt=0,ut=-1,Yt=1<<yt,bt=Yt-1,L===v&&Yt>d||L===c&&Yt>w)return 1;for(;;){Y=M-Nt,et[tt]<Wt?(Q=0,pt=et[tt]):et[tt]>Wt?(Q=N[R+et[tt]],pt=Ft[Tt+et[tt]]):(Q=32+64,pt=0),z=1<<M-Nt,K=1<<Dt,ct=K;do K-=z,U[mt+(P>>Nt)+K]=Y<<24|Q<<16|pt|0;while(K!==0);for(z=1<<M-1;P&z;)z>>=1;if(z!==0?(P&=z-1,P+=z):P=0,tt++,--Bt[M]===0){if(M===Rt)break;M=C[G+et[tt]]}if(M>yt&&(P&bt)!==ut){for(Nt===0&&(Nt=yt),mt+=ct,Dt=M-Nt,Et=1<<Dt;Dt+Nt<Rt&&(Et-=Bt[Dt+Nt],!(Et<=0));)Dt++,Et<<=1;if(Yt+=1<<Dt,L===v&&Yt>d||L===c&&Yt>w)return 1;ut=P&bt,U[ut]=yt<<24|Dt<<16|mt-_t|0}}return P!==0&&(U[mt+P]=M-Nt<<24|64<<16|0),St.bits=yt,0}},function(h,o,s){"use strict";var f=s(33),y=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var w=new f.Buf8(256),E=0;E<256;E++)w[E]=E>=252?6:E>=248?5:E>=240?4:E>=224?3:E>=192?2:1;w[254]=w[254]=1,o.string2buf=function(c){var _,p,T,A,b,L=c.length,C=0;for(A=0;A<L;A++)p=c.charCodeAt(A),(p&64512)===55296&&A+1<L&&(T=c.charCodeAt(A+1),(T&64512)===56320&&(p=65536+(p-55296<<10)+(T-56320),A++)),C+=p<128?1:p<2048?2:p<65536?3:4;for(_=new f.Buf8(C),b=0,A=0;b<C;A++)p=c.charCodeAt(A),(p&64512)===55296&&A+1<L&&(T=c.charCodeAt(A+1),(T&64512)===56320&&(p=65536+(p-55296<<10)+(T-56320),A++)),p<128?_[b++]=p:p<2048?(_[b++]=192|p>>>6,_[b++]=128|p&63):p<65536?(_[b++]=224|p>>>12,_[b++]=128|p>>>6&63,_[b++]=128|p&63):(_[b++]=240|p>>>18,_[b++]=128|p>>>12&63,_[b++]=128|p>>>6&63,_[b++]=128|p&63);return _};function v(c,_){if(_<65537&&(c.subarray&&d||!c.subarray&&y))return String.fromCharCode.apply(null,f.shrinkBuf(c,_));for(var p="",T=0;T<_;T++)p+=String.fromCharCode(c[T]);return p}o.buf2binstring=function(c){return v(c,c.length)},o.binstring2buf=function(c){for(var _=new f.Buf8(c.length),p=0,T=_.length;p<T;p++)_[p]=c.charCodeAt(p);return _},o.buf2string=function(c,_){var p,T,A,b,L=_||c.length,C=new Array(L*2);for(T=0,p=0;p<L;){if(A=c[p++],A<128){C[T++]=A;continue}if(b=w[A],b>4){C[T++]=65533,p+=b-1;continue}for(A&=b===2?31:b===3?15:7;b>1&&p<L;)A=A<<6|c[p++]&63,b--;if(b>1){C[T++]=65533;continue}A<65536?C[T++]=A:(A-=65536,C[T++]=55296|A>>10&1023,C[T++]=56320|A&1023)}return v(C,T)},o.utf8border=function(c,_){var p;for(_=_||c.length,_>c.length&&(_=c.length),p=_-1;p>=0&&(c[p]&192)===128;)p--;return p<0||p===0?_:p+w[c[p]]>_?p:_}},function(h,o){"use strict";h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(h,o){"use strict";h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(h,o){"use strict";function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}h.exports=s},function(h,o){"use strict";function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}h.exports=s}])})});var vo=gr(ii=>{"use strict";ii.byteLength=fu;ii.toByteArray=hu;ii.fromByteArray=du;var Le=[],Fe=[],uu=typeof Uint8Array<"u"?Uint8Array:Array,Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ir=0,yo=Ri.length;ir<yo;++ir)Le[ir]=Ri[ir],Fe[Ri.charCodeAt(ir)]=ir;var ir,yo;Fe["-".charCodeAt(0)]=62;Fe["_".charCodeAt(0)]=63;function go(h){var o=h.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=h.indexOf("=");s===-1&&(s=o);var f=s===o?0:4-s%4;return[s,f]}function fu(h){var o=go(h),s=o[0],f=o[1];return(s+f)*3/4-f}function cu(h,o,s){return(o+s)*3/4-s}function hu(h){var o,s=go(h),f=s[0],y=s[1],d=new uu(cu(h,f,y)),w=0,E=y>0?f-4:f,v;for(v=0;v<E;v+=4)o=Fe[h.charCodeAt(v)]<<18|Fe[h.charCodeAt(v+1)]<<12|Fe[h.charCodeAt(v+2)]<<6|Fe[h.charCodeAt(v+3)],d[w++]=o>>16&255,d[w++]=o>>8&255,d[w++]=o&255;return y===2&&(o=Fe[h.charCodeAt(v)]<<2|Fe[h.charCodeAt(v+1)]>>4,d[w++]=o&255),y===1&&(o=Fe[h.charCodeAt(v)]<<10|Fe[h.charCodeAt(v+1)]<<4|Fe[h.charCodeAt(v+2)]>>2,d[w++]=o>>8&255,d[w++]=o&255),d}function lu(h){return Le[h>>18&63]+Le[h>>12&63]+Le[h>>6&63]+Le[h&63]}function pu(h,o,s){for(var f,y=[],d=o;d<s;d+=3)f=(h[d]<<16&16711680)+(h[d+1]<<8&65280)+(h[d+2]&255),y.push(lu(f));return y.join("")}function du(h){for(var o,s=h.length,f=s%3,y=[],d=16383,w=0,E=s-f;w<E;w+=d)y.push(pu(h,w,w+d>E?E:w+d));return f===1?(o=h[s-1],y.push(Le[o>>2]+Le[o<<4&63]+"==")):f===2&&(o=(h[s-2]<<8)+h[s-1],y.push(Le[o>>10]+Le[o>>4&63]+Le[o<<2&63]+"=")),y.join("")}});var mo=gr(Ti=>{Ti.read=function(h,o,s,f,y){var d,w,E=y*8-f-1,v=(1<<E)-1,c=v>>1,_=-7,p=s?y-1:0,T=s?-1:1,A=h[o+p];for(p+=T,d=A&(1<<-_)-1,A>>=-_,_+=E;_>0;d=d*256+h[o+p],p+=T,_-=8);for(w=d&(1<<-_)-1,d>>=-_,_+=f;_>0;w=w*256+h[o+p],p+=T,_-=8);if(d===0)d=1-c;else{if(d===v)return w?NaN:(A?-1:1)*(1/0);w=w+Math.pow(2,f),d=d-c}return(A?-1:1)*w*Math.pow(2,d-f)};Ti.write=function(h,o,s,f,y,d){var w,E,v,c=d*8-y-1,_=(1<<c)-1,p=_>>1,T=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=f?0:d-1,b=f?1:-1,L=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,w=_):(w=Math.floor(Math.log(o)/Math.LN2),o*(v=Math.pow(2,-w))<1&&(w--,v*=2),w+p>=1?o+=T/v:o+=T*Math.pow(2,1-p),o*v>=2&&(w++,v/=2),w+p>=_?(E=0,w=_):w+p>=1?(E=(o*v-1)*Math.pow(2,y),w=w+p):(E=o*Math.pow(2,p-1)*Math.pow(2,y),w=0));y>=8;h[s+A]=E&255,A+=b,E/=256,y-=8);for(w=w<<y|E,c+=y;c>0;h[s+A]=w&255,A+=b,w/=256,c-=8);h[s+A-b]|=L*128}});var Co=gr(Er=>{"use strict";var Oi=vo(),wr=mo(),wo=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Er.Buffer=H;Er.SlowBuffer=Su;Er.INSPECT_MAX_BYTES=50;var ni=2147483647;Er.kMaxLength=ni;H.TYPED_ARRAY_SUPPORT=yu();!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function yu(){try{let h=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(h,o),h.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(!!H.isBuffer(this))return this.buffer}});Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(!!H.isBuffer(this))return this.byteOffset}});function je(h){if(h>ni)throw new RangeError('The value "'+h+'" is invalid for option "size"');let o=new Uint8Array(h);return Object.setPrototypeOf(o,H.prototype),o}function H(h,o,s){if(typeof h=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ci(h)}return xo(h,o,s)}H.poolSize=8192;function xo(h,o,s){if(typeof h=="string")return vu(h,o);if(ArrayBuffer.isView(h))return mu(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(De(h,ArrayBuffer)||h&&De(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(h,SharedArrayBuffer)||h&&De(h.buffer,SharedArrayBuffer)))return Li(h,o,s);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let f=h.valueOf&&h.valueOf();if(f!=null&&f!==h)return H.from(f,o,s);let y=wu(h);if(y)return y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return H.from(h[Symbol.toPrimitive]("string"),o,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}H.from=function(h,o,s){return xo(h,o,s)};Object.setPrototypeOf(H.prototype,Uint8Array.prototype);Object.setPrototypeOf(H,Uint8Array);function Fo(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function gu(h,o,s){return Fo(h),h<=0?je(h):o!==void 0?typeof s=="string"?je(h).fill(o,s):je(h).fill(o):je(h)}H.alloc=function(h,o,s){return gu(h,o,s)};function Ci(h){return Fo(h),je(h<0?0:Bi(h)|0)}H.allocUnsafe=function(h){return Ci(h)};H.allocUnsafeSlow=function(h){return Ci(h)};function vu(h,o){if((typeof o!="string"||o==="")&&(o="utf8"),!H.isEncoding(o))throw new TypeError("Unknown encoding: "+o);let s=Io(h,o)|0,f=je(s),y=f.write(h,o);return y!==s&&(f=f.slice(0,y)),f}function Ai(h){let o=h.length<0?0:Bi(h.length)|0,s=je(o);for(let f=0;f<o;f+=1)s[f]=h[f]&255;return s}function mu(h){if(De(h,Uint8Array)){let o=new Uint8Array(h);return Li(o.buffer,o.byteOffset,o.byteLength)}return Ai(h)}function Li(h,o,s){if(o<0||h.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<o+(s||0))throw new RangeError('"length" is outside of buffer bounds');let f;return o===void 0&&s===void 0?f=new Uint8Array(h):s===void 0?f=new Uint8Array(h,o):f=new Uint8Array(h,o,s),Object.setPrototypeOf(f,H.prototype),f}function wu(h){if(H.isBuffer(h)){let o=Bi(h.length)|0,s=je(o);return s.length===0||h.copy(s,0,0,o),s}if(h.length!==void 0)return typeof h.length!="number"||Mi(h.length)?je(0):Ai(h);if(h.type==="Buffer"&&Array.isArray(h.data))return Ai(h.data)}function Bi(h){if(h>=ni)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ni.toString(16)+" bytes");return h|0}function Su(h){return+h!=h&&(h=0),H.alloc(+h)}H.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==H.prototype};H.compare=function(o,s){if(De(o,Uint8Array)&&(o=H.from(o,o.offset,o.byteLength)),De(s,Uint8Array)&&(s=H.from(s,s.offset,s.byteLength)),!H.isBuffer(o)||!H.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===s)return 0;let f=o.length,y=s.length;for(let d=0,w=Math.min(f,y);d<w;++d)if(o[d]!==s[d]){f=o[d],y=s[d];break}return f<y?-1:y<f?1:0};H.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};H.concat=function(o,s){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return H.alloc(0);let f;if(s===void 0)for(s=0,f=0;f<o.length;++f)s+=o[f].length;let y=H.allocUnsafe(s),d=0;for(f=0;f<o.length;++f){let w=o[f];if(De(w,Uint8Array))d+w.length>y.length?(H.isBuffer(w)||(w=H.from(w)),w.copy(y,d)):Uint8Array.prototype.set.call(y,w,d);else if(H.isBuffer(w))w.copy(y,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=w.length}return y};function Io(h,o){if(H.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||De(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let s=h.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&s===0)return 0;let y=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Di(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return Do(h).length;default:if(y)return f?-1:Di(h).length;o=(""+o).toLowerCase(),y=!0}}H.byteLength=Io;function Eu(h,o,s){let f=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,o>>>=0,s<=o))return"";for(h||(h="utf8");;)switch(h){case"hex":return Ou(this,o,s);case"utf8":case"utf-8":return ko(this,o,s);case"ascii":return Ru(this,o,s);case"latin1":case"binary":return Tu(this,o,s);case"base64":return ku(this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Au(this,o,s);default:if(f)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),f=!0}}H.prototype._isBuffer=!0;function nr(h,o,s){let f=h[o];h[o]=h[s],h[s]=f}H.prototype.swap16=function(){let o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<o;s+=2)nr(this,s,s+1);return this};H.prototype.swap32=function(){let o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<o;s+=4)nr(this,s,s+3),nr(this,s+1,s+2);return this};H.prototype.swap64=function(){let o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<o;s+=8)nr(this,s,s+7),nr(this,s+1,s+6),nr(this,s+2,s+5),nr(this,s+3,s+4);return this};H.prototype.toString=function(){let o=this.length;return o===0?"":arguments.length===0?ko(this,0,o):Eu.apply(this,arguments)};H.prototype.toLocaleString=H.prototype.toString;H.prototype.equals=function(o){if(!H.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:H.compare(this,o)===0};H.prototype.inspect=function(){let o="",s=Er.INSPECT_MAX_BYTES;return o=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(o+=" ... "),"<Buffer "+o+">"};wo&&(H.prototype[wo]=H.prototype.inspect);H.prototype.compare=function(o,s,f,y,d){if(De(o,Uint8Array)&&(o=H.from(o,o.offset,o.byteLength)),!H.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(s===void 0&&(s=0),f===void 0&&(f=o?o.length:0),y===void 0&&(y=0),d===void 0&&(d=this.length),s<0||f>o.length||y<0||d>this.length)throw new RangeError("out of range index");if(y>=d&&s>=f)return 0;if(y>=d)return-1;if(s>=f)return 1;if(s>>>=0,f>>>=0,y>>>=0,d>>>=0,this===o)return 0;let w=d-y,E=f-s,v=Math.min(w,E),c=this.slice(y,d),_=o.slice(s,f);for(let p=0;p<v;++p)if(c[p]!==_[p]){w=c[p],E=_[p];break}return w<E?-1:E<w?1:0};function bo(h,o,s,f,y){if(h.length===0)return-1;if(typeof s=="string"?(f=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Mi(s)&&(s=y?0:h.length-1),s<0&&(s=h.length+s),s>=h.length){if(y)return-1;s=h.length-1}else if(s<0)if(y)s=0;else return-1;if(typeof o=="string"&&(o=H.from(o,f)),H.isBuffer(o))return o.length===0?-1:So(h,o,s,f,y);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?y?Uint8Array.prototype.indexOf.call(h,o,s):Uint8Array.prototype.lastIndexOf.call(h,o,s):So(h,[o],s,f,y);throw new TypeError("val must be string, number or Buffer")}function So(h,o,s,f,y){let d=1,w=h.length,E=o.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(h.length<2||o.length<2)return-1;d=2,w/=2,E/=2,s/=2}function v(_,p){return d===1?_[p]:_.readUInt16BE(p*d)}let c;if(y){let _=-1;for(c=s;c<w;c++)if(v(h,c)===v(o,_===-1?0:c-_)){if(_===-1&&(_=c),c-_+1===E)return _*d}else _!==-1&&(c-=c-_),_=-1}else for(s+E>w&&(s=w-E),c=s;c>=0;c--){let _=!0;for(let p=0;p<E;p++)if(v(h,c+p)!==v(o,p)){_=!1;break}if(_)return c}return-1}H.prototype.includes=function(o,s,f){return this.indexOf(o,s,f)!==-1};H.prototype.indexOf=function(o,s,f){return bo(this,o,s,f,!0)};H.prototype.lastIndexOf=function(o,s,f){return bo(this,o,s,f,!1)};function _u(h,o,s,f){s=Number(s)||0;let y=h.length-s;f?(f=Number(f),f>y&&(f=y)):f=y;let d=o.length;f>d/2&&(f=d/2);let w;for(w=0;w<f;++w){let E=parseInt(o.substr(w*2,2),16);if(Mi(E))return w;h[s+w]=E}return w}function xu(h,o,s,f){return oi(Di(o,h.length-s),h,s,f)}function Fu(h,o,s,f){return oi(Bu(o),h,s,f)}function Iu(h,o,s,f){return oi(Do(o),h,s,f)}function bu(h,o,s,f){return oi(Uu(o,h.length-s),h,s,f)}H.prototype.write=function(o,s,f,y){if(s===void 0)y="utf8",f=this.length,s=0;else if(f===void 0&&typeof s=="string")y=s,f=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(f)?(f=f>>>0,y===void 0&&(y="utf8")):(y=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-s;if((f===void 0||f>d)&&(f=d),o.length>0&&(f<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");let w=!1;for(;;)switch(y){case"hex":return _u(this,o,s,f);case"utf8":case"utf-8":return xu(this,o,s,f);case"ascii":case"latin1":case"binary":return Fu(this,o,s,f);case"base64":return Iu(this,o,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bu(this,o,s,f);default:if(w)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),w=!0}};H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ku(h,o,s){return o===0&&s===h.length?Oi.fromByteArray(h):Oi.fromByteArray(h.slice(o,s))}function ko(h,o,s){s=Math.min(h.length,s);let f=[],y=o;for(;y<s;){let d=h[y],w=null,E=d>239?4:d>223?3:d>191?2:1;if(y+E<=s){let v,c,_,p;switch(E){case 1:d<128&&(w=d);break;case 2:v=h[y+1],(v&192)===128&&(p=(d&31)<<6|v&63,p>127&&(w=p));break;case 3:v=h[y+1],c=h[y+2],(v&192)===128&&(c&192)===128&&(p=(d&15)<<12|(v&63)<<6|c&63,p>2047&&(p<55296||p>57343)&&(w=p));break;case 4:v=h[y+1],c=h[y+2],_=h[y+3],(v&192)===128&&(c&192)===128&&(_&192)===128&&(p=(d&15)<<18|(v&63)<<12|(c&63)<<6|_&63,p>65535&&p<1114112&&(w=p))}}w===null?(w=65533,E=1):w>65535&&(w-=65536,f.push(w>>>10&1023|55296),w=56320|w&1023),f.push(w),y+=E}return Nu(f)}var Eo=4096;function Nu(h){let o=h.length;if(o<=Eo)return String.fromCharCode.apply(String,h);let s="",f=0;for(;f<o;)s+=String.fromCharCode.apply(String,h.slice(f,f+=Eo));return s}function Ru(h,o,s){let f="";s=Math.min(h.length,s);for(let y=o;y<s;++y)f+=String.fromCharCode(h[y]&127);return f}function Tu(h,o,s){let f="";s=Math.min(h.length,s);for(let y=o;y<s;++y)f+=String.fromCharCode(h[y]);return f}function Ou(h,o,s){let f=h.length;(!o||o<0)&&(o=0),(!s||s<0||s>f)&&(s=f);let y="";for(let d=o;d<s;++d)y+=Mu[h[d]];return y}function Au(h,o,s){let f=h.slice(o,s),y="";for(let d=0;d<f.length-1;d+=2)y+=String.fromCharCode(f[d]+f[d+1]*256);return y}H.prototype.slice=function(o,s){let f=this.length;o=~~o,s=s===void 0?f:~~s,o<0?(o+=f,o<0&&(o=0)):o>f&&(o=f),s<0?(s+=f,s<0&&(s=0)):s>f&&(s=f),s<o&&(s=o);let y=this.subarray(o,s);return Object.setPrototypeOf(y,H.prototype),y};function oe(h,o,s){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+o>s)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(o,s,f){o=o>>>0,s=s>>>0,f||oe(o,s,this.length);let y=this[o],d=1,w=0;for(;++w<s&&(d*=256);)y+=this[o+w]*d;return y};H.prototype.readUintBE=H.prototype.readUIntBE=function(o,s,f){o=o>>>0,s=s>>>0,f||oe(o,s,this.length);let y=this[o+--s],d=1;for(;s>0&&(d*=256);)y+=this[o+--s]*d;return y};H.prototype.readUint8=H.prototype.readUInt8=function(o,s){return o=o>>>0,s||oe(o,1,this.length),this[o]};H.prototype.readUint16LE=H.prototype.readUInt16LE=function(o,s){return o=o>>>0,s||oe(o,2,this.length),this[o]|this[o+1]<<8};H.prototype.readUint16BE=H.prototype.readUInt16BE=function(o,s){return o=o>>>0,s||oe(o,2,this.length),this[o]<<8|this[o+1]};H.prototype.readUint32LE=H.prototype.readUInt32LE=function(o,s){return o=o>>>0,s||oe(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216};H.prototype.readUint32BE=H.prototype.readUInt32BE=function(o,s){return o=o>>>0,s||oe(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])};H.prototype.readBigUInt64LE=Ve(function(o){o=o>>>0,Sr(o,"offset");let s=this[o],f=this[o+7];(s===void 0||f===void 0)&&Ur(o,this.length-8);let y=s+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,d=this[++o]+this[++o]*2**8+this[++o]*2**16+f*2**24;return BigInt(y)+(BigInt(d)<<BigInt(32))});H.prototype.readBigUInt64BE=Ve(function(o){o=o>>>0,Sr(o,"offset");let s=this[o],f=this[o+7];(s===void 0||f===void 0)&&Ur(o,this.length-8);let y=s*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],d=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+f;return(BigInt(y)<<BigInt(32))+BigInt(d)});H.prototype.readIntLE=function(o,s,f){o=o>>>0,s=s>>>0,f||oe(o,s,this.length);let y=this[o],d=1,w=0;for(;++w<s&&(d*=256);)y+=this[o+w]*d;return d*=128,y>=d&&(y-=Math.pow(2,8*s)),y};H.prototype.readIntBE=function(o,s,f){o=o>>>0,s=s>>>0,f||oe(o,s,this.length);let y=s,d=1,w=this[o+--y];for(;y>0&&(d*=256);)w+=this[o+--y]*d;return d*=128,w>=d&&(w-=Math.pow(2,8*s)),w};H.prototype.readInt8=function(o,s){return o=o>>>0,s||oe(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]};H.prototype.readInt16LE=function(o,s){o=o>>>0,s||oe(o,2,this.length);let f=this[o]|this[o+1]<<8;return f&32768?f|4294901760:f};H.prototype.readInt16BE=function(o,s){o=o>>>0,s||oe(o,2,this.length);let f=this[o+1]|this[o]<<8;return f&32768?f|4294901760:f};H.prototype.readInt32LE=function(o,s){return o=o>>>0,s||oe(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24};H.prototype.readInt32BE=function(o,s){return o=o>>>0,s||oe(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]};H.prototype.readBigInt64LE=Ve(function(o){o=o>>>0,Sr(o,"offset");let s=this[o],f=this[o+7];(s===void 0||f===void 0)&&Ur(o,this.length-8);let y=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(f<<24);return(BigInt(y)<<BigInt(32))+BigInt(s+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)});H.prototype.readBigInt64BE=Ve(function(o){o=o>>>0,Sr(o,"offset");let s=this[o],f=this[o+7];(s===void 0||f===void 0)&&Ur(o,this.length-8);let y=(s<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(y)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+f)});H.prototype.readFloatLE=function(o,s){return o=o>>>0,s||oe(o,4,this.length),wr.read(this,o,!0,23,4)};H.prototype.readFloatBE=function(o,s){return o=o>>>0,s||oe(o,4,this.length),wr.read(this,o,!1,23,4)};H.prototype.readDoubleLE=function(o,s){return o=o>>>0,s||oe(o,8,this.length),wr.read(this,o,!0,52,8)};H.prototype.readDoubleBE=function(o,s){return o=o>>>0,s||oe(o,8,this.length),wr.read(this,o,!1,52,8)};function ge(h,o,s,f,y,d){if(!H.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>y||o<d)throw new RangeError('"value" argument is out of bounds');if(s+f>h.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(o,s,f,y){if(o=+o,s=s>>>0,f=f>>>0,!y){let E=Math.pow(2,8*f)-1;ge(this,o,s,f,E,0)}let d=1,w=0;for(this[s]=o&255;++w<f&&(d*=256);)this[s+w]=o/d&255;return s+f};H.prototype.writeUintBE=H.prototype.writeUIntBE=function(o,s,f,y){if(o=+o,s=s>>>0,f=f>>>0,!y){let E=Math.pow(2,8*f)-1;ge(this,o,s,f,E,0)}let d=f-1,w=1;for(this[s+d]=o&255;--d>=0&&(w*=256);)this[s+d]=o/w&255;return s+f};H.prototype.writeUint8=H.prototype.writeUInt8=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,1,255,0),this[s]=o&255,s+1};H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,2,65535,0),this[s]=o&255,this[s+1]=o>>>8,s+2};H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,2,65535,0),this[s]=o>>>8,this[s+1]=o&255,s+2};H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,4,4294967295,0),this[s+3]=o>>>24,this[s+2]=o>>>16,this[s+1]=o>>>8,this[s]=o&255,s+4};H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,4,4294967295,0),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4};function No(h,o,s,f,y){Lo(o,f,y,h,s,7);let d=Number(o&BigInt(4294967295));h[s++]=d,d=d>>8,h[s++]=d,d=d>>8,h[s++]=d,d=d>>8,h[s++]=d;let w=Number(o>>BigInt(32)&BigInt(4294967295));return h[s++]=w,w=w>>8,h[s++]=w,w=w>>8,h[s++]=w,w=w>>8,h[s++]=w,s}function Ro(h,o,s,f,y){Lo(o,f,y,h,s,7);let d=Number(o&BigInt(4294967295));h[s+7]=d,d=d>>8,h[s+6]=d,d=d>>8,h[s+5]=d,d=d>>8,h[s+4]=d;let w=Number(o>>BigInt(32)&BigInt(4294967295));return h[s+3]=w,w=w>>8,h[s+2]=w,w=w>>8,h[s+1]=w,w=w>>8,h[s]=w,s+8}H.prototype.writeBigUInt64LE=Ve(function(o,s=0){return No(this,o,s,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeBigUInt64BE=Ve(function(o,s=0){return Ro(this,o,s,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeIntLE=function(o,s,f,y){if(o=+o,s=s>>>0,!y){let v=Math.pow(2,8*f-1);ge(this,o,s,f,v-1,-v)}let d=0,w=1,E=0;for(this[s]=o&255;++d<f&&(w*=256);)o<0&&E===0&&this[s+d-1]!==0&&(E=1),this[s+d]=(o/w>>0)-E&255;return s+f};H.prototype.writeIntBE=function(o,s,f,y){if(o=+o,s=s>>>0,!y){let v=Math.pow(2,8*f-1);ge(this,o,s,f,v-1,-v)}let d=f-1,w=1,E=0;for(this[s+d]=o&255;--d>=0&&(w*=256);)o<0&&E===0&&this[s+d+1]!==0&&(E=1),this[s+d]=(o/w>>0)-E&255;return s+f};H.prototype.writeInt8=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,1,127,-128),o<0&&(o=255+o+1),this[s]=o&255,s+1};H.prototype.writeInt16LE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,2,32767,-32768),this[s]=o&255,this[s+1]=o>>>8,s+2};H.prototype.writeInt16BE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,2,32767,-32768),this[s]=o>>>8,this[s+1]=o&255,s+2};H.prototype.writeInt32LE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,4,2147483647,-2147483648),this[s]=o&255,this[s+1]=o>>>8,this[s+2]=o>>>16,this[s+3]=o>>>24,s+4};H.prototype.writeInt32BE=function(o,s,f){return o=+o,s=s>>>0,f||ge(this,o,s,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4};H.prototype.writeBigInt64LE=Ve(function(o,s=0){return No(this,o,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});H.prototype.writeBigInt64BE=Ve(function(o,s=0){return Ro(this,o,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function To(h,o,s,f,y,d){if(s+f>h.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function Oo(h,o,s,f,y){return o=+o,s=s>>>0,y||To(h,o,s,4,34028234663852886e22,-34028234663852886e22),wr.write(h,o,s,f,23,4),s+4}H.prototype.writeFloatLE=function(o,s,f){return Oo(this,o,s,!0,f)};H.prototype.writeFloatBE=function(o,s,f){return Oo(this,o,s,!1,f)};function Ao(h,o,s,f,y){return o=+o,s=s>>>0,y||To(h,o,s,8,17976931348623157e292,-17976931348623157e292),wr.write(h,o,s,f,52,8),s+8}H.prototype.writeDoubleLE=function(o,s,f){return Ao(this,o,s,!0,f)};H.prototype.writeDoubleBE=function(o,s,f){return Ao(this,o,s,!1,f)};H.prototype.copy=function(o,s,f,y){if(!H.isBuffer(o))throw new TypeError("argument should be a Buffer");if(f||(f=0),!y&&y!==0&&(y=this.length),s>=o.length&&(s=o.length),s||(s=0),y>0&&y<f&&(y=f),y===f||o.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),o.length-s<y-f&&(y=o.length-s+f);let d=y-f;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,f,y):Uint8Array.prototype.set.call(o,this.subarray(f,y),s),d};H.prototype.fill=function(o,s,f,y){if(typeof o=="string"){if(typeof s=="string"?(y=s,s=0,f=this.length):typeof f=="string"&&(y=f,f=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!H.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(o.length===1){let w=o.charCodeAt(0);(y==="utf8"&&w<128||y==="latin1")&&(o=w)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(s<0||this.length<s||this.length<f)throw new RangeError("Out of range index");if(f<=s)return this;s=s>>>0,f=f===void 0?this.length:f>>>0,o||(o=0);let d;if(typeof o=="number")for(d=s;d<f;++d)this[d]=o;else{let w=H.isBuffer(o)?o:H.from(o,y),E=w.length;if(E===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(d=0;d<f-s;++d)this[d+s]=w[d%E]}return this};var mr={};function Ui(h,o,s){mr[h]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:y,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}Ui("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ui("ERR_INVALID_ARG_TYPE",function(h,o){return`The "${h}" argument must be of type number. Received type ${typeof o}`},TypeError);Ui("ERR_OUT_OF_RANGE",function(h,o,s){let f=`The value of "${h}" is out of range.`,y=s;return Number.isInteger(s)&&Math.abs(s)>2**32?y=_o(String(s)):typeof s=="bigint"&&(y=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(y=_o(y)),y+="n"),f+=` It must be ${o}. Received ${y}`,f},RangeError);function _o(h){let o="",s=h.length,f=h[0]==="-"?1:0;for(;s>=f+4;s-=3)o=`_${h.slice(s-3,s)}${o}`;return`${h.slice(0,s)}${o}`}function Lu(h,o,s){Sr(o,"offset"),(h[o]===void 0||h[o+s]===void 0)&&Ur(o,h.length-(s+1))}function Lo(h,o,s,f,y,d){if(h>s||h<o){let w=typeof o=="bigint"?"n":"",E;throw d>3?o===0||o===BigInt(0)?E=`>= 0${w} and < 2${w} ** ${(d+1)*8}${w}`:E=`>= -(2${w} ** ${(d+1)*8-1}${w}) and < 2 ** ${(d+1)*8-1}${w}`:E=`>= ${o}${w} and <= ${s}${w}`,new mr.ERR_OUT_OF_RANGE("value",E,h)}Lu(f,y,d)}function Sr(h,o){if(typeof h!="number")throw new mr.ERR_INVALID_ARG_TYPE(o,"number",h)}function Ur(h,o,s){throw Math.floor(h)!==h?(Sr(h,s),new mr.ERR_OUT_OF_RANGE(s||"offset","an integer",h)):o<0?new mr.ERR_BUFFER_OUT_OF_BOUNDS:new mr.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${o}`,h)}var Du=/[^+/0-9A-Za-z-_]/g;function Cu(h){if(h=h.split("=")[0],h=h.trim().replace(Du,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function Di(h,o){o=o||1/0;let s,f=h.length,y=null,d=[];for(let w=0;w<f;++w){if(s=h.charCodeAt(w),s>55295&&s<57344){if(!y){if(s>56319){(o-=3)>-1&&d.push(239,191,189);continue}else if(w+1===f){(o-=3)>-1&&d.push(239,191,189);continue}y=s;continue}if(s<56320){(o-=3)>-1&&d.push(239,191,189),y=s;continue}s=(y-55296<<10|s-56320)+65536}else y&&(o-=3)>-1&&d.push(239,191,189);if(y=null,s<128){if((o-=1)<0)break;d.push(s)}else if(s<2048){if((o-=2)<0)break;d.push(s>>6|192,s&63|128)}else if(s<65536){if((o-=3)<0)break;d.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((o-=4)<0)break;d.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return d}function Bu(h){let o=[];for(let s=0;s<h.length;++s)o.push(h.charCodeAt(s)&255);return o}function Uu(h,o){let s,f,y,d=[];for(let w=0;w<h.length&&!((o-=2)<0);++w)s=h.charCodeAt(w),f=s>>8,y=s%256,d.push(y),d.push(f);return d}function Do(h){return Oi.toByteArray(Cu(h))}function oi(h,o,s,f){let y;for(y=0;y<f&&!(y+s>=o.length||y>=h.length);++y)o[y+s]=h[y];return y}function De(h,o){return h instanceof o||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===o.name}function Mi(h){return h!==h}var Mu=function(){let h="0123456789abcdef",o=new Array(256);for(let s=0;s<16;++s){let f=s*16;for(let y=0;y<16;++y)o[f+y]=h[s]+h[y]}return o}();function Ve(h){return typeof BigInt>"u"?Pu:h}function Pu(){throw new Error("BigInt not supported")}});var Vo=gr((Nf,Gu)=>{Gu.exports=""});var Zo=gr((Lf,Ku)=>{Ku.exports=`


<!--

<Menu>
<ImageOrVid><Result watched image>
<Result Spectrogram> <Compared Spectrogram> (can overlay)
<Res2>               <Comp2>
    ...                 ...

todo:

Concise menu, finish file loading
Result list + comparison
Result saving/loading files
mediarecorder on canvas result too for vod
webworkers probably good idea for processing image on secondary canvases

frame buffering stuff cuz graphs


-->

        <div> <!-- We want the source canvas to maintain the source image/video's aspect ratio so it looks correct, the capture can be stretched otherwise-->
            <canvas id="picker" style="z-index:3; width:49.99%; height:25%;" ></canvas>
            <img src="" style="z-index:1; width:49.99%; height:25%;" ></img>
            <video src="" style="display:none; z-index:2; width:49.99%; height:25%;" ></video>
        </div>
        <canvas id="capture" style="left:50vw; z-index:11; width:49.99%; height:25%;"></canvas>

        <div id="menu" style="top:27.5%;">
            <button id="snip">Analyze</button>
            <button id="animate">Record</button>
            <button id="webcam">Use Webcam</button>
            <button id="image">Use Image</button>
            <span style="color:white;">Image:</span><select id="imgselect">
                <option value="src/assets/spectrum_full.png" selected>Full Image</option>
                <option value="src/assets/spectrum1.png">Spectrum 1</option>
                <option value="src/assets/spectrum2.jpg">Spectrum 2</option>
                <option value="src/assets/shrimp.jpg">Shrimp</option>
                <option value="src/assets/chickenfat.png">Chicken Fat</option>
                <option value="src/assets/chickenbreast.png">Chicken Breast</option>
                <option value="src/assets/brownbeerbottle.png">Brown Beer Bottle</option>
            </select>
            <input type="url" id="imgurl" placeholder="Image URL"></input>
            <button id="setImgUrl">Set Image URL</button>
            <input type="url" id="videourl" placeholder="Video URL"></input>
            <button id="setVideoUrl">Set Video URL</button>
            <input type="file" id="fileinput" placeholder="From File"></input>
            <span style="color:white;">Click to draw a rectangle around the portion of the image you want to analyze!</span>
        <hr>
        <div width="45vw" height="60%" id="compare" style="overflow-y:scroll;">
        </div>
        <div width="45vw" height="60%" id="captured" style="overflow-y:scroll;">
        </div>
        <div width="10vw" height="60%"  id="saved" style="overflow-y:scroll;">
        </div>`});var Cr=class{constructor(o=this.onOpen,s=null,f=null){this.onOpen=o,this.notes=[{idx:0,text:"comment"}],s!==null&&document.getElementById(s).addEventListener("click",this.saveCSV),f!==null&&document.getElementById(f).addEventListener("click",this.openCSV)}processArraysForCSV(o=["1|2|3","3|2|1"],s="|",f="a,b,c",y=!1){let d=f+`
`,w=0;return o.forEach((E,v)=>{o[v]==="string"&&s!==","?d+=E.split(s).join(","):csvData+=E.join(","),y===!0&&this.notes[w].idx===v&&(E+=this.notes[w].text,w++),E.indexOf(`
`)<0&&(d+=`
`)}),d}static saveCSV(o=`a,b,c
1,2,3
3,2,1
`,s=new Date().toISOString()){var f=document.createElement("a");f.href="data:text/csv;charset=utf-8,"+encodeURI(o),f.target="_blank",s!==""?f.download=s+".csv":f.download=Date().toISOString()+".csv",f.click()}static openCSV(o=",",s=(f,y,d)=>d){var f=document.createElement("input");f.accept=".csv",f.type="file",f.onchange=y=>{var d=y.target.files[0],w=new FileReader;w.onload=E=>{var v=E.target.result,c=v.split(`
`);let _=[];var p=[];c.pop(),c.forEach((T,A)=>{if(A==0)_=T.split(o);else{var b=T.split(o);p.push(b)}}),s(p,_,f.value),f.value=""},w.readAsText(d)},f.click()}static openCSVRaw(o=(s,f)=>f){var s=document.createElement("input");s.accept=".csv",s.type="file",s.onchange=f=>{var y=f.target.files[0],d=new FileReader;d.onload=w=>{var E=w.target.result;o(E,s.value),s.value=""},d.readAsText(y)},s.click()}onOpen(o=[],s=[]){console.log("CSV Opened!",s,o)}};var rr=fo(co()),ho=!1,Ni=rr.BFSRequire("fs"),cf=rr.BFSRequire("buffer").Buffer,lo=async(h=["data","projects","extensions","settings","plugins"],o=()=>{},s=()=>{})=>ho?!0:new Promise(f=>{let y=Ni.getRootFS();rr.FileSystem.IndexedDB.Create({},(d,w)=>{if(d)throw d;if(!w)throw s(),new Error("Error creating BrowserFS");rr.initialize(w);let E=[];h.forEach(async v=>{E.push(au(Ni,v))}),Promise.all(E).then(v=>{o(),ho=!0,f(!0)})})});var po=async(h,o,s="data",f=y=>{})=>new Promise(y=>{Ni.writeFile("/"+s+"/"+h,o,d=>{if(d)throw d;f(o),y(!0)})});var vr={},au=async(h,o)=>new Promise(s=>{vr[o]==="exists"||vr[o]==="created"?s():h.exists(`/${o}`,f=>{f?(vr[o]="exists",console.log(`/${o} exists!`),s()):vr[o]==="creating"?(console.log(o+" is still being created."),s()):(console.log("creating "+o),vr[o]="creating",h.mkdir(o,y=>{if(y)throw y;vr[o]="created",setTimeout(s,500)}))})});var Pi=fo(Co());var Bo={getImageData:function(h){var o=h.width,s=h.height,f=h.getContext("2d").getImageData(0,0,o,s);return f},toArrayBuffer:function(h){var o=canvas.width,s=canvas.height,f=o*4,y=new Uint32Array(h.data.buffer),d=Math.floor((32*o+31)/32)*4,w=d*s,E=122+w,v=new ArrayBuffer(E),c=new DataView(v),_=0,p,T=0,A,b=0,L,C;for(G(19778),W(E),_+=4,W(122),W(108),W(o),W(-s>>>0),G(1),G(32),W(3),W(w),W(2835),W(2835),_+=8,W(16711680),W(65280),W(255),W(4278190080),W(1466527264);T<s;){for(A=122+T*d,p=0;p<f;)C=y[b++],L=C>>>24,c.setUint32(A+p,C<<8|L),p+=4;T++}return v;function G(U){c.setUint16(_,U,!0),_+=2}function W(U){c.setUint32(_,U,!0),_+=4}},toBlob:function(h){return new Blob([this.toArrayBuffer(this.getImageData(h))],{type:"image/bmp"})},ImageDatatoBlob:function(h){return new Blob([this.toArrayBuffer(h)],{type:"image/bmp"})},toDataURL:function(h){for(var o=new Uint8Array(this.toArrayBuffer(this.getImageData(h))),s="",f=0,y=o.length;f<y;)s+=String.fromCharCode(o[f++]);return"data:image/bmp;base64,"+Pi.Buffer.from(s,"base64").toString("ascii")},ImageDatatoDataURL:function(h){for(var o=new Uint8Array(this.toArrayBuffer(h)),s="",f=0,y=o.length;f<y;)s+=String.fromCharCode(o[f++]);return"data:image/bmp;base64,"+Pi.Buffer.from(s,"base64").toString("ascii")}};function Mr(h,o,s,f,y=0,d=0){if(h.naturalWidth)return{x:h.naturalWidth*(s-y)/o.width,y:h.naturalHeight*(f-d)/o.height};if(h.videoWidth)return{x:h.videoWidth*(s-y)/o.width,y:h.videoHeight*(f-d)/o.height};if(h.width)return{x:h.width*(s-y)/o.width,y:h.height*(f-d)/o.height}}function zu(h){let o=Array.from(h.data),s=[],f=0;for(let c=0;c<o.length;c+=4)c/4%h.width===0&&(f=0),s[f]?(s[f].i+=parseFloat(o[c]+o[c+1]+o[c+2]),s[f].r+=parseFloat(o[c]),s[f].g+=parseFloat(o[c+1]),s[f].b+=parseFloat(o[c+2])):s[f]={i:parseFloat(o[c]+o[c+1]+o[c+2]),r:parseFloat(o[c]),g:parseFloat(o[c+1]),b:parseFloat(o[c+2])},f++;let y=Math.max(...s.map(c=>c.i)),d=Math.max(...s.map(c=>c.r)),w=Math.max(...s.map(c=>c.b)),E=Math.max(...s.map(c=>c.g)),v=Math.max(d,w,E);return{bitmap:h,width:h.width,height:h.height,bitarr:o,xrgbintensities:s,xintmax:y,xrintmax:d,xbintmax:w,xgintmax:E,xrgbmax:v}}async function ju(h,o){let s=Object.assign({},h);delete s.bitmap;let f=JSON.stringify(s);return await po(o,f,"processed")}function Wu(h,o,s){return new ImageData(Uint8ClampedArray.from(h),o,s)}function Uo(h,o,s=0,f=0,y=o.width,d=o.height,w=0,E=0,v=h.canvas.width,c=h.canvas.height){return h.drawImage(o,s,f,y,d,w,E,v,c)}function Hu(h,o,s=0,f=0,y=h.canvas.width,d=h.canvas.height){let w=zu(o);h.fillStyle="white",h.strokeStyle="ghostwhite",h.lineWidth=1,h.beginPath();let E=w.xrgbintensities.length,v=y/E;return w.xrgbintensities.forEach((c,_)=>{_===0?h.moveTo(s,f+d*(1-c.i/w.xintmax)):h.lineTo(s+_*v,f+d*(1-c.i/w.xintmax))}),h.stroke(),h.strokeStyle="tomato",h.lineWidth=1,h.beginPath(),w.xrgbintensities.forEach((c,_)=>{_===0?h.moveTo(s,f+d*(1-c.r/w.xintmax)):h.lineTo(s+_*v,f+d*(1-c.r/w.xintmax))}),h.stroke(),h.strokeStyle="#00b8f5",h.beginPath(),w.xrgbintensities.forEach((c,_)=>{_===0?h.moveTo(s,f+d*(1-c.b/w.xintmax)):h.lineTo(s+_*v,f+d*(1-c.b/w.xintmax))}),h.stroke(),h.strokeStyle="chartreuse",h.beginPath(),w.xrgbintensities.forEach((c,_)=>{_===0?h.moveTo(s,f+d*(1-c.g/w.xintmax)):h.lineTo(s+_*v,f+d*(1-c.g/w.xintmax))}),h.stroke(),w}function Mo(h,o=30,s=Vu){let f=h.captureStream(o),y=new MediaRecorder(f),d=[];return y.ondataavailable=function(w){d.push(w.data)},y.onstop=function(w){let E=new Blob(d,{type:"video/mp4"});d=[];let v=URL.createObjectURL(E);s(v)},y}function Vu(h,o=new Date().toISOString()){var s=document.createElement("a");s.href=h,s.target="_blank",o!==""?s.download=o+".mp4":s.download=new Date().toISOString()+".mp4",s.click()}function Po(h){var o=new DataView(h),s={};s.fileheader={},s.fileheader.bfType=o.getUint16(0,!0),s.fileheader.bfSize=o.getUint32(2,!0),s.fileheader.bfReserved1=o.getUint16(6,!0),s.fileheader.bfReserved2=o.getUint16(8,!0),s.fileheader.bfOffBits=o.getUint32(10,!0),s.infoheader={},s.infoheader.biSize=o.getUint32(14,!0),s.infoheader.biWidth=o.getUint32(18,!0),s.infoheader.biHeight=o.getUint32(22,!0),s.infoheader.biPlanes=o.getUint16(26,!0),s.infoheader.biBitCount=o.getUint16(28,!0),s.infoheader.biCompression=o.getUint32(30,!0),s.infoheader.biSizeImage=o.getUint32(34,!0),s.infoheader.biXPelsPerMeter=o.getUint32(38,!0),s.infoheader.biYPelsPerMeter=o.getUint32(42,!0),s.infoheader.biClrUsed=o.getUint32(46,!0),s.infoheader.biClrImportant=o.getUint32(50,!0);var f=s.fileheader.bfOffBits;return s.stride=Math.floor((s.infoheader.biBitCount*s.infoheader.biWidth+31)/32)*4,s.pixels=new Uint8Array(h,f),s}function zo(h){canvas=document.createElement("canvas");var o=canvas.getContext("2d"),s=h.infoheader.biWidth,f=h.infoheader.biHeight;canvas.width=s,canvas.height=f;for(var y=o.createImageData(s,f),d=y.data,w=h.pixels,E=h.stride,v=0;v<f;++v)for(var c=0;c<s;++c){var _=(c+s*(f-v))*4,p=c*3+E*v;d[_]=w[p+2],d[_+1]=w[p+1],d[_+2]=w[p],d[_+3]=255}return o.putImageData(y,0,0),canvas.toDataURL("image/png")}function Zu(h,o){let s=`x,r,g,b,i
`,f="";h.forEach((d,w)=>{f+=`${w},${d.r},${d.g},${d.b},${d.i}
`});let y=s+f;Cr.saveCSV(y,o+"_"+new Date().toISOString())}async function jo(h,o,s="320px",f="180px"){let y=`
    <div style='width:${s}; height:${f};'>
        <div>
            <input id='title' type='text' placeholder='name'>
            <button id='toggledisplay'>Toggle Display</button>
            <button id='savepng'>Save PNG</button>
            <button id='savebmp'>Save BMP</button>
            <button id='savecsv'>Save CSV</button>
            <button id='backup'>Backup</button>
            <button id='X'>X</button>
        </div>
        <canvas id='capturecanvas' style='width:100%; height:100%;'></canvas>
        <canvas id='graphcanvas' style='width:100%; height:100%;'></canvas>
    </div>`;if(typeof o=="string"&&(o=document.getElementById(o)),o){o.insertAdjacentHTML("afterbegin",y);let d=document.querySelector("#capturecanvas");d.width=h.width,d.height=h.height;let w=d.getContext("2d");w.drawImage(h,0,0);let E=document.querySelector("#title");console.log(h);let v=w.getImageData(0,0,d.width,d.height),c=document.querySelector("#graphcanvas"),_=Hu(c.getContext("2d"),v),p={parentNode:o,width:h.width,height:h.height,canvas:d,input:E,mapped:_};return o.querySelector("#toggledisplay").onclick=()=>{d.style.display==""&&c.style.display==""?d.style.display="none":d.style.display=="none"?(d.style.display="",c.style.display="none"):c.style.display=="none"&&(c.style.display="")},o.querySelector("#backup").onclick=()=>{ju(p.mapped,E.value+"_"+new Date().toISOString())},o.querySelector("#savepng").onclick=()=>{let T=new OffscreenCanvas(p.mapped.bitmap.width,p.mapped.bitmap.height);T.getContext("2d").drawImage(h,0,0);let A=new FileReader;A.addEventListener("load",function(){var b=document.createElement("a");b.href=A.result,b.target="_blank",E.value!==""?b.download=E.value+"_"+new Date().toISOString()+".png":b.download=new Date().toISOString()+".png",b.click()},!1),T.convertToBlob({type:"image/png"}).then(b=>{A.readAsDataURL(b)})},o.querySelector("#savebmp").onclick=()=>{let T=Bo.ImageDatatoDataURL(Wu(p.mapped.bitarr,p.mapped.width,p.mapped.height));var A=document.createElement("a");A.href=T,A.target="_blank",E.value!==""?A.download=E.value+"_"+new Date().toISOString()+".bmp":A.download=new Date().toISOString()+".bmp",A.click()},o.querySelector("#savecsv").onclick=()=>{Zu(p.mapped.xrgbintensities,E.value)},o.querySelector("#X").onclick=()=>{d.parentNode.parentNode.removeChild(d.parentNode)},p}return y}var si=class extends HTMLElement{constructor(){super();lt(this,"template",s=>`<div> Custom Fragment Props: ${JSON.stringify(s)} </div>`);lt(this,"props",{test:!0});lt(this,"useShadow",!1);lt(this,"oncreate");lt(this,"onresize");lt(this,"ondelete");lt(this,"onchanged");lt(this,"FRAGMENT");lt(this,"attachedShadow",!1);lt(this,"obsAttributes",["props","options","onchanged","onresize","ondelete","oncreate","template"]);lt(this,"delete",()=>{this.remove(),typeof this.ondelete=="function"&&this.ondelete(this.props)});lt(this,"render",(s=this.props)=>{typeof this.template=="function"?this.templateString=this.template(s):this.templateString=this.template;let f=document.createElement("template");f.innerHTML=this.templateString;let y=f.content;this.FRAGMENT&&(this.useShadow?this.shadowRoot.removeChild(this.FRAGMENT):this.removeChild(this.FRAGMENT)),this.useShadow?(this.attachedShadow||this.attachShadow({mode:"open"}),this.shadowRoot.prepend(y),this.FRAGMENT=this.shadowRoot.childNodes[0]):this.prepend(y),this.FRAGMENT=this.childNodes[0],this.oncreate&&this.oncreate(s)});lt(this,"state",{pushToState:{},data:{},triggers:{},setState(s){if(Object.assign(this.pushToState,s),Object.keys(this.triggers).length>0)for(let f of Object.getOwnPropertyNames(this.triggers))this.pushToState[f]&&(this.data[f]=this.pushToState[f],delete this.pushToState[f],this.triggers[f].forEach(y=>{y.onchanged(this.data[f])}));return this.pushToState},subscribeTrigger(s,f=y=>{}){if(s){this.triggers[s]||(this.triggers[s]=[]);let y=this.triggers[s].length;return this.triggers[s].push({idx:y,onchanged:f}),this.triggers[s].length-1}else return},unsubscribeTrigger(s,f){let y,d=this.triggers[s];if(d)if(!f)delete this.triggers[s];else return d.find(E=>{if(E.idx===f)return!0})&&d.splice(y,1),!0},subscribeTriggerOnce(s=void 0,f=y=>{}){let y,d=w=>{f(w),this.unsubscribeTrigger(s,y)};y=this.subscribeTrigger(s,d)}})}get observedAttributes(){return this.obsAttributes}get obsAttributes(){return this.obsAttributes}set obsAttributes(s){typeof s=="string"?this.obsAttributes.push(s):Array.isArray(s)&&(this.obsAttributes=s)}static get tag(){return this.name.toLowerCase()+"-"}static addElement(s=this.tag,f=this,y=void 0){qu(f,s,y)}attributeChangedCallback(s,f,y){if(s==="onchanged"){let d=y;if(typeof d=="string"&&(d=_r(d)),typeof d=="function"){this.onchanged=d,this.state.data.props=this.props,this.state.unsubscribeTrigger("props"),this.state.subscribeTrigger("props",this.onchanged);let w=new CustomEvent("changed",{detail:{props:this.props}});this.state.subscribeTrigger("props",()=>{this.dispatchEvent(w)})}}else if(s==="onresize"){let d=y;if(typeof d=="string"&&(d=_r(d)),typeof d=="function"){if(this.ONRESIZE)try{window.removeEventListener("resize",this.ONRESIZE)}catch{}this.ONRESIZE=w=>{this.onresize(this.props)},this.onresize=d,window.addEventListener("resize",this.ONRESIZE)}}else if(s==="ondelete"){let d=y;typeof d=="string"&&(d=_r(d)),typeof d=="function"&&(this.ondelete=()=>{this.ONRESIZE&&window.removeEventListener("resize",this.ONRESIZE),this.state.unsubscribeTrigger("props"),d&&d(this.props)})}else if(s==="oncreate"){let d=y;typeof d=="string"&&(d=_r(d)),typeof d=="function"&&(this.oncreate=d)}else if(s==="props"){let d=y;typeof d=="string"&&(d=JSON.parse(d)),Object.assign(this.props,d),this.state.setState({props:this.props})}else if(s==="template"){let d=y;this.template=options.template,typeof d=="function"?this.templateString=this.template(this.props):this.templateString=d,this.render(this.props);let w=new CustomEvent("created",{detail:{props:this.props}});this.dispatchEvent(w)}else{let d=y;if(s.includes("eval_"))s=s.split("_"),s.shift(),s=s.join(),d=_r(y);else if(typeof y=="string")try{d=JSON.parse(y)}catch{d=y}this[s]=d,s!=="props"&&(this.props[s]=d)}}connectedCallback(){let s=this.getAttribute("props");typeof s=="string"&&(s=JSON.parse(s)),Object.assign(this.props,s),this.state.setState({props:this.props}),Array.from(this.attributes).forEach(E=>{let v=E.name,c=E.value;if(v.includes("eval_"))v=v.split("_"),v.shift(),v=v.join(),c=_r(E.value);else if(typeof E.value=="string")try{c=JSON.parse(E.value)}catch{c=E.value}this[v]||Object.defineProperties(this,E,{value:c,writable:!0,get(){return this[v]},set(_){this.setAttribute(v,_)}}),this[v]=c,v!=="props"&&(this.props[v]=c),this.obsAttributes.push(v)});let f=new CustomEvent("resized",{detail:{props:this.props}}),y=new CustomEvent("changed",{detail:{props:this.props}}),d=new CustomEvent("deleted",{detail:{props:this.props}}),w=new CustomEvent("created",{detail:{props:this.props}});if(this.render(this.props),this.dispatchEvent(w),this.state.subscribeTrigger("props",()=>{this.dispatchEvent(y)}),typeof this.onresize=="function"){if(this.ONRESIZE)try{window.removeEventListener("resize",this.ONRESIZE)}catch{}this.ONRESIZE=E=>{this.onresize(this.props),this.dispatchEvent(f)},window.addEventListener("resize",this.ONRESIZE)}if(typeof this.ondelete=="function"){let E=this.ondelete;this.ondelete=(v=this.props)=>{this.ONRESIZE&&window.removeEventListener("resize",this.ONRESIZE),this.state.unsubscribeTrigger("props"),this.dispatchEvent(d),E(v)}}typeof this.onchanged=="function"&&(this.state.data.props=this.props,this.state.subscribeTrigger("props",this.onchanged))}get props(){return this.props}set props(s={}){this.setAttribute("props",s)}get template(){return this.template}set template(s){this.setAttribute("template",s)}get render(){return this.render}get delete(){return this.delete}get state(){return this.state}get onchanged(){return this.onchanged}set onchanged(s){this.setAttribute("onchanged",s)}get onresize(){return this.props}set onresize(s){this.setAttribute("onresize",s)}get ondelete(){return this.props}set ondelete(s){this.setAttribute("ondelete",s)}get oncreate(){return this.oncreate}set oncreate(s){this.setAttribute("oncreated",s)}};function qu(h,o,s=null){try{s?o?window.customElements.define(o,h,{extends:s}):window.customElements.define(h.name.toLowerCase()+"-",h,{extends:s}):o?window.customElements.define(o,h):window.customElements.define(h.name.toLowerCase()+"-",h)}catch{}}function _f(h=""){return h+Math.floor(Math.random()*1e15)}function _r(method){let getFunctionBody=h=>h.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=h=>{let o=h.indexOf(")");return h.slice(0,h.indexOf("{",o)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;try{if(newFuncHead.includes("function ")){let h=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(h,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let h=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(h,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else try{newFunc=eval(newFuncHead+newFuncBody+"}")}catch(err){newFunc=eval(method)}}catch(h){}return newFunc}var Ho={pushToState:{},data:{},triggers:{},setState(h){Object.assign(this.data,h);for(let o of Object.getOwnPropertyNames(h))this.triggers[o]&&this.triggers[o].forEach(s=>s.onchange(this.data[o]));return this.data},subscribeTrigger(h,o=s=>{}){if(h){this.triggers[h]||(this.triggers[h]=[]);let s=this.triggers[h].length;return this.triggers[h].push({idx:s,onchange:o}),this.triggers[h].length-1}else return},unsubscribeTrigger(h,o){let s,f=this.triggers[h];if(f)if(!o)delete this.triggers[h];else return f.find(d=>{if(d.idx===o)return!0})&&f.splice(s,1),!0},subscribeTriggerOnce(h=void 0,o=s=>{}){let s,f=y=>{o(y),this.unsubscribeTrigger(h,s)};s=this.subscribeTrigger(h,f)}},Wo=class{constructor(){lt(this,"state",Ho);lt(this,"nodes",new Map);lt(this,"nNodes",0);lt(this,"runNode",this.run)}convertChildrenToNodes(o){o.convertChildrenToNodes(o)}addNode(o={}){return new Se(o,void 0,this)}getNode(o){return this.nodes.get(o)}run(o,s,f){if(typeof o=="string"&&(o=this.nodes.get(o)),o)return o.run(s,o,f)}removeTree(o){if(typeof o=="string"&&(o=this.nodes.get(o)),o){let s=function(f){f.children&&(Array.isArray(f.children)?f.children.forEach(y=>{y.stopNode&&y.stopNode(),y.tag&&this.nodes.get(y.tag)&&this.nodes.delete(y.tag),this.nodes.forEach(d=>{d.nodes.get(y.tag)&&d.nodes.delete(y.tag)}),s(y)}):typeof f.children=="object"&&(f.stopNode&&f.stopNode(),f.tag&&this.nodes.get(f.tag)&&this.nodes.delete(f.tag),this.nodes.forEach(y=>{y.nodes.get(f.tag)&&y.nodes.delete(f.tag)}),s(f)))};o.stopNode&&o.stopNode(),o.tag&&(this.nodes.delete(o.tag),this.nodes.forEach(f=>{f.nodes.get(o.tag)&&f.nodes.delete(o.tag)}),s(o))}}removeNode(o){typeof o=="string"&&(o=this.nodes.get(o)),o?.tag&&this.nodes.delete(o.tag),o?.tag&&this.nodes.get(o.tag)&&(this.nodes.delete(o.tag),this.nodes.forEach(s=>{s.nodes.get(o.tag)&&s.nodes.delete(o.tag)}))}appendNode(o={},s){s.addChildren(o)}async callParent(o,s,f=o,y){if(o?.parent)return await o.callParent(s,o.parent,f,y)}async callChildren(o,s,f=o,y,d){if(o?.children)return await o.callChildren(s,f,y,d)}subscribe(o,s=f=>{}){return this.state.subscribeTrigger(o,s)}unsubscribe(o,s){this.state.unsubscribeTrigger(o,s)}subscribeNode(o,s){return this.state.subscribeTrigger(o.tag,f=>{this.run(s,f,this)})}create(o=(y,d,w,E)=>{},s,f){return Xu(o,s,f,this)}print(o,s=!0){if(typeof o=="object"&&o.operator)return o.print(o,s)}reconstruct(o="{}"){let s=zi(o);s&&this.addNode(s)}},Se=class{constructor(o={},s,f){lt(this,"tag");lt(this,"parent");lt(this,"children");lt(this,"graph");lt(this,"state",Ho);lt(this,"nodes",new Map);lt(this,"ANIMATE","animate");lt(this,"LOOP","loop");lt(this,"looper");lt(this,"animation");!o.tag&&f?o.tag=`node${f.nNodes}`:o.tag||(o.tag=`node${Math.floor(Math.random()*1e10)}`),Object.assign(this,o),this.parent=s,this.graph=f,f&&(f.nNodes++,f.nodes.set(o.tag,this)),this.children&&this.convertChildrenToNodes(this)}operator(o,s=this,f,y){return o}runOp(o,s=this,f,y){let d=s.operator(o,s,f,y);return d instanceof Promise?d.then(w=>(this.state.setState({[s.tag]:w}),w)):this.state.setState({[s.tag]:d}),d}runNode(o,s,f){if(typeof o=="string"&&(o=this.nodes.get(o)),o)return o.run(s,o,f)}run(o,s=this,f){if(typeof s=="string"){let y;if(this.graph&&(y=this.graph.nodes.get(s)),y||(y=this.nodes.get(s)),s=y,!s)return}if(!(s.children&&s.forward||s.parent&&s.backward||s.repeat||s.delay||s.frame||s.recursive||s.operator.constructor.name==="AsyncFunction")){let y=s.runOp(s,o,f);return s.animate&&!s.isAnimating&&this.runAnimation(this.animation,o,s,f),typeof s.loop=="number"&&!s.isLooping&&this.runLoop(this.looper,o,s,f),y}return new Promise(async y=>{if(s){let d=(E,v,c=0)=>new Promise(async _=>{c++;let p=await E.runOp(v,E,f,c);if(typeof E.repeat=="number"){for(;c<E.repeat;){if(E.delay){setTimeout(async()=>{_(await d(E,v,c))},E.delay);break}else if(E.frame&&requestAnimationFrame){requestAnimationFrame(async()=>{_(await d(E,v,c))});break}else p=await E.runOp(v,E,f,c);c++}if(c===E.repeat){_(p);return}}else if(typeof E.recursive=="number"){for(;c<E.recursive;){if(E.delay){setTimeout(async()=>{_(await d(E,p,c))},E.delay);break}else if(E.frame&&requestAnimationFrame){requestAnimationFrame(async()=>{_(await d(E,p,c))});break}else p=await E.runOp(p,E,f,c);c++}if(c===E.recursive){_(p);return}}else{_(p);return}}),w=async()=>{let E=await d(s,o);if(s.backward&&s.parent&&await this.runNode(s.parent,E,s),s.children&&s.forward)if(Array.isArray(s.children))for(let v=0;v<s.children.length;v++)await this.runNode(s.children[v],E,s);else await this.runNode(s.children,E,s);return s.animate&&!s.isAnimating&&this.runAnimation(this.animation,o,s,f),typeof s.loop=="number"&&!s.isLooping&&this.runLoop(this.looper,o,s,f),E};s.delay?setTimeout(async()=>{y(await w())},s.delay):s.frame&&requestAnimationFrame?requestAnimationFrame(async()=>{y(await w())}):y(await w())}else y(void 0)})}runAnimation(o=this.animation,s,f=this,y){if(this.animation=o,o||(this.animation=this.operator),f.animate&&!f.isAnimating){f.isAnimating=!0;let d=async()=>{if(f.isAnimating){let w=await this.animation(s,f,y,this.ANIMATE);if(this.tag&&typeof w<"u"&&(this.state.setState({[this.tag]:w}),f.backward&&f.parent&&await this.runNode(f.parent,w,f),f.children&&f.forward))if(Array.isArray(f.children))for(let E=0;E<f.children.length;E++)await this.runNode(f.children[E],w,f);else await this.runNode(f.children,w,f);requestAnimationFrame(async()=>{await d()})}};requestAnimationFrame(d)}}runLoop(o=this.looper,s,f=this,y){if(this.looper=o,o||(this.looper=this.operator),typeof f.loop=="number"&&!f.isLooping){f.isLooping=!0;let d=async()=>{if(f.looping){let w=await this.looper(s,f,y);if(this.tag&&typeof w<"u"&&(this.state.setState({[this.tag]:w}),f.backward&&f.parent&&await this.runNode(f.parent,w,f),f.children&&f.forward))if(Array.isArray(f.children))for(let E=0;E<f.children.length;E++)await this.runNode(f.children[E],w,f);else await this.runNode(f.children,w,f);setTimeout(async()=>{await d()},f.loop)}}}}setOperator(o=function(f,y=this,d,w){return f}){this.operator=o}setParent(o){this.parent=o}setChildren(o){this.children=o}removeTree(o){if(typeof o=="string"&&(o=this.nodes.get(o)),o){let s=function(f){f.children&&(Array.isArray(f.children)?f.children.forEach(y=>{y.stopNode&&y.stopNode(),y.tag&&this.nodes.get(y.tag)&&this.nodes.delete(y.tag),this.nodes.forEach(d=>{d.nodes.get(y.tag)&&d.nodes.delete(y.tag)}),s(y)}):typeof f.children=="object"&&(f.stopNode&&f.stopNode(),f.tag&&this.nodes.get(f.tag)&&this.nodes.delete(f.tag),this.nodes.forEach(y=>{y.nodes.get(f.tag)&&y.nodes.delete(f.tag)}),s(f)))};o.stopNode&&o.stopNode(),o.tag&&(this.nodes.delete(o.tag),this.nodes.forEach(f=>{f.nodes.get(o.tag)&&f.nodes.delete(o.tag)}),s(o),this.graph&&this.graph.nodes.removeTree(o))}}addNode(o={}){let s=new Se(o,this,this.graph);return this.nodes.set(convertedtag,s),this.graph&&this.graph.nodes.set(s.tag,s),s}removeNode(o){typeof o=="string"&&(o=this.nodes.get(o)),o?.tag&&this.nodes.delete(o.tag),o?.tag&&this.nodes.get(o.tag)&&(this.nodes.delete(o.tag),this.graph&&this.graph.nodes.delete(o.tag),this.nodes.forEach(s=>{s.nodes.get(o.tag)&&s.nodes.delete(o.tag)}))}appendNode(o,s=this){typeof o=="string"&&(o=this.nodes.get(o)),o&&s.addChildren(o)}getNode(o){return this.nodes.get(o)}stopLooping(o=this){o.isLooping=!1}stopAnimating(o=this){o.isAnimating=!1}stopNode(o=this){o.stopAnimating(o),o.stopLooping(o)}addChildren(o){this.children||(this.children=[]),Array.isArray(this.children)?Array.isArray(o)?(this.children.push(...o),o.forEach(s=>{typeof s=="object"&&s.tag&&(this.nodes.set(s.tag,s),this.graph&&this.graph.nodes.set(s.tag,s))})):(this.children.push(o),typeof o=="object"&&o.tag&&(this.nodes.set(o.tag,o),this.graph&&this.graph.nodes.set(o.tag,o))):(this.children=[o],typeof o=="object"&&o.tag&&(this.nodes.set(o.tag,o),this.graph&&this.graph.nodes.set(o.tag,o)))}convertChildrenToNodes(o=this){if(o.children?.name==="GraphNode")this.graph?.nodes.get(o.tag)||this.graph.nodes.set(o.tag,o),this.nodes.get(o.tag)||this.nodes.set(o.tag,o);else if(Array.isArray(o.children))for(let s=0;s<o.children.length;s++)if(o.children[s].name==="GraphNode"){this.graph?.nodes.get(o.children[s].tag)||this.graph.nodes.set(o.children[s].tag,o.children[s]),this.nodes.get(o.children[s].tag)||this.nodes.set(o.children[s].tag,o.children[s]);continue}else typeof o.children[s]=="object"?(o.children[s]=new Se(o.children[s],o,this.graph),this.nodes.set(o.children[s].tag,o.children[s]),this.convertChildrenToNodes(o.children[s])):typeof o.children[s]=="string"&&(this.graph&&(o.children[s]=this.graph.getNode(o.children[s]),this.nodes.get(o.children[s].tag)||this.nodes.set(o.children[s].tag,o.children[s])),o.children[s]||(o.children[s]=this.nodes.get(o.children[s])));else typeof o.children=="object"?(o.children=new Se(o.children,o,this.graph),this.nodes.set(o.children.tag,o.children),this.convertChildrenToNodes(o.children)):typeof o.children=="string"&&(this.graph&&(o.children=this.graph.getNode(o.children),this.nodes.get(o.children.tag)||this.nodes.set(o.children.tag,o.children)),o.children||(o.children=this.nodes.get(o.children)));return o.children}async callParent(o,s=this,f){if(typeof this.parent?.operator=="function")return await this.parent.runOp(o,this.parent,s,f)}async callChildren(o,s=this,f,y){let d;if(Array.isArray(this.children))if(y)d=await this.children[y]?.runOp(o,this.children[y],s,f);else{d=[];for(let w=0;w<this.children.length;w++)d.push(await this.children[w]?.runOp(o,this.children[w],s,f))}else this.children&&(d=await this.children.runOp(o,this.children,s,f));return d}setProps(o={}){Object.assign(this,o)}subscribe(o=f=>{},s=this.tag){return typeof o=="object"?this.subscribeNode(o):this.state.subscribeTrigger(s,o)}unsubscribe(o,s=this.tag){this.state.unsubscribeTrigger(s,o)}subscribeNode(o,s=this.tag){return this.state.subscribeTrigger(s,f=>{this.runNode(o,f,this)})}print(o=this,s=!0,f=[]){let y=new Se;f.push(o.tag);let d={tag:o.tag,operator:o.operator.toString()};o.parent&&(d.parent=o.parent.tag),o.children&&(Array.isArray(o.children)?o.children=o.children.map(w=>typeof w=="string"?w:f.includes(w.tag)?w.tag:s?w.print(w,s,f):w.tag):typeof o.children=="object"?(s||(d.children=[o.children.tag]),f.includes(o.children.tag)?d.children=[o.children.tag]:d.children=[o.children.print(o.children,s,f)]):typeof o.children=="string"&&(d.children=[o.children]));for(let w in o)w==="parent"||w==="children"||typeof y[w]>"u"&&(typeof o[w]=="function"?d[w]=o[w].toString():typeof o[w]=="object"?d[w]=JSON.stringifyWithCircularRefs(o[w]):d[w]=o[w]);return JSON.stringify(d)}reconstruct(o="{}"){let s=zi(o);s&&this.addNode(s)}};function Xu(h,o,s,f){return typeof s=="object"?(s.operator=h,new Se(s,o,f)):new Se({operator:h},o,f)}function bf(h="{}",o,s){let f=zi(h);if(f)return new Se(f,o,s)}function zi(h="{}"){try{let s=function(f){for(let y in f)if(typeof f[y]=="string"){let d=Yu(f[y]);typeof d=="function"&&(f[y]=d)}else typeof f[y]=="object"&&s(f[y]);return f},o=JSON.parse(h);return s(o)}catch(o){console.error(o);return}}JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let h=new Map,o=[],s=["this"];function f(){h.clear(),o.length=0,s.length=1}function y(w,E){var v=o.length-1,c=o[v];if(typeof c=="object")if(c[w]===E||v===0)s.push(w),o.push(E.pushed);else for(;v-->=0;){if(c=o[v],typeof c=="object"&&c[w]===E){v+=2,o.length=v,s.length=v,--v,o[v]=E,s[v]=w;break}v--}}function d(w,E){if(E!=null&&typeof E=="object"){w&&y(w,E);let v=h.get(E);if(v)return"[Circular Reference]"+v;h.set(E,s.join("."))}return E}return function(E,v){try{return o.push(E),JSON.stringify(E,d,v)}finally{f()}}}());function Yu(method=""){let getFunctionBody=h=>h.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=h=>{let o=h.indexOf(")");return h.slice(0,h.indexOf("{",o)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;if(newFuncHead.includes("function ")){let h=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(h,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let h=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(h,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else newFunc=eval(newFuncHead+newFuncBody+"}");return newFunc}var Ju=Vo(),Pr=class extends si{constructor(){super(...arguments);lt(this,"props",{operator:(s,f,y,d)=>(console.log(s),s),forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0});lt(this,"input_delay",1);lt(this,"template",Ju);lt(this,"render",(s=this.props)=>{typeof this.template=="function"?this.templateString=this.template(s):this.templateString=this.template;let f=document.createElement("template");f.innerHTML=this.templateString;let y=f.content;this.fragment&&this.removeChild(this.fragment),this.fragment=y,this.appendChild(y),this.setupNode(this.props),this.props.input&&setTimeout(async()=>{this.props.node.runNode(this.props.node,this.props.input,this.props.graph)},this.input_delay),this.oncreate&&this.oncreate(s)})}setupNode(s){let f=this.parentNode;if(f.props?.operator&&f.props?.node&&(s.parent=f.props.node),!s.graph){for(;!f.props?.nodes&&!(f.constructor.name==="HTMLBodyElement"||f.constructor.name==="HTMLHeadElement"||f.constructor.name==="HTMLHtmlElement"||f.constructor.name==="HTMLDocument");)f=f.parentNode;f.props?.nodes&&(s.graph=f.props.graph,s.input_delay=f.props.input_delay)}this.id&&!s.tag&&(s.tag=this.id),s.graph&&!s.node&&s.tag?s.node=s.graph.nodes.get(s.tag):s.graph&&typeof s.node=="string"&&(s.node=s.graph.nodes.get(s.node)),s.node||(s.node=new Se(s,s.parent,s.graph)),s.tag=s.node.tag,this.id||(this.id=s.tag),s.parent&&s.parent.addChildren(s.node)}};Pr.addElement("graph-node");var Qu=Zo(),ji=class extends Pr{constructor(){super(...arguments);lt(this,"bitmap");lt(this,"bitslice");lt(this,"canvas");lt(this,"ctx");lt(this,"offscreen");lt(this,"offscreenctx");lt(this,"capture");lt(this,"capturectx");lt(this,"img");lt(this,"video");lt(this,"imgselect");lt(this,"captures",{});lt(this,"loaded",{});lt(this,"template",Qu);lt(this,"props",{picking:0,picked:{x0:void 0,x1:void 0,y0:void 0,y1:void 0},imgpicked:{x0:void 0,x1:void 0,y0:void 0,y1:void 0},running:!1,mode:"img",animation:(s,f,y,d)=>{},operator:(s,f,y,d)=>{},forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0});lt(this,"oncreate",s=>{this.canvas=this.querySelector("#picker"),this.img=this.querySelector("img"),this.video=this.querySelector("video"),this.select=this.querySelector("#imgselect"),this.capture=this.querySelector("#capture"),this.querySelector("#fileinput").onchange=this.handleFileInput,this.querySelector("#snip").onclick=y=>{this.props.picked.y1&&this.props.picked.x1&&this.canvasCapture(y)};let f=()=>{if(this.props.mode==="video"&&this.props.picked.y1&&this.props.picked.x1){this.props.running=!0;let y=Mo(this.capture);this.querySelector("#animate").innerHTML="Recording...",this.querySelector("#animate").onclick=()=>{this.props.running=!1,y.stop(),this.querySelector("#animate").innerHTML="Record",this.querySelector("#animate").onclick=f}}};this.querySelector("#animate").onclick=f,this.select.onchange=y=>{this.props.mode==="img"&&this.useImage()},this.querySelector("#webcam").onclick=this.useWebcam,this.querySelector("#image").onclick=this.useImage,this.querySelector("#setImgUrl").onclick=this.inputImgUrl,this.querySelector("#setVideoUrl").onclick=this.inputVideoSrc,s.canvas=this.canvas,s.context?s.context=this.canvas.getContext(s.context):s.context=this.canvas.getContext("2d"),this.context=s.context,this.ctx=this.context,s.ctx=this.context,this.offscreen=new OffscreenCanvas(this.canvas.width,this.canvas.height),this.offscreenctx=this.offscreen.getContext("2d"),this.capturectx=this.capture.getContext("2d"),this.props.picked.x0=0,this.props.picked.y0=0,this.props.picked.x1=this.canvas.width,this.props.picked.y1=this.canvas.height,this.canvas.onclick=this.canvasClicked,setTimeout(()=>{s.animate&&s.node.runAnimation()},10);try{this.useImage()}catch(y){console.error(y)}});lt(this,"useWebcam",()=>{this.props.running=!1,this.img.style.display="none",this.video.src&&(this.video.pause(),this.video.src=""),this.video.style.display="",navigator.getUserMedia&&navigator.getUserMedia({video:!0},s=>{this.video.srcObject=s,this.video.play(),this.video.width=this.canvas.width,this.video.height=this.video.height*this.video.videoHeight/this.video.videoWidth,this.props.mode="video"},console.error)});lt(this,"useImage",()=>{this.props.running=!1,this.video.src&&(this.video.pause(),this.video.src="",this.video.style.display="none"),this.img.src=this.select.options[this.select.selectedIndex].value,this.img.style.display="",this.props.mode="img",this.canvas.height=this.img.height,this.canvas.width=this.img.width*this.img.naturalHeight/this.img.naturalWidth,this.canvas.style.width=this.img.style.width,this.canvas.style.height=this.img.width*this.img.naturalHeight/this.img.naturalWidth});lt(this,"canvasClicked",s=>{if(this.props.running=!1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.props.picking===0){this.props.picked.x0=s.pageX-this.canvas.offsetLeft,this.props.picked.y0=s.pageY-this.canvas.offsetTop,this.props.picked.x1=void 0,this.props.picked.y1=void 0;let f;this.props.mode==="img"?f=Mr(this.img,this.canvas,this.props.picked.x0,this.props.picked.y0):this.props.mode==="video"&&(f=Mr(this.video,this.canvas,this.props.picked.x0,this.props.picked.y0)),this.props.imgpicked.x0=f.x,this.props.imgpicked.y0=f.y,this.props.imgpicked.x1=void 0,this.props.imgpicked.y1=void 0,this.drawCircle(this.props.picked.x0,this.props.picked.y0,2.5,"orange",1,"orange"),this.props.picking=1}else{this.props.picked.x1=s.pageX-this.canvas.offsetLeft,this.props.picked.y1=s.pageY-this.canvas.offsetTop;let f;if(this.props.mode==="img"?f=Mr(this.img,this.canvas,this.props.picked.x1,this.props.picked.y1):this.props.mode==="video"&&(f=Mr(this.video,this.canvas,this.props.picked.x1,this.props.picked.y1)),this.props.imgpicked.x1=f.x,this.props.imgpicked.y1=f.y,this.props.picked.x1<this.props.picked.x0){let y=this.props.picked.x1;this.props.picked.x1=this.props.picked.x0,this.props.picked.x0=y,y=this.props.imgpicked.x1,this.props.imgpicked.x1=this.props.imgpicked.x0,this.props.imgpicked.x0=y}if(this.props.picked.y1<this.props.picked.y0){let y=this.props.picked.y1;this.props.picked.y1=this.props.picked.y0,this.props.picked.y0=y,y=this.props.imgpicked.y1,this.props.imgpicked.y1=this.props.imgpicked.y0,this.props.imgpicked.y0=y}this.props.picking=0,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.strokeStyle="orange",this.ctx.rect(this.props.picked.x0,this.props.picked.y0,Math.abs(this.props.picked.x1-this.props.picked.x0),Math.abs(this.props.picked.y1-this.props.picked.y0)),this.ctx.stroke(),console.log(this.props.imgpicked),this.props.mode==="video"?this.continuousCapture(this.video):(this.capture.width=Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),this.capture.height=Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),Uo(this.capturectx,this.img,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),0,0,this.capture.width,this.capture.height))}});lt(this,"processCapture",s=>{jo(s,this.querySelector("#captured"),"49.99%","200px")});lt(this,"onresize",s=>{this.canvas&&(this.props.mode==="img"&&this.img?(this.canvas.height=this.img.parentNode.clientWidth*this.img.naturalHeight/this.img.naturalWidth,this.canvas.style.height=this.img.parentNode.clientWidth*this.img.naturalHeight/this.img.naturalWidth):this.props.mode==="video"&&this.video?(this.canvas.height=this.video.parentNode.clientWidth*this.video.videoHeight/this.video.videoWidth,this.canvas.style.height=this.video.parentNode.clientWidth*this.video.videoHeight/this.video.videoWidth):(this.canvas.width=this.canvas.parentNode.clientWidth,this.canvas.height=this.canvas.parentNode.clientHeight,this.canvas.style.width=this.canvas.parentNode.clientWidth,this.canvas.style.height=this.canvas.parentNode.clientHeight))})}inputImgUrl(){this.props.running=!1;let s=this.querySelector("#imgurl").value;s&&(this.video.src&&(this.video.pause(),this.video.src="",this.video.style.display="none"),this.img.src=s,this.img.style.display="",this.props.mode="img",this.canvas.height=this.img.height,this.canvas.width=this.img.width*this.img.naturalHeight/this.img.naturalWidth,this.canvas.style.width=this.img.style.width,this.canvas.style.height=this.img.width*this.img.naturalHeight/this.img.naturalWidth)}inputVideoSrc(){this.props.running=!1,this.img.style.display="none",this.video.style.display="";let s=this.querySelector("#videourl").value;s&&(this.video.src=s,this.video.play(),this.props.mode="video",this.canvas.height=this.video.height,this.canvas.width=this.video.height*this.video.videoHeight/this.video.videoWidth,this.canvas.style.width=this.video.style.width,this.canvas.style.height=this.video.height*this.video.videoHeight/this.video.videoWidth)}loadFile(){var s=document.createElement("input");s.accept=".mp4,.png,.bmp,.jpg",s.type="file",s.onchange=f=>{let y=f.target.files[0],d=URL.createObjectURL(y);if(this.loaded[s.value]=d,this.video.src&&(this.video.pause(),this.video.src="",this.video.style.display="none"),s.value.endsWith(".mp4"))this.props.mode="video",this.video.src=d,this.video.play();else if(this.props.mode="img",s.value.endsWith(".bmp")){var w=new FileReader;w.onload=E=>{var v=E.target.result,c=Po(v);let _=zo(c);this.img.src=_},w.readAsArrayBuffer(y)}else this.img.src=d},s.click()}drawCircle(s,f,y,d="green",w=5,E="#003300",v=this.ctx){v.beginPath(),v.arc(s,f,y,0,2*Math.PI,!1),v.fillStyle=d,v.fill(),v.lineWidth=w,v.strokeStyle=E,v.closePath(),v.stroke()}drawLine(s={x:0,y:0},f={x:1,y:1},y=5,d="#003300",w=this.ctx){w.beginPath(),w.lineWidth=y,w.strokeStyle=d,w.moveTo(s.x,s.y),w.lineTo(f.x,f.y),w.stroke()}continuousCapture(s){this.props.imgpicked.x1&&this.props.imgpicked.x0&&this.props.imgpicked.y1&&this.props.imgpicked.y0&&(this.capturectx.drawImage(s,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),0,0,this.capturectx.width,this.capturectx.height),this.continuousCapture(s))}canvasCapture(s){if(this.props.mode==="img"){if(!this.img.src)return;createImageBitmap(this.img,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0)).then(this.processCapture)}else if(this.props.mode==="video"){if(!this.video.src)return;createImageBitmap(this.video,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0)).then(this.processCapture)}}};ji.addElement("spectrometer-node");lo(["processed"]);var $u=document.createElement("spectrometer-node");document.body.appendChild($u);})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/
/*! canvas-to-bmp version 1.0 ALPHA https://stackoverflow.com/questions/29652307/canvas-unable-to-generate-bmp-image-dataurl-in-chrome
    (c) 2015 Ken "Epistemex" Fyrstenberg, modified by Josh Brewster 2022
    MIT License (this header required)
*/
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.js.map

          </script>
          </body>
        </html>
      