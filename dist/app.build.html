
      <!DOCTYPE html>
      <head>
      </head>
      <body>  
        <script>
          (()=>{var kf=Object.create;var ko=Object.defineProperty;var Nf=Object.getOwnPropertyDescriptor;var Rf=Object.getOwnPropertyNames;var Tf=Object.getPrototypeOf,Of=Object.prototype.hasOwnProperty;var ae=(y,t)=>()=>(t||y((t={exports:{}}).exports,t),t.exports);var Af=(y,t,n,f)=>{if(t&&typeof t=="object"||typeof t=="function")for(let h of Rf(t))!Of.call(y,h)&&h!==n&&ko(y,h,{get:()=>t[h],enumerable:!(f=Nf(t,h))||f.enumerable});return y};var or=(y,t,n)=>(n=y!=null?kf(Tf(y)):{},Af(t||!y||!y.__esModule?ko(n,"default",{value:y,enumerable:!0}):n,y));var Ro=ae((au,Cf)=>{Cf.exports=""});var To=ae((lu,zf)=>{zf.exports=`<div>\r
    Check Console\r
    <button>Run</button>\r
</div>`});var Oo=ae((gu,Pf)=>{Pf.exports='<canvas height="100%" width="100%"></canvas>'});var Ao=ae((wu,jf)=>{jf.exports="<button>Click</button>"});var Lo=ae((Eu,Hf)=>{Hf.exports="<input></input>"});var Do=ae((ku,Vf)=>{Vf.exports=`<div>Test worked!</div>\r
<button>Clickme</button>`});var Co=ae((Tu,Xf)=>{Xf.exports="<table></table>"});var Pr=ae(Bo=>{var Gf={debug:!1,protocol:"http",host:"localhost",port:8080,socket_protocol:"ws",hotreload:5e3,python:7e3,python_node:7001,startpage:"spectrometer.html",errpage:"src/other/404.html",certpath:"node_server/ssl/cert.pem",keypath:"node_server/ssl/key.pem"};Bo.settings=Gf});var zo=ae((Du,Jf)=>{Jf.exports=`\r
`});var Mo=ae((zu,Qf)=>{Qf.exports=""});var Po=ae((Uu,tc)=>{tc.exports='<canvas height="100%" width="100%"></canvas>'});var Uo=ae((Vu,ic)=>{ic.exports=`<div style="position:absolute">\r
    <input type="color" id="colorwheel">\r
    <button id="zoomin">Zoom +</button>\r
    <button id="zoomout">Zoom -</button>\r
    <button id="panleft">Left</button>\r
    <button id="panright">Right</button>\r
    <button id="panup">Up</button>\r
    <button id="pandown">Down</button>\r
</div>\r
<canvas height="100%" width="100%"></canvas>`});var jo=ae((Gu,nc)=>{nc.exports='<canvas height="100%" width="100%" style="position:absolute;"></canvas>'});var Wo=ae((Mi,Zr)=>{(function(t,n){typeof Mi=="object"&&typeof Zr=="object"?Zr.exports=n():typeof define=="function"&&define.amd?define([],n):typeof Mi=="object"?Mi.BrowserFS=n():t.BrowserFS=n()})(Mi,function(){return function(y){var t={};function n(f){if(t[f])return t[f].exports;var h=t[f]={exports:{},id:f,loaded:!1};return y[f].call(h.exports,h,h.exports,n),h.loaded=!0,h.exports}return n.m=y,n.c=t,n.p="",n(0)}([function(y,t,n){(function(f,h,l,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x=n(2),g=n(9),u;(function(o){o[o.EPERM=1]="EPERM",o[o.ENOENT=2]="ENOENT",o[o.EIO=5]="EIO",o[o.EBADF=9]="EBADF",o[o.EACCES=13]="EACCES",o[o.EBUSY=16]="EBUSY",o[o.EEXIST=17]="EEXIST",o[o.ENOTDIR=20]="ENOTDIR",o[o.EISDIR=21]="EISDIR",o[o.EINVAL=22]="EINVAL",o[o.EFBIG=27]="EFBIG",o[o.ENOSPC=28]="ENOSPC",o[o.EROFS=30]="EROFS",o[o.ENOTEMPTY=39]="ENOTEMPTY",o[o.ENOTSUP=95]="ENOTSUP"})(u||(u={}));var _={};_[u.EPERM]="Operation not permitted.",_[u.ENOENT]="No such file or directory.",_[u.EIO]="Input/output error.",_[u.EBADF]="Bad file descriptor.",_[u.EACCES]="Permission denied.",_[u.EBUSY]="Resource busy or locked.",_[u.EEXIST]="File exists.",_[u.ENOTDIR]="File is not a directory.",_[u.EISDIR]="File is a directory.",_[u.EINVAL]="Invalid argument.",_[u.EFBIG]="File is too big.",_[u.ENOSPC]="No space left on disk.",_[u.EROFS]="Cannot modify a read-only file system.",_[u.ENOTEMPTY]="Directory is not empty.",_[u.ENOTSUP]="Operation is not supported.";var d=function(o){function e(r,i,s){i===void 0&&(i=_[r]),o.call(this,i),this.syscall="",this.errno=r,this.code=u[r],this.path=s,this.stack=new o().stack,this.message="Error: "+this.code+": "+i+(this.path?", '"+this.path+"'":"")}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.fromJSON=function(i){var s=new e(0);return s.errno=i.errno,s.code=i.code,s.path=i.path,s.stack=i.stack,s.message=i.message,s},e.fromBuffer=function(i,s){return s===void 0&&(s=0),e.fromJSON(JSON.parse(i.toString("utf8",s+4,s+4+i.readUInt32LE(s))))},e.FileError=function(i,s){return new e(i,_[i],s)},e.ENOENT=function(i){return this.FileError(u.ENOENT,i)},e.EEXIST=function(i){return this.FileError(u.EEXIST,i)},e.EISDIR=function(i){return this.FileError(u.EISDIR,i)},e.ENOTDIR=function(i){return this.FileError(u.ENOTDIR,i)},e.EPERM=function(i){return this.FileError(u.EPERM,i)},e.ENOTEMPTY=function(i){return this.FileError(u.ENOTEMPTY,i)},e.prototype.toString=function(){return this.message},e.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},e.prototype.writeToBuffer=function(i,s){i===void 0&&(i=f.alloc(this.bufferSize())),s===void 0&&(s=0);var a=i.write(JSON.stringify(this.toJSON()),s+4);return i.writeUInt32LE(a,s),i},e.prototype.bufferSize=function(){return 4+f.byteLength(JSON.stringify(this.toJSON()))},e}(Error),N=Object.freeze({get ErrorCode(){return u},ErrorStrings:_,ApiError:d}),T;(function(o){o[o.NOP=0]="NOP",o[o.THROW_EXCEPTION=1]="THROW_EXCEPTION",o[o.TRUNCATE_FILE=2]="TRUNCATE_FILE",o[o.CREATE_FILE=3]="CREATE_FILE"})(T||(T={}));var I=function o(e){if(this.flagStr=e,o.validFlagStrs.indexOf(e)<0)throw new d(u.EINVAL,"Invalid flag: "+e)};I.getFileFlag=function(e){return I.flagCache.hasOwnProperty(e)?I.flagCache[e]:I.flagCache[e]=new I(e)},I.prototype.getFlagString=function(){return this.flagStr},I.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},I.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},I.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},I.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},I.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},I.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},I.prototype.pathExistsAction=function(){return this.isExclusive()?T.THROW_EXCEPTION:this.isTruncating()?T.TRUNCATE_FILE:T.NOP},I.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?T.CREATE_FILE:T.THROW_EXCEPTION},I.flagCache={},I.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var D;(function(o){o[o.FILE=32768]="FILE",o[o.DIRECTORY=16384]="DIRECTORY",o[o.SYMLINK=40960]="SYMLINK"})(D||(D={}));var C=function(e,r,i,s,a,c){if(s===void 0&&(s=new Date),a===void 0&&(a=new Date),c===void 0&&(c=new Date),this.size=r,this.atime=s,this.mtime=a,this.ctime=c,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,i)this.mode=i;else switch(e){case D.FILE:this.mode=420;break;case D.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=e)};C.fromBuffer=function(e){var r=e.readUInt32LE(0),i=e.readUInt32LE(4),s=e.readDoubleLE(8),a=e.readDoubleLE(16),c=e.readDoubleLE(24);return new C(i&61440,r,i&4095,new Date(s),new Date(a),new Date(c))},C.prototype.toBuffer=function(){var e=f.alloc(32);return e.writeUInt32LE(this.size,0),e.writeUInt32LE(this.mode,4),e.writeDoubleLE(this.atime.getTime(),8),e.writeDoubleLE(this.mtime.getTime(),16),e.writeDoubleLE(this.ctime.getTime(),24),e},C.prototype.clone=function(){return new C(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},C.prototype.isFile=function(){return(this.mode&61440)===D.FILE},C.prototype.isDirectory=function(){return(this.mode&61440)===D.DIRECTORY},C.prototype.isSymbolicLink=function(){return(this.mode&61440)===D.SYMLINK},C.prototype.chmod=function(e){this.mode=this.mode&61440|e},C.prototype.isSocket=function(){return!1},C.prototype.isBlockDevice=function(){return!1},C.prototype.isCharacterDevice=function(){return!1},C.prototype.isFIFO=function(){return!1};var W=function(o,e){return o};function U(o){if(o)return o;throw new d(u.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function B(o,e){switch(typeof o){case"number":return o;case"string":var r=parseInt(o,8);return isNaN(r)?e:r;default:return e}}function ct(o){if(o instanceof Date)return o;if(typeof o=="number")return new Date(o*1e3);throw new d(u.EINVAL,"Invalid time.")}function J(o){if(o.indexOf("\0")>=0)throw new d(u.EINVAL,"Path must be a string without null bytes.");if(o==="")throw new d(u.EINVAL,"Path must not be empty.");return g.resolve(o)}function gt(o,e,r,i){switch(typeof o){case"object":return{encoding:typeof o.encoding<"u"?o.encoding:e,flag:typeof o.flag<"u"?o.flag:r,mode:B(o.mode,i)};case"string":return{encoding:o,flag:r,mode:i};default:return{encoding:e,flag:r,mode:i}}}function lt(){}var M=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};M.prototype.initialize=function(e){if(!e.constructor.isAvailable())throw new d(u.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=e},M.prototype._toUnixTimestamp=function(e){if(typeof e=="number")return e;if(e instanceof Date)return e.getTime()/1e3;throw new Error("Cannot parse time: "+e)},M.prototype.getRootFS=function(){return this.root?this.root:null},M.prototype.rename=function(e,r,i){i===void 0&&(i=lt);var s=W(i,1);try{U(this.root).rename(J(e),J(r),s)}catch(a){s(a)}},M.prototype.renameSync=function(e,r){U(this.root).renameSync(J(e),J(r))},M.prototype.exists=function(e,r){r===void 0&&(r=lt);var i=W(r,1);try{return U(this.root).exists(J(e),i)}catch{return i(!1)}},M.prototype.existsSync=function(e){try{return U(this.root).existsSync(J(e))}catch{return!1}},M.prototype.stat=function(e,r){r===void 0&&(r=lt);var i=W(r,2);try{return U(this.root).stat(J(e),!1,i)}catch(s){return i(s)}},M.prototype.statSync=function(e){return U(this.root).statSync(J(e),!1)},M.prototype.lstat=function(e,r){r===void 0&&(r=lt);var i=W(r,2);try{return U(this.root).stat(J(e),!0,i)}catch(s){return i(s)}},M.prototype.lstatSync=function(e){return U(this.root).statSync(J(e),!0)},M.prototype.truncate=function(e,r,i){r===void 0&&(r=0),i===void 0&&(i=lt);var s=0;typeof r=="function"?i=r:typeof r=="number"&&(s=r);var a=W(i,1);try{if(s<0)throw new d(u.EINVAL);return U(this.root).truncate(J(e),s,a)}catch(c){return a(c)}},M.prototype.truncateSync=function(e,r){if(r===void 0&&(r=0),r<0)throw new d(u.EINVAL);return U(this.root).truncateSync(J(e),r)},M.prototype.unlink=function(e,r){r===void 0&&(r=lt);var i=W(r,1);try{return U(this.root).unlink(J(e),i)}catch(s){return i(s)}},M.prototype.unlinkSync=function(e){return U(this.root).unlinkSync(J(e))},M.prototype.open=function(e,r,i,s){var a=this;s===void 0&&(s=lt);var c=B(i,420);s=typeof i=="function"?i:s;var m=W(s,2);try{U(this.root).open(J(e),I.getFileFlag(r),c,function(E,b){b?m(E,a.getFdForFile(b)):m(E)})}catch(E){m(E)}},M.prototype.openSync=function(e,r,i){return i===void 0&&(i=420),this.getFdForFile(U(this.root).openSync(J(e),I.getFileFlag(r),B(i,420)))},M.prototype.readFile=function(e,r,i){r===void 0&&(r={}),i===void 0&&(i=lt);var s=gt(r,null,"r",null);i=typeof r=="function"?r:i;var a=W(i,2);try{var c=I.getFileFlag(s.flag);return c.isReadable()?U(this.root).readFile(J(e),s.encoding,c,a):a(new d(u.EINVAL,"Flag passed to readFile must allow for reading."))}catch(m){return a(m)}},M.prototype.readFileSync=function(e,r){r===void 0&&(r={});var i=gt(r,null,"r",null),s=I.getFileFlag(i.flag);if(!s.isReadable())throw new d(u.EINVAL,"Flag passed to readFile must allow for reading.");return U(this.root).readFileSync(J(e),i.encoding,s)},M.prototype.writeFile=function(e,r,i,s){i===void 0&&(i={}),s===void 0&&(s=lt);var a=gt(i,"utf8","w",420);s=typeof i=="function"?i:s;var c=W(s,1);try{var m=I.getFileFlag(a.flag);return m.isWriteable()?U(this.root).writeFile(J(e),r,a.encoding,m,a.mode,c):c(new d(u.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(E){return c(E)}},M.prototype.writeFileSync=function(e,r,i){var s=gt(i,"utf8","w",420),a=I.getFileFlag(s.flag);if(!a.isWriteable())throw new d(u.EINVAL,"Flag passed to writeFile must allow for writing.");return U(this.root).writeFileSync(J(e),r,s.encoding,a,s.mode)},M.prototype.appendFile=function(e,r,i,s){s===void 0&&(s=lt);var a=gt(i,"utf8","a",420);s=typeof i=="function"?i:s;var c=W(s,1);try{var m=I.getFileFlag(a.flag);if(!m.isAppendable())return c(new d(u.EINVAL,"Flag passed to appendFile must allow for appending."));U(this.root).appendFile(J(e),r,a.encoding,m,a.mode,c)}catch(E){c(E)}},M.prototype.appendFileSync=function(e,r,i){var s=gt(i,"utf8","a",420),a=I.getFileFlag(s.flag);if(!a.isAppendable())throw new d(u.EINVAL,"Flag passed to appendFile must allow for appending.");return U(this.root).appendFileSync(J(e),r,s.encoding,a,s.mode)},M.prototype.fstat=function(e,r){r===void 0&&(r=lt);var i=W(r,2);try{var s=this.fd2file(e);s.stat(i)}catch(a){i(a)}},M.prototype.fstatSync=function(e){return this.fd2file(e).statSync()},M.prototype.close=function(e,r){var i=this;r===void 0&&(r=lt);var s=W(r,1);try{this.fd2file(e).close(function(a){a||i.closeFd(e),s(a)})}catch(a){s(a)}},M.prototype.closeSync=function(e){this.fd2file(e).closeSync(),this.closeFd(e)},M.prototype.ftruncate=function(e,r,i){i===void 0&&(i=lt);var s=typeof r=="number"?r:0;i=typeof r=="function"?r:i;var a=W(i,1);try{var c=this.fd2file(e);if(s<0)throw new d(u.EINVAL);c.truncate(s,a)}catch(m){a(m)}},M.prototype.ftruncateSync=function(e,r){r===void 0&&(r=0);var i=this.fd2file(e);if(r<0)throw new d(u.EINVAL);i.truncateSync(r)},M.prototype.fsync=function(e,r){r===void 0&&(r=lt);var i=W(r,1);try{this.fd2file(e).sync(i)}catch(s){i(s)}},M.prototype.fsyncSync=function(e){this.fd2file(e).syncSync()},M.prototype.fdatasync=function(e,r){r===void 0&&(r=lt);var i=W(r,1);try{this.fd2file(e).datasync(i)}catch(s){i(s)}},M.prototype.fdatasyncSync=function(e){this.fd2file(e).datasyncSync()},M.prototype.write=function(e,r,i,s,a,c){c===void 0&&(c=lt);var m,E,b,L=null;if(typeof r=="string"){var z="utf8";switch(typeof i){case"function":c=i;break;case"number":L=i,z=typeof s=="string"?s:"utf8",c=typeof a=="function"?a:c;break;default:return c=typeof s=="function"?s:typeof a=="function"?a:c,c(new d(u.EINVAL,"Invalid arguments."))}m=f.from(r,z),E=0,b=m.length}else m=r,E=i,b=s,L=typeof a=="number"?a:null,c=typeof a=="function"?a:c;var X=W(c,3);try{var rt=this.fd2file(e);L==null&&(L=rt.getPos()),rt.write(m,E,b,L,X)}catch(nt){X(nt)}},M.prototype.writeSync=function(e,r,i,s,a){var c,m=0,E,b;if(typeof r=="string"){b=typeof i=="number"?i:null;var L=typeof s=="string"?s:"utf8";m=0,c=f.from(r,L),E=c.length}else c=r,m=i,E=s,b=typeof a=="number"?a:null;var z=this.fd2file(e);return b==null&&(b=z.getPos()),z.writeSync(c,m,E,b)},M.prototype.read=function(e,r,i,s,a,c){c===void 0&&(c=lt);var m,E,b,L,z;if(typeof r=="number"){b=r,m=i;var X=s;c=typeof a=="function"?a:c,E=0,L=f.alloc(b),z=W(function(nt,dt,wt){if(nt)return c(nt);c(nt,wt.toString(X),dt)},3)}else L=r,E=i,b=s,m=a,z=W(c,3);try{var rt=this.fd2file(e);m==null&&(m=rt.getPos()),rt.read(L,E,b,m,z)}catch(nt){z(nt)}},M.prototype.readSync=function(e,r,i,s,a){var c=!1,m,E,b,L,z="utf8";typeof r=="number"?(b=r,L=i,z=s,E=0,m=f.alloc(b),c=!0):(m=r,E=i,b=s,L=a);var X=this.fd2file(e);L==null&&(L=X.getPos());var rt=X.readSync(m,E,b,L);return c?[m.toString(z),rt]:rt},M.prototype.fchown=function(e,r,i,s){s===void 0&&(s=lt);var a=W(s,1);try{this.fd2file(e).chown(r,i,a)}catch(c){a(c)}},M.prototype.fchownSync=function(e,r,i){this.fd2file(e).chownSync(r,i)},M.prototype.fchmod=function(e,r,i){var s=W(i,1);try{var a=typeof r=="string"?parseInt(r,8):r;this.fd2file(e).chmod(a,s)}catch(c){s(c)}},M.prototype.fchmodSync=function(e,r){var i=typeof r=="string"?parseInt(r,8):r;this.fd2file(e).chmodSync(i)},M.prototype.futimes=function(e,r,i,s){s===void 0&&(s=lt);var a=W(s,1);try{var c=this.fd2file(e);typeof r=="number"&&(r=new Date(r*1e3)),typeof i=="number"&&(i=new Date(i*1e3)),c.utimes(r,i,a)}catch(m){a(m)}},M.prototype.futimesSync=function(e,r,i){this.fd2file(e).utimesSync(ct(r),ct(i))},M.prototype.rmdir=function(e,r){r===void 0&&(r=lt);var i=W(r,1);try{e=J(e),U(this.root).rmdir(e,i)}catch(s){i(s)}},M.prototype.rmdirSync=function(e){return e=J(e),U(this.root).rmdirSync(e)},M.prototype.mkdir=function(e,r,i){i===void 0&&(i=lt),typeof r=="function"&&(i=r,r=511);var s=W(i,1);try{e=J(e),U(this.root).mkdir(e,r,s)}catch(a){s(a)}},M.prototype.mkdirSync=function(e,r){U(this.root).mkdirSync(J(e),B(r,511))},M.prototype.readdir=function(e,r){r===void 0&&(r=lt);var i=W(r,2);try{e=J(e),U(this.root).readdir(e,i)}catch(s){i(s)}},M.prototype.readdirSync=function(e){return e=J(e),U(this.root).readdirSync(e)},M.prototype.link=function(e,r,i){i===void 0&&(i=lt);var s=W(i,1);try{e=J(e),r=J(r),U(this.root).link(e,r,s)}catch(a){s(a)}},M.prototype.linkSync=function(e,r){return e=J(e),r=J(r),U(this.root).linkSync(e,r)},M.prototype.symlink=function(e,r,i,s){s===void 0&&(s=lt);var a=typeof i=="string"?i:"file";s=typeof i=="function"?i:s;var c=W(s,1);try{if(a!=="file"&&a!=="dir")return c(new d(u.EINVAL,"Invalid type: "+a));e=J(e),r=J(r),U(this.root).symlink(e,r,a,c)}catch(m){c(m)}},M.prototype.symlinkSync=function(e,r,i){if(!i)i="file";else if(i!=="file"&&i!=="dir")throw new d(u.EINVAL,"Invalid type: "+i);return e=J(e),r=J(r),U(this.root).symlinkSync(e,r,i)},M.prototype.readlink=function(e,r){r===void 0&&(r=lt);var i=W(r,2);try{e=J(e),U(this.root).readlink(e,i)}catch(s){i(s)}},M.prototype.readlinkSync=function(e){return e=J(e),U(this.root).readlinkSync(e)},M.prototype.chown=function(e,r,i,s){s===void 0&&(s=lt);var a=W(s,1);try{e=J(e),U(this.root).chown(e,!1,r,i,a)}catch(c){a(c)}},M.prototype.chownSync=function(e,r,i){e=J(e),U(this.root).chownSync(e,!1,r,i)},M.prototype.lchown=function(e,r,i,s){s===void 0&&(s=lt);var a=W(s,1);try{e=J(e),U(this.root).chown(e,!0,r,i,a)}catch(c){a(c)}},M.prototype.lchownSync=function(e,r,i){e=J(e),U(this.root).chownSync(e,!0,r,i)},M.prototype.chmod=function(e,r,i){i===void 0&&(i=lt);var s=W(i,1);try{var a=B(r,-1);if(a<0)throw new d(u.EINVAL,"Invalid mode.");U(this.root).chmod(J(e),!1,a,s)}catch(c){s(c)}},M.prototype.chmodSync=function(e,r){var i=B(r,-1);if(i<0)throw new d(u.EINVAL,"Invalid mode.");e=J(e),U(this.root).chmodSync(e,!1,i)},M.prototype.lchmod=function(e,r,i){i===void 0&&(i=lt);var s=W(i,1);try{var a=B(r,-1);if(a<0)throw new d(u.EINVAL,"Invalid mode.");U(this.root).chmod(J(e),!0,a,s)}catch(c){s(c)}},M.prototype.lchmodSync=function(e,r){var i=B(r,-1);if(i<1)throw new d(u.EINVAL,"Invalid mode.");U(this.root).chmodSync(J(e),!0,i)},M.prototype.utimes=function(e,r,i,s){s===void 0&&(s=lt);var a=W(s,1);try{U(this.root).utimes(J(e),ct(r),ct(i),a)}catch(c){a(c)}},M.prototype.utimesSync=function(e,r,i){U(this.root).utimesSync(J(e),ct(r),ct(i))},M.prototype.realpath=function(e,r,i){i===void 0&&(i=lt);var s=typeof r=="object"?r:{};i=typeof r=="function"?r:lt;var a=W(i,2);try{e=J(e),U(this.root).realpath(e,s,a)}catch(c){a(c)}},M.prototype.realpathSync=function(e,r){return r===void 0&&(r={}),e=J(e),U(this.root).realpathSync(e,r)},M.prototype.watchFile=function(e,r,i){throw i===void 0&&(i=lt),new d(u.ENOTSUP)},M.prototype.unwatchFile=function(e,r){throw r===void 0&&(r=lt),new d(u.ENOTSUP)},M.prototype.watch=function(e,r,i){throw i===void 0&&(i=lt),new d(u.ENOTSUP)},M.prototype.access=function(e,r,i){throw i===void 0&&(i=lt),new d(u.ENOTSUP)},M.prototype.accessSync=function(e,r){throw new d(u.ENOTSUP)},M.prototype.createReadStream=function(e,r){throw new d(u.ENOTSUP)},M.prototype.createWriteStream=function(e,r){throw new d(u.ENOTSUP)},M.prototype.wrapCallbacks=function(e){W=e},M.prototype.getFdForFile=function(e){var r=this.nextFd++;return this.fdMap[r]=e,r},M.prototype.fd2file=function(e){var r=this.fdMap[e];if(r)return r;throw new d(u.EBADF,"Invalid file descriptor.")},M.prototype.closeFd=function(e){delete this.fdMap[e]},M.Stats=C;var tt=new M,ut={},Ft=M.prototype;Object.keys(Ft).forEach(function(o){typeof tt[o]=="function"?ut[o]=function(){return tt[o].apply(tt,arguments)}:ut[o]=tt[o]}),ut.changeFSModule=function(o){tt=o},ut.getFSModule=function(){return tt},ut.FS=M;function mt(o,e,r,i,s){return o<e||r<e?o>r?r+1:o+1:i===s?e:e+1}function At(o,e){if(o===e)return 0;if(o.length>e.length){var r=o;o=e,e=r}for(var i=o.length,s=e.length;i>0&&o.charCodeAt(i-1)===e.charCodeAt(s-1);)i--,s--;for(var a=0;a<i&&o.charCodeAt(a)===e.charCodeAt(a);)a++;if(i-=a,s-=a,i===0||s===1)return s;for(var c=new Array(i<<1),m=0;m<i;)c[i+m]=o.charCodeAt(a+m),c[m]=++m;var E,b,L,z,X;for(E=0;E+3<s;)for(var rt=e.charCodeAt(a+(b=E)),nt=e.charCodeAt(a+(L=E+1)),dt=e.charCodeAt(a+(z=E+2)),wt=e.charCodeAt(a+(X=E+3)),kt=E+=4,Zt=0;Zt<i;){var ue=c[i+Zt],Ce=c[Zt];b=mt(Ce,b,L,rt,ue),L=mt(b,L,z,nt,ue),z=mt(L,z,X,dt,ue),kt=mt(z,X,kt,wt,ue),c[Zt++]=kt,X=z,z=L,L=b,b=Ce}for(var Be=0;E<s;){var wi=e.charCodeAt(a+(b=E));Be=++E;for(var He=0;He<i;He++){var qe=c[He];c[He]=Be=qe<b||Be<b?qe>Be?Be+1:qe+1:wi===c[i+He]?b:b+1,b=qe}}return Be}function Tt(o,e,r){o&&console.warn("["+e+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+e+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var _t=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Gt=typeof window>"u";function H(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function q(o,e,r){r.existsSync(o)||(q(g.dirname(o),e,r),r.mkdirSync(o,e))}function et(o){var e=pt(o),r=e.byteOffset,i=e.byteLength;return r===0&&i===e.buffer.byteLength?e.buffer:e.buffer.slice(r,r+i)}function pt(o){return o instanceof Uint8Array?o:new Uint8Array(o)}function Nt(o){return o instanceof f?o:o instanceof Uint8Array?xt(o):f.from(o)}function xt(o){return o instanceof f?o:o.byteOffset===0&&o.byteLength===o.buffer.byteLength?It(o.buffer):f.from(o.buffer,o.byteOffset,o.byteLength)}function It(o){return f.from(o)}function Ot(o,e,r){if(e===void 0&&(e=0),r===void 0&&(r=o.length),e<0||r<0||r>o.length||e>r)throw new TypeError("Invalid slice bounds on buffer of length "+o.length+": ["+e+", "+r+"]");if(o.length===0)return zt();var i=pt(o),s=o[0],a=(s+1)%255;return o[0]=a,i[0]===a?(i[0]=s,xt(i.slice(e,r))):(o[0]=s,xt(i.subarray(e,r)))}var Ht=null;function zt(){return Ht||(Ht=f.alloc(0))}function re(o,e){f.isBuffer(o)?e():e(new d(u.EINVAL,"option must be a Buffer."))}function O(o,e,r){var i=o.Options,s=o.Name,a=0,c=!1,m=!1;function E(X){c||(X&&(c=!0,r(X)),a--,a===0&&m&&r())}var b=function(X){if(i.hasOwnProperty(X)){var rt=i[X],nt=e[X];if(nt==null){if(!rt.optional){var dt=Object.keys(e).filter(function(kt){return!(kt in i)}).map(function(kt){return{str:kt,distance:At(X,kt)}}).filter(function(kt){return kt.distance<5}).sort(function(kt,Zt){return kt.distance-Zt.distance});return c?{}:(c=!0,{v:r(new d(u.EINVAL,"["+s+"] Required option '"+X+"' not provided."+(dt.length>0?" You provided unrecognized option '"+dt[0].str+"'; perhaps you meant to type '"+X+"'.":"")+`
Option description: `+rt.description))})}}else{var wt=!1;if(Array.isArray(rt.type)?wt=rt.type.indexOf(typeof nt)!==-1:wt=typeof nt===rt.type,wt)rt.validator&&(a++,rt.validator(nt,E));else return c?{}:(c=!0,{v:r(new d(u.EINVAL,"["+s+"] Value provided for option "+X+" is not the proper type. Expected "+(Array.isArray(rt.type)?"one of {"+rt.type.join(", ")+"}":rt.type)+", but received "+typeof nt+`
Option description: `+rt.description))})}}};for(var L in i){var z=b(L);if(z)return z.v}m=!0,a===0&&!c&&r()}var A=Object.freeze({deprecationMessage:Tt,isIE:_t,isWebWorker:Gt,fail:H,mkdirpSync:q,buffer2ArrayBuffer:et,buffer2Uint8array:pt,arrayish2Buffer:Nt,uint8Array2Buffer:xt,arrayBuffer2Buffer:It,copyingSlice:Ot,emptyBuffer:zt,bufferValidator:re,checkOptions:O}),Q=function(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};Q.prototype.open=function(e){var r=this.fs.realPath(e.node),i=this.FS;try{i.isFile(e.node.mode)&&(e.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(e.flags)))}catch(s){throw s.code?new i.ErrnoError(this.ERRNO_CODES[s.code]):s}},Q.prototype.close=function(e){var r=this.FS;try{r.isFile(e.node.mode)&&e.nfd&&this.nodefs.closeSync(e.nfd)}catch(i){throw i.code?new r.ErrnoError(this.ERRNO_CODES[i.code]):i}},Q.prototype.read=function(e,r,i,s,a){try{return this.nodefs.readSync(e.nfd,xt(r),i,s,a)}catch(c){throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code])}},Q.prototype.write=function(e,r,i,s,a){try{return this.nodefs.writeSync(e.nfd,xt(r),i,s,a)}catch(c){throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code])}},Q.prototype.llseek=function(e,r,i){var s=r;if(i===1)s+=e.position;else if(i===2&&this.FS.isFile(e.node.mode))try{var a=this.nodefs.fstatSync(e.nfd);s+=a.size}catch(c){throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code])}if(s<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return e.position=s,s};var it=function(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};it.prototype.getattr=function(e){var r=this.fs.realPath(e),i;try{i=this.nodefs.lstatSync(r)}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}return{dev:i.dev,ino:i.ino,mode:i.mode,nlink:i.nlink,uid:i.uid,gid:i.gid,rdev:i.rdev,size:i.size,atime:i.atime,mtime:i.mtime,ctime:i.ctime,blksize:i.blksize,blocks:i.blocks}},it.prototype.setattr=function(e,r){var i=this.fs.realPath(e);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(i,r.mode),e.mode=r.mode),r.timestamp!==void 0){var s=new Date(r.timestamp);this.nodefs.utimesSync(i,s,s)}}catch(a){if(!a.code)throw a;if(a.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(i,r.size)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},it.prototype.lookup=function(e,r){var i=this.PATH.join2(this.fs.realPath(e),r),s=this.fs.getMode(i);return this.fs.createNode(e,r,s)},it.prototype.mknod=function(e,r,i,s){var a=this.fs.createNode(e,r,i,s),c=this.fs.realPath(a);try{this.FS.isDir(a.mode)?this.nodefs.mkdirSync(c,a.mode):this.nodefs.writeFileSync(c,"",{mode:a.mode})}catch(m){throw m.code?new this.FS.ErrnoError(this.ERRNO_CODES[m.code]):m}return a},it.prototype.rename=function(e,r,i){var s=this.fs.realPath(e),a=this.PATH.join2(this.fs.realPath(r),i);try{this.nodefs.renameSync(s,a),e.name=i,e.parent=r}catch(c){throw c.code?new this.FS.ErrnoError(this.ERRNO_CODES[c.code]):c}},it.prototype.unlink=function(e,r){var i=this.PATH.join2(this.fs.realPath(e),r);try{this.nodefs.unlinkSync(i)}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}},it.prototype.rmdir=function(e,r){var i=this.PATH.join2(this.fs.realPath(e),r);try{this.nodefs.rmdirSync(i)}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}},it.prototype.readdir=function(e){var r=this.fs.realPath(e);try{var i=this.nodefs.readdirSync(r);return i.push(".",".."),i}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}},it.prototype.symlink=function(e,r,i){var s=this.PATH.join2(this.fs.realPath(e),r);try{this.nodefs.symlinkSync(i,s)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},it.prototype.readlink=function(e){var r=this.fs.realPath(e);try{return this.nodefs.readlinkSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}};var vt=function(e,r,i,s){e===void 0&&(e=self.FS),r===void 0&&(r=self.PATH),i===void 0&&(i=self.ERRNO_CODES),s===void 0&&(s=ut),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=s,this.FS=e,this.PATH=r,this.ERRNO_CODES=i,this.node_ops=new it(this),this.stream_ops=new Q(this)};vt.prototype.mount=function(e){return this.createNode(null,"/",this.getMode(e.opts.root),0)},vt.prototype.createNode=function(e,r,i,s){var a=this.FS;if(!a.isDir(i)&&!a.isFile(i)&&!a.isLink(i))throw new a.ErrnoError(this.ERRNO_CODES.EINVAL);var c=a.createNode(e,r,i);return c.node_ops=this.node_ops,c.stream_ops=this.stream_ops,c},vt.prototype.getMode=function(e){var r;try{r=this.nodefs.lstatSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return r.mode},vt.prototype.realPath=function(e){for(var r=[];e.parent!==e;)r.push(e.name),e=e.parent;return r.push(e.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},vt.prototype.flagsToPermissionString=function(e){var r=typeof e=="string"?parseInt(e,10):e;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:e},vt.prototype.getNodeFS=function(){return this.nodefs},vt.prototype.getFS=function(){return this.FS},vt.prototype.getPATH=function(){return this.PATH},vt.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var ot=function(){};ot.prototype.supportsLinks=function(){return!1},ot.prototype.diskSpace=function(e,r){r(0,0)},ot.prototype.openFile=function(e,r,i){throw new d(u.ENOTSUP)},ot.prototype.createFile=function(e,r,i,s){throw new d(u.ENOTSUP)},ot.prototype.open=function(e,r,i,s){var a=this,c=function(m,E){if(m)switch(r.pathNotExistsAction()){case T.CREATE_FILE:return a.stat(g.dirname(e),!1,function(b,L){b?s(b):L&&!L.isDirectory()?s(d.ENOTDIR(g.dirname(e))):a.createFile(e,r,i,s)});case T.THROW_EXCEPTION:return s(d.ENOENT(e));default:return s(new d(u.EINVAL,"Invalid FileFlag object."))}else{if(E&&E.isDirectory())return s(d.EISDIR(e));switch(r.pathExistsAction()){case T.THROW_EXCEPTION:return s(d.EEXIST(e));case T.TRUNCATE_FILE:return a.openFile(e,r,function(b,L){b?s(b):L?L.truncate(0,function(){L.sync(function(){s(null,L)})}):H()});case T.NOP:return a.openFile(e,r,s);default:return s(new d(u.EINVAL,"Invalid FileFlag object."))}}};this.stat(e,!1,c)},ot.prototype.rename=function(e,r,i){i(new d(u.ENOTSUP))},ot.prototype.renameSync=function(e,r){throw new d(u.ENOTSUP)},ot.prototype.stat=function(e,r,i){i(new d(u.ENOTSUP))},ot.prototype.statSync=function(e,r){throw new d(u.ENOTSUP)},ot.prototype.openFileSync=function(e,r,i){throw new d(u.ENOTSUP)},ot.prototype.createFileSync=function(e,r,i){throw new d(u.ENOTSUP)},ot.prototype.openSync=function(e,r,i){var s;try{s=this.statSync(e,!1)}catch{switch(r.pathNotExistsAction()){case T.CREATE_FILE:var a=this.statSync(g.dirname(e),!1);if(!a.isDirectory())throw d.ENOTDIR(g.dirname(e));return this.createFileSync(e,r,i);case T.THROW_EXCEPTION:throw d.ENOENT(e);default:throw new d(u.EINVAL,"Invalid FileFlag object.")}}if(s.isDirectory())throw d.EISDIR(e);switch(r.pathExistsAction()){case T.THROW_EXCEPTION:throw d.EEXIST(e);case T.TRUNCATE_FILE:return this.unlinkSync(e),this.createFileSync(e,r,s.mode);case T.NOP:return this.openFileSync(e,r,i);default:throw new d(u.EINVAL,"Invalid FileFlag object.")}},ot.prototype.unlink=function(e,r){r(new d(u.ENOTSUP))},ot.prototype.unlinkSync=function(e){throw new d(u.ENOTSUP)},ot.prototype.rmdir=function(e,r){r(new d(u.ENOTSUP))},ot.prototype.rmdirSync=function(e){throw new d(u.ENOTSUP)},ot.prototype.mkdir=function(e,r,i){i(new d(u.ENOTSUP))},ot.prototype.mkdirSync=function(e,r){throw new d(u.ENOTSUP)},ot.prototype.readdir=function(e,r){r(new d(u.ENOTSUP))},ot.prototype.readdirSync=function(e){throw new d(u.ENOTSUP)},ot.prototype.exists=function(e,r){this.stat(e,null,function(i){r(!i)})},ot.prototype.existsSync=function(e){try{return this.statSync(e,!0),!0}catch{return!1}},ot.prototype.realpath=function(e,r,i){if(this.supportsLinks())for(var s=e.split(g.sep),a=0;a<s.length;a++){var c=s.slice(0,a+1);s[a]=g.join.apply(null,c)}else this.exists(e,function(m){m?i(null,e):i(d.ENOENT(e))})},ot.prototype.realpathSync=function(e,r){if(this.supportsLinks()){for(var i=e.split(g.sep),s=0;s<i.length;s++){var a=i.slice(0,s+1);i[s]=g.join.apply(g,a)}return i.join(g.sep)}else{if(this.existsSync(e))return e;throw d.ENOENT(e)}},ot.prototype.truncate=function(e,r,i){this.open(e,I.getFileFlag("r+"),420,function(s,a){if(s)return i(s);a.truncate(r,function(c){a.close(function(m){i(c||m)})})})},ot.prototype.truncateSync=function(e,r){var i=this.openSync(e,I.getFileFlag("r+"),420);try{i.truncateSync(r)}catch(s){throw s}finally{i.closeSync()}},ot.prototype.readFile=function(e,r,i,s){var a=s;this.open(e,i,420,function(c,m){if(c)return s(c);s=function(E,b){m.close(function(L){return E||(E=L),a(E,b)})},m.stat(function(E,b){if(E)return s(E);var L=f.alloc(b.size);m.read(L,0,b.size,0,function(z){if(z)return s(z);if(r===null)return s(z,L);try{s(null,L.toString(r))}catch(X){s(X)}})})})},ot.prototype.readFileSync=function(e,r,i){var s=this.openSync(e,i,420);try{var a=s.statSync(),c=f.alloc(a.size);return s.readSync(c,0,a.size,0),s.closeSync(),r===null?c:c.toString(r)}finally{s.closeSync()}},ot.prototype.writeFile=function(e,r,i,s,a,c){var m=c;this.open(e,s,420,function(E,b){if(E)return c(E);c=function(L){b.close(function(z){m(L||z)})};try{typeof r=="string"&&(r=f.from(r,i))}catch(L){return c(L)}b.write(r,0,r.length,0,c)})},ot.prototype.writeFileSync=function(e,r,i,s,a){var c=this.openSync(e,s,a);try{typeof r=="string"&&(r=f.from(r,i)),c.writeSync(r,0,r.length,0)}finally{c.closeSync()}},ot.prototype.appendFile=function(e,r,i,s,a,c){var m=c;this.open(e,s,a,function(E,b){if(E)return c(E);c=function(L){b.close(function(z){m(L||z)})},typeof r=="string"&&(r=f.from(r,i)),b.write(r,0,r.length,null,c)})},ot.prototype.appendFileSync=function(e,r,i,s,a){var c=this.openSync(e,s,a);try{typeof r=="string"&&(r=f.from(r,i)),c.writeSync(r,0,r.length,null)}finally{c.closeSync()}},ot.prototype.chmod=function(e,r,i,s){s(new d(u.ENOTSUP))},ot.prototype.chmodSync=function(e,r,i){throw new d(u.ENOTSUP)},ot.prototype.chown=function(e,r,i,s,a){a(new d(u.ENOTSUP))},ot.prototype.chownSync=function(e,r,i,s){throw new d(u.ENOTSUP)},ot.prototype.utimes=function(e,r,i,s){s(new d(u.ENOTSUP))},ot.prototype.utimesSync=function(e,r,i){throw new d(u.ENOTSUP)},ot.prototype.link=function(e,r,i){i(new d(u.ENOTSUP))},ot.prototype.linkSync=function(e,r){throw new d(u.ENOTSUP)},ot.prototype.symlink=function(e,r,i,s){s(new d(u.ENOTSUP))},ot.prototype.symlinkSync=function(e,r,i){throw new d(u.ENOTSUP)},ot.prototype.readlink=function(e,r){r(new d(u.ENOTSUP))},ot.prototype.readlinkSync=function(e){throw new d(u.ENOTSUP)};var bt=function(o){function e(){o.apply(this,arguments)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.supportsSynch=function(){return!0},e.prototype.rename=function(i,s,a){try{this.renameSync(i,s),a()}catch(c){a(c)}},e.prototype.stat=function(i,s,a){try{a(null,this.statSync(i,s))}catch(c){a(c)}},e.prototype.open=function(i,s,a,c){try{c(null,this.openSync(i,s,a))}catch(m){c(m)}},e.prototype.unlink=function(i,s){try{this.unlinkSync(i),s()}catch(a){s(a)}},e.prototype.rmdir=function(i,s){try{this.rmdirSync(i),s()}catch(a){s(a)}},e.prototype.mkdir=function(i,s,a){try{this.mkdirSync(i,s),a()}catch(c){a(c)}},e.prototype.readdir=function(i,s){try{s(null,this.readdirSync(i))}catch(a){s(a)}},e.prototype.chmod=function(i,s,a,c){try{this.chmodSync(i,s,a),c()}catch(m){c(m)}},e.prototype.chown=function(i,s,a,c,m){try{this.chownSync(i,s,a,c),m()}catch(E){m(E)}},e.prototype.utimes=function(i,s,a,c){try{this.utimesSync(i,s,a),c()}catch(m){c(m)}},e.prototype.link=function(i,s,a){try{this.linkSync(i,s),a()}catch(c){a(c)}},e.prototype.symlink=function(i,s,a,c){try{this.symlinkSync(i,s,a),c()}catch(m){c(m)}},e.prototype.readlink=function(i,s){try{s(null,this.readlinkSync(i))}catch(a){s(a)}},e}(ot),St=function(){};St.prototype.sync=function(e){e(new d(u.ENOTSUP))},St.prototype.syncSync=function(){throw new d(u.ENOTSUP)},St.prototype.datasync=function(e){this.sync(e)},St.prototype.datasyncSync=function(){return this.syncSync()},St.prototype.chown=function(e,r,i){i(new d(u.ENOTSUP))},St.prototype.chownSync=function(e,r){throw new d(u.ENOTSUP)},St.prototype.chmod=function(e,r){r(new d(u.ENOTSUP))},St.prototype.chmodSync=function(e){throw new d(u.ENOTSUP)},St.prototype.utimes=function(e,r,i){i(new d(u.ENOTSUP))},St.prototype.utimesSync=function(e,r){throw new d(u.ENOTSUP)};var Jt=function(o){function e(r,i,s,a,c){if(o.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=i,this._flag=s,this._stat=a,c?this._buffer=c:this._buffer=zt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStats=function(){return this._stat},e.prototype.getFlag=function(){return this._flag},e.prototype.getPath=function(){return this._path},e.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},e.prototype.advancePos=function(i){return this._pos+=i},e.prototype.setPos=function(i){return this._pos=i},e.prototype.sync=function(i){try{this.syncSync(),i()}catch(s){i(s)}},e.prototype.syncSync=function(){throw new d(u.ENOTSUP)},e.prototype.close=function(i){try{this.closeSync(),i()}catch(s){i(s)}},e.prototype.closeSync=function(){throw new d(u.ENOTSUP)},e.prototype.stat=function(i){try{i(null,this._stat.clone())}catch(s){i(s)}},e.prototype.statSync=function(){return this._stat.clone()},e.prototype.truncate=function(i,s){try{this.truncateSync(i),this._flag.isSynchronous()&&!ut.getRootFS().supportsSynch()&&this.sync(s),s()}catch(a){return s(a)}},e.prototype.truncateSync=function(i){if(this._dirty=!0,!this._flag.isWriteable())throw new d(u.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,i>this._buffer.length){var s=f.alloc(i-this._buffer.length,0);this.writeSync(s,0,s.length,this._buffer.length),this._flag.isSynchronous()&&ut.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=i;var a=f.alloc(i);this._buffer.copy(a,0,0,i),this._buffer=a,this._flag.isSynchronous()&&ut.getRootFS().supportsSynch()&&this.syncSync()},e.prototype.write=function(i,s,a,c,m){try{m(null,this.writeSync(i,s,a,c),i)}catch(E){m(E)}},e.prototype.writeSync=function(i,s,a,c){if(this._dirty=!0,c==null&&(c=this.getPos()),!this._flag.isWriteable())throw new d(u.EPERM,"File not opened with a writeable mode.");var m=c+a;if(m>this._stat.size&&(this._stat.size=m,m>this._buffer.length)){var E=f.alloc(m);this._buffer.copy(E),this._buffer=E}var b=i.copy(this._buffer,c,s,s+a);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),b):(this.setPos(c+b),b)},e.prototype.read=function(i,s,a,c,m){try{m(null,this.readSync(i,s,a,c),i)}catch(E){m(E)}},e.prototype.readSync=function(i,s,a,c){if(!this._flag.isReadable())throw new d(u.EPERM,"File not opened with a readable mode.");c==null&&(c=this.getPos());var m=c+a;m>this._stat.size&&(a=this._stat.size-c);var E=this._buffer.copy(i,s,c,c+a);return this._stat.atime=new Date,this._pos=c+a,E},e.prototype.chmod=function(i,s){try{this.chmodSync(i),s()}catch(a){s(a)}},e.prototype.chmodSync=function(i){if(!this._fs.supportsProps())throw new d(u.ENOTSUP);this._dirty=!0,this._stat.chmod(i),this.syncSync()},e.prototype.isDirty=function(){return this._dirty},e.prototype.resetDirty=function(){this._dirty=!1},e}(St),le=function(o){function e(r,i,s,a,c){o.call(this,r,i,s,a,c)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.sync=function(i){i()},e.prototype.syncSync=function(){},e.prototype.close=function(i){i()},e.prototype.closeSync=function(){},e}(Jt),Re=function(o){function e(r,i,s,a,c){o.call(this,r,i,s,a,c)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},e.prototype.closeSync=function(){this.syncSync()},e}(Jt),k=function(o){function e(r,i,s){if(s===void 0&&(s=!0),o.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=i,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Tt(s,e.Name,{sync:"sync file system instance",async:"async file system instance"})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){try{var a=new e(i.sync,i.async,!1);a.initialize(function(c){c?s(c):s(null,a)},!1)}catch(c){s(c)}},e.isAvailable=function(){return!0},e.prototype.getName=function(){return e.Name},e.prototype._syncSync=function(i){this._sync.writeFileSync(i.getPath(),i.getBuffer(),null,I.getFileFlag("w"),i.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[i.getPath(),i.getBuffer(),null,i.getFlag(),i.getStats().mode]})},e.prototype.initialize=function(i,s){var a=this;s===void 0&&(s=!0),s&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var c=this._initializeCallbacks,m=function(z){a._isInitialized=!z,a._initializeCallbacks=[],c.forEach(function(X){return X(z)})};if(this._isInitialized)i();else if(c.push(i)===1){var E=function(z,X,rt){z!=="/"&&a._sync.mkdirSync(z,X),a._async.readdir(z,function(nt,dt){var wt=0;function kt(Zt){Zt?rt(Zt):wt<dt.length?(L(g.join(z,dt[wt]),kt),wt++):rt()}nt?rt(nt):kt()})},b=function(z,X,rt){a._async.readFile(z,null,I.getFileFlag("r"),function(nt,dt){if(nt)rt(nt);else try{a._sync.writeFileSync(z,dt,null,I.getFileFlag("w"),X)}catch(wt){nt=wt}finally{rt(nt)}})},L=function(z,X){a._async.stat(z,!1,function(rt,nt){rt?X(rt):nt.isDirectory()?E(z,nt.mode,X):b(z,nt.mode,X)})};E("/",0,m)}},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},e.prototype.renameSync=function(i,s){this.checkInitialized(),this._sync.renameSync(i,s),this.enqueueOp({apiMethod:"rename",arguments:[i,s]})},e.prototype.statSync=function(i,s){return this.checkInitialized(),this._sync.statSync(i,s)},e.prototype.openSync=function(i,s,a){this.checkInitialized();var c=this._sync.openSync(i,s,a);return c.closeSync(),new Re(this,i,s,this._sync.statSync(i,!1),this._sync.readFileSync(i,null,I.getFileFlag("r")))},e.prototype.unlinkSync=function(i){this.checkInitialized(),this._sync.unlinkSync(i),this.enqueueOp({apiMethod:"unlink",arguments:[i]})},e.prototype.rmdirSync=function(i){this.checkInitialized(),this._sync.rmdirSync(i),this.enqueueOp({apiMethod:"rmdir",arguments:[i]})},e.prototype.mkdirSync=function(i,s){this.checkInitialized(),this._sync.mkdirSync(i,s),this.enqueueOp({apiMethod:"mkdir",arguments:[i,s]})},e.prototype.readdirSync=function(i){return this.checkInitialized(),this._sync.readdirSync(i)},e.prototype.existsSync=function(i){return this.checkInitialized(),this._sync.existsSync(i)},e.prototype.chmodSync=function(i,s,a){this.checkInitialized(),this._sync.chmodSync(i,s,a),this.enqueueOp({apiMethod:"chmod",arguments:[i,s,a]})},e.prototype.chownSync=function(i,s,a,c){this.checkInitialized(),this._sync.chownSync(i,s,a,c),this.enqueueOp({apiMethod:"chown",arguments:[i,s,a,c]})},e.prototype.utimesSync=function(i,s,a){this.checkInitialized(),this._sync.utimesSync(i,s,a),this.enqueueOp({apiMethod:"utimes",arguments:[i,s,a]})},e.prototype.checkInitialized=function(){if(!this._isInitialized)throw new d(u.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},e.prototype.enqueueOp=function(i){var s=this;if(this._queue.push(i),!this._queueRunning){this._queueRunning=!0;var a=function(c){if(c&&console.error("WARNING: File system has desynchronized. Received following error: "+c+`
$`),s._queue.length>0){var m=s._queue.shift(),E=m.arguments;E.push(a),s._async[m.apiMethod].apply(s._async,E)}else s._queueRunning=!1};a()}},e}(bt);k.Name="AsyncMirror",k.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function w(o,e,r){switch(r.length){case 0:return o.call(e);case 1:return o.call(e,r[0]);case 2:return o.call(e,r[0],r[1]);case 3:return o.call(e,r[0],r[1],r[2])}return o.apply(e,r)}var S=Math.max;function R(o,e,r){return e=S(e===void 0?o.length-1:e,0),function(){for(var i=arguments,s=-1,a=S(i.length-e,0),c=Array(a);++s<a;)c[s]=i[e+s];s=-1;for(var m=Array(e+1);++s<e;)m[s]=i[s];return m[e]=r(c),w(o,this,m)}}function P(o){return o}function Y(o,e){return R(o,e,P)}var $=function(o){return Y(function(e){var r=e.pop();o.call(this,e,r)})};function Rt(o){return Y(function(e,r){var i=$(function(s,a){var c=this;return o(e,function(m,E){m.apply(c,s.concat(E))},a)});return r.length?i.apply(this,r):i})}var Ct=typeof h=="object"&&h&&h.Object===Object&&h,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Kt=Ct||Mt||Function("return this")(),Bt=Kt.Symbol,Te=Object.prototype,ci=Te.hasOwnProperty,Je=Te.toString,Ke=Bt?Bt.toStringTag:void 0;function pr(o){var e=ci.call(o,Ke),r=o[Ke];try{o[Ke]=void 0;var i=!0}catch{}var s=Je.call(o);return i&&(e?o[Ke]=r:delete o[Ke]),s}var dr=Object.prototype,yr=dr.toString;function V(o){return yr.call(o)}var at="[object Null]",F="[object Undefined]",ht=Bt?Bt.toStringTag:void 0;function Pt(o){return o==null?o===void 0?F:at:ht&&ht in Object(o)?pr(o):V(o)}function st(o){var e=typeof o;return o!=null&&(e=="object"||e=="function")}var pe="[object AsyncFunction]",ft="[object Function]",Qt="[object GeneratorFunction]",K="[object Proxy]";function G(o){if(!st(o))return!1;var e=Pt(o);return e==ft||e==Qt||e==pe||e==K}var ui=9007199254740991;function Ut(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=ui}function yt(o){return o!=null&&Ut(o.length)&&!G(o)}var Qe={};function Pe(){}function qt(o){return function(){if(o!==null){var e=o;o=null,e.apply(this,arguments)}}}var Lt=typeof Symbol=="function"&&Symbol.iterator,oe=function(o){return Lt&&o[Lt]&&o[Lt]()};function he(o,e){for(var r=-1,i=Array(o);++r<o;)i[r]=e(r);return i}function se(o){return o!=null&&typeof o=="object"}var hi="[object Arguments]";function $e(o){return se(o)&&Pt(o)==hi}var Xt=Object.prototype,de=Xt.hasOwnProperty,ne=Xt.propertyIsEnumerable,Oe=$e(function(){return arguments}())?$e:function(o){return se(o)&&de.call(o,"callee")&&!ne.call(o,"callee")},be=Array.isArray;function Wi(){return!1}var sn=typeof t=="object"&&t&&!t.nodeType&&t,an=sn&&typeof l=="object"&&l&&!l.nodeType&&l,ws=an&&an.exports===sn,fn=ws?Kt.Buffer:void 0,Ss=fn?fn.isBuffer:void 0,xs=Ss||Wi,Es=9007199254740991,_s=/^(?:0|[1-9]\d*)$/;function bs(o,e){return e=e??Es,!!e&&(typeof o=="number"||_s.test(o))&&o>-1&&o%1==0&&o<e}var Fs="[object Arguments]",Is="[object Array]",ks="[object Boolean]",Ns="[object Date]",Rs="[object Error]",Ts="[object Function]",Os="[object Map]",As="[object Number]",Ls="[object Object]",Ds="[object RegExp]",Cs="[object Set]",Bs="[object String]",zs="[object WeakMap]",Ms="[object ArrayBuffer]",Ps="[object DataView]",Us="[object Float32Array]",js="[object Float64Array]",Ws="[object Int8Array]",Hs="[object Int16Array]",qs="[object Int32Array]",Vs="[object Uint8Array]",Zs="[object Uint8ClampedArray]",Xs="[object Uint16Array]",Ys="[object Uint32Array]",jt={};jt[Us]=jt[js]=jt[Ws]=jt[Hs]=jt[qs]=jt[Vs]=jt[Zs]=jt[Xs]=jt[Ys]=!0,jt[Fs]=jt[Is]=jt[Ms]=jt[ks]=jt[Ps]=jt[Ns]=jt[Rs]=jt[Ts]=jt[Os]=jt[As]=jt[Ls]=jt[Ds]=jt[Cs]=jt[Bs]=jt[zs]=!1;function Gs(o){return se(o)&&Ut(o.length)&&!!jt[Pt(o)]}function Js(o){return function(e){return o(e)}}var cn=typeof t=="object"&&t&&!t.nodeType&&t,un=cn&&typeof l=="object"&&l&&!l.nodeType&&l,Ks=un&&un.exports===cn,gr=Ks&&Ct.process,hn=function(){try{return gr&&gr.binding&&gr.binding("util")}catch{}}(),ln=hn&&hn.isTypedArray,Qs=ln?Js(ln):Gs,$s=Object.prototype,ta=$s.hasOwnProperty;function ea(o,e){var r=be(o),i=!r&&Oe(o),s=!r&&!i&&xs(o),a=!r&&!i&&!s&&Qs(o),c=r||i||s||a,m=c?he(o.length,String):[],E=m.length;for(var b in o)(e||ta.call(o,b))&&!(c&&(b=="length"||s&&(b=="offset"||b=="parent")||a&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||bs(b,E)))&&m.push(b);return m}var ia=Object.prototype;function ra(o){var e=o&&o.constructor,r=typeof e=="function"&&e.prototype||ia;return o===r}function na(o,e){return function(r){return o(e(r))}}var oa=na(Object.keys,Object),sa=Object.prototype,aa=sa.hasOwnProperty;function fa(o){if(!ra(o))return oa(o);var e=[];for(var r in Object(o))aa.call(o,r)&&r!="constructor"&&e.push(r);return e}function pn(o){return yt(o)?ea(o):fa(o)}function ca(o){var e=-1,r=o.length;return function(){return++e<r?{value:o[e],key:e}:null}}function ua(o){var e=-1;return function(){var i=o.next();return i.done?null:(e++,{value:i.value,key:e})}}function ha(o){var e=pn(o),r=-1,i=e.length;return function(){var a=e[++r];return r<i?{value:o[a],key:a}:null}}function la(o){if(yt(o))return ca(o);var e=oe(o);return e?ua(e):ha(o)}function dn(o){return function(){if(o===null)throw new Error("Callback was already called.");var e=o;o=null,e.apply(this,arguments)}}function yn(o){return function(e,r,i){if(i=qt(i||Pe),o<=0||!e)return i(null);var s=la(e),a=!1,c=0;function m(b,L){if(c-=1,b)a=!0,i(b);else{if(L===Qe||a&&c<=0)return a=!0,i(null);E()}}function E(){for(;c<o&&!a;){var b=s();if(b===null){a=!0,c<=0&&i(null);return}c+=1,r(b.value,b.key,dn(m))}}E()}}function gn(o,e,r,i){yn(e)(o,r,i)}function mr(o,e){return function(r,i,s){return o(r,e,i,s)}}function pa(o,e,r){r=qt(r||Pe);var i=0,s=0,a=o.length;a===0&&r(null);function c(m,E){m?r(m):(++s===a||E===Qe)&&r(null)}for(;i<a;i++)e(o[i],i,dn(c))}var da=mr(gn,1/0),mn=function(o,e,r){var i=yt(o)?pa:da;i(o,e,r)};function ya(o){return function(e,r,i){return o(mn,e,r,i)}}function vn(o,e,r,i){i=i||Pe,e=e||[];var s=[],a=0;o(e,function(c,m,E){var b=a++;r(c,function(L,z){s[b]=z,E(L)})},function(c){i(c,s)})}var ga=ya(vn);Rt(ga);function ma(o){return function(e,r,i,s){return o(yn(r),e,i,s)}}var va=ma(vn),wa=mr(va,1);Rt(wa),Y(function(o,e){return Y(function(r){return o.apply(null,e.concat(r))})});function Sa(o,e){for(var r=-1,i=o==null?0:o.length;++r<i&&e(o[r],r,o)!==!1;);return o}function xa(o){return function(e,r,i){for(var s=-1,a=Object(e),c=i(e),m=c.length;m--;){var E=c[o?m:++s];if(r(a[E],E,a)===!1)break}return e}}var Ea=xa();function Yc(o,e){return o&&Ea(o,e,pn)}function _a(o,e,r,i){for(var s=o.length,a=r+(i?1:-1);i?a--:++a<s;)if(e(o[a],a,o))return a;return-1}function ba(o){return o!==o}function Fa(o,e,r){for(var i=r-1,s=o.length;++i<s;)if(o[i]===e)return i;return-1}function Gc(o,e,r){return e===e?Fa(o,e,r):_a(o,ba,r)}var wn="\\ud800-\\udfff",Ia="\\u0300-\\u036f",ka="\\ufe20-\\ufe2f",Na="\\u20d0-\\u20ff",Ra=Ia+ka+Na,Ta="\\ufe0e\\ufe0f",Oa="["+wn+"]",vr="["+Ra+"]",Aa="\\ud83c[\\udffb-\\udfff]",La="(?:"+vr+"|"+Aa+")",Sn="[^"+wn+"]",xn="(?:\\ud83c[\\udde6-\\uddff]){2}",En="[\\ud800-\\udbff][\\udc00-\\udfff]",Da="\\u200d",_n=La+"?",bn="["+Ta+"]?",Ca="(?:"+Da+"(?:"+[Sn,xn,En].join("|")+")"+bn+_n+")*",Jc=bn+_n+Ca,Kc="(?:"+[Sn+vr+"?",vr,xn,En,Oa].join("|")+")",Fn=typeof setImmediate=="function"&&setImmediate,In=typeof v=="object"&&typeof v.nextTick=="function";function kn(o){setTimeout(o,0)}function Nn(o){return Y(function(e,r){o(function(){e.apply(null,r)})})}var Hi;Fn?Hi=setImmediate:In?Hi=v.nextTick:Hi=kn,Nn(Hi);var Ba=mr(gn,1);function za(o,e,r,i){i=qt(i||Pe),Ba(o,function(s,a,c){r(e,s,function(m,E){e=E,c(m)})},function(s){i(s,e)})}var Ma=Y(function(e){return Y(function(r){var i=this,s=r[r.length-1];typeof s=="function"?r.pop():s=Pe,za(e,r,function(a,c,m){c.apply(i,a.concat(Y(function(E,b){m(E,b)})))},function(a,c){s.apply(i,[a].concat(c))})})});Y(function(o){return Ma.apply(null,o.reverse())}),Y(function(o){var e=[null].concat(o);return $(function(r,i){return i.apply(this,e)})});function Rn(o){return Y(function(e,r){e.apply(null,r.concat(Y(function(i,s){typeof console=="object"&&(i?console.error&&console.error(i):console[o]&&Sa(s,function(a){console[o](a)}))})))})}Rn("dir");function Pa(o){return function(e,r,i){return o(e,i)}}function Tn(o,e,r){mn(o,Pa(e),r)}Rn("log");var qi;In?qi=v.nextTick:Fn?qi=setImmediate:qi=kn,Nn(qi);var Qc=Math.ceil,$c=Math.max,ye;function Ua(){ye||(ye={},ye[Dropbox.ApiError.NETWORK_ERROR]=u.EIO,ye[Dropbox.ApiError.INVALID_PARAM]=u.EINVAL,ye[Dropbox.ApiError.INVALID_TOKEN]=u.EPERM,ye[Dropbox.ApiError.OAUTH_ERROR]=u.EPERM,ye[Dropbox.ApiError.NOT_FOUND]=u.ENOENT,ye[Dropbox.ApiError.INVALID_METHOD]=u.EINVAL,ye[Dropbox.ApiError.NOT_ACCEPTABLE]=u.EINVAL,ye[Dropbox.ApiError.CONFLICT]=u.EINVAL,ye[Dropbox.ApiError.RATE_LIMITED]=u.EBUSY,ye[Dropbox.ApiError.SERVER_ERROR]=u.EBUSY,ye[Dropbox.ApiError.OVER_QUOTA]=u.ENOSPC)}function ja(o){return o&&o.stat.isFile}function Wa(o){return o&&o.stat.isFolder}function Ha(o){return o==null||typeof o=="object"&&typeof o.byteLength=="number"}var ce=function(e){this._cache={},this._client=e};ce.prototype.readdir=function(e,r){var i=this,s=this.getCachedDirInfo(e);this._wrap(function(a){s!==null&&s.contents?i._client.readdir(e,{contentHash:s.stat.contentHash},a):i._client.readdir(e,a)},function(a,c,m,E){a?a.status===Dropbox.ApiError.NO_CONTENT&&s!==null?r(null,s.contents.slice(0)):r(a):(i.updateCachedDirInfo(e,m,c.slice(0)),E.forEach(function(b){i.updateCachedInfo(g.join(e,b.name),b)}),r(null,c))})},ce.prototype.remove=function(e,r){var i=this;this._wrap(function(s){i._client.remove(e,s)},function(s,a){s||i.updateCachedInfo(e,a),r(s)})},ce.prototype.move=function(e,r,i){var s=this;this._wrap(function(a){s._client.move(e,r,a)},function(a,c){a||(s.deleteCachedInfo(e),s.updateCachedInfo(r,c)),i(a)})},ce.prototype.stat=function(e,r){var i=this;this._wrap(function(s){i._client.stat(e,s)},function(s,a){s||i.updateCachedInfo(e,a),r(s,a)})},ce.prototype.readFile=function(e,r){var i=this,s=this.getCachedFileInfo(e);s!==null&&s.contents!==null?this.stat(e,function(a,c){a?r(a):c.contentHash===s.stat.contentHash?r(a,s.contents.slice(0),s.stat):i.readFile(e,r)}):this._wrap(function(a){i._client.readFile(e,{arrayBuffer:!0},a)},function(a,c,m){a||i.updateCachedInfo(e,m,c.slice(0)),r(a,c,m)})},ce.prototype.writeFile=function(e,r,i){var s=this;this._wrap(function(a){s._client.writeFile(e,r,a)},function(a,c){a||s.updateCachedInfo(e,c,r.slice(0)),i(a,c)})},ce.prototype.mkdir=function(e,r){var i=this;this._wrap(function(s){i._client.mkdir(e,s)},function(s,a){s||i.updateCachedInfo(e,a,[]),r(s)})},ce.prototype._wrap=function(e,r){var i=0,s=function(a){var c=2;if(a&&3>++i)switch(a.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){e(s)},c*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};e(s)},ce.prototype.getCachedInfo=function(e){return this._cache[e.toLowerCase()]},ce.prototype.putCachedInfo=function(e,r){this._cache[e.toLowerCase()]=r},ce.prototype.deleteCachedInfo=function(e){delete this._cache[e.toLowerCase()]},ce.prototype.getCachedDirInfo=function(e){var r=this.getCachedInfo(e);return Wa(r)?r:null},ce.prototype.getCachedFileInfo=function(e){var r=this.getCachedInfo(e);return ja(r)?r:null},ce.prototype.updateCachedDirInfo=function(e,r,i){i===void 0&&(i=null);var s=this.getCachedInfo(e);r.contentHash!==null&&(s===void 0||s.stat.contentHash!==r.contentHash)&&this.putCachedInfo(e,{stat:r,contents:i})},ce.prototype.updateCachedFileInfo=function(e,r,i){i===void 0&&(i=null);var s=this.getCachedInfo(e);r.versionTag!==null&&(s===void 0||s.stat.versionTag!==r.versionTag)&&this.putCachedInfo(e,{stat:r,contents:i})},ce.prototype.updateCachedInfo=function(e,r,i){i===void 0&&(i=null),r.isFile&&Ha(i)?this.updateCachedFileInfo(e,r,i):r.isFolder&&Array.isArray(i)&&this.updateCachedDirInfo(e,r,i)};var qa=function(o){function e(r,i,s,a,c){o.call(this,r,i,s,a,c)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.sync=function(i){var s=this;if(this.isDirty()){var a=this.getBuffer(),c=et(a);this._fs._writeFileStrict(this.getPath(),c,function(m){m||s.resetDirty(),i(m)})}else i()},e.prototype.close=function(i){this.sync(i)},e}(Jt),Vi=function(o){function e(r,i){i===void 0&&(i=!0),o.call(this),this._client=new ce(r),Tt(i,e.Name,{client:"authenticated dropbox client instance"}),Ua()}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){s(null,new e(i.client,!1))},e.isAvailable=function(){return typeof Dropbox<"u"},e.prototype.getName=function(){return e.Name},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.empty=function(i){var s=this;this._client.readdir("/",function(a,c){if(a)i(s.convert(a,"/"));else{var m=function(b,L){var z=g.join("/",b);s._client.remove(z,function(X){L(X?s.convert(X,z):null)})},E=function(b){b?i(b):i()};Tn(c,m,E)}})},e.prototype.rename=function(i,s,a){var c=this;this._client.move(i,s,function(m){m?c._client.stat(s,function(E,b){if(E||b.isFolder){var L=m.response.error.indexOf(i)>-1?i:s;a(c.convert(m,L))}else c._client.remove(s,function(z){z?a(c.convert(z,s)):c.rename(i,s,a)})}):a()})},e.prototype.stat=function(i,s,a){var c=this;this._client.stat(i,function(m,E){if(m)a(c.convert(m,i));else if(E&&E.isRemoved)a(d.FileError(u.ENOENT,i));else{var b=new C(c._statType(E),E.size);return a(null,b)}})},e.prototype.open=function(i,s,a,c){var m=this;this._client.readFile(i,function(E,b,L){if(E)if(s.isReadable())c(m.convert(E,i));else switch(E.status){case Dropbox.ApiError.NOT_FOUND:var z=new ArrayBuffer(0);return m._writeFileStrict(i,z,function(nt,dt){if(nt)c(nt);else{var wt=m._makeFile(i,s,dt,It(z));c(null,wt)}});default:return c(m.convert(E,i))}else{var X;b===null?X=zt():X=It(b);var rt=m._makeFile(i,s,L,X);return c(null,rt)}})},e.prototype._writeFileStrict=function(i,s,a){var c=this,m=g.dirname(i);this.stat(m,!1,function(E,b){E?a(d.FileError(u.ENOENT,m)):c._client.writeFile(i,s,function(L,z){L?a(c.convert(L,i)):a(null,z)})})},e.prototype._statType=function(i){return i.isFile?D.FILE:D.DIRECTORY},e.prototype._makeFile=function(i,s,a,c){var m=this._statType(a),E=new C(m,a.size);return new qa(this,i,s,E,c)},e.prototype._remove=function(i,s,a){var c=this;this._client.stat(i,function(m,E){m?s(c.convert(m,i)):E.isFile&&!a?s(d.FileError(u.ENOTDIR,i)):!E.isFile&&a?s(d.FileError(u.EISDIR,i)):c._client.remove(i,function(b){s(b?c.convert(b,i):null)})})},e.prototype.unlink=function(i,s){this._remove(i,s,!0)},e.prototype.rmdir=function(i,s){this._remove(i,s,!1)},e.prototype.mkdir=function(i,s,a){var c=this,m=g.dirname(i);this._client.stat(m,function(E,b){E?a(c.convert(E,m)):c._client.mkdir(i,function(L){a(L?d.FileError(u.EEXIST,i):null)})})},e.prototype.readdir=function(i,s){var a=this;this._client.readdir(i,function(c,m){return c?s(a.convert(c)):s(null,m)})},e.prototype.convert=function(i,s){s===void 0&&(s=null);var a=ye[i.status];return a===void 0&&(a=u.EIO),s?d.FileError(a,s):new d(a)},e}(ot);Vi.Name="Dropbox",Vi.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(o,e){o.isAuthenticated&&o.isAuthenticated()?e():e(new d(u.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Yt(o,e){e===void 0&&(e="");for(var r=o.errno,i=o.node,s=[];i&&(s.unshift(i.name),i!==i.parent);)i=i.parent;return new d(r,_[r],s.length>0?"/"+s.join("/"):e)}var Va=function(o){function e(r,i,s,a){o.call(this),this._fs=r,this._FS=i,this._path=s,this._stream=a}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.getPos=function(){},e.prototype.close=function(i){var s=null;try{this.closeSync()}catch(a){s=a}finally{i(s)}},e.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(i){throw Yt(i,this._path)}},e.prototype.stat=function(i){try{i(null,this.statSync())}catch(s){i(s)}},e.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(i){throw Yt(i,this._path)}},e.prototype.truncate=function(i,s){var a=null;try{this.truncateSync(i)}catch(c){a=c}finally{s(a)}},e.prototype.truncateSync=function(i){try{this._FS.ftruncate(this._stream.fd,i)}catch(s){throw Yt(s,this._path)}},e.prototype.write=function(i,s,a,c,m){try{m(null,this.writeSync(i,s,a,c),i)}catch(E){m(E)}},e.prototype.writeSync=function(i,s,a,c){try{var m=pt(i),E=c===null?void 0:c;return this._FS.write(this._stream,m,s,a,E)}catch(b){throw Yt(b,this._path)}},e.prototype.read=function(i,s,a,c,m){try{m(null,this.readSync(i,s,a,c),i)}catch(E){m(E)}},e.prototype.readSync=function(i,s,a,c){try{var m=pt(i),E=c===null?void 0:c;return this._FS.read(this._stream,m,s,a,E)}catch(b){throw Yt(b,this._path)}},e.prototype.sync=function(i){i()},e.prototype.syncSync=function(){},e.prototype.chown=function(i,s,a){var c=null;try{this.chownSync(i,s)}catch(m){c=m}finally{a(c)}},e.prototype.chownSync=function(i,s){try{this._FS.fchown(this._stream.fd,i,s)}catch(a){throw Yt(a,this._path)}},e.prototype.chmod=function(i,s){var a=null;try{this.chmodSync(i)}catch(c){a=c}finally{s(a)}},e.prototype.chmodSync=function(i){try{this._FS.fchmod(this._stream.fd,i)}catch(s){throw Yt(s,this._path)}},e.prototype.utimes=function(i,s,a){var c=null;try{this.utimesSync(i,s)}catch(m){c=m}finally{a(c)}},e.prototype.utimesSync=function(i,s){this._fs.utimesSync(this._path,i,s)},e}(St),Zi=function(o){function e(r){o.call(this),this._FS=r}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){s(null,new e(i.FS))},e.isAvailable=function(){return!0},e.prototype.getName=function(){return this._FS.DB_NAME()},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!0},e.prototype.supportsProps=function(){return!0},e.prototype.supportsSynch=function(){return!0},e.prototype.renameSync=function(i,s){try{this._FS.rename(i,s)}catch(a){throw a.errno===u.ENOENT?Yt(a,this.existsSync(i)?s:i):Yt(a)}},e.prototype.statSync=function(i,s){try{var a=s?this._FS.lstat(i):this._FS.stat(i),c=this.modeToFileType(a.mode);return new C(c,a.size,a.mode,a.atime,a.mtime,a.ctime)}catch(m){throw Yt(m,i)}},e.prototype.openSync=function(i,s,a){try{var c=this._FS.open(i,s.getFlagString(),a);if(this._FS.isDir(c.node.mode))throw this._FS.close(c),d.EISDIR(i);return new Va(this,this._FS,i,c)}catch(m){throw Yt(m,i)}},e.prototype.unlinkSync=function(i){try{this._FS.unlink(i)}catch(s){throw Yt(s,i)}},e.prototype.rmdirSync=function(i){try{this._FS.rmdir(i)}catch(s){throw Yt(s,i)}},e.prototype.mkdirSync=function(i,s){try{this._FS.mkdir(i,s)}catch(a){throw Yt(a,i)}},e.prototype.readdirSync=function(i){try{return this._FS.readdir(i).filter(function(s){return s!=="."&&s!==".."})}catch(s){throw Yt(s,i)}},e.prototype.truncateSync=function(i,s){try{this._FS.truncate(i,s)}catch(a){throw Yt(a,i)}},e.prototype.readFileSync=function(i,s,a){try{var c=this._FS.readFile(i,{flags:a.getFlagString()}),m=xt(c);return s?m.toString(s):m}catch(E){throw Yt(E,i)}},e.prototype.writeFileSync=function(i,s,a,c,m){try{a&&(s=f.from(s,a));var E=pt(s);this._FS.writeFile(i,E,{flags:c.getFlagString(),encoding:"binary"}),this._FS.chmod(i,m)}catch(b){throw Yt(b,i)}},e.prototype.chmodSync=function(i,s,a){try{s?this._FS.lchmod(i,a):this._FS.chmod(i,a)}catch(c){throw Yt(c,i)}},e.prototype.chownSync=function(i,s,a,c){try{s?this._FS.lchown(i,a,c):this._FS.chown(i,a,c)}catch(m){throw Yt(m,i)}},e.prototype.symlinkSync=function(i,s,a){try{this._FS.symlink(i,s)}catch(c){throw Yt(c)}},e.prototype.readlinkSync=function(i){try{return this._FS.readlink(i)}catch(s){throw Yt(s,i)}},e.prototype.utimesSync=function(i,s,a){try{this._FS.utime(i,s.getTime(),a.getTime())}catch(c){throw Yt(c,i)}},e.prototype.modeToFileType=function(i){if(this._FS.isDir(i))return D.DIRECTORY;if(this._FS.isFile(i))return D.FILE;if(this._FS.isLink(i))return D.SYMLINK;throw d.EPERM("Invalid mode: "+i)},e}(bt);Zi.Name="EmscriptenFileSystem",Zi.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var li=function(o){function e(r,i){o.call(this),this._folder=r,this._wrapped=i}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){s(null,new e(i.folder,i.wrapped))},e.isAvailable=function(){return!0},e.prototype.initialize=function(i){var s=this;this._wrapped.exists(this._folder,function(a){a?i():s._wrapped.isReadOnly()?i(d.ENOENT(s._folder)):s._wrapped.mkdir(s._folder,511,i)})},e.prototype.getName=function(){return this._wrapped.getName()},e.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},e.prototype.supportsProps=function(){return this._wrapped.supportsProps()},e.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},e.prototype.supportsLinks=function(){return!1},e}(ot);li.Name="FolderAdapter",li.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function On(o,e){if(e!==null&&typeof e=="object"){var r=e,i=r.path;i&&(i="/"+g.relative(o,i),r.message=r.message.replace(r.path,i),r.path=i)}return e}function Za(o,e){return typeof e=="function"?function(r){arguments.length>0&&(arguments[0]=On(o,r)),e.apply(null,arguments)}:e}function An(o,e,r){return o.slice(o.length-4)!=="Sync"?function(){return arguments.length>0&&(e&&(arguments[0]=g.join(this._folder,arguments[0])),r&&(arguments[1]=g.join(this._folder,arguments[1])),arguments[arguments.length-1]=Za(this._folder,arguments[arguments.length-1])),this._wrapped[o].apply(this._wrapped,arguments)}:function(){try{return e&&(arguments[0]=g.join(this._folder,arguments[0])),r&&(arguments[1]=g.join(this._folder,arguments[1])),this._wrapped[o].apply(this._wrapped,arguments)}catch(i){throw On(this._folder,i)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(o){li.prototype[o]=An(o,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(o){li.prototype[o]=An(o,!0,!0)});var Xi;typeof window<"u"?Xi=window:typeof self<"u"?Xi=self:Xi=h;var $t=Xi;function Xa(o){return o.isDirectory}var wr=$t.webkitRequestFileSystem||$t.requestFileSystem||null;function Ya(o,e,r,i){if(typeof navigator.webkitPersistentStorage<"u")switch(o){case $t.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(e,r,i);break;case $t.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(e,r,i);break;default:i(new TypeError("Invalid storage type: "+o));break}else $t.webkitStorageInfo.requestQuota(o,e,r,i)}function Ga(o){return Array.prototype.slice.call(o||[],0)}function Ae(o,e,r){switch(o.name){case"PathExistsError":return d.EEXIST(e);case"QuotaExceededError":return d.FileError(u.ENOSPC,e);case"NotFoundError":return d.ENOENT(e);case"SecurityError":return d.FileError(u.EACCES,e);case"InvalidModificationError":return d.FileError(u.EPERM,e);case"TypeMismatchError":return d.FileError(r?u.ENOTDIR:u.EISDIR,e);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return d.FileError(u.EINVAL,e)}}var Ja=function(o){function e(r,i,s,a,c,m){o.call(this,r,s,a,c,m),this._entry=i}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.sync=function(i){var s=this;if(!this.isDirty())return i();this._entry.createWriter(function(a){var c=s.getBuffer(),m=new Blob([et(c)]),E=m.size;a.onwriteend=function(b){a.onwriteend=null,a.onerror=null,a.truncate(E),s.resetDirty(),i()},a.onerror=function(b){i(Ae(b,s.getPath(),!1))},a.write(m)})},e.prototype.close=function(i){this.sync(i)},e}(Jt),Yi=function(o){function e(r,i,s){r===void 0&&(r=5),i===void 0&&(i=$t.PERSISTENT),s===void 0&&(s=!0),o.call(this),this.size=1024*1024*r,this.type=i,Tt(s,e.Name,{size:r,type:i})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){var a=new e(i.size,i.type,!1);a.allocate(function(c){return c?s(c):s(null,a)},!1)},e.isAvailable=function(){return!!wr},e.prototype.getName=function(){return e.Name},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.allocate=function(i,s){var a=this;i===void 0&&(i=function(){}),s===void 0&&(s=!0),s&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var c=function(E){a.fs=E,i()},m=function(E){i(Ae(E,"/",!0))};this.type===$t.PERSISTENT?Ya(this.type,this.size,function(E){wr(a.type,E,c,m)},m):wr(this.type,this.size,c,m)},e.prototype.empty=function(i){this._readdir("/",function(s,a){if(s)console.error("Failed to empty FS"),i(s);else{var c=function(E){s?(console.error("Failed to empty FS"),i(s)):i()},m=function(E,b){var L=function(){b()},z=function(X){b(Ae(X,E.fullPath,!E.isDirectory))};Xa(E)?E.removeRecursively(L,z):E.remove(L,z)};Tn(a,m,c)}})},e.prototype.rename=function(i,s,a){var c=this,m=2,E=0,b=this.fs.root,L=i,z=function(rt){--m<=0&&a(Ae(rt,L,!1))},X=function(rt){if(++E===2)return a(new d(u.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(i===s)return a();L=g.dirname(s),b.getDirectory(L,{},function(nt){L=g.basename(s),rt.moveTo(nt,L,function(dt){a()},function(dt){rt.isDirectory?(L=s,c.unlink(s,function(wt){wt?z(dt):c.rename(i,s,a)})):z(dt)})},z)};b.getFile(i,{},X,z),b.getDirectory(i,{},X,z)},e.prototype.stat=function(i,s,a){var c=this,m={create:!1},E=function(X){var rt=function(nt){var dt=new C(D.FILE,nt.size);a(null,dt)};X.file(rt,L)},b=function(X){var rt=4096,nt=new C(D.DIRECTORY,rt);a(null,nt)},L=function(X){a(Ae(X,i,!1))},z=function(){c.fs.root.getDirectory(i,m,b,L)};this.fs.root.getFile(i,m,E,z)},e.prototype.open=function(i,s,a,c){var m=this,E=function(b){b.name==="InvalidModificationError"&&s.isExclusive()?c(d.EEXIST(i)):c(Ae(b,i,!1))};this.fs.root.getFile(i,{create:s.pathNotExistsAction()===T.CREATE_FILE,exclusive:s.isExclusive()},function(b){b.file(function(L){var z=new FileReader;z.onloadend=function(X){var rt=m._makeFile(i,b,s,L,z.result);c(null,rt)},z.onerror=function(X){E(z.error)},z.readAsArrayBuffer(L)},E)},E)},e.prototype.unlink=function(i,s){this._remove(i,s,!0)},e.prototype.rmdir=function(i,s){var a=this;this.readdir(i,function(c,m){c?s(c):m.length>0?s(d.ENOTEMPTY(i)):a._remove(i,s,!1)})},e.prototype.mkdir=function(i,s,a){var c={create:!0,exclusive:!0},m=function(b){a()},E=function(b){a(Ae(b,i,!0))};this.fs.root.getDirectory(i,c,m,E)},e.prototype.readdir=function(i,s){this._readdir(i,function(a,c){if(c){for(var m=[],E=0,b=c;E<b.length;E+=1){var L=b[E];m.push(L.name)}s(null,m)}else return s(a)})},e.prototype._makeFile=function(i,s,a,c,m){m===void 0&&(m=new ArrayBuffer(0));var E=new C(D.FILE,c.size),b=It(m);return new Ja(this,s,i,a,E,b)},e.prototype._readdir=function(i,s){var a=function(c){s(Ae(c,i,!0))};this.fs.root.getDirectory(i,{create:!1},function(c){var m=c.createReader(),E=[],b=function(){m.readEntries(function(L){L.length?(E=E.concat(Ga(L)),b()):s(null,E)},a)};b()},a)},e.prototype._remove=function(i,s,a){var c=function(b){var L=function(){s()},z=function(X){s(Ae(X,i,!a))};b.remove(L,z)},m=function(b){s(Ae(b,i,!a))},E={create:!1};a?this.fs.root.getFile(i,E,c,m):this.fs.root.getDirectory(i,E,c,m)},e}(ot);Yi.Name="HTML5FS",Yi.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var ge=function(e,r,i,s,a,c){this.id=e,this.size=r,this.mode=i,this.atime=s,this.mtime=a,this.ctime=c};ge.fromBuffer=function(e){if(e===void 0)throw new Error("NO");return new ge(e.toString("ascii",30),e.readUInt32LE(0),e.readUInt16LE(4),e.readDoubleLE(6),e.readDoubleLE(14),e.readDoubleLE(22))},ge.prototype.toStats=function(){return new C((this.mode&61440)===D.DIRECTORY?D.DIRECTORY:D.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},ge.prototype.getSize=function(){return 30+this.id.length},ge.prototype.toBuffer=function(e){return e===void 0&&(e=f.alloc(this.getSize())),e.writeUInt32LE(this.size,0),e.writeUInt16LE(this.mode,4),e.writeDoubleLE(this.atime,6),e.writeDoubleLE(this.mtime,14),e.writeDoubleLE(this.ctime,22),e.write(this.id,30,this.id.length,"ascii"),e},ge.prototype.update=function(e){var r=!1;this.size!==e.size&&(this.size=e.size,r=!0),this.mode!==e.mode&&(this.mode=e.mode,r=!0);var i=e.atime.getTime();this.atime!==i&&(this.atime=i,r=!0);var s=e.mtime.getTime();this.mtime!==s&&(this.mtime=s,r=!0);var a=e.ctime.getTime();return this.ctime!==a&&(this.ctime=a,r=!0),r},ge.prototype.isFile=function(){return(this.mode&61440)===D.FILE},ge.prototype.isDirectory=function(){return(this.mode&61440)===D.DIRECTORY};var Xe="/",Sr=null;function Ln(){return Sr||(Sr=f.from("{}"))}function Gi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var e=Math.random()*16|0,r=o==="x"?e:e&3|8;return r.toString(16)})}function Se(o,e){return o?(e(o),!1):!0}function ie(o,e,r){return o?(e.abort(function(){r(o)}),!1):!0}var Ue=function(e){this.store=e,this.originalData={},this.modifiedKeys=[]};Ue.prototype.get=function(e){var r=this.store.get(e);return this.stashOldValue(e,r),r},Ue.prototype.put=function(e,r,i){return this.markModified(e),this.store.put(e,r,i)},Ue.prototype.del=function(e){this.markModified(e),this.store.del(e)},Ue.prototype.commit=function(){},Ue.prototype.abort=function(){for(var e=this,r=0,i=e.modifiedKeys;r<i.length;r+=1){var s=i[r],a=e.originalData[s];a?e.store.put(s,a,!0):e.store.del(s)}},Ue.prototype.stashOldValue=function(e,r){this.originalData.hasOwnProperty(e)||(this.originalData[e]=r)},Ue.prototype.markModified=function(e){this.modifiedKeys.indexOf(e)===-1&&(this.modifiedKeys.push(e),this.originalData.hasOwnProperty(e)||(this.originalData[e]=this.store.get(e)))};var Dn=function(o){function e(r,i,s,a,c){o.call(this,r,i,s,a,c)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},e.prototype.closeSync=function(){this.syncSync()},e}(Jt),Cn=function(o){function e(r){o.call(this),this.store=r.store,this.makeRootDirectory()}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.isAvailable=function(){return!0},e.prototype.getName=function(){return this.store.name()},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},e.prototype.renameSync=function(i,s){var a=this.store.beginTransaction("readwrite"),c=g.dirname(i),m=g.basename(i),E=g.dirname(s),b=g.basename(s),L=this.findINode(a,c),z=this.getDirListing(a,c,L);if(!z[m])throw d.ENOENT(i);var X=z[m];if(delete z[m],(E+"/").indexOf(i+"/")===0)throw new d(u.EBUSY,c);var rt,nt;if(E===c?(rt=L,nt=z):(rt=this.findINode(a,E),nt=this.getDirListing(a,E,rt)),nt[b]){var dt=this.getINode(a,s,nt[b]);if(dt.isFile())try{a.del(dt.id),a.del(nt[b])}catch(wt){throw a.abort(),wt}else throw d.EPERM(s)}nt[b]=X;try{a.put(L.id,f.from(JSON.stringify(z)),!0),a.put(rt.id,f.from(JSON.stringify(nt)),!0)}catch(wt){throw a.abort(),wt}a.commit()},e.prototype.statSync=function(i,s){return this.findINode(this.store.beginTransaction("readonly"),i).toStats()},e.prototype.createFileSync=function(i,s,a){var c=this.store.beginTransaction("readwrite"),m=zt(),E=this.commitNewFile(c,i,D.FILE,a,m);return new Dn(this,i,s,E.toStats(),m)},e.prototype.openFileSync=function(i,s){var a=this.store.beginTransaction("readonly"),c=this.findINode(a,i),m=a.get(c.id);if(m===void 0)throw d.ENOENT(i);return new Dn(this,i,s,c.toStats(),m)},e.prototype.unlinkSync=function(i){this.removeEntry(i,!1)},e.prototype.rmdirSync=function(i){if(this.readdirSync(i).length>0)throw d.ENOTEMPTY(i);this.removeEntry(i,!0)},e.prototype.mkdirSync=function(i,s){var a=this.store.beginTransaction("readwrite"),c=f.from("{}");this.commitNewFile(a,i,D.DIRECTORY,s,c)},e.prototype.readdirSync=function(i){var s=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(s,i,this.findINode(s,i)))},e.prototype._syncSync=function(i,s,a){var c=this.store.beginTransaction("readwrite"),m=this._findINode(c,g.dirname(i),g.basename(i)),E=this.getINode(c,i,m),b=E.update(a);try{c.put(E.id,s,!0),b&&c.put(m,E.toBuffer(),!0)}catch(L){throw c.abort(),L}c.commit()},e.prototype.makeRootDirectory=function(){var i=this.store.beginTransaction("readwrite");if(i.get(Xe)===void 0){var s=new Date().getTime(),a=new ge(Gi(),4096,511|D.DIRECTORY,s,s,s);i.put(a.id,Ln(),!1),i.put(Xe,a.toBuffer(),!1),i.commit()}},e.prototype._findINode=function(i,s,a){var c=this,m=function(E){var b=c.getDirListing(i,s,E);if(b[a])return b[a];throw d.ENOENT(g.resolve(s,a))};return s==="/"?a===""?Xe:m(this.getINode(i,s,Xe)):m(this.getINode(i,s+g.sep+a,this._findINode(i,g.dirname(s),g.basename(s))))},e.prototype.findINode=function(i,s){return this.getINode(i,s,this._findINode(i,g.dirname(s),g.basename(s)))},e.prototype.getINode=function(i,s,a){var c=i.get(a);if(c===void 0)throw d.ENOENT(s);return ge.fromBuffer(c)},e.prototype.getDirListing=function(i,s,a){if(!a.isDirectory())throw d.ENOTDIR(s);var c=i.get(a.id);if(c===void 0)throw d.ENOENT(s);return JSON.parse(c.toString())},e.prototype.addNewNode=function(i,s){for(var a=0,c;a<5;)try{return c=Gi(),i.put(c,s,!1),c}catch{}throw new d(u.EIO,"Unable to commit data to key-value store.")},e.prototype.commitNewFile=function(i,s,a,c,m){var E=g.dirname(s),b=g.basename(s),L=this.findINode(i,E),z=this.getDirListing(i,E,L),X=new Date().getTime();if(s==="/"||z[b])throw d.EEXIST(s);var rt;try{var nt=this.addNewNode(i,m);rt=new ge(nt,m.length,c|a,X,X,X);var dt=this.addNewNode(i,rt.toBuffer());z[b]=dt,i.put(L.id,f.from(JSON.stringify(z)),!0)}catch(wt){throw i.abort(),wt}return i.commit(),rt},e.prototype.removeEntry=function(i,s){var a=this.store.beginTransaction("readwrite"),c=g.dirname(i),m=this.findINode(a,c),E=this.getDirListing(a,c,m),b=g.basename(i);if(!E[b])throw d.ENOENT(i);var L=E[b];delete E[b];var z=this.getINode(a,i,L);if(!s&&z.isDirectory())throw d.EISDIR(i);if(s&&!z.isDirectory())throw d.ENOTDIR(i);try{a.del(z.id),a.del(L),a.put(m.id,f.from(JSON.stringify(E)),!0)}catch(X){throw a.abort(),X}a.commit()},e}(bt),Bn=function(o){function e(r,i,s,a,c){o.call(this,r,i,s,a,c)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.sync=function(i){var s=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(a){a||s.resetDirty(),i(a)}):i()},e.prototype.close=function(i){this.sync(i)},e}(Jt),Ka=function(o){function e(){o.apply(this,arguments)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.isAvailable=function(){return!0},e.prototype.init=function(i,s){this.store=i,this.makeRootDirectory(s)},e.prototype.getName=function(){return this.store.name()},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.empty=function(i){var s=this;this.store.clear(function(a){Se(a,i)&&s.makeRootDirectory(i)})},e.prototype.rename=function(i,s,a){var c=this,m=this.store.beginTransaction("readwrite"),E=g.dirname(i),b=g.basename(i),L=g.dirname(s),z=g.basename(s),X={},rt={},nt=!1;if((L+"/").indexOf(i+"/")===0)return a(new d(u.EBUSY,E));var dt=function(){if(!(nt||!rt.hasOwnProperty(E)||!rt.hasOwnProperty(L))){var kt=rt[E],Zt=X[E],ue=rt[L],Ce=X[L];if(!kt[b])a(d.ENOENT(i));else{var Be=kt[b];delete kt[b];var wi=function(){ue[z]=Be,m.put(Zt.id,f.from(JSON.stringify(kt)),!0,function(He){ie(He,m,a)&&(E===L?m.commit(a):m.put(Ce.id,f.from(JSON.stringify(ue)),!0,function(qe){ie(qe,m,a)&&m.commit(a)}))})};ue[z]?c.getINode(m,s,ue[z],function(He,qe){ie(He,m,a)&&(qe.isFile()?m.del(qe.id,function(Io){ie(Io,m,a)&&m.del(ue[z],function(If){ie(If,m,a)&&wi()})}):m.abort(function(Io){a(d.EPERM(s))}))}):wi()}}},wt=function(kt){c.findINodeAndDirListing(m,kt,function(Zt,ue,Ce){Zt?nt||(nt=!0,m.abort(function(){a(Zt)})):(X[kt]=ue,rt[kt]=Ce,dt())})};wt(E),E!==L&&wt(L)},e.prototype.stat=function(i,s,a){var c=this.store.beginTransaction("readonly");this.findINode(c,i,function(m,E){Se(m,a)&&a(null,E.toStats())})},e.prototype.createFile=function(i,s,a,c){var m=this,E=this.store.beginTransaction("readwrite"),b=zt();this.commitNewFile(E,i,D.FILE,a,b,function(L,z){Se(L,c)&&c(null,new Bn(m,i,s,z.toStats(),b))})},e.prototype.openFile=function(i,s,a){var c=this,m=this.store.beginTransaction("readonly");this.findINode(m,i,function(E,b){Se(E,a)&&m.get(b.id,function(L,z){Se(L,a)&&(z===void 0?a(d.ENOENT(i)):a(null,new Bn(c,i,s,b.toStats(),z)))})})},e.prototype.unlink=function(i,s){this.removeEntry(i,!1,s)},e.prototype.rmdir=function(i,s){var a=this;this.readdir(i,function(c,m){c?s(c):m.length>0?s(d.ENOTEMPTY(i)):a.removeEntry(i,!0,s)})},e.prototype.mkdir=function(i,s,a){var c=this.store.beginTransaction("readwrite"),m=f.from("{}");this.commitNewFile(c,i,D.DIRECTORY,s,m,a)},e.prototype.readdir=function(i,s){var a=this,c=this.store.beginTransaction("readonly");this.findINode(c,i,function(m,E){Se(m,s)&&a.getDirListing(c,i,E,function(b,L){Se(b,s)&&s(null,Object.keys(L))})})},e.prototype._sync=function(i,s,a,c){var m=this,E=this.store.beginTransaction("readwrite");this._findINode(E,g.dirname(i),g.basename(i),function(b,L){ie(b,E,c)&&m.getINode(E,i,L,function(z,X){if(ie(z,E,c)){var rt=X.update(a);E.put(X.id,s,!0,function(nt){ie(nt,E,c)&&(rt?E.put(L,X.toBuffer(),!0,function(dt){ie(dt,E,c)&&E.commit(c)}):E.commit(c))})}})})},e.prototype.makeRootDirectory=function(i){var s=this.store.beginTransaction("readwrite");s.get(Xe,function(a,c){if(a||c===void 0){var m=new Date().getTime(),E=new ge(Gi(),4096,511|D.DIRECTORY,m,m,m);s.put(E.id,Ln(),!1,function(b){ie(b,s,i)&&s.put(Xe,E.toBuffer(),!1,function(L){L?s.abort(function(){i(L)}):s.commit(i)})})}else s.commit(i)})},e.prototype._findINode=function(i,s,a,c){var m=this,E=function(b,L,z){b?c(b):z[a]?c(null,z[a]):c(d.ENOENT(g.resolve(s,a)))};s==="/"?a===""?c(null,Xe):this.getINode(i,s,Xe,function(b,L){Se(b,c)&&m.getDirListing(i,s,L,function(z,X){E(z,L,X)})}):this.findINodeAndDirListing(i,s,E)},e.prototype.findINode=function(i,s,a){var c=this;this._findINode(i,g.dirname(s),g.basename(s),function(m,E){Se(m,a)&&c.getINode(i,s,E,a)})},e.prototype.getINode=function(i,s,a,c){i.get(a,function(m,E){Se(m,c)&&(E===void 0?c(d.ENOENT(s)):c(null,ge.fromBuffer(E)))})},e.prototype.getDirListing=function(i,s,a,c){a.isDirectory()?i.get(a.id,function(m,E){if(Se(m,c))try{c(null,JSON.parse(E.toString()))}catch{c(d.ENOENT(s))}}):c(d.ENOTDIR(s))},e.prototype.findINodeAndDirListing=function(i,s,a){var c=this;this.findINode(i,s,function(m,E){Se(m,a)&&c.getDirListing(i,s,E,function(b,L){Se(b,a)&&a(null,E,L)})})},e.prototype.addNewNode=function(i,s,a){var c=0,m,E=function(){++c===5?a(new d(u.EIO,"Unable to commit data to key-value store.")):(m=Gi(),i.put(m,s,!1,function(b,L){b||!L?E():a(null,m)}))};E()},e.prototype.commitNewFile=function(i,s,a,c,m,E){var b=this,L=g.dirname(s),z=g.basename(s),X=new Date().getTime();if(s==="/")return E(d.EEXIST(s));this.findINodeAndDirListing(i,L,function(rt,nt,dt){ie(rt,i,E)&&(dt[z]?i.abort(function(){E(d.EEXIST(s))}):b.addNewNode(i,m,function(wt,kt){if(ie(wt,i,E)){var Zt=new ge(kt,m.length,c|a,X,X,X);b.addNewNode(i,Zt.toBuffer(),function(ue,Ce){ie(ue,i,E)&&(dt[z]=Ce,i.put(nt.id,f.from(JSON.stringify(dt)),!0,function(Be){ie(Be,i,E)&&i.commit(function(wi){ie(wi,i,E)&&E(null,Zt)})}))})}}))})},e.prototype.removeEntry=function(i,s,a){var c=this,m=this.store.beginTransaction("readwrite"),E=g.dirname(i),b=g.basename(i);this.findINodeAndDirListing(m,E,function(L,z,X){if(ie(L,m,a))if(!X[b])m.abort(function(){a(d.ENOENT(i))});else{var rt=X[b];delete X[b],c.getINode(m,i,rt,function(nt,dt){ie(nt,m,a)&&(!s&&dt.isDirectory()?m.abort(function(){a(d.EISDIR(i))}):s&&!dt.isDirectory()?m.abort(function(){a(d.ENOTDIR(i))}):m.del(dt.id,function(wt){ie(wt,m,a)&&m.del(rt,function(kt){ie(kt,m,a)&&m.put(z.id,f.from(JSON.stringify(X)),!0,function(Zt){ie(Zt,m,a)&&m.commit(a)})})}))})}})},e}(ot),ti=function(){this.store={}};ti.prototype.name=function(){return pi.Name},ti.prototype.clear=function(){this.store={}},ti.prototype.beginTransaction=function(e){return new Ue(this)},ti.prototype.get=function(e){return this.store[e]},ti.prototype.put=function(e,r,i){return!i&&this.store.hasOwnProperty(e)?!1:(this.store[e]=r,!0)},ti.prototype.del=function(e){delete this.store[e]};var pi=function(o){function e(){o.call(this,{store:new ti})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){s(null,new e)},e}(Cn);pi.Name="InMemory",pi.Options={};var xr=$t.indexedDB||$t.mozIndexedDB||$t.webkitIndexedDB||$t.msIndexedDB;function Fi(o,e){switch(e===void 0&&(e=o.toString()),o.name){case"NotFoundError":return new d(u.ENOENT,e);case"QuotaExceededError":return new d(u.ENOSPC,e);default:return new d(u.EIO,e)}}function Ii(o,e,r){return e===void 0&&(e=u.EIO),r===void 0&&(r=null),function(i){i.preventDefault(),o(new d(e,r!==null?r:void 0))}}var Er=function(e,r){this.tx=e,this.store=r};Er.prototype.get=function(e,r){try{var i=this.store.get(e);i.onerror=Ii(r),i.onsuccess=function(s){var a=s.target.result;a===void 0?r(null,a):r(null,It(a))}}catch(s){r(Fi(s))}};var Qa=function(o){function e(r,i){o.call(this,r,i)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.put=function(i,s,a,c){try{var m=et(s),E;a?E=this.store.put(m,i):E=this.store.add(m,i),E.onerror=Ii(c),E.onsuccess=function(b){c(null,!0)}}catch(b){c(Fi(b))}},e.prototype.del=function(i,s){try{var a=this.store.delete(i);a.onerror=Ii(s),a.onsuccess=function(c){s()}}catch(c){s(Fi(c))}},e.prototype.commit=function(i){setTimeout(i,0)},e.prototype.abort=function(i){var s=null;try{this.tx.abort()}catch(a){s=Fi(a)}finally{i(s)}},e}(Er),Ji=function(e,r){var i=this;r===void 0&&(r="browserfs"),this.storeName=r;var s=xr.open(this.storeName,1);s.onupgradeneeded=function(a){var c=a.target.result;c.objectStoreNames.contains(i.storeName)&&c.deleteObjectStore(i.storeName),c.createObjectStore(i.storeName)},s.onsuccess=function(a){i.db=a.target.result,e(null,i)},s.onerror=Ii(e,u.EACCES)};Ji.prototype.name=function(){return ki.Name+" - "+this.storeName},Ji.prototype.clear=function(e){try{var r=this.db.transaction(this.storeName,"readwrite"),i=r.objectStore(this.storeName),s=i.clear();s.onsuccess=function(a){setTimeout(e,0)},s.onerror=Ii(e)}catch(a){e(Fi(a))}},Ji.prototype.beginTransaction=function(e){e===void 0&&(e="readonly");var r=this.db.transaction(this.storeName,e),i=r.objectStore(this.storeName);if(e==="readwrite")return new Qa(r,i);if(e==="readonly")return new Er(r,i);throw new d(u.EINVAL,"Invalid transaction type.")};var ki=function(o){function e(r,i,s){var a=this;s===void 0&&(s=!0),o.call(this),this.store=new Ji(function(c){c?r(c):a.init(a.store,function(m){r(m,a)})},i),Tt(s,e.Name,{storeName:i})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){new e(s,i.storeName,!1)},e.isAvailable=function(){try{return typeof xr<"u"&&xr.open("__browserfs_test__")!==null}catch{return!1}},e}(Ka);ki.Name="IndexedDB",ki.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var _r=!1,Ni;try{$t.localStorage.setItem("__test__",String.fromCharCode(55296)),_r=$t.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{_r=!1}Ni=_r?"binary_string":"binary_string_ie",f.isEncoding(Ni)||(Ni="base64");var ei=function(){};ei.prototype.name=function(){return Ri.Name},ei.prototype.clear=function(){$t.localStorage.clear()},ei.prototype.beginTransaction=function(e){return new Ue(this)},ei.prototype.get=function(e){try{var r=$t.localStorage.getItem(e);if(r!==null)return f.from(r,Ni)}catch{}},ei.prototype.put=function(e,r,i){try{return!i&&$t.localStorage.getItem(e)!==null?!1:($t.localStorage.setItem(e,r.toString(Ni)),!0)}catch{throw new d(u.ENOSPC,"LocalStorage is full.")}},ei.prototype.del=function(e){try{$t.localStorage.removeItem(e)}catch(r){throw new d(u.EIO,"Unable to delete key "+e+": "+r)}};var Ri=function(o){function e(){o.call(this,{store:new ei})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){s(null,new e)},e.isAvailable=function(){return typeof $t.localStorage<"u"},e}(Cn);Ri.Name="LocalStorage",Ri.Options={};var di=function(o){function e(){o.call(this),this.mountList=[],this.mntMap={},this.rootFs=new pi}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){var a=new e;Object.keys(i).forEach(function(c){a.mount(c,i[c])}),s(null,a)},e.isAvailable=function(){return!0},e.prototype.mount=function(i,s){if(i[0]!=="/"&&(i="/"+i),i=g.resolve(i),this.mntMap[i])throw new d(u.EINVAL,"Mount point "+i+" is already taken.");q(i,511,this.rootFs),this.mntMap[i]=s,this.mountList.push(i),this.mountList=this.mountList.sort(function(a,c){return c.length-a.length})},e.prototype.umount=function(i){var s=this;if(i[0]!=="/"&&(i="/"+i),i=g.resolve(i),!this.mntMap[i])throw new d(u.EINVAL,"Mount point "+i+" is already unmounted.");for(delete this.mntMap[i],this.mountList.splice(this.mountList.indexOf(i),1);i!=="/"&&s.rootFs.readdirSync(i).length===0;)s.rootFs.rmdirSync(i),i=g.dirname(i)},e.prototype._getFs=function(i){for(var s=this,a=this.mountList,c=a.length,m=0;m<c;m++){var E=a[m];if(E.length<=i.length&&i.indexOf(E)===0)return i=i.substr(E.length>1?E.length:0),i===""&&(i="/"),{fs:s.mntMap[E],path:i}}return{fs:this.rootFs,path:i}},e.prototype.getName=function(){return e.Name},e.prototype.diskSpace=function(i,s){s(0,0)},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.standardizeError=function(i,s,a){var c=i.message.indexOf(s);return c!==-1&&(i.message=i.message.substr(0,c)+a+i.message.substr(c+s.length),i.path=a),i},e.prototype.rename=function(i,s,a){var c=this,m=this._getFs(i),E=this._getFs(s);return m.fs===E.fs?m.fs.rename(m.path,E.path,function(b){b&&c.standardizeError(c.standardizeError(b,m.path,i),E.path,s),a(b)}):ut.readFile(i,function(b,L){if(b)return a(b);ut.writeFile(s,L,function(z){if(z)return a(z);ut.unlink(i,a)})})},e.prototype.renameSync=function(i,s){var a=this._getFs(i),c=this._getFs(s);if(a.fs===c.fs)try{return a.fs.renameSync(a.path,c.path)}catch(E){throw this.standardizeError(this.standardizeError(E,a.path,i),c.path,s),E}var m=ut.readFileSync(i);return ut.writeFileSync(s,m),ut.unlinkSync(i)},e.prototype.readdirSync=function(i){var s=this._getFs(i),a=null;if(s.fs!==this.rootFs)try{a=this.rootFs.readdirSync(i)}catch{}try{var c=s.fs.readdirSync(s.path);return a===null?c:c.concat(a.filter(function(m){return c.indexOf(m)===-1}))}catch(m){if(a===null)throw this.standardizeError(m,s.path,i);return a}},e.prototype.readdir=function(i,s){var a=this,c=this._getFs(i);c.fs.readdir(c.path,function(m,E){if(c.fs!==a.rootFs)try{var b=a.rootFs.readdirSync(i);E?E=E.concat(b.filter(function(L){return E.indexOf(L)===-1})):E=b}catch{if(m)return s(a.standardizeError(m,c.path,i))}else if(m)return s(a.standardizeError(m,c.path,i));s(null,E)})},e.prototype.rmdirSync=function(i){var s=this._getFs(i);if(this._containsMountPt(i))throw d.ENOTEMPTY(i);try{s.fs.rmdirSync(s.path)}catch(a){throw this.standardizeError(a,s.path,i)}},e.prototype.rmdir=function(i,s){var a=this,c=this._getFs(i);this._containsMountPt(i)?s(d.ENOTEMPTY(i)):c.fs.rmdir(c.path,function(m){s(m?a.standardizeError(m,c.path,i):null)})},e.prototype._containsMountPt=function(i){for(var s=this.mountList,a=s.length,c=0;c<a;c++){var m=s[c];if(m.length>=i.length&&m.slice(0,i.length)===i)return!0}return!1},e}(ot);di.Name="MountableFileSystem",di.Options={};function zn(o,e,r){return e?function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];var a=i[0],c=this._getFs(a);i[0]=c.path;try{return c.fs[o].apply(c.fs,i)}catch(m){throw this.standardizeError(m,c.path,a),m}}:function(){for(var i=this,s=[],a=arguments.length;a--;)s[a]=arguments[a];var c=s[0],m=this._getFs(c);if(s[0]=m.path,typeof s[s.length-1]=="function"){var E=s[s.length-1];s[s.length-1]=function(){for(var b=[],L=arguments.length;L--;)b[L]=arguments[L];b.length>0&&b[0]instanceof d&&i.standardizeError(b[0],m.path,c),E.apply(null,b)}}return m.fs[o].apply(m.fs,s)}}for(var Mn=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Ti=0;Ti<Mn.length;Ti++)for(var $a=Mn[Ti],br=0,Pn=$a;br<Pn.length;br+=1){var Ki=Pn[br];di.prototype[Ki]=zn(Ki,!1,Ti+1),di.prototype[Ki+"Sync"]=zn(Ki+"Sync",!0,Ti+1)}var Oi;if(typeof setImmediate<"u")Oi=setImmediate;else{var Fe=$t,yi=[],Un="zero-timeout-message",tf=function(){if(typeof Fe.importScripts<"u"||!Fe.postMessage)return!1;var o=!0,e=Fe.onmessage;return Fe.onmessage=function(){o=!1},Fe.postMessage("","*"),Fe.onmessage=e,o};if(tf()){Oi=function(o){yi.push(o),Fe.postMessage(Un,"*")};var jn=function(o){if(o.source===self&&o.data===Un&&(o.stopPropagation?o.stopPropagation():o.cancelBubble=!0,yi.length>0)){var e=yi.shift();return e()}};Fe.addEventListener?Fe.addEventListener("message",jn,!0):Fe.attachEvent("onmessage",jn)}else if(Fe.MessageChannel){var Wn=new Fe.MessageChannel;Wn.port1.onmessage=function(o){if(yi.length>0)return yi.shift()()},Oi=function(o){yi.push(o),Wn.port2.postMessage("")}}else Oi=function(o){return setTimeout(o,0)}}var Fr=Oi,Ai=function(){this._locked=!1,this._waiters=[]};Ai.prototype.lock=function(e){if(this._locked){this._waiters.push(e);return}this._locked=!0,e()},Ai.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var e=this._waiters.shift();if(e){Fr(e);return}this._locked=!1},Ai.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},Ai.prototype.isLocked=function(){return this._locked};var Et=function(e){this._fs=e,this._mu=new Ai};Et.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},Et.prototype.getFSUnlocked=function(){return this._fs},Et.prototype.initialize=function(e){this._fs.initialize(e)},Et.prototype.diskSpace=function(e,r){this._fs.diskSpace(e,r)},Et.prototype.isReadOnly=function(){return this._fs.isReadOnly()},Et.prototype.supportsLinks=function(){return this._fs.supportsLinks()},Et.prototype.supportsProps=function(){return this._fs.supportsProps()},Et.prototype.supportsSynch=function(){return this._fs.supportsSynch()},Et.prototype.rename=function(e,r,i){var s=this;this._mu.lock(function(){s._fs.rename(e,r,function(a){s._mu.unlock(),i(a)})})},Et.prototype.renameSync=function(e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(e,r)},Et.prototype.stat=function(e,r,i){var s=this;this._mu.lock(function(){s._fs.stat(e,r,function(a,c){s._mu.unlock(),i(a,c)})})},Et.prototype.statSync=function(e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(e,r)},Et.prototype.open=function(e,r,i,s){var a=this;this._mu.lock(function(){a._fs.open(e,r,i,function(c,m){a._mu.unlock(),s(c,m)})})},Et.prototype.openSync=function(e,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(e,r,i)},Et.prototype.unlink=function(e,r){var i=this;this._mu.lock(function(){i._fs.unlink(e,function(s){i._mu.unlock(),r(s)})})},Et.prototype.unlinkSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(e)},Et.prototype.rmdir=function(e,r){var i=this;this._mu.lock(function(){i._fs.rmdir(e,function(s){i._mu.unlock(),r(s)})})},Et.prototype.rmdirSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(e)},Et.prototype.mkdir=function(e,r,i){var s=this;this._mu.lock(function(){s._fs.mkdir(e,r,function(a){s._mu.unlock(),i(a)})})},Et.prototype.mkdirSync=function(e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(e,r)},Et.prototype.readdir=function(e,r){var i=this;this._mu.lock(function(){i._fs.readdir(e,function(s,a){i._mu.unlock(),r(s,a)})})},Et.prototype.readdirSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(e)},Et.prototype.exists=function(e,r){var i=this;this._mu.lock(function(){i._fs.exists(e,function(s){i._mu.unlock(),r(s)})})},Et.prototype.existsSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(e)},Et.prototype.realpath=function(e,r,i){var s=this;this._mu.lock(function(){s._fs.realpath(e,r,function(a,c){s._mu.unlock(),i(a,c)})})},Et.prototype.realpathSync=function(e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(e,r)},Et.prototype.truncate=function(e,r,i){var s=this;this._mu.lock(function(){s._fs.truncate(e,r,function(a){s._mu.unlock(),i(a)})})},Et.prototype.truncateSync=function(e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(e,r)},Et.prototype.readFile=function(e,r,i,s){var a=this;this._mu.lock(function(){a._fs.readFile(e,r,i,function(c,m){a._mu.unlock(),s(c,m)})})},Et.prototype.readFileSync=function(e,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(e,r,i)},Et.prototype.writeFile=function(e,r,i,s,a,c){var m=this;this._mu.lock(function(){m._fs.writeFile(e,r,i,s,a,function(E){m._mu.unlock(),c(E)})})},Et.prototype.writeFileSync=function(e,r,i,s,a){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(e,r,i,s,a)},Et.prototype.appendFile=function(e,r,i,s,a,c){var m=this;this._mu.lock(function(){m._fs.appendFile(e,r,i,s,a,function(E){m._mu.unlock(),c(E)})})},Et.prototype.appendFileSync=function(e,r,i,s,a){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(e,r,i,s,a)},Et.prototype.chmod=function(e,r,i,s){var a=this;this._mu.lock(function(){a._fs.chmod(e,r,i,function(c){a._mu.unlock(),s(c)})})},Et.prototype.chmodSync=function(e,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(e,r,i)},Et.prototype.chown=function(e,r,i,s,a){var c=this;this._mu.lock(function(){c._fs.chown(e,r,i,s,function(m){c._mu.unlock(),a(m)})})},Et.prototype.chownSync=function(e,r,i,s){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(e,r,i,s)},Et.prototype.utimes=function(e,r,i,s){var a=this;this._mu.lock(function(){a._fs.utimes(e,r,i,function(c){a._mu.unlock(),s(c)})})},Et.prototype.utimesSync=function(e,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(e,r,i)},Et.prototype.link=function(e,r,i){var s=this;this._mu.lock(function(){s._fs.link(e,r,function(a){s._mu.unlock(),i(a)})})},Et.prototype.linkSync=function(e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(e,r)},Et.prototype.symlink=function(e,r,i,s){var a=this;this._mu.lock(function(){a._fs.symlink(e,r,i,function(c){a._mu.unlock(),s(c)})})},Et.prototype.symlinkSync=function(e,r,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(e,r,i)},Et.prototype.readlink=function(e,r){var i=this;this._mu.lock(function(){i._fs.readlink(e,function(s,a){i._mu.unlock(),r(s,a)})})},Et.prototype.readlinkSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(e)};var je="/.deletedFiles.log";function Hn(o){return 146|o}function xe(o){return I.getFileFlag(o)}var qn=function(o){function e(r,i,s,a,c){o.call(this,r,i,s,a,c)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.sync=function(i){var s=this;if(!this.isDirty()){i(null);return}this._fs._syncAsync(this,function(a){s.resetDirty(),i(a)})},e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},e.prototype.close=function(i){this.sync(i)},e.prototype.closeSync=function(){this.syncSync()},e}(Jt),Vn=function(o){function e(r,i){if(o.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=i,this._writable.isReadOnly())throw new d(u.EINVAL,"Writable file system must be writable.")}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.isAvailable=function(){return!0},e.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},e.prototype._syncAsync=function(i,s){var a=this;this.createParentDirectoriesAsync(i.getPath(),function(c){if(c)return s(c);a._writable.writeFile(i.getPath(),i.getBuffer(),null,xe("w"),i.getStats().mode,s)})},e.prototype._syncSync=function(i){this.createParentDirectories(i.getPath()),this._writable.writeFileSync(i.getPath(),i.getBuffer(),null,xe("w"),i.getStats().mode)},e.prototype.getName=function(){return Li.Name},e.prototype.initialize=function(i){var s=this,a=this._initializeCallbacks,c=function(m){s._isInitialized=!m,s._initializeCallbacks=[],a.forEach(function(E){return E(m)})};if(this._isInitialized)return i();a.push(i),a.length===1&&this._writable.readFile(je,"utf8",xe("r"),function(m,E){if(m){if(m.errno!==u.ENOENT)return c(m)}else s._deleteLog=E;s._reparseDeletionLog(),c()})},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},e.prototype.getDeletionLog=function(){return this._deleteLog},e.prototype.restoreDeletionLog=function(i){this._deleteLog=i,this._reparseDeletionLog(),this.updateLog("")},e.prototype.rename=function(i,s,a){var c=this;if(!(!this.checkInitAsync(a)||this.checkPathAsync(i,a)||this.checkPathAsync(s,a))){if(i===je||s===je)return a(d.EPERM("Cannot rename deletion log."));if(i===s)return a();this.stat(i,!1,function(m,E){return m?a(m):c.stat(s,!1,function(b,L){var z=c;function X(nt){var dt=nt.shift();if(!dt)return a();var wt=g.resolve(i,dt),kt=g.resolve(s,dt);z.rename(wt,kt,function(Zt){if(Zt)return a(Zt);X(nt)})}var rt=511;if(E.isDirectory()){if(b)return b.errno!==u.ENOENT?a(b):c._writable.exists(i,function(nt){if(nt)return c._writable.rename(i,s,a);c._writable.mkdir(s,rt,function(dt){if(dt)return a(dt);c._readable.readdir(i,function(wt,kt){if(wt)return a();X(kt)})})});if(rt=L.mode,!L.isDirectory())return a(d.ENOTDIR(s));c.readdir(s,function(nt,dt){if(dt&&dt.length)return a(d.ENOTEMPTY(s));c._readable.readdir(i,function(wt,kt){if(wt)return a();X(kt)})})}if(L&&L.isDirectory())return a(d.EISDIR(s));c.readFile(i,null,xe("r"),function(nt,dt){return nt?a(nt):c.writeFile(s,dt,null,xe("w"),E.mode,function(wt){return wt?a(wt):c.unlink(i,a)})})})})}},e.prototype.renameSync=function(i,s){var a=this;if(this.checkInitialized(),this.checkPath(i),this.checkPath(s),i===je||s===je)throw d.EPERM("Cannot rename deletion log.");var c=this.statSync(i,!1);if(c.isDirectory()){if(i===s)return;var m=511;if(this.existsSync(s)){var E=this.statSync(s,!1);if(m=E.mode,E.isDirectory()){if(this.readdirSync(s).length>0)throw d.ENOTEMPTY(s)}else throw d.ENOTDIR(s)}this._writable.existsSync(i)?this._writable.renameSync(i,s):this._writable.existsSync(s)||this._writable.mkdirSync(s,m),this._readable.existsSync(i)&&this._readable.readdirSync(i).forEach(function(b){a.renameSync(g.resolve(i,b),g.resolve(s,b))})}else{if(this.existsSync(s)&&this.statSync(s,!1).isDirectory())throw d.EISDIR(s);this.writeFileSync(s,this.readFileSync(i,null,xe("r")),null,xe("w"),c.mode)}i!==s&&this.existsSync(i)&&this.unlinkSync(i)},e.prototype.stat=function(i,s,a){var c=this;!this.checkInitAsync(a)||this._writable.stat(i,s,function(m,E){m&&m.errno===u.ENOENT?(c._deletedFiles[i]&&a(d.ENOENT(i)),c._readable.stat(i,s,function(b,L){L&&(L=L.clone(),L.mode=Hn(L.mode)),a(b,L)})):a(m,E)})},e.prototype.statSync=function(i,s){this.checkInitialized();try{return this._writable.statSync(i,s)}catch{if(this._deletedFiles[i])throw d.ENOENT(i);var a=this._readable.statSync(i,s).clone();return a.mode=Hn(a.mode),a}},e.prototype.open=function(i,s,a,c){var m=this;!this.checkInitAsync(c)||this.checkPathAsync(i,c)||this.stat(i,!1,function(E,b){if(b)switch(s.pathExistsAction()){case T.TRUNCATE_FILE:return m.createParentDirectoriesAsync(i,function(L){if(L)return c(L);m._writable.open(i,s,a,c)});case T.NOP:return m._writable.exists(i,function(L){L?m._writable.open(i,s,a,c):(b=b.clone(),b.mode=a,m._readable.readFile(i,null,xe("r"),function(z,X){if(z)return c(z);b.size===-1&&(b.size=X.length);var rt=new qn(m,i,s,b,X);c(null,rt)}))});default:return c(d.EEXIST(i))}else switch(s.pathNotExistsAction()){case T.CREATE_FILE:return m.createParentDirectoriesAsync(i,function(L){return L?c(L):m._writable.open(i,s,a,c)});default:return c(d.ENOENT(i))}})},e.prototype.openSync=function(i,s,a){if(this.checkInitialized(),this.checkPath(i),i===je)throw d.EPERM("Cannot open deletion log.");if(this.existsSync(i))switch(s.pathExistsAction()){case T.TRUNCATE_FILE:return this.createParentDirectories(i),this._writable.openSync(i,s,a);case T.NOP:if(this._writable.existsSync(i))return this._writable.openSync(i,s,a);var c=this._readable.readFileSync(i,null,xe("r")),m=this._readable.statSync(i,!1).clone();return m.mode=a,new qn(this,i,s,m,c);default:throw d.EEXIST(i)}else switch(s.pathNotExistsAction()){case T.CREATE_FILE:return this.createParentDirectories(i),this._writable.openSync(i,s,a);default:throw d.ENOENT(i)}},e.prototype.unlink=function(i,s){var a=this;!this.checkInitAsync(s)||this.checkPathAsync(i,s)||this.exists(i,function(c){if(!c)return s(d.ENOENT(i));a._writable.exists(i,function(m){if(m)return a._writable.unlink(i,function(E){if(E)return s(E);a.exists(i,function(b){b&&a.deletePath(i),s(null)})});a.deletePath(i),s(null)})})},e.prototype.unlinkSync=function(i){if(this.checkInitialized(),this.checkPath(i),this.existsSync(i))this._writable.existsSync(i)&&this._writable.unlinkSync(i),this.existsSync(i)&&this.deletePath(i);else throw d.ENOENT(i)},e.prototype.rmdir=function(i,s){var a=this;if(!!this.checkInitAsync(s)){var c=function(){a.readdir(i,function(m,E){if(m)return s(m);if(E.length)return s(d.ENOTEMPTY(i));a.deletePath(i),s(null)})};this.exists(i,function(m){if(!m)return s(d.ENOENT(i));a._writable.exists(i,function(E){E?a._writable.rmdir(i,function(b){if(b)return s(b);a._readable.exists(i,function(L){L?c():s()})}):c()})})}},e.prototype.rmdirSync=function(i){if(this.checkInitialized(),this.existsSync(i)){if(this._writable.existsSync(i)&&this._writable.rmdirSync(i),this.existsSync(i)){if(this.readdirSync(i).length>0)throw d.ENOTEMPTY(i);this.deletePath(i)}}else throw d.ENOENT(i)},e.prototype.mkdir=function(i,s,a){var c=this;!this.checkInitAsync(a)||this.exists(i,function(m){if(m)return a(d.EEXIST(i));c.createParentDirectoriesAsync(i,function(E){if(E)return a(E);c._writable.mkdir(i,s,a)})})},e.prototype.mkdirSync=function(i,s){if(this.checkInitialized(),this.existsSync(i))throw d.EEXIST(i);this.createParentDirectories(i),this._writable.mkdirSync(i,s)},e.prototype.readdir=function(i,s){var a=this;!this.checkInitAsync(s)||this.stat(i,!1,function(c,m){if(c)return s(c);if(!m.isDirectory())return s(d.ENOTDIR(i));a._writable.readdir(i,function(E,b){if(E&&E.code!=="ENOENT")return s(E);(E||!b)&&(b=[]),a._readable.readdir(i,function(L,z){(L||!z)&&(z=[]);var X={},rt=b.concat(z.filter(function(nt){return!a._deletedFiles[i+"/"+nt]})).filter(function(nt){var dt=!X[nt];return X[nt]=!0,dt});s(null,rt)})})})},e.prototype.readdirSync=function(i){var s=this;this.checkInitialized();var a=this.statSync(i,!1);if(!a.isDirectory())throw d.ENOTDIR(i);var c=[];try{c=c.concat(this._writable.readdirSync(i))}catch{}try{c=c.concat(this._readable.readdirSync(i).filter(function(E){return!s._deletedFiles[i+"/"+E]}))}catch{}var m={};return c.filter(function(E){var b=!m[E];return m[E]=!0,b})},e.prototype.exists=function(i,s){var a=this;this.checkInitialized(),this._writable.exists(i,function(c){if(c)return s(!0);a._readable.exists(i,function(m){s(m&&a._deletedFiles[i]!==!0)})})},e.prototype.existsSync=function(i){return this.checkInitialized(),this._writable.existsSync(i)||this._readable.existsSync(i)&&this._deletedFiles[i]!==!0},e.prototype.chmod=function(i,s,a,c){var m=this;!this.checkInitAsync(c)||this.operateOnWritableAsync(i,function(E){if(E)return c(E);m._writable.chmod(i,s,a,c)})},e.prototype.chmodSync=function(i,s,a){var c=this;this.checkInitialized(),this.operateOnWritable(i,function(){c._writable.chmodSync(i,s,a)})},e.prototype.chown=function(i,s,a,c,m){var E=this;!this.checkInitAsync(m)||this.operateOnWritableAsync(i,function(b){if(b)return m(b);E._writable.chown(i,s,a,c,m)})},e.prototype.chownSync=function(i,s,a,c){var m=this;this.checkInitialized(),this.operateOnWritable(i,function(){m._writable.chownSync(i,s,a,c)})},e.prototype.utimes=function(i,s,a,c){var m=this;!this.checkInitAsync(c)||this.operateOnWritableAsync(i,function(E){if(E)return c(E);m._writable.utimes(i,s,a,c)})},e.prototype.utimesSync=function(i,s,a){var c=this;this.checkInitialized(),this.operateOnWritable(i,function(){c._writable.utimesSync(i,s,a)})},e.prototype.deletePath=function(i){this._deletedFiles[i]=!0,this.updateLog("d"+i+`
`)},e.prototype.updateLog=function(i){var s=this;this._deleteLog+=i,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(je,this._deleteLog,"utf8",I.getFileFlag("w"),420,function(a){s._deleteLogUpdatePending=!1,a?s._deleteLogError=a:s._deleteLogUpdateNeeded&&(s._deleteLogUpdateNeeded=!1,s.updateLog(""))}))},e.prototype._reparseDeletionLog=function(){var i=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(s){i._deletedFiles[s.slice(1)]=s.slice(0,1)==="d"})},e.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;throw this._deleteLogError=null,i}}else throw new d(u.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},e.prototype.checkInitAsync=function(i){if(this._isInitialized){if(this._deleteLogError!==null){var s=this._deleteLogError;return this._deleteLogError=null,i(s),!1}}else return i(new d(u.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},e.prototype.checkPath=function(i){if(i===je)throw d.EPERM(i)},e.prototype.checkPathAsync=function(i,s){return i===je?(s(d.EPERM(i)),!0):!1},e.prototype.createParentDirectoriesAsync=function(i,s){var a=g.dirname(i),c=[],m=this;this._writable.stat(a,!1,E);function E(L,z){L?(c.push(a),a=g.dirname(a),m._writable.stat(a,!1,E)):b()}function b(){if(!c.length)return s();var L=c.pop();m._readable.stat(L,!1,function(z,X){if(!X)return s();m._writable.mkdir(L,X.mode,function(rt){if(rt)return s(rt);b()})})}},e.prototype.createParentDirectories=function(i){for(var s=this,a=g.dirname(i),c=[];!this._writable.existsSync(a);)c.push(a),a=g.dirname(a);c=c.reverse(),c.forEach(function(m){s._writable.mkdirSync(m,s.statSync(m,!1).mode)})},e.prototype.operateOnWritable=function(i,s){if(this.existsSync(i))this._writable.existsSync(i)||this.copyToWritable(i),s();else throw d.ENOENT(i)},e.prototype.operateOnWritableAsync=function(i,s){var a=this;this.exists(i,function(c){if(!c)return s(d.ENOENT(i));a._writable.exists(i,function(m){if(m)s();else return a.copyToWritableAsync(i,s)})})},e.prototype.copyToWritable=function(i){var s=this.statSync(i,!1);s.isDirectory()?this._writable.mkdirSync(i,s.mode):this.writeFileSync(i,this._readable.readFileSync(i,null,xe("r")),null,xe("w"),this.statSync(i,!1).mode)},e.prototype.copyToWritableAsync=function(i,s){var a=this;this.stat(i,!1,function(c,m){if(c)return s(c);if(m.isDirectory())return a._writable.mkdir(i,m.mode,s);a._readable.readFile(i,null,xe("r"),function(E,b){if(E)return s(E);a.writeFile(i,b,null,xe("w"),m.mode,s)})})},e}(ot),Li=function(o){function e(r,i,s){s===void 0&&(s=!0),o.call(this,new Vn(r,i)),Tt(s,e.Name,{readable:"readable file system",writable:"writable file system"})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){try{var a=new e(i.writable,i.readable,!1);a.initialize(function(c){s(c,a)},!1)}catch(c){s(c)}},e.isAvailable=function(){return Vn.isAvailable()},e.prototype.initialize=function(i,s){s===void 0&&(s=!0),s&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),o.prototype.initialize.call(this,i)},e.prototype.getOverlayedFileSystems=function(){return o.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},e.prototype.unwrap=function(){return o.prototype.getFSUnlocked.call(this)},e}(Et);Li.Name="OverlayFS",Li.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Vt;(function(o){o[o.CB=0]="CB",o[o.FD=1]="FD",o[o.API_ERROR=2]="API_ERROR",o[o.STATS=3]="STATS",o[o.PROBE=4]="PROBE",o[o.FILEFLAG=5]="FILEFLAG",o[o.BUFFER=6]="BUFFER",o[o.ERROR=7]="ERROR"})(Vt||(Vt={}));var Ir=function(){this._callbacks={},this._nextId=0};Ir.prototype.toRemoteArg=function(e){var r=this._nextId++;return this._callbacks[r]=e,{type:Vt.CB,id:r}},Ir.prototype.toLocalArg=function(e){var r=this._callbacks[e];return delete this._callbacks[e],r};var Qi=function(){this._fileDescriptors={},this._nextId=0};Qi.prototype.toRemoteArg=function(e,r,i,s){var a=this._nextId++,c,m;this._fileDescriptors[a]=e,e.stat(function(E,b){E?s(E):(m=ii(b.toBuffer()),i.isReadable()?e.read(f.alloc(b.size),0,b.size,0,function(L,z,X){L?s(L):(c=ii(X),s(null,{type:Vt.FD,id:a,data:c,stat:m,path:r,flag:i.getFlagString()}))}):s(null,{type:Vt.FD,id:a,data:new ArrayBuffer(0),stat:m,path:r,flag:i.getFlagString()}))})},Qi.prototype.applyFdAPIRequest=function(e,r){var i=this,s=e.args[0];this._applyFdChanges(s,function(a,c){a?r(a):c[e.method](function(m){e.method==="close"&&delete i._fileDescriptors[s.id],r(m)})})},Qi.prototype._applyFdChanges=function(e,r){var i=this._fileDescriptors[e.id],s=ri(e.data),a=C.fromBuffer(ri(e.stat)),c=I.getFileFlag(e.flag);c.isWriteable()?i.write(s,0,s.length,c.isAppendable()?i.getPos():0,function(m){function E(){i.stat(function(b,L){b?r(b):L.mode!==a.mode?i.chmod(a.mode,function(z){r(z,i)}):r(b,i)})}m?r(m):c.isAppendable()?E():i.truncate(s.length,function(){E()})}):r(null,i)};function $i(o){return{type:Vt.API_ERROR,errorData:ii(o.writeToBuffer())}}function Zn(o){return d.fromBuffer(ri(o.errorData))}function Xn(o){return{type:Vt.ERROR,name:o.name,message:o.message,stack:o.stack}}function Yn(o){var e=$t[o.name];typeof e!="function"&&(e=Error);var r=new e(o.message);return r.stack=o.stack,r}function Gn(o){return{type:Vt.STATS,statsData:ii(o.toBuffer())}}function Jn(o){return C.fromBuffer(ri(o.statsData))}function Kn(o){return{type:Vt.FILEFLAG,flagStr:o.getFlagString()}}function Qn(o){return I.getFileFlag(o.flagStr)}function ii(o){return et(o)}function ri(o){return It(o)}function $n(o){return{type:Vt.BUFFER,data:ii(o)}}function to(o){return ri(o.data)}function ef(o){return o&&typeof o=="object"&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage}function rf(o){return o&&typeof o=="object"&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage}var eo=function(o){function e(r,i,s,a,c,m){o.call(this,r,i,s,a,m),this._remoteFdId=c}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.getRemoteFdId=function(){return this._remoteFdId},e.prototype.toRemoteArg=function(){return{type:Vt.FD,id:this._remoteFdId,data:ii(this.getBuffer()),stat:ii(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},e.prototype.sync=function(i){this._syncClose("sync",i)},e.prototype.close=function(i){this._syncClose("close",i)},e.prototype._syncClose=function(i,s){var a=this;this.isDirty()?this._fs.syncClose(i,this,function(c){c||a.resetDirty(),s(c)}):s()},e}(Jt),tr=function(o){function e(r,i){var s=this;i===void 0&&(i=!0),o.call(this),this._callbackConverter=new Ir,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,Tt(i,e.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(a){var c=a.data;if(rf(c)){var m,E=c.args,b=new Array(E.length);for(m=0;m<b.length;m++)b[m]=s._argRemote2Local(E[m]);s._callbackConverter.toLocalArg(c.cbId).apply(null,b)}})}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){var a=new e(i.worker,!1);a.initialize(function(){s(null,a)})},e.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},e.attachRemoteListener=function(i){var s=new Qi;function a(m,E,b){switch(typeof m){case"object":m instanceof C?b(null,Gn(m)):m instanceof d?b(null,$i(m)):m instanceof St?b(null,s.toRemoteArg(m,E[0],E[1],b)):m instanceof I?b(null,Kn(m)):m instanceof f?b(null,$n(m)):m instanceof Error?b(null,Xn(m)):b(null,m);break;default:b(null,m);break}}function c(m,E){if(!m)return m;switch(typeof m){case"object":if(typeof m.type=="number"){var b=m;switch(b.type){case Vt.CB:var L=m.id;return function(){var z=arguments,X,rt=new Array(arguments.length),nt,dt=arguments.length;function wt(kt){dt>0&&(dt=-1,nt={browserfsMessage:!0,cbId:L,args:[$i(kt)]},i.postMessage(nt))}for(X=0;X<arguments.length;X++)(function(kt,Zt){a(Zt,E,function(ue,Ce){rt[kt]=Ce,ue?wt(ue):--dt===0&&(nt={browserfsMessage:!0,cbId:L,args:rt},i.postMessage(nt))})})(X,z[X]);arguments.length===0&&(nt={browserfsMessage:!0,cbId:L,args:rt},i.postMessage(nt))};case Vt.API_ERROR:return Zn(b);case Vt.STATS:return Jn(b);case Vt.FILEFLAG:return Qn(b);case Vt.BUFFER:return to(b);case Vt.ERROR:return Yn(b);default:return m}}else return m;default:return m}}i.addEventListener("message",function(m){var E=m.data;if(ef(E)){var b=E.args,L=new Array(b.length);switch(E.method){case"close":case"sync":(function(){var rt=b[1];s.applyFdAPIRequest(E,function(nt){var dt={browserfsMessage:!0,cbId:rt.id,args:nt?[$i(nt)]:[]};i.postMessage(dt)})})();break;case"probe":(function(){var rt=ut.getRootFS(),nt=b[1],dt={type:Vt.PROBE,isReadOnly:rt.isReadOnly(),supportsLinks:rt.supportsLinks(),supportsProps:rt.supportsProps()},wt={browserfsMessage:!0,cbId:nt.id,args:[dt]};i.postMessage(wt)})();break;default:for(var z=0;z<b.length;z++)L[z]=c(b[z],L);var X=ut.getRootFS();X[E.method].apply(X,L);break}}})},e.prototype.getName=function(){return e.Name},e.prototype.initialize=function(i){var s=this;if(this._isInitialized)i();else{var a={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(zt()),this._callbackConverter.toRemoteArg(function(c){s._isInitialized=!0,s._isReadOnly=c.isReadOnly,s._supportLinks=c.supportsLinks,s._supportProps=c.supportsProps,i()})]};this._worker.postMessage(a)}},e.prototype.isReadOnly=function(){return this._isReadOnly},e.prototype.supportsSynch=function(){return!1},e.prototype.supportsLinks=function(){return this._supportLinks},e.prototype.supportsProps=function(){return this._supportProps},e.prototype.rename=function(i,s,a){this._rpc("rename",arguments)},e.prototype.stat=function(i,s,a){this._rpc("stat",arguments)},e.prototype.open=function(i,s,a,c){this._rpc("open",arguments)},e.prototype.unlink=function(i,s){this._rpc("unlink",arguments)},e.prototype.rmdir=function(i,s){this._rpc("rmdir",arguments)},e.prototype.mkdir=function(i,s,a){this._rpc("mkdir",arguments)},e.prototype.readdir=function(i,s){this._rpc("readdir",arguments)},e.prototype.exists=function(i,s){this._rpc("exists",arguments)},e.prototype.realpath=function(i,s,a){this._rpc("realpath",arguments)},e.prototype.truncate=function(i,s,a){this._rpc("truncate",arguments)},e.prototype.readFile=function(i,s,a,c){this._rpc("readFile",arguments)},e.prototype.writeFile=function(i,s,a,c,m,E){this._rpc("writeFile",arguments)},e.prototype.appendFile=function(i,s,a,c,m,E){this._rpc("appendFile",arguments)},e.prototype.chmod=function(i,s,a,c){this._rpc("chmod",arguments)},e.prototype.chown=function(i,s,a,c,m){this._rpc("chown",arguments)},e.prototype.utimes=function(i,s,a,c){this._rpc("utimes",arguments)},e.prototype.link=function(i,s,a){this._rpc("link",arguments)},e.prototype.symlink=function(i,s,a,c){this._rpc("symlink",arguments)},e.prototype.readlink=function(i,s){this._rpc("readlink",arguments)},e.prototype.syncClose=function(i,s,a){this._worker.postMessage({browserfsMessage:!0,method:i,args:[s.toRemoteArg(),this._callbackConverter.toRemoteArg(a)]})},e.prototype._argRemote2Local=function(i){if(!i)return i;switch(typeof i){case"object":if(typeof i.type=="number"){var s=i;switch(s.type){case Vt.API_ERROR:return Zn(s);case Vt.FD:var a=s;return new eo(this,a.path,I.getFileFlag(a.flag),C.fromBuffer(ri(a.stat)),a.id,ri(a.data));case Vt.STATS:return Jn(s);case Vt.FILEFLAG:return Qn(s);case Vt.BUFFER:return to(s);case Vt.ERROR:return Yn(s);default:return i}}else return i;default:return i}},e.prototype._rpc=function(i,s){for(var a=this,c=new Array(s.length),m=0;m<s.length;m++)c[m]=a._argLocal2Remote(s[m]);var E={browserfsMessage:!0,method:i,args:c};this._worker.postMessage(E)},e.prototype._argLocal2Remote=function(i){if(!i)return i;switch(typeof i){case"object":return i instanceof C?Gn(i):i instanceof d?$i(i):i instanceof eo?i.toRemoteArg():i instanceof I?Kn(i):i instanceof f?$n(i):i instanceof Error?Xn(i):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(i);default:return i}},e}(ot);tr.Name="WorkerFS",tr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(o,e){o.postMessage?e():e(new d(u.EINVAL,"option must be a Web Worker instance."))}}};function nf(o,e,r){var i=new XMLHttpRequest;i.open("GET",o,!0);var s=!0;switch(e){case"buffer":i.responseType="arraybuffer";break;case"json":try{i.responseType="json",s=i.responseType==="json"}catch{s=!1}break;default:return r(new d(u.EINVAL,"Invalid download type: "+e))}i.onreadystatechange=function(a){if(i.readyState===4)if(i.status===200)switch(e){case"buffer":return r(null,i.response?f.from(i.response):zt());case"json":return s?r(null,i.response):r(null,JSON.parse(i.responseText))}else return r(new d(i.status,"XHR error."))},i.send()}function of(o,e){var r=new XMLHttpRequest;r.open("GET",o,!1);var i=null,s=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(a){if(r.readyState===4)if(r.status===200)switch(e){case"buffer":var c=r.responseText;i=f.alloc(c.length);for(var m=0;m<c.length;m++)i[m]=c.charCodeAt(m);return;case"json":i=JSON.parse(r.responseText);return}else{s=new d(r.status,"XHR error.");return}},r.send(),s)throw s;return i}function sf(o,e){var r=new XMLHttpRequest;switch(r.open("GET",o,!1),e){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new d(u.EINVAL,"Invalid download type: "+e)}var i,s;if(r.onreadystatechange=function(a){if(r.readyState===4)if(r.status===200)switch(e){case"buffer":i=f.from(r.response);break;case"json":i=JSON.parse(r.response);break}else s=new d(r.status,"XHR error.")},r.send(),s)throw s;return i}function io(o,e,r){var i=new XMLHttpRequest;i.open("HEAD",e,o),i.onreadystatechange=function(s){if(i.readyState===4)if(i.status===200)try{return r(null,parseInt(i.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new d(u.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new d(i.status,"XHR HEAD error."))},i.send()}var ro=nf,af=_t&&typeof Blob<"u"?sf:of;function ff(o){var e=-1;return io(!1,o,function(r,i){if(r)throw r;e=i}),e}function cf(o,e){io(!0,o,e)}var Ie=function(){this._index={},this.addPath("/",new me)};Ie.fromListing=function(e){var r=new Ie,i=new me;r._index["/"]=i;for(var s=[["",e,i]];s.length>0;){var a=void 0,c=s.pop(),m=c[0],E=c[1],b=c[2];for(var L in E)if(E.hasOwnProperty(L)){var z=E[L],X=m+"/"+L;z?(r._index[X]=a=new me,s.push([X,z,a])):a=new gi(new C(D.FILE,-1,365)),b&&(b._ls[L]=a)}}return r},Ie.prototype.fileIterator=function(e){var r=this;for(var i in r._index)if(r._index.hasOwnProperty(i))for(var s=r._index[i],a=s.getListing(),c=0,m=a;c<m.length;c+=1){var E=m[c],b=s.getItem(E);We(b)&&e(b.getData())}},Ie.prototype.addPath=function(e,r){if(!r)throw new Error("Inode must be specified");if(e[0]!=="/")throw new Error("Path must be absolute, got: "+e);if(this._index.hasOwnProperty(e))return this._index[e]===r;var i=this._split_path(e),s=i[0],a=i[1],c=this._index[s];return c===void 0&&e!=="/"&&(c=new me,!this.addPath(s,c))||e!=="/"&&!c.addItem(a,r)?!1:(Ye(r)&&(this._index[e]=r),!0)},Ie.prototype.addPathFast=function(e,r){var i=e.lastIndexOf("/"),s=i===0?"/":e.substring(0,i),a=e.substring(i+1),c=this._index[s];return c===void 0&&(c=new me,this.addPathFast(s,c)),c.addItem(a,r)?(r.isDir()&&(this._index[e]=r),!0):!1},Ie.prototype.removePath=function(e){var r=this,i=this._split_path(e),s=i[0],a=i[1],c=this._index[s];if(c===void 0)return null;var m=c.remItem(a);if(m===null)return null;if(Ye(m)){for(var E=m.getListing(),b=0,L=E;b<L.length;b+=1){var z=L[b];r.removePath(e+"/"+z)}e!=="/"&&delete this._index[e]}return m},Ie.prototype.ls=function(e){var r=this._index[e];return r===void 0?null:r.getListing()},Ie.prototype.getInode=function(e){var r=this._split_path(e),i=r[0],s=r[1],a=this._index[i];return a===void 0?null:i===e?a:a.getItem(s)},Ie.prototype._split_path=function(e){var r=g.dirname(e),i=e.substr(r.length+(r==="/"?0:1));return[r,i]};var gi=function(e){this.data=e};gi.prototype.isFile=function(){return!0},gi.prototype.isDir=function(){return!1},gi.prototype.getData=function(){return this.data},gi.prototype.setData=function(e){this.data=e};var me=function(e){e===void 0&&(e=null),this.data=e,this._ls={}};me.prototype.isFile=function(){return!1},me.prototype.isDir=function(){return!0},me.prototype.getData=function(){return this.data},me.prototype.getStats=function(){return new C(D.DIRECTORY,4096,365)},me.prototype.getListing=function(){return Object.keys(this._ls)},me.prototype.getItem=function(e){var r=this._ls[e];return r||null},me.prototype.addItem=function(e,r){return e in this._ls?!1:(this._ls[e]=r,!0)},me.prototype.remItem=function(e){var r=this._ls[e];return r===void 0?null:(delete this._ls[e],r)};function We(o){return!!o&&o.isFile()}function Ye(o){return!!o&&o.isDir()}function uf(o,e,r){try{r(null,o.toString(e))}catch(i){r(i)}}var er=function(o){function e(r,i,s){i===void 0&&(i=""),s===void 0&&(s=!0),o.call(this),r||(r="index.json"),i.length>0&&i.charAt(i.length-1)!=="/"&&(i=i+"/"),this.prefixUrl=i;var a=null;if(typeof r=="string"){if(a=this._requestFileSync(r,"json"),!a)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else a=r;Tt(s,e.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:i}),this._index=Ie.fromListing(a)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){i.index===void 0&&(i.index="index.json"),typeof i.index=="string"?e.FromURL(i.index,s,i.baseUrl,!1):s(null,new e(i.index,i.baseUrl,!1))},e.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},e.FromURL=function(i,s,a,c){a===void 0&&(a=i.slice(0,i.lastIndexOf("/")+1)),c===void 0&&(c=!0),c&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+i+'", baseUrl: "'+a+`" }, cb)' instead.`),ro(i,"json",function(m,E){m?s(m):s(null,new e(E,a,!1))})},e.prototype.empty=function(){this._index.fileIterator(function(i){i.fileData=null})},e.prototype.getName=function(){return e.Name},e.prototype.diskSpace=function(i,s){s(0,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.preloadFile=function(i,s){var a=this._index.getInode(i);if(We(a)){if(a===null)throw d.ENOENT(i);var c=a.getData();c.size=s.length,c.fileData=s}else throw d.EISDIR(i)},e.prototype.stat=function(i,s,a){var c=this._index.getInode(i);if(c===null)return a(d.ENOENT(i));var m;We(c)?(m=c.getData(),m.size<0?this._requestFileSizeAsync(i,function(E,b){if(E)return a(E);m.size=b,a(null,m.clone())}):a(null,m.clone())):Ye(c)?(m=c.getStats(),a(null,m)):a(d.FileError(u.EINVAL,i))},e.prototype.statSync=function(i,s){var a=this._index.getInode(i);if(a===null)throw d.ENOENT(i);var c;if(We(a))c=a.getData(),c.size<0&&(c.size=this._requestFileSizeSync(i));else if(Ye(a))c=a.getStats();else throw d.FileError(u.EINVAL,i);return c},e.prototype.open=function(i,s,a,c){if(s.isWriteable())return c(new d(u.EPERM,i));var m=this,E=this._index.getInode(i);if(E===null)return c(d.ENOENT(i));if(We(E)){var b=E.getData();switch(s.pathExistsAction()){case T.THROW_EXCEPTION:case T.TRUNCATE_FILE:return c(d.EEXIST(i));case T.NOP:if(b.fileData)return c(null,new le(m,i,s,b.clone(),b.fileData));this._requestFileAsync(i,"buffer",function(L,z){return L?c(L):(b.size=z.length,b.fileData=z,c(null,new le(m,i,s,b.clone(),z)))});break;default:return c(new d(u.EINVAL,"Invalid FileMode object."))}}else return c(d.EISDIR(i))},e.prototype.openSync=function(i,s,a){if(s.isWriteable())throw new d(u.EPERM,i);var c=this._index.getInode(i);if(c===null)throw d.ENOENT(i);if(We(c)){var m=c.getData();switch(s.pathExistsAction()){case T.THROW_EXCEPTION:case T.TRUNCATE_FILE:throw d.EEXIST(i);case T.NOP:if(m.fileData)return new le(this,i,s,m.clone(),m.fileData);var E=this._requestFileSync(i,"buffer");return m.size=E.length,m.fileData=E,new le(this,i,s,m.clone(),E);default:throw new d(u.EINVAL,"Invalid FileMode object.")}}else throw d.EISDIR(i)},e.prototype.readdir=function(i,s){try{s(null,this.readdirSync(i))}catch(a){s(a)}},e.prototype.readdirSync=function(i){var s=this._index.getInode(i);if(s===null)throw d.ENOENT(i);if(Ye(s))return s.getListing();throw d.ENOTDIR(i)},e.prototype.readFile=function(i,s,a,c){var m=c;this.open(i,a,420,function(E,b){if(E)return c(E);c=function(X,rt){b.close(function(nt){return X||(X=nt),m(X,rt)})};var L=b,z=L.getBuffer();s===null?c(E,Ot(z)):uf(z,s,c)})},e.prototype.readFileSync=function(i,s,a){var c=this.openSync(i,a,420);try{var m=c,E=m.getBuffer();return s===null?Ot(E):E.toString(s)}finally{c.closeSync()}},e.prototype.getXhrPath=function(i){return i.charAt(0)==="/"&&(i=i.slice(1)),this.prefixUrl+i},e.prototype._requestFileAsync=function(i,s,a){ro(this.getXhrPath(i),s,a)},e.prototype._requestFileSync=function(i,s){return af(this.getXhrPath(i),s)},e.prototype._requestFileSizeAsync=function(i,s){cf(this.getXhrPath(i),s)},e.prototype._requestFileSizeSync=function(i){return ff(this.getXhrPath(i))},e}(ot);er.Name="XmlHttpRequest",er.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var ni=function(){};ni.str2byte=function(e,r){for(var i=e.length>r.length?r.length:e.length,s=0;s<i;s++){var a=e.charCodeAt(s);if(a>127){var c=ni.extendedChars.indexOf(e.charAt(s));c>-1&&(a=c+128)}r[a]=s}return i},ni.byte2str=function(e){for(var r=new Array(e.length),i=0;i<e.length;i++){var s=e[i];s>127?r[i]=ni.extendedChars[s-128]:r[i]=String.fromCharCode(s)}return r.join("")},ni.byteLength=function(e){return e.length},ni.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var hf=n(31).inflateRaw,no={},oo;(function(o){o[o.MSDOS=0]="MSDOS",o[o.AMIGA=1]="AMIGA",o[o.OPENVMS=2]="OPENVMS",o[o.UNIX=3]="UNIX",o[o.VM_CMS=4]="VM_CMS",o[o.ATARI_ST=5]="ATARI_ST",o[o.OS2_HPFS=6]="OS2_HPFS",o[o.MAC=7]="MAC",o[o.Z_SYSTEM=8]="Z_SYSTEM",o[o.CP_M=9]="CP_M",o[o.NTFS=10]="NTFS",o[o.MVS=11]="MVS",o[o.VSE=12]="VSE",o[o.ACORN_RISC=13]="ACORN_RISC",o[o.VFAT=14]="VFAT",o[o.ALT_MVS=15]="ALT_MVS",o[o.BEOS=16]="BEOS",o[o.TANDEM=17]="TANDEM",o[o.OS_400=18]="OS_400",o[o.OSX=19]="OSX"})(oo||(oo={}));var mi;(function(o){o[o.STORED=0]="STORED",o[o.SHRUNK=1]="SHRUNK",o[o.REDUCED_1=2]="REDUCED_1",o[o.REDUCED_2=3]="REDUCED_2",o[o.REDUCED_3=4]="REDUCED_3",o[o.REDUCED_4=5]="REDUCED_4",o[o.IMPLODE=6]="IMPLODE",o[o.DEFLATE=8]="DEFLATE",o[o.DEFLATE64=9]="DEFLATE64",o[o.TERSE_OLD=10]="TERSE_OLD",o[o.BZIP2=12]="BZIP2",o[o.LZMA=14]="LZMA",o[o.TERSE_NEW=18]="TERSE_NEW",o[o.LZ77=19]="LZ77",o[o.WAVPACK=97]="WAVPACK",o[o.PPMD=98]="PPMD"})(mi||(mi={}));function so(o,e){var r=e&31,i=(e>>5&15)-1,s=(e>>9)+1980,a=o&31,c=o>>5&63,m=o>>11;return new Date(s,i,r,m,c,a)}function ir(o,e,r,i){return i===0?"":e?o.toString("utf8",r,r+i):ni.byte2str(o.slice(r,r+i))}var Ee=function(e){if(this.data=e,e.readUInt32LE(0)!==67324752)throw new d(u.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};Ee.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},Ee.prototype.flags=function(){return this.data.readUInt16LE(6)},Ee.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},Ee.prototype.lastModFileTime=function(){return so(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},Ee.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},Ee.prototype.crc32=function(){return this.data.readUInt32LE(14)},Ee.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},Ee.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},Ee.prototype.fileName=function(){return ir(this.data,this.useUTF8(),30,this.fileNameLength())},Ee.prototype.extraField=function(){var e=30+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},Ee.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},Ee.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var Di=function(e,r,i){this.header=e,this.record=r,this.data=i};Di.prototype.decompress=function(){var e=this.header.compressionMethod(),r=no[e];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var i=mi[e];throw i||(i="Unknown: "+e),new d(u.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+i)},Di.prototype.getHeader=function(){return this.header},Di.prototype.getRecord=function(){return this.record},Di.prototype.getRawData=function(){return this.data};var kr=function(e){this.data=e};kr.prototype.crc32=function(){return this.data.readUInt32LE(0)},kr.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},kr.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)};var ao=function(e){if(this.data=e,this.data.readUInt32LE(0)!==134630224)throw new d(u.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};ao.prototype.length=function(){return this.data.readUInt32LE(4)},ao.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())};var fo=function(e){if(this.data=e,this.data.readUInt32LE(0)!==84233040)throw new d(u.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};fo.prototype.size=function(){return this.data.readUInt16LE(4)},fo.prototype.signatureData=function(){return this.data.slice(6,6+this.size())};var Dt=function(e,r){if(this.zipData=e,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new d(u.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Dt.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Dt.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Dt.prototype.flag=function(){return this.data.readUInt16LE(8)},Dt.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Dt.prototype.lastModFileTime=function(){return so(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Dt.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Dt.prototype.crc32=function(){return this.data.readUInt32LE(16)},Dt.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Dt.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Dt.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Dt.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Dt.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Dt.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Dt.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Dt.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Dt.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Dt.prototype.produceFilename=function(){var e=ir(this.data,this.useUTF8(),46,this.fileNameLength());return e.replace(/\\/g,"/")},Dt.prototype.fileName=function(){return this._filename},Dt.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Dt.prototype.extraField=function(){var e=44+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},Dt.prototype.fileComment=function(){var e=46+this.fileNameLength()+this.extraFieldLength();return ir(this.data,this.useUTF8(),e,this.fileCommentLength())},Dt.prototype.rawFileComment=function(){var e=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(e,e+this.fileCommentLength())},Dt.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Dt.prototype.isDirectory=function(){var e=this.fileName();return!!(this.externalAttributes()&16)||e.charAt(e.length-1)==="/"},Dt.prototype.isFile=function(){return!this.isDirectory()},Dt.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Dt.prototype.isEncrypted=function(){return(this.flag()&1)===1},Dt.prototype.getFileData=function(){var e=this.headerRelativeOffset(),r=new Ee(this.zipData.slice(e));return new Di(r,this,this.zipData.slice(e+r.totalSize()))},Dt.prototype.getData=function(){return this.getFileData().decompress()},Dt.prototype.getRawData=function(){return this.getFileData().getRawData()},Dt.prototype.getStats=function(){return new C(D.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Le=function(e){if(this.data=e,this.data.readUInt32LE(0)!==101010256)throw new d(u.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Le.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Le.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Le.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Le.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Le.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Le.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Le.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Le.prototype.cdZipComment=function(){return ir(this.data,!0,22,this.cdZipCommentLength())},Le.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var co=function(e,r,i,s){this.index=e,this.directoryEntries=r,this.eocd=i,this.data=s},oi=function(o){function e(r,i,s){i===void 0&&(i=""),s===void 0&&(s=!0),o.call(this),this.name=i,this._index=new Ie,this._directoryEntries=[],this._eocd=null,Tt(s,e.Name,{zipData:"zip data as a Buffer",name:i}),r instanceof co?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){try{e.computeIndex(i.zipData,function(a){var c=new e(a,i.name,!1);s(null,c)},!1)}catch(a){s(a)}},e.isAvailable=function(){return!0},e.RegisterDecompressionMethod=function(i,s){no[i]=s},e.computeIndex=function(i,s,a){a===void 0&&(a=!0),a&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var c=new Ie,m=e.getEOCD(i);if(m.diskNumber()!==m.cdDiskNumber())throw new d(u.EINVAL,"ZipFS does not support spanned zip files.");var E=m.cdOffset();if(E===4294967295)throw new d(u.EINVAL,"ZipFS does not support Zip64.");var b=E+m.cdSize();e.computeIndexResponsive(i,c,E,b,s,[],m)},e.getEOCD=function(i){for(var s=22,a=Math.min(s+65535,i.length-1),c=s;c<a;c++)if(i.readUInt32LE(i.length-c)===101010256)return new Le(i.slice(i.length-c));throw new d(u.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},e.addToIndex=function(i,s){var a=i.fileName();if(a.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");a.charAt(a.length-1)==="/"&&(a=a.substr(0,a.length-1)),i.isDirectory()?s.addPathFast("/"+a,new me(i)):s.addPathFast("/"+a,new gi(i))},e.computeIndexResponsive=function(i,s,a,c,m,E,b){if(a<c){for(var L=0;L++<200&&a<c;){var z=new Dt(i,i.slice(a));e.addToIndex(z,s),a+=z.totalSize(),E.push(z)}Fr(function(){e.computeIndexResponsive(i,s,a,c,m,E,b)})}else m(new co(s,E,b,i))},e.prototype.getName=function(){return e.Name+(this.name!==""?" "+this.name:"")},e.prototype.getCentralDirectoryEntry=function(i){var s=this._index.getInode(i);if(s===null)throw d.ENOENT(i);if(We(s))return s.getData();if(Ye(s))return s.getData();throw d.EPERM("Invalid inode: "+s)},e.prototype.getCentralDirectoryEntryAt=function(i){var s=this._directoryEntries[i];if(!s)throw new RangeError("Invalid directory index: "+i+".");return s},e.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},e.prototype.getEndOfCentralDirectory=function(){return this._eocd},e.prototype.diskSpace=function(i,s){s(this.data.length,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.statSync=function(i,s){var a=this._index.getInode(i);if(a===null)throw d.ENOENT(i);var c;if(We(a))c=a.getData().getStats();else if(Ye(a))c=a.getStats();else throw new d(u.EINVAL,"Invalid inode.");return c},e.prototype.openSync=function(i,s,a){if(s.isWriteable())throw new d(u.EPERM,i);var c=this._index.getInode(i);if(c)if(We(c)){var m=c.getData(),E=m.getStats();switch(s.pathExistsAction()){case T.THROW_EXCEPTION:case T.TRUNCATE_FILE:throw d.EEXIST(i);case T.NOP:return new le(this,i,s,E,m.getData());default:throw new d(u.EINVAL,"Invalid FileMode object.")}}else throw d.EISDIR(i);else throw d.ENOENT(i)},e.prototype.readdirSync=function(i){var s=this._index.getInode(i);if(s){if(Ye(s))return s.getListing();throw d.ENOTDIR(i)}else throw d.ENOENT(i)},e.prototype.readFileSync=function(i,s,a){var c=this.openSync(i,a,420);try{var m=c,E=m.getBuffer();return s===null?Ot(E):E.toString(s)}finally{c.closeSync()}},e.prototype.populateIndex=function(){var i=this,s=this._eocd=e.getEOCD(this.data);if(s.diskNumber()!==s.cdDiskNumber())throw new d(u.EINVAL,"ZipFS does not support spanned zip files.");var a=s.cdOffset();if(a===4294967295)throw new d(u.EINVAL,"ZipFS does not support Zip64.");for(var c=a+s.cdSize();a<c;){var m=new Dt(i.data,i.data.slice(a));a+=m.totalSize(),e.addToIndex(m,i._index),i._directoryEntries.push(m)}},e}(bt);oi.Name="ZipFS",oi.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:re},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},oi.CompressionMethod=mi,oi.RegisterDecompressionMethod(mi.DEFLATE,function(o,e,r){return Nt(hf(o.slice(0,e),{chunkSize:r}))}),oi.RegisterDecompressionMethod(mi.STORED,function(o,e,r){return Ot(o,0,r)});var lf="IEEE_P1282";function ve(o,e,r){return o.toString("ascii",e,e+r).trim()}function Nr(o,e,r){if(r===1)return String.fromCharCode(o[e]);for(var i=Math.floor(r/2),s=new Array(i),a=0;a<i;a++){var c=e+(a<<1);s[a]=String.fromCharCode(o[c+1]|o[c]<<8)}return s.join("")}function De(o,e){var r=parseInt(ve(o,e,4),10),i=parseInt(ve(o,e+4,2),10),s=parseInt(ve(o,e+6,2),10),a=parseInt(ve(o,e+8,2),10),c=parseInt(ve(o,e+10,2),10),m=parseInt(ve(o,e+12,2),10),E=parseInt(ve(o,e+14,2),10);return new Date(r,i,s,a,c,m,E*100)}function si(o,e){var r=o[e],i=o[e+1],s=o[e+2],a=o[e+3],c=o[e+4],m=o[e+5];return new Date(r,i-1,s,a,c,m)}function pf(o,e){var r=o.slice(e),i=new te(r);switch(i.signatureWord()){case 17221:return new yo(r);case 20548:return new gf(r);case 21328:return new go(r);case 21332:return new mo(r);case 17746:return new vo(r);case 17747:return new mf(r);case 20568:return new So(r);case 20558:return new vf(r);case 21324:return new Rr(r);case 20045:return new xo(r);case 17228:return new Tr(r);case 20556:return new wf(r);case 21061:return new Eo(r);case 21574:return new _o(r);case 21318:return new Sf(r);case 21074:return new wo(r);default:return i}}function uo(o,e,r,i){r=r-4;for(var s=new Array;e<r;){var a=pf(o,e),c=a.length();if(c===0)return s;if(e+=c,a instanceof mo)break;a instanceof yo?s=s.concat(a.getEntries(i)):s.push(a)}return s}var vi=function(e){this._data=e};vi.prototype.type=function(){return this._data[0]},vi.prototype.standardIdentifier=function(){return ve(this._data,1,5)},vi.prototype.version=function(){return this._data[6]},vi.prototype.data=function(){return this._data.slice(7,2048)};var ho=function(o){function e(r){o.call(this,r),this._root=null}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.systemIdentifier=function(){return this._getString32(8)},e.prototype.volumeIdentifier=function(){return this._getString32(40)},e.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},e.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},e.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},e.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},e.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},e.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},e.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},e.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},e.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},e.prototype.rootDirectoryEntry=function(i){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(i)),this._root},e.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},e.prototype.publisherIdentifier=function(){return this._getString(318,128)},e.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},e.prototype.applicationIdentifier=function(){return this._getString(574,128)},e.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},e.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},e.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},e.prototype.volumeCreationDate=function(){return De(this._data,813)},e.prototype.volumeModificationDate=function(){return De(this._data,830)},e.prototype.volumeExpirationDate=function(){return De(this._data,847)},e.prototype.volumeEffectiveDate=function(){return De(this._data,864)},e.prototype.fileStructureVersion=function(){return this._data[881]},e.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},e.prototype.reserved=function(){return this._data.slice(1395,1395+653)},e.prototype._getString32=function(i){return this._getString(i,32)},e}(vi),df=function(o){function e(r){if(o.call(this,r),this.type()!==1)throw new d(u.EIO,"Invalid primary volume descriptor.")}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.name=function(){return"ISO9660"},e.prototype._constructRootDirectoryRecord=function(i){return new lo(i,-1)},e.prototype._getString=function(i,s){return this._getString(i,s)},e}(ho),yf=function(o){function e(r){if(o.call(this,r),this.type()!==2)throw new d(u.EIO,"Invalid supplementary volume descriptor.");var i=this.escapeSequence(),s=i[2];if(i[0]!==37||i[1]!==47||s!==64&&s!==67&&s!==69)throw new d(u.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+i.toString())}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.name=function(){return"Joliet"},e.prototype.escapeSequence=function(){return this._data.slice(88,120)},e.prototype._constructRootDirectoryRecord=function(i){return new po(i,-1)},e.prototype._getString=function(i,s){return Nr(this._data,i,s)},e}(ho),Wt=function(e,r){this._suEntries=null,this._fileOrDir=null,this._data=e,this._rockRidgeOffset=r};Wt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},Wt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},Wt.prototype.rootCheckForRockRidge=function(e){var r=this.getDirectory(e);this._rockRidgeOffset=r.getDotEntry(e)._getRockRidgeOffset(e),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},Wt.prototype.length=function(){return this._data[0]},Wt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},Wt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},Wt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},Wt.prototype.recordingDate=function(){return si(this._data,18)},Wt.prototype.fileFlags=function(){return this._data[25]},Wt.prototype.fileUnitSize=function(){return this._data[26]},Wt.prototype.interleaveGapSize=function(){return this._data[27]},Wt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},Wt.prototype.identifier=function(){return this._getString(33,this._data[32])},Wt.prototype.fileName=function(e){if(this.hasRockRidge()){var r=this._rockRidgeFilename(e);if(r!==null)return r}var i=this.identifier();if(this.isDirectory(e))return i;var s=i.indexOf(";");return s===-1?i:i[s-1]==="."?i.slice(0,s-1):i.slice(0,s)},Wt.prototype.isDirectory=function(e){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(e).filter(function(i){return i instanceof Tr}).length>0),r},Wt.prototype.isSymlink=function(e){return this.hasRockRidge()&&this.getSUEntries(e).filter(function(r){return r instanceof Rr}).length>0},Wt.prototype.getSymlinkPath=function(e){for(var r="",i=this.getSUEntries(e),s=this._getGetString(),a=0,c=i;a<c.length;a+=1){var m=c[a];if(m instanceof Rr){for(var E=m.componentRecords(),b=0,L=E;b<L.length;b+=1){var z=L[b],X=z.flags();X&2?r+="./":X&4?r+="../":X&8?r+="/":(r+=z.content(s),X&1||(r+="/"))}if(!m.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},Wt.prototype.getFile=function(e){if(this.isDirectory(e))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=e.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},Wt.prototype.getDirectory=function(e){if(!this.isDirectory(e))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(e)),this._fileOrDir},Wt.prototype.getSUEntries=function(e){return this._suEntries||this._constructSUEntries(e),this._suEntries},Wt.prototype._rockRidgeFilename=function(e){var r=this.getSUEntries(e).filter(function(E){return E instanceof xo});if(r.length===0||r[0].flags()&6)return null;for(var i="",s=this._getGetString(),a=0,c=r;a<c.length;a+=1){var m=c[a];if(i+=m.name(s),!(m.flags()&1))break}return i},Wt.prototype._constructSUEntries=function(e){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=uo(this._data,r,this.length(),e)},Wt.prototype._getRockRidgeOffset=function(e){this._rockRidgeOffset=0;var r=this.getSUEntries(e);if(r.length>0){var i=r[0];if(i instanceof go&&i.checkBytesPass())for(var s=1;s<r.length;s++){var a=r[s];if(a instanceof wo||a instanceof vo&&a.extensionIdentifier()===lf)return i.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var lo=function(o){function e(r,i){o.call(this,r,i)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype._getString=function(i,s){return ve(this._data,i,s)},e.prototype._constructDirectory=function(i){return new xf(this,i)},e.prototype._getGetString=function(){return ve},e}(Wt),po=function(o){function e(r,i){o.call(this,r,i)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype._getString=function(i,s){return Nr(this._data,i,s)},e.prototype._constructDirectory=function(i){return new Ef(this,i)},e.prototype._getGetString=function(){return Nr},e}(Wt),te=function(e){this._data=e};te.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},te.prototype.signatureWordString=function(){return ve(this._data,0,2)},te.prototype.length=function(){return this._data[2]},te.prototype.suVersion=function(){return this._data[3]};var yo=function(o){function e(r){o.call(this,r),this._entries=null}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},e.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},e.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},e.prototype.getEntries=function(i){if(!this._entries){var s=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=uo(i,s,this.continuationLength(),i)}return this._entries},e}(te),gf=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e}(te),go=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},e.prototype.bytesSkipped=function(){return this._data[6]},e}(te),mo=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e}(te),vo=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.identifierLength=function(){return this._data[4]},e.prototype.descriptorLength=function(){return this._data[5]},e.prototype.sourceLength=function(){return this._data[6]},e.prototype.extensionVersion=function(){return this._data[7]},e.prototype.extensionIdentifier=function(){return ve(this._data,8,this.identifierLength())},e.prototype.extensionDescriptor=function(){return ve(this._data,8+this.identifierLength(),this.descriptorLength())},e.prototype.extensionSource=function(){return ve(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},e}(te),mf=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.extensionSequence=function(){return this._data[4]},e}(te),wo=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e}(te),So=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.mode=function(){return this._data.readUInt32LE(4)},e.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},e.prototype.uid=function(){return this._data.readUInt32LE(20)},e.prototype.gid=function(){return this._data.readUInt32LE(28)},e.prototype.inode=function(){return this._data.readUInt32LE(36)},e}(te),vf=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},e.prototype.devTLow=function(){return this._data.readUInt32LE(12)},e}(te),Rr=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.flags=function(){return this._data[4]},e.prototype.continueFlag=function(){return this.flags()&1},e.prototype.componentRecords=function(){for(var i=this,s=new Array,a=5;a<this.length();){var c=new Ci(i._data.slice(a));s.push(c),a+=c.length()}return s},e}(te),Ci=function(e){this._data=e};Ci.prototype.flags=function(){return this._data[0]},Ci.prototype.length=function(){return 2+this.componentLength()},Ci.prototype.componentLength=function(){return this._data[1]},Ci.prototype.content=function(e){return e(this._data,2,this.componentLength())};var xo=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.flags=function(){return this._data[4]},e.prototype.name=function(i){return i(this._data,5,this.length()-5)},e}(te),Tr=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},e}(te),wf=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},e}(te),Eo=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e}(te),_o=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.flags=function(){return this._data[4]},e.prototype.creation=function(){return this.flags()&1?this._longFormDates()?De(this._data,5):si(this._data,5):null},e.prototype.modify=function(){if(this.flags()&2){var i=this.flags()&1?1:0;return this._longFormDates?De(this._data,5+i*17):si(this._data,5+i*7)}else return null},e.prototype.access=function(){if(this.flags()&4){var i=this.flags()&1?1:0;return i+=this.flags()&2?1:0,this._longFormDates?De(this._data,5+i*17):si(this._data,5+i*7)}else return null},e.prototype.backup=function(){if(this.flags()&16){var i=this.flags()&1?1:0;return i+=this.flags()&2?1:0,i+=this.flags()&4?1:0,this._longFormDates?De(this._data,5+i*17):si(this._data,5+i*7)}else return null},e.prototype.expiration=function(){if(this.flags()&32){var i=this.flags()&1?1:0;return i+=this.flags()&2?1:0,i+=this.flags()&4?1:0,i+=this.flags()&16?1:0,this._longFormDates?De(this._data,5+i*17):si(this._data,5+i*7)}else return null},e.prototype.effective=function(){if(this.flags()&64){var i=this.flags()&1?1:0;return i+=this.flags()&2?1:0,i+=this.flags()&4?1:0,i+=this.flags()&16?1:0,i+=this.flags()&32?1:0,this._longFormDates?De(this._data,5+i*17):si(this._data,5+i*7)}else return null},e.prototype._longFormDates=function(){return!!this.flags()},e}(te),Sf=function(o){function e(r){o.call(this,r)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},e.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},e.prototype.tableDepth=function(){return this._data[20]},e}(te),Bi=function(e,r){var i=this;this._fileList=[],this._fileMap={},this._record=e;var s=e.lba(),a=s+e.dataLength();if(!(e.fileFlags()&2)){var c=e.getSUEntries(r).filter(function(L){return L instanceof Tr})[0];s=c.childDirectoryLba()*2048,a=1/0}for(;s<a;){var m=r[s];if(m===0){s++;continue}var E=i._constructDirectoryRecord(r.slice(s)),b=E.fileName(r);b!=="\0"&&b!==""?(!E.hasRockRidge()||E.getSUEntries(r).filter(function(L){return L instanceof Eo}).length===0)&&(i._fileMap[b]=E,i._fileList.push(b)):a===1/0&&(a=s+E.dataLength()),s+=E.length()}};Bi.prototype.getRecord=function(e){return this._fileMap[e]},Bi.prototype.getFileList=function(){return this._fileList},Bi.prototype.getDotEntry=function(e){return this._constructDirectoryRecord(e.slice(this._record.lba()))};var xf=function(o){function e(r,i){o.call(this,r,i)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype._constructDirectoryRecord=function(i){return new lo(i,this._record.getRockRidgeOffset())},e}(Bi),Ef=function(o){function e(r,i){o.call(this,r,i)}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype._constructDirectoryRecord=function(i){return new po(i,this._record.getRockRidgeOffset())},e}(Bi),rr=function(o){function e(r,i,s){var a=this;i===void 0&&(i=""),s===void 0&&(s=!0),o.call(this),this._data=r,Tt(s,e.Name,{data:"ISO data as a Buffer",name:i});for(var c=!1,m=16*2048,E=new Array;!c;){var b=r.slice(m),L=new vi(b);switch(L.type()){case 1:E.push(new df(b));break;case 2:E.push(new yf(b));break;case 255:c=!0;break}m+=2048}if(E.length===0)throw new d(u.EIO,"Unable to find a suitable volume descriptor.");E.forEach(function(z){(!a._pvd||a._pvd.type()!==2)&&(a._pvd=z)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=i}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.Create=function(i,s){var a,c;try{a=new e(i.data,i.name,!1)}catch(m){m=m}finally{s(c,a)}},e.isAvailable=function(){return!0},e.prototype.getName=function(){var i="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(i+="-RockRidge"),i},e.prototype.diskSpace=function(i,s){s(this._data.length,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.statSync=function(i,s){var a=this._getDirectoryRecord(i);if(a===null)throw d.ENOENT(i);return this._getStats(i,a)},e.prototype.openSync=function(i,s,a){if(s.isWriteable())throw new d(u.EPERM,i);var c=this._getDirectoryRecord(i);if(c){if(c.isSymlink(this._data))return this.openSync(g.resolve(i,c.getSymlinkPath(this._data)),s,a);if(c.isDirectory(this._data))throw d.EISDIR(i);var m=c.getFile(this._data),E=this._getStats(i,c);switch(s.pathExistsAction()){case T.THROW_EXCEPTION:case T.TRUNCATE_FILE:throw d.EEXIST(i);case T.NOP:return new le(this,i,s,E,m);default:throw new d(u.EINVAL,"Invalid FileMode object.")}}else throw d.ENOENT(i)},e.prototype.readdirSync=function(i){var s=this._getDirectoryRecord(i);if(s){if(s.isDirectory(this._data))return s.getDirectory(this._data).getFileList().slice(0);throw d.ENOTDIR(i)}else throw d.ENOENT(i)},e.prototype.readFileSync=function(i,s,a){var c=this.openSync(i,a,420);try{var m=c,E=m.getBuffer();return s===null?Ot(E):E.toString(s)}finally{c.closeSync()}},e.prototype._getDirectoryRecord=function(i){var s=this;if(i==="/")return this._root;for(var a=i.split("/").slice(1),c=this._root,m=0,E=a;m<E.length;m+=1){var b=E[m];if(c.isDirectory(s._data)){if(c=c.getDirectory(s._data).getRecord(b),!c)return null}else return null}return c},e.prototype._getStats=function(i,s){if(s.isSymlink(this._data)){var a=g.resolve(i,s.getSymlinkPath(this._data)),c=this._getDirectoryRecord(a);return c?this._getStats(a,c):null}else{var m=s.dataLength(),E=365,b=s.recordingDate(),L=b,z=b,X=b;if(s.hasRockRidge())for(var rt=s.getSUEntries(this._data),nt=0,dt=rt;nt<dt.length;nt+=1){var wt=dt[nt];if(wt instanceof So)E=wt.mode();else if(wt instanceof _o){var kt=wt.flags();kt&4&&(L=wt.access()),kt&2&&(z=wt.modify()),kt&1&&(X=wt.creation())}}return E=E&365,new C(s.isDirectory(this._data)?D.DIRECTORY:D.FILE,m,E,L,z,X)}},e}(bt);rr.Name="IsoFS",rr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:re}},[k,Vi,Zi,li,Yi,pi,ki,rr,Ri,di,Li,tr,er,oi].forEach(function(o){var e=o.Create;o.Create=function(r,i){var s=typeof r=="function",a=s?r:i,c=s?{}:r;function m(E){E?a(E):e.call(o,c,a)}O(o,c,m)}});var nr={AsyncMirror:k,Dropbox:Vi,Emscripten:Zi,FolderAdapter:li,HTML5FS:Yi,InMemory:pi,IndexedDB:ki,IsoFS:rr,LocalStorage:Ri,MountableFileSystem:di,OverlayFS:Li,WorkerFS:tr,XmlHttpRequest:er,ZipFS:oi};v.initializeTTYs&&v.initializeTTYs();function _f(o){o.Buffer=f,o.process=v;var e=o.require?o.require:null;o.require=function(r){var i=bo(r);return i||e.apply(null,Array.prototype.slice.call(arguments,0))}}function bf(o,e){nr[o]=e}function bo(o){switch(o){case"fs":return ut;case"path":return g;case"buffer":return x;case"process":return v;case"bfs_utils":return A;default:return nr[o]}}function Fo(o){return ut.initialize(o)}function Ff(o,e){Or(o,function(r,i){i?(Fo(i),e()):e(r)})}function Or(o,e){var r=o.fs;if(!r)return e(new d(u.EPERM,'Missing "fs" property on configuration object.'));var i=o.options,s=0,a=!1;function c(){if(!a){a=!0;var b=nr[r];b?b.Create(i,e):e(new d(u.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(i!==null&&typeof i=="object"){var m=!1,E=Object.keys(i).filter(function(b){return b!=="fs"});E.forEach(function(b){var L=i[b];L!==null&&typeof L=="object"&&L.fs&&(s++,Or(L,function(z,X){if(s--,z){if(a)return;a=!0,e(z)}else i[b]=X,s===0&&m&&c()}))}),m=!0}s===0&&c()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(o){return function(e,r){return e<0&&(e=this.length+e),o.call(this,e,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(o,e){o===void 0&&(o=0),e===void 0&&(e=this.length);var r=this;return o<0&&(o=this.length+o,o<0&&(o=0)),e<0&&(e=this.length+e,e<0&&(e=0)),e<o&&(e=o),new Uint8Array(r.buffer,r.byteOffset+o,e-o)})),t.install=_f,t.registerFileSystem=bf,t.BFSRequire=bo,t.initialize=Fo,t.configure=Ff,t.getFileSystem=Or,t.EmscriptenFS=vt,t.FileSystem=nr,t.Errors=N,t.setImmediate=Fr}).call(t,n(1),function(){return this}(),n(5)(y),n(6))},function(y,t,n){y.exports=n(2).Buffer},function(y,t,n){(function(u){"use strict";var h=n(3),l=n(4);t.Buffer=u,t.SlowBuffer=B,t.INSPECT_MAX_BYTES=50;var v=2147483647;t.kMaxLength=v,u.TYPED_ARRAY_SUPPORT=x(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function x(){try{var k=new Uint8Array(1);return k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},k.foo()===42}catch{return!1}}function g(k){if(k>v)throw new RangeError("Invalid typed array length");var w=new Uint8Array(k);return w.__proto__=u.prototype,w}function u(k,w,S){if(typeof k=="number"){if(typeof w=="string")throw new Error("If encoding is specified then the first argument must be a string");return T(k)}return _(k,w,S)}typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192;function _(k,w,S){if(typeof k=="number")throw new TypeError('"value" argument must not be a number');return Jt(k)?C(k,w,S):typeof k=="string"?I(k,w):W(k)}u.from=function(k,w,S){return _(k,w,S)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array;function d(k){if(typeof k!="number")throw new TypeError('"size" argument must be a number');if(k<0)throw new RangeError('"size" argument must not be negative')}function N(k,w,S){return d(k),k<=0?g(k):w!==void 0?typeof S=="string"?g(k).fill(w,S):g(k).fill(w):g(k)}u.alloc=function(k,w,S){return N(k,w,S)};function T(k){return d(k),g(k<0?0:U(k)|0)}u.allocUnsafe=function(k){return T(k)},u.allocUnsafeSlow=function(k){return T(k)};function I(k,w){if((typeof w!="string"||w==="")&&(w="utf8"),!u.isEncoding(w))throw new TypeError('"encoding" must be a valid string encoding');var S=ct(k,w)|0,R=g(S),P=R.write(k,w);return P!==S&&(R=R.slice(0,P)),R}function D(k){for(var w=k.length<0?0:U(k.length)|0,S=g(w),R=0;R<w;R+=1)S[R]=k[R]&255;return S}function C(k,w,S){if(w<0||k.byteLength<w)throw new RangeError("'offset' is out of bounds");if(k.byteLength<w+(S||0))throw new RangeError("'length' is out of bounds");var R;return w===void 0&&S===void 0?R=new Uint8Array(k):S===void 0?R=new Uint8Array(k,w):R=new Uint8Array(k,w,S),R.__proto__=u.prototype,R}function W(k){if(u.isBuffer(k)){var w=U(k.length)|0,S=g(w);return S.length===0||k.copy(S,0,0,w),S}if(k){if(le(k)||"length"in k)return typeof k.length!="number"||Re(k.length)?g(0):D(k);if(k.type==="Buffer"&&Array.isArray(k.data))return D(k.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function U(k){if(k>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return k|0}function B(k){return+k!=k&&(k=0),u.alloc(+k)}u.isBuffer=function(w){return w!=null&&w._isBuffer===!0},u.compare=function(w,S){if(!u.isBuffer(w)||!u.isBuffer(S))throw new TypeError("Arguments must be Buffers");if(w===S)return 0;for(var R=w.length,P=S.length,Y=0,$=Math.min(R,P);Y<$;++Y)if(w[Y]!==S[Y]){R=w[Y],P=S[Y];break}return R<P?-1:P<R?1:0},u.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(w,S){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return u.alloc(0);var R;if(S===void 0)for(S=0,R=0;R<w.length;++R)S+=w[R].length;var P=u.allocUnsafe(S),Y=0;for(R=0;R<w.length;++R){var $=w[R];if(!u.isBuffer($))throw new TypeError('"list" argument must be an Array of Buffers');$.copy(P,Y),Y+=$.length}return P};function ct(k,w){if(u.isBuffer(k))return k.length;if(le(k)||Jt(k))return k.byteLength;typeof k!="string"&&(k=""+k);var S=k.length;if(S===0)return 0;for(var R=!1;;)switch(w){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":case void 0:return it(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return bt(k).length;default:if(R)return it(k).length;w=(""+w).toLowerCase(),R=!0}}u.byteLength=ct;function J(k,w,S){var R=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,w>>>=0,S<=w))return"";for(k||(k="utf8");;)switch(k){case"hex":return Nt(this,w,S);case"utf8":case"utf-8":return Gt(this,w,S);case"ascii":return et(this,w,S);case"latin1":case"binary":return pt(this,w,S);case"base64":return _t(this,w,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,w,S);default:if(R)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),R=!0}}u.prototype._isBuffer=!0;function gt(k,w,S){var R=k[w];k[w]=k[S],k[S]=R}u.prototype.swap16=function(){var w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var S=0;S<w;S+=2)gt(this,S,S+1);return this},u.prototype.swap32=function(){var w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var S=0;S<w;S+=4)gt(this,S,S+3),gt(this,S+1,S+2);return this},u.prototype.swap64=function(){var w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var S=0;S<w;S+=8)gt(this,S,S+7),gt(this,S+1,S+6),gt(this,S+2,S+5),gt(this,S+3,S+4);return this},u.prototype.toString=function(){var w=this.length;return w===0?"":arguments.length===0?Gt(this,0,w):J.apply(this,arguments)},u.prototype.equals=function(w){if(!u.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:u.compare(this,w)===0},u.prototype.inspect=function(){var w="",S=t.INSPECT_MAX_BYTES;return this.length>0&&(w=this.toString("hex",0,S).match(/.{2}/g).join(" "),this.length>S&&(w+=" ... ")),"<Buffer "+w+">"},u.prototype.compare=function(w,S,R,P,Y){if(!u.isBuffer(w))throw new TypeError("Argument must be a Buffer");if(S===void 0&&(S=0),R===void 0&&(R=w?w.length:0),P===void 0&&(P=0),Y===void 0&&(Y=this.length),S<0||R>w.length||P<0||Y>this.length)throw new RangeError("out of range index");if(P>=Y&&S>=R)return 0;if(P>=Y)return-1;if(S>=R)return 1;if(S>>>=0,R>>>=0,P>>>=0,Y>>>=0,this===w)return 0;for(var $=Y-P,Rt=R-S,Ct=Math.min($,Rt),Mt=this.slice(P,Y),Kt=w.slice(S,R),Bt=0;Bt<Ct;++Bt)if(Mt[Bt]!==Kt[Bt]){$=Mt[Bt],Rt=Kt[Bt];break}return $<Rt?-1:Rt<$?1:0};function lt(k,w,S,R,P){if(k.length===0)return-1;if(typeof S=="string"?(R=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,Re(S)&&(S=P?0:k.length-1),S<0&&(S=k.length+S),S>=k.length){if(P)return-1;S=k.length-1}else if(S<0)if(P)S=0;else return-1;if(typeof w=="string"&&(w=u.from(w,R)),u.isBuffer(w))return w.length===0?-1:M(k,w,S,R,P);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(k,w,S):Uint8Array.prototype.lastIndexOf.call(k,w,S):M(k,[w],S,R,P);throw new TypeError("val must be string, number or Buffer")}function M(k,w,S,R,P){var Y=1,$=k.length,Rt=w.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(k.length<2||w.length<2)return-1;Y=2,$/=2,Rt/=2,S/=2}function Ct(ci,Je){return Y===1?ci[Je]:ci.readUInt16BE(Je*Y)}var Mt;if(P){var Kt=-1;for(Mt=S;Mt<$;Mt++)if(Ct(k,Mt)===Ct(w,Kt===-1?0:Mt-Kt)){if(Kt===-1&&(Kt=Mt),Mt-Kt+1===Rt)return Kt*Y}else Kt!==-1&&(Mt-=Mt-Kt),Kt=-1}else for(S+Rt>$&&(S=$-Rt),Mt=S;Mt>=0;Mt--){for(var Bt=!0,Te=0;Te<Rt;Te++)if(Ct(k,Mt+Te)!==Ct(w,Te)){Bt=!1;break}if(Bt)return Mt}return-1}u.prototype.includes=function(w,S,R){return this.indexOf(w,S,R)!==-1},u.prototype.indexOf=function(w,S,R){return lt(this,w,S,R,!0)},u.prototype.lastIndexOf=function(w,S,R){return lt(this,w,S,R,!1)};function tt(k,w,S,R){S=Number(S)||0;var P=k.length-S;R?(R=Number(R),R>P&&(R=P)):R=P;var Y=w.length;if(Y%2!==0)throw new TypeError("Invalid hex string");R>Y/2&&(R=Y/2);for(var $=0;$<R;++$){var Rt=parseInt(w.substr($*2,2),16);if(Re(Rt))return $;k[S+$]=Rt}return $}function ut(k,w,S,R){return St(it(w,k.length-S),k,S,R)}function Ft(k,w,S,R){return St(vt(w),k,S,R)}function mt(k,w,S,R){return Ft(k,w,S,R)}function At(k,w,S,R){return St(bt(w),k,S,R)}function Tt(k,w,S,R){return St(ot(w,k.length-S),k,S,R)}u.prototype.write=function(w,S,R,P){if(S===void 0)P="utf8",R=this.length,S=0;else if(R===void 0&&typeof S=="string")P=S,R=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(R)?(R=R>>>0,P===void 0&&(P="utf8")):(P=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Y=this.length-S;if((R===void 0||R>Y)&&(R=Y),w.length>0&&(R<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var $=!1;;)switch(P){case"hex":return tt(this,w,S,R);case"utf8":case"utf-8":return ut(this,w,S,R);case"ascii":return Ft(this,w,S,R);case"latin1":case"binary":return mt(this,w,S,R);case"base64":return At(this,w,S,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tt(this,w,S,R);default:if($)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),$=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _t(k,w,S){return w===0&&S===k.length?h.fromByteArray(k):h.fromByteArray(k.slice(w,S))}function Gt(k,w,S){S=Math.min(k.length,S);for(var R=[],P=w;P<S;){var Y=k[P],$=null,Rt=Y>239?4:Y>223?3:Y>191?2:1;if(P+Rt<=S){var Ct,Mt,Kt,Bt;switch(Rt){case 1:Y<128&&($=Y);break;case 2:Ct=k[P+1],(Ct&192)===128&&(Bt=(Y&31)<<6|Ct&63,Bt>127&&($=Bt));break;case 3:Ct=k[P+1],Mt=k[P+2],(Ct&192)===128&&(Mt&192)===128&&(Bt=(Y&15)<<12|(Ct&63)<<6|Mt&63,Bt>2047&&(Bt<55296||Bt>57343)&&($=Bt));break;case 4:Ct=k[P+1],Mt=k[P+2],Kt=k[P+3],(Ct&192)===128&&(Mt&192)===128&&(Kt&192)===128&&(Bt=(Y&15)<<18|(Ct&63)<<12|(Mt&63)<<6|Kt&63,Bt>65535&&Bt<1114112&&($=Bt))}}$===null?($=65533,Rt=1):$>65535&&($-=65536,R.push($>>>10&1023|55296),$=56320|$&1023),R.push($),P+=Rt}return q(R)}var H=4096;function q(k){var w=k.length;if(w<=H)return String.fromCharCode.apply(String,k);for(var S="",R=0;R<w;)S+=String.fromCharCode.apply(String,k.slice(R,R+=H));return S}function et(k,w,S){var R="";S=Math.min(k.length,S);for(var P=w;P<S;++P)R+=String.fromCharCode(k[P]&127);return R}function pt(k,w,S){var R="";S=Math.min(k.length,S);for(var P=w;P<S;++P)R+=String.fromCharCode(k[P]);return R}function Nt(k,w,S){var R=k.length;(!w||w<0)&&(w=0),(!S||S<0||S>R)&&(S=R);for(var P="",Y=w;Y<S;++Y)P+=Q(k[Y]);return P}function xt(k,w,S){for(var R=k.slice(w,S),P="",Y=0;Y<R.length;Y+=2)P+=String.fromCharCode(R[Y]+R[Y+1]*256);return P}u.prototype.slice=function(w,S){var R=this.length;w=~~w,S=S===void 0?R:~~S,w<0?(w+=R,w<0&&(w=0)):w>R&&(w=R),S<0?(S+=R,S<0&&(S=0)):S>R&&(S=R),S<w&&(S=w);var P=this.subarray(w,S);return P.__proto__=u.prototype,P};function It(k,w,S){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+w>S)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(w,S,R){w=w>>>0,S=S>>>0,R||It(w,S,this.length);for(var P=this[w],Y=1,$=0;++$<S&&(Y*=256);)P+=this[w+$]*Y;return P},u.prototype.readUIntBE=function(w,S,R){w=w>>>0,S=S>>>0,R||It(w,S,this.length);for(var P=this[w+--S],Y=1;S>0&&(Y*=256);)P+=this[w+--S]*Y;return P},u.prototype.readUInt8=function(w,S){return w=w>>>0,S||It(w,1,this.length),this[w]},u.prototype.readUInt16LE=function(w,S){return w=w>>>0,S||It(w,2,this.length),this[w]|this[w+1]<<8},u.prototype.readUInt16BE=function(w,S){return w=w>>>0,S||It(w,2,this.length),this[w]<<8|this[w+1]},u.prototype.readUInt32LE=function(w,S){return w=w>>>0,S||It(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},u.prototype.readUInt32BE=function(w,S){return w=w>>>0,S||It(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},u.prototype.readIntLE=function(w,S,R){w=w>>>0,S=S>>>0,R||It(w,S,this.length);for(var P=this[w],Y=1,$=0;++$<S&&(Y*=256);)P+=this[w+$]*Y;return Y*=128,P>=Y&&(P-=Math.pow(2,8*S)),P},u.prototype.readIntBE=function(w,S,R){w=w>>>0,S=S>>>0,R||It(w,S,this.length);for(var P=S,Y=1,$=this[w+--P];P>0&&(Y*=256);)$+=this[w+--P]*Y;return Y*=128,$>=Y&&($-=Math.pow(2,8*S)),$},u.prototype.readInt8=function(w,S){return w=w>>>0,S||It(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},u.prototype.readInt16LE=function(w,S){w=w>>>0,S||It(w,2,this.length);var R=this[w]|this[w+1]<<8;return R&32768?R|4294901760:R},u.prototype.readInt16BE=function(w,S){w=w>>>0,S||It(w,2,this.length);var R=this[w+1]|this[w]<<8;return R&32768?R|4294901760:R},u.prototype.readInt32LE=function(w,S){return w=w>>>0,S||It(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},u.prototype.readInt32BE=function(w,S){return w=w>>>0,S||It(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},u.prototype.readFloatLE=function(w,S){return w=w>>>0,S||It(w,4,this.length),l.read(this,w,!0,23,4)},u.prototype.readFloatBE=function(w,S){return w=w>>>0,S||It(w,4,this.length),l.read(this,w,!1,23,4)},u.prototype.readDoubleLE=function(w,S){return w=w>>>0,S||It(w,8,this.length),l.read(this,w,!0,52,8)},u.prototype.readDoubleBE=function(w,S){return w=w>>>0,S||It(w,8,this.length),l.read(this,w,!1,52,8)};function Ot(k,w,S,R,P,Y){if(!u.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>P||w<Y)throw new RangeError('"value" argument is out of bounds');if(S+R>k.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(w,S,R,P){if(w=+w,S=S>>>0,R=R>>>0,!P){var Y=Math.pow(2,8*R)-1;Ot(this,w,S,R,Y,0)}var $=1,Rt=0;for(this[S]=w&255;++Rt<R&&($*=256);)this[S+Rt]=w/$&255;return S+R},u.prototype.writeUIntBE=function(w,S,R,P){if(w=+w,S=S>>>0,R=R>>>0,!P){var Y=Math.pow(2,8*R)-1;Ot(this,w,S,R,Y,0)}var $=R-1,Rt=1;for(this[S+$]=w&255;--$>=0&&(Rt*=256);)this[S+$]=w/Rt&255;return S+R},u.prototype.writeUInt8=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,1,255,0),this[S]=w&255,S+1},u.prototype.writeUInt16LE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,2,65535,0),this[S]=w&255,this[S+1]=w>>>8,S+2},u.prototype.writeUInt16BE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,2,65535,0),this[S]=w>>>8,this[S+1]=w&255,S+2},u.prototype.writeUInt32LE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,4,4294967295,0),this[S+3]=w>>>24,this[S+2]=w>>>16,this[S+1]=w>>>8,this[S]=w&255,S+4},u.prototype.writeUInt32BE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,4,4294967295,0),this[S]=w>>>24,this[S+1]=w>>>16,this[S+2]=w>>>8,this[S+3]=w&255,S+4},u.prototype.writeIntLE=function(w,S,R,P){if(w=+w,S=S>>>0,!P){var Y=Math.pow(2,8*R-1);Ot(this,w,S,R,Y-1,-Y)}var $=0,Rt=1,Ct=0;for(this[S]=w&255;++$<R&&(Rt*=256);)w<0&&Ct===0&&this[S+$-1]!==0&&(Ct=1),this[S+$]=(w/Rt>>0)-Ct&255;return S+R},u.prototype.writeIntBE=function(w,S,R,P){if(w=+w,S=S>>>0,!P){var Y=Math.pow(2,8*R-1);Ot(this,w,S,R,Y-1,-Y)}var $=R-1,Rt=1,Ct=0;for(this[S+$]=w&255;--$>=0&&(Rt*=256);)w<0&&Ct===0&&this[S+$+1]!==0&&(Ct=1),this[S+$]=(w/Rt>>0)-Ct&255;return S+R},u.prototype.writeInt8=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,1,127,-128),w<0&&(w=255+w+1),this[S]=w&255,S+1},u.prototype.writeInt16LE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,2,32767,-32768),this[S]=w&255,this[S+1]=w>>>8,S+2},u.prototype.writeInt16BE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,2,32767,-32768),this[S]=w>>>8,this[S+1]=w&255,S+2},u.prototype.writeInt32LE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,4,2147483647,-2147483648),this[S]=w&255,this[S+1]=w>>>8,this[S+2]=w>>>16,this[S+3]=w>>>24,S+4},u.prototype.writeInt32BE=function(w,S,R){return w=+w,S=S>>>0,R||Ot(this,w,S,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[S]=w>>>24,this[S+1]=w>>>16,this[S+2]=w>>>8,this[S+3]=w&255,S+4};function Ht(k,w,S,R,P,Y){if(S+R>k.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function zt(k,w,S,R,P){return w=+w,S=S>>>0,P||Ht(k,w,S,4,34028234663852886e22,-34028234663852886e22),l.write(k,w,S,R,23,4),S+4}u.prototype.writeFloatLE=function(w,S,R){return zt(this,w,S,!0,R)},u.prototype.writeFloatBE=function(w,S,R){return zt(this,w,S,!1,R)};function re(k,w,S,R,P){return w=+w,S=S>>>0,P||Ht(k,w,S,8,17976931348623157e292,-17976931348623157e292),l.write(k,w,S,R,52,8),S+8}u.prototype.writeDoubleLE=function(w,S,R){return re(this,w,S,!0,R)},u.prototype.writeDoubleBE=function(w,S,R){return re(this,w,S,!1,R)},u.prototype.copy=function(w,S,R,P){if(R||(R=0),!P&&P!==0&&(P=this.length),S>=w.length&&(S=w.length),S||(S=0),P>0&&P<R&&(P=R),P===R||w.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("sourceStart out of bounds");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),w.length-S<P-R&&(P=w.length-S+R);var Y=P-R,$;if(this===w&&R<S&&S<P)for($=Y-1;$>=0;--$)w[$+S]=this[$+R];else if(Y<1e3)for($=0;$<Y;++$)w[$+S]=this[$+R];else Uint8Array.prototype.set.call(w,this.subarray(R,R+Y),S);return Y},u.prototype.fill=function(w,S,R,P){if(typeof w=="string"){if(typeof S=="string"?(P=S,S=0,R=this.length):typeof R=="string"&&(P=R,R=this.length),w.length===1){var Y=w.charCodeAt(0);Y<256&&(w=Y)}if(P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!u.isEncoding(P))throw new TypeError("Unknown encoding: "+P)}else typeof w=="number"&&(w=w&255);if(S<0||this.length<S||this.length<R)throw new RangeError("Out of range index");if(R<=S)return this;S=S>>>0,R=R===void 0?this.length:R>>>0,w||(w=0);var $;if(typeof w=="number")for($=S;$<R;++$)this[$]=w;else{var Rt=u.isBuffer(w)?w:new u(w,P),Ct=Rt.length;for($=0;$<R-S;++$)this[$+S]=Rt[$%Ct]}return this};var O=/[^+/0-9A-Za-z-_]/g;function A(k){if(k=k.trim().replace(O,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Q(k){return k<16?"0"+k.toString(16):k.toString(16)}function it(k,w){w=w||1/0;for(var S,R=k.length,P=null,Y=[],$=0;$<R;++$){if(S=k.charCodeAt($),S>55295&&S<57344){if(!P){if(S>56319){(w-=3)>-1&&Y.push(239,191,189);continue}else if($+1===R){(w-=3)>-1&&Y.push(239,191,189);continue}P=S;continue}if(S<56320){(w-=3)>-1&&Y.push(239,191,189),P=S;continue}S=(P-55296<<10|S-56320)+65536}else P&&(w-=3)>-1&&Y.push(239,191,189);if(P=null,S<128){if((w-=1)<0)break;Y.push(S)}else if(S<2048){if((w-=2)<0)break;Y.push(S>>6|192,S&63|128)}else if(S<65536){if((w-=3)<0)break;Y.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((w-=4)<0)break;Y.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return Y}function vt(k){for(var w=[],S=0;S<k.length;++S)w.push(k.charCodeAt(S)&255);return w}function ot(k,w){for(var S,R,P,Y=[],$=0;$<k.length&&!((w-=2)<0);++$)S=k.charCodeAt($),R=S>>8,P=S%256,Y.push(P),Y.push(R);return Y}function bt(k){return h.toByteArray(A(k))}function St(k,w,S,R){for(var P=0;P<R&&!(P+S>=w.length||P>=k.length);++P)w[P+S]=k[P];return P}function Jt(k){return k instanceof ArrayBuffer||k!=null&&k.constructor!=null&&k.constructor.name==="ArrayBuffer"&&typeof k.byteLength=="number"}function le(k){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(k)}function Re(k){return k!==k}}).call(t,n(1))},function(y,t){"use strict";t.byteLength=u,t.toByteArray=_,t.fromByteArray=T;for(var n=[],f=[],h=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,x=l.length;v<x;++v)n[v]=l[v],f[l.charCodeAt(v)]=v;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function g(I){var D=I.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return I[D-2]==="="?2:I[D-1]==="="?1:0}function u(I){return I.length*3/4-g(I)}function _(I){var D,C,W,U,B,ct,J=I.length;B=g(I),ct=new h(J*3/4-B),W=B>0?J-4:J;var gt=0;for(D=0,C=0;D<W;D+=4,C+=3)U=f[I.charCodeAt(D)]<<18|f[I.charCodeAt(D+1)]<<12|f[I.charCodeAt(D+2)]<<6|f[I.charCodeAt(D+3)],ct[gt++]=U>>16&255,ct[gt++]=U>>8&255,ct[gt++]=U&255;return B===2?(U=f[I.charCodeAt(D)]<<2|f[I.charCodeAt(D+1)]>>4,ct[gt++]=U&255):B===1&&(U=f[I.charCodeAt(D)]<<10|f[I.charCodeAt(D+1)]<<4|f[I.charCodeAt(D+2)]>>2,ct[gt++]=U>>8&255,ct[gt++]=U&255),ct}function d(I){return n[I>>18&63]+n[I>>12&63]+n[I>>6&63]+n[I&63]}function N(I,D,C){for(var W,U=[],B=D;B<C;B+=3)W=(I[B]<<16)+(I[B+1]<<8)+I[B+2],U.push(d(W));return U.join("")}function T(I){for(var D,C=I.length,W=C%3,U="",B=[],ct=16383,J=0,gt=C-W;J<gt;J+=ct)B.push(N(I,J,J+ct>gt?gt:J+ct));return W===1?(D=I[C-1],U+=n[D>>2],U+=n[D<<4&63],U+="=="):W===2&&(D=(I[C-2]<<8)+I[C-1],U+=n[D>>10],U+=n[D>>4&63],U+=n[D<<2&63],U+="="),B.push(U),B.join("")}},function(y,t){t.read=function(n,f,h,l,v){var x,g,u=v*8-l-1,_=(1<<u)-1,d=_>>1,N=-7,T=h?v-1:0,I=h?-1:1,D=n[f+T];for(T+=I,x=D&(1<<-N)-1,D>>=-N,N+=u;N>0;x=x*256+n[f+T],T+=I,N-=8);for(g=x&(1<<-N)-1,x>>=-N,N+=l;N>0;g=g*256+n[f+T],T+=I,N-=8);if(x===0)x=1-d;else{if(x===_)return g?NaN:(D?-1:1)*(1/0);g=g+Math.pow(2,l),x=x-d}return(D?-1:1)*g*Math.pow(2,x-l)},t.write=function(n,f,h,l,v,x){var g,u,_,d=x*8-v-1,N=(1<<d)-1,T=N>>1,I=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=l?0:x-1,C=l?1:-1,W=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(u=isNaN(f)?1:0,g=N):(g=Math.floor(Math.log(f)/Math.LN2),f*(_=Math.pow(2,-g))<1&&(g--,_*=2),g+T>=1?f+=I/_:f+=I*Math.pow(2,1-T),f*_>=2&&(g++,_/=2),g+T>=N?(u=0,g=N):g+T>=1?(u=(f*_-1)*Math.pow(2,v),g=g+T):(u=f*Math.pow(2,T-1)*Math.pow(2,v),g=0));v>=8;n[h+D]=u&255,D+=C,u/=256,v-=8);for(g=g<<v|u,d+=v;d>0;n[h+D]=g&255,D+=C,g/=256,d-=8);n[h+D-C]|=W*128}},function(y,t){y.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}},function(y,t,n){"use strict";var f=n(7),h=new f,l={};function v(g){l[g]||(typeof h[g]=="function"?l[g]=function(){return h[g].apply(h,arguments)}:l[g]=h[g])}for(var x in h)v(x);l.initializeTTYs=function(){h.stdin===null&&(h.initializeTTYs(),l.stdin=h.stdin,l.stdout=h.stdout,l.stderr=h.stderr)},h.nextTick(function(){l.initializeTTYs()}),y.exports=l},function(y,t,n){(function(f){"use strict";var h=this&&this.__extends||function(_,d){for(var N in d)d.hasOwnProperty(N)&&(_[N]=d[N]);function T(){this.constructor=_}_.prototype=d===null?Object.create(d):(T.prototype=d.prototype,new T)},l=n(8),v=null,x=function(){function _(d,N){this.fun=d,this.array=N}return _.prototype.run=function(){this.fun.apply(null,this.array)},_}(),g=function(){function _(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return _.prototype.push=function(d){var N=this;this._queue.push(d)===1&&!this._draining&&setTimeout(function(){return N._drainQueue()},0)},_.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},_.prototype._drainQueue=function(){var d=this;if(!this._draining){var N=setTimeout(function(){return d._cleanUpNextTick()});this._draining=!0;for(var T=this._queue.length;T;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<T;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,T=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(N)}},_}(),u=function(_){h(d,_);function d(){_.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new g,this.execPath=f,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return d.prototype.chdir=function(N){v===null&&(v=n(9)),this._cwd=v.resolve(N)},d.prototype.cwd=function(){return this._cwd},d.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},d.prototype.nextTick=function(N){for(var T=[],I=1;I<arguments.length;I++)T[I-1]=arguments[I];this._queue.push(new x(N,T))},d.prototype.abort=function(){this.emit("abort")},d.prototype.exit=function(N){this.exitCode=N,this.emit("exit",[N])},d.prototype.getgid=function(){return this._gid},d.prototype.setgid=function(N){typeof N=="number"?this._gid=N:this._gid=1},d.prototype.getuid=function(){return this._uid},d.prototype.setuid=function(N){typeof N=="number"?this._uid=N:this._uid=1},d.prototype.kill=function(N,T){this.emit("kill",[N,T])},d.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},d.prototype.umask=function(N){N===void 0&&(N=this._mask);var T=this._mask;return this._mask=N,this.emit("umask",[N]),T},d.prototype.hrtime=function(){var N;typeof performance<"u"?N=performance.now():Date.now?N=Date.now():N=new Date().getTime();var T=N/1e3|0;return N-=T*1e3,N=N*1e6|0,[T,N]},d.prototype.initializeTTYs=function(){if(this.stdout===null){var N=n(10);this.stdout=new N,this.stderr=new N,this.stdin=new N}},d.prototype.disconnect=function(){},d}(l.EventEmitter);y.exports=u}).call(t,"/")},function(y,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}y.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(x){if(!h(x)||x<0||isNaN(x))throw TypeError("n must be a positive number");return this._maxListeners=x,this},n.prototype.emit=function(x){var g,u,_,d,N,T;if(this._events||(this._events={}),x==="error"&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if(g=arguments[1],g instanceof Error)throw g;var I=new Error('Uncaught, unspecified "error" event. ('+g+")");throw I.context=g,I}if(u=this._events[x],v(u))return!1;if(f(u))switch(arguments.length){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),u.apply(this,d)}else if(l(u))for(d=Array.prototype.slice.call(arguments,1),T=u.slice(),_=T.length,N=0;N<_;N++)T[N].apply(this,d);return!0},n.prototype.addListener=function(x,g){var u;if(!f(g))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",x,f(g.listener)?g.listener:g),this._events[x]?l(this._events[x])?this._events[x].push(g):this._events[x]=[this._events[x],g]:this._events[x]=g,l(this._events[x])&&!this._events[x].warned&&(v(this._maxListeners)?u=n.defaultMaxListeners:u=this._maxListeners,u&&u>0&&this._events[x].length>u&&(this._events[x].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[x].length),typeof console.trace=="function"&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(x,g){if(!f(g))throw TypeError("listener must be a function");var u=!1;function _(){this.removeListener(x,_),u||(u=!0,g.apply(this,arguments))}return _.listener=g,this.on(x,_),this},n.prototype.removeListener=function(x,g){var u,_,d,N;if(!f(g))throw TypeError("listener must be a function");if(!this._events||!this._events[x])return this;if(u=this._events[x],d=u.length,_=-1,u===g||f(u.listener)&&u.listener===g)delete this._events[x],this._events.removeListener&&this.emit("removeListener",x,g);else if(l(u)){for(N=d;N-- >0;)if(u[N]===g||u[N].listener&&u[N].listener===g){_=N;break}if(_<0)return this;u.length===1?(u.length=0,delete this._events[x]):u.splice(_,1),this._events.removeListener&&this.emit("removeListener",x,g)}return this},n.prototype.removeAllListeners=function(x){var g,u;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[x]&&delete this._events[x],this;if(arguments.length===0){for(g in this._events)g!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events={},this}if(u=this._events[x],f(u))this.removeListener(x,u);else if(u)for(;u.length;)this.removeListener(x,u[u.length-1]);return delete this._events[x],this},n.prototype.listeners=function(x){var g;return!this._events||!this._events[x]?g=[]:f(this._events[x])?g=[this._events[x]]:g=this._events[x].slice(),g},n.prototype.listenerCount=function(x){if(this._events){var g=this._events[x];if(f(g))return 1;if(g)return g.length}return 0},n.listenerCount=function(x,g){return x.listenerCount(g)};function f(x){return typeof x=="function"}function h(x){return typeof x=="number"}function l(x){return typeof x=="object"&&x!==null}function v(x){return x===void 0}},function(y,t,n){(function(f){"use strict";var h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function l(g){var u=h.exec(g);return u.shift(),u}var v=function(){function g(){}return g.normalize=function(u){u===""&&(u=".");var _=u.charAt(0)===g.sep;u=g._removeDuplicateSeps(u);for(var d=u.split(g.sep),N=[],T=0;T<d.length;T++){var I=d[T];I!=="."&&(I===".."&&(_||!_&&N.length>0&&N[0]!=="..")?N.pop():N.push(I))}if(!_&&N.length<2)switch(N.length){case 1:N[0]===""&&N.unshift(".");break;default:N.push(".")}return u=N.join(g.sep),_&&u.charAt(0)!==g.sep&&(u=g.sep+u),u},g.join=function(){for(var u=[],_=0;_<arguments.length;_++)u[_-0]=arguments[_];for(var d=[],N=0;N<u.length;N++){var T=u[N];if(typeof T!="string")throw new TypeError("Invalid argument type to path.join: "+typeof T);T!==""&&d.push(T)}return g.normalize(d.join(g.sep))},g.resolve=function(){for(var u=[],_=0;_<arguments.length;_++)u[_-0]=arguments[_];for(var d=[],N=0;N<u.length;N++){var T=u[N];if(typeof T!="string")throw new TypeError("Invalid argument type to path.join: "+typeof T);T!==""&&(T.charAt(0)===g.sep&&(d=[]),d.push(T))}var I=g.normalize(d.join(g.sep));if(I.length>1&&I.charAt(I.length-1)===g.sep)return I.substr(0,I.length-1);if(I.charAt(0)!==g.sep){I.charAt(0)==="."&&(I.length===1||I.charAt(1)===g.sep)&&(I=I.length===1?"":I.substr(2));var D=f.cwd();I!==""?I=this.normalize(D+(D!=="/"?g.sep:"")+I):I=D}return I},g.relative=function(u,_){var d;u=g.resolve(u),_=g.resolve(_);var N=u.split(g.sep),T=_.split(g.sep);T.shift(),N.shift();var I=0,D=[];for(d=0;d<N.length;d++){var C=N[d];if(C!==T[d]){I=N.length-d;break}}D=T.slice(d),N.length===1&&N[0]===""&&(I=0),I>N.length&&(I=N.length);var W="";for(d=0;d<I;d++)W+="../";return W+=D.join(g.sep),W.length>1&&W.charAt(W.length-1)===g.sep&&(W=W.substr(0,W.length-1)),W},g.dirname=function(u){u=g._removeDuplicateSeps(u);var _=u.charAt(0)===g.sep,d=u.split(g.sep);return d.pop()===""&&d.length>0&&d.pop(),d.length>1||d.length===1&&!_?d.join(g.sep):_?g.sep:"."},g.basename=function(u,_){if(_===void 0&&(_=""),u==="")return u;u=g.normalize(u);var d=u.split(g.sep),N=d[d.length-1];if(N===""&&d.length>1)return d[d.length-2];if(_.length>0){var T=N.substr(N.length-_.length);if(T===_)return N.substr(0,N.length-_.length)}return N},g.extname=function(u){u=g.normalize(u);var _=u.split(g.sep);if(u=_.pop(),u===""&&_.length>0&&(u=_.pop()),u==="..")return"";var d=u.lastIndexOf(".");return d===-1||d===0?"":u.substr(d)},g.isAbsolute=function(u){return u.length>0&&u.charAt(0)===g.sep},g._makeLong=function(u){return u},g.parse=function(u){var _=l(u);return{root:_[0],dir:_[0]+_[1].slice(0,-1),base:_[2],ext:_[3],name:_[2].slice(0,_[2].length-_[3].length)}},g.format=function(u){if(u===null||typeof u!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof u);var _=u.root||"";if(typeof _!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof u.root);var d=u.dir?u.dir+g.sep:"",N=u.base||"";return d+N},g._removeDuplicateSeps=function(u){return u=u.replace(this._replaceRegex,this.sep),u},g.sep="/",g._replaceRegex=new RegExp("//+","g"),g.delimiter=":",g.posix=g,g.win32=g,g}(),x=v;y.exports=v}).call(t,n(6))},function(y,t,n){(function(f){"use strict";var h=this&&this.__extends||function(x,g){for(var u in g)g.hasOwnProperty(u)&&(x[u]=g[u]);function _(){this.constructor=x}x.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)},l=n(11),v=function(x){h(g,x);function g(){x.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return g.prototype.setRawMode=function(u){this.isRaw!==u&&(this.isRaw=u,this.emit("modeChange"))},g.prototype.changeColumns=function(u){u!==this.columns&&(this.columns=u,this.emit("resize"))},g.prototype.changeRows=function(u){u!==this.rows&&(this.rows=u,this.emit("resize"))},g.isatty=function(u){return u&&u instanceof g},g.prototype._write=function(u,_,d){var N;try{var T;typeof u=="string"?T=new f(u,_):T=u,this._bufferedWrites.push(T),this._waitingForWrites&&this._read(1024)}catch(I){N=I}finally{d(N)}},g.prototype._read=function(u){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},g}(l.Duplex);y.exports=v}).call(t,n(1))},function(y,t,n){y.exports=l;var f=n(8).EventEmitter,h=n(12);h(l,f),l.Readable=n(13),l.Writable=n(27),l.Duplex=n(28),l.Transform=n(29),l.PassThrough=n(30),l.Stream=l;function l(){f.call(this)}l.prototype.pipe=function(v,x){var g=this;function u(C){v.writable&&v.write(C)===!1&&g.pause&&g.pause()}g.on("data",u);function _(){g.readable&&g.resume&&g.resume()}v.on("drain",_),!v._isStdio&&(!x||x.end!==!1)&&(g.on("end",N),g.on("close",T));var d=!1;function N(){d||(d=!0,v.end())}function T(){d||(d=!0,typeof v.destroy=="function"&&v.destroy())}function I(C){if(D(),f.listenerCount(this,"error")===0)throw C}g.on("error",I),v.on("error",I);function D(){g.removeListener("data",u),v.removeListener("drain",_),g.removeListener("end",N),g.removeListener("close",T),g.removeListener("error",I),v.removeListener("error",I),g.removeListener("end",D),g.removeListener("close",D),v.removeListener("close",D)}return g.on("end",D),g.on("close",D),v.on("close",D),v.emit("pipe",g),v}},function(y,t){typeof Object.create=="function"?y.exports=function(f,h){f.super_=h,f.prototype=Object.create(h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:y.exports=function(f,h){f.super_=h;var l=function(){};l.prototype=h.prototype,f.prototype=new l,f.prototype.constructor=f}},function(y,t,n){(function(f){var h=function(){try{return n(11)}catch{}}();t=y.exports=n(14),t.Stream=h||t,t.Readable=t,t.Writable=n(22),t.Duplex=n(21),t.Transform=n(25),t.PassThrough=n(26),!f.browser&&f.env.READABLE_STREAM==="disable"&&h&&(y.exports=h)}).call(t,n(6))},function(y,t,n){(function(f){"use strict";y.exports=B;var h=n(15),l=n(16),v;B.ReadableState=U;var x=n(8).EventEmitter,g=function(O,A){return O.listeners(A).length},u;(function(){try{u=n(11)}catch{}finally{u||(u=n(8).EventEmitter)}})();var _=n(2).Buffer,d=n(17),N=n(18);N.inherits=n(12);var T=n(19),I=void 0;T&&T.debuglog?I=T.debuglog("stream"):I=function(){};var D=n(20),C;N.inherits(B,u);function W(O,A,Q){if(typeof O.prependListener=="function")return O.prependListener(A,Q);!O._events||!O._events[A]?O.on(A,Q):l(O._events[A])?O._events[A].unshift(Q):O._events[A]=[Q,O._events[A]]}function U(O,A){v=v||n(21),O=O||{},this.objectMode=!!O.objectMode,A instanceof v&&(this.objectMode=this.objectMode||!!O.readableObjectMode);var Q=O.highWaterMark,it=this.objectMode?16:16*1024;this.highWaterMark=Q||Q===0?Q:it,this.highWaterMark=~~this.highWaterMark,this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(C||(C=n(24).StringDecoder),this.decoder=new C(O.encoding),this.encoding=O.encoding)}function B(O){if(v=v||n(21),!(this instanceof B))return new B(O);this._readableState=new U(O,this),this.readable=!0,O&&typeof O.read=="function"&&(this._read=O.read),u.call(this)}B.prototype.push=function(O,A){var Q=this._readableState;return!Q.objectMode&&typeof O=="string"&&(A=A||Q.defaultEncoding,A!==Q.encoding&&(O=d.from(O,A),A="")),ct(this,Q,O,A,!1)},B.prototype.unshift=function(O){var A=this._readableState;return ct(this,A,O,"",!0)},B.prototype.isPaused=function(){return this._readableState.flowing===!1};function ct(O,A,Q,it,vt){var ot=tt(A,Q);if(ot)O.emit("error",ot);else if(Q===null)A.reading=!1,ut(O,A);else if(A.objectMode||Q&&Q.length>0)if(A.ended&&!vt){var bt=new Error("stream.push() after EOF");O.emit("error",bt)}else if(A.endEmitted&&vt){var St=new Error("stream.unshift() after end event");O.emit("error",St)}else{var Jt;A.decoder&&!vt&&!it&&(Q=A.decoder.write(Q),Jt=!A.objectMode&&Q.length===0),vt||(A.reading=!1),Jt||(A.flowing&&A.length===0&&!A.sync?(O.emit("data",Q),O.read(0)):(A.length+=A.objectMode?1:Q.length,vt?A.buffer.unshift(Q):A.buffer.push(Q),A.needReadable&&Ft(O))),At(O,A)}else vt||(A.reading=!1);return J(A)}function J(O){return!O.ended&&(O.needReadable||O.length<O.highWaterMark||O.length===0)}B.prototype.setEncoding=function(O){return C||(C=n(24).StringDecoder),this._readableState.decoder=new C(O),this._readableState.encoding=O,this};var gt=8388608;function lt(O){return O>=gt?O=gt:(O--,O|=O>>>1,O|=O>>>2,O|=O>>>4,O|=O>>>8,O|=O>>>16,O++),O}function M(O,A){return O<=0||A.length===0&&A.ended?0:A.objectMode?1:O!==O?A.flowing&&A.length?A.buffer.head.data.length:A.length:(O>A.highWaterMark&&(A.highWaterMark=lt(O)),O<=A.length?O:A.ended?A.length:(A.needReadable=!0,0))}B.prototype.read=function(O){I("read",O),O=parseInt(O,10);var A=this._readableState,Q=O;if(O!==0&&(A.emittedReadable=!1),O===0&&A.needReadable&&(A.length>=A.highWaterMark||A.ended))return I("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?Ot(this):Ft(this),null;if(O=M(O,A),O===0&&A.ended)return A.length===0&&Ot(this),null;var it=A.needReadable;I("need readable",it),(A.length===0||A.length-O<A.highWaterMark)&&(it=!0,I("length less than watermark",it)),A.ended||A.reading?(it=!1,I("reading or ended",it)):it&&(I("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(O=M(Q,A)));var vt;return O>0?vt=pt(O,A):vt=null,vt===null?(A.needReadable=!0,O=0):A.length-=O,A.length===0&&(A.ended||(A.needReadable=!0),Q!==O&&A.ended&&Ot(this)),vt!==null&&this.emit("data",vt),vt};function tt(O,A){var Q=null;return!_.isBuffer(A)&&typeof A!="string"&&A!==null&&A!==void 0&&!O.objectMode&&(Q=new TypeError("Invalid non-string/buffer chunk")),Q}function ut(O,A){if(!A.ended){if(A.decoder){var Q=A.decoder.end();Q&&Q.length&&(A.buffer.push(Q),A.length+=A.objectMode?1:Q.length)}A.ended=!0,Ft(O)}}function Ft(O){var A=O._readableState;A.needReadable=!1,A.emittedReadable||(I("emitReadable",A.flowing),A.emittedReadable=!0,A.sync?h(mt,O):mt(O))}function mt(O){I("emit readable"),O.emit("readable"),et(O)}function At(O,A){A.readingMore||(A.readingMore=!0,h(Tt,O,A))}function Tt(O,A){for(var Q=A.length;!A.reading&&!A.flowing&&!A.ended&&A.length<A.highWaterMark&&(I("maybeReadMore read 0"),O.read(0),Q!==A.length);)Q=A.length;A.readingMore=!1}B.prototype._read=function(O){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(O,A){var Q=this,it=this._readableState;switch(it.pipesCount){case 0:it.pipes=O;break;case 1:it.pipes=[it.pipes,O];break;default:it.pipes.push(O);break}it.pipesCount+=1,I("pipe count=%d opts=%j",it.pipesCount,A);var vt=(!A||A.end!==!1)&&O!==f.stdout&&O!==f.stderr,ot=vt?St:Re;it.endEmitted?h(ot):Q.once("end",ot),O.on("unpipe",bt);function bt($){I("onunpipe"),$===Q&&Re()}function St(){I("onend"),O.end()}var Jt=_t(Q);O.on("drain",Jt);var le=!1;function Re(){I("cleanup"),O.removeListener("close",R),O.removeListener("finish",P),O.removeListener("drain",Jt),O.removeListener("error",S),O.removeListener("unpipe",bt),Q.removeListener("end",St),Q.removeListener("end",Re),Q.removeListener("data",w),le=!0,it.awaitDrain&&(!O._writableState||O._writableState.needDrain)&&Jt()}var k=!1;Q.on("data",w);function w($){I("ondata"),k=!1;var Rt=O.write($);Rt===!1&&!k&&((it.pipesCount===1&&it.pipes===O||it.pipesCount>1&&re(it.pipes,O)!==-1)&&!le&&(I("false write response, pause",Q._readableState.awaitDrain),Q._readableState.awaitDrain++,k=!0),Q.pause())}function S($){I("onerror",$),Y(),O.removeListener("error",S),g(O,"error")===0&&O.emit("error",$)}W(O,"error",S);function R(){O.removeListener("finish",P),Y()}O.once("close",R);function P(){I("onfinish"),O.removeListener("close",R),Y()}O.once("finish",P);function Y(){I("unpipe"),Q.unpipe(O)}return O.emit("pipe",Q),it.flowing||(I("pipe resume"),Q.resume()),O};function _t(O){return function(){var A=O._readableState;I("pipeOnDrain",A.awaitDrain),A.awaitDrain&&A.awaitDrain--,A.awaitDrain===0&&g(O,"data")&&(A.flowing=!0,et(O))}}B.prototype.unpipe=function(O){var A=this._readableState;if(A.pipesCount===0)return this;if(A.pipesCount===1)return O&&O!==A.pipes?this:(O||(O=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,O&&O.emit("unpipe",this),this);if(!O){var Q=A.pipes,it=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var vt=0;vt<it;vt++)Q[vt].emit("unpipe",this);return this}var ot=re(A.pipes,O);return ot===-1?this:(A.pipes.splice(ot,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),O.emit("unpipe",this),this)},B.prototype.on=function(O,A){var Q=u.prototype.on.call(this,O,A);if(O==="data")this._readableState.flowing!==!1&&this.resume();else if(O==="readable"){var it=this._readableState;!it.endEmitted&&!it.readableListening&&(it.readableListening=it.needReadable=!0,it.emittedReadable=!1,it.reading?it.length&&Ft(this,it):h(Gt,this))}return Q},B.prototype.addListener=B.prototype.on;function Gt(O){I("readable nexttick read 0"),O.read(0)}B.prototype.resume=function(){var O=this._readableState;return O.flowing||(I("resume"),O.flowing=!0,H(this,O)),this};function H(O,A){A.resumeScheduled||(A.resumeScheduled=!0,h(q,O,A))}function q(O,A){A.reading||(I("resume read 0"),O.read(0)),A.resumeScheduled=!1,A.awaitDrain=0,O.emit("resume"),et(O),A.flowing&&!A.reading&&O.read(0)}B.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function et(O){var A=O._readableState;for(I("flow",A.flowing);A.flowing&&O.read()!==null;);}B.prototype.wrap=function(O){var A=this._readableState,Q=!1,it=this;O.on("end",function(){if(I("wrapped end"),A.decoder&&!A.ended){var bt=A.decoder.end();bt&&bt.length&&it.push(bt)}it.push(null)}),O.on("data",function(bt){if(I("wrapped data"),A.decoder&&(bt=A.decoder.write(bt)),!(A.objectMode&&bt==null)&&!(!A.objectMode&&(!bt||!bt.length))){var St=it.push(bt);St||(Q=!0,O.pause())}});for(var vt in O)this[vt]===void 0&&typeof O[vt]=="function"&&(this[vt]=function(bt){return function(){return O[bt].apply(O,arguments)}}(vt));var ot=["error","close","destroy","pause","resume"];return zt(ot,function(bt){O.on(bt,it.emit.bind(it,bt))}),it._read=function(bt){I("wrapped _read",bt),Q&&(Q=!1,O.resume())},it},B._fromList=pt;function pt(O,A){if(A.length===0)return null;var Q;return A.objectMode?Q=A.buffer.shift():!O||O>=A.length?(A.decoder?Q=A.buffer.join(""):A.buffer.length===1?Q=A.buffer.head.data:Q=A.buffer.concat(A.length),A.buffer.clear()):Q=Nt(O,A.buffer,A.decoder),Q}function Nt(O,A,Q){var it;return O<A.head.data.length?(it=A.head.data.slice(0,O),A.head.data=A.head.data.slice(O)):O===A.head.data.length?it=A.shift():it=Q?xt(O,A):It(O,A),it}function xt(O,A){var Q=A.head,it=1,vt=Q.data;for(O-=vt.length;Q=Q.next;){var ot=Q.data,bt=O>ot.length?ot.length:O;if(bt===ot.length?vt+=ot:vt+=ot.slice(0,O),O-=bt,O===0){bt===ot.length?(++it,Q.next?A.head=Q.next:A.head=A.tail=null):(A.head=Q,Q.data=ot.slice(bt));break}++it}return A.length-=it,vt}function It(O,A){var Q=d.allocUnsafe(O),it=A.head,vt=1;for(it.data.copy(Q),O-=it.data.length;it=it.next;){var ot=it.data,bt=O>ot.length?ot.length:O;if(ot.copy(Q,Q.length-O,0,bt),O-=bt,O===0){bt===ot.length?(++vt,it.next?A.head=it.next:A.head=A.tail=null):(A.head=it,it.data=ot.slice(bt));break}++vt}return A.length-=vt,Q}function Ot(O){var A=O._readableState;if(A.length>0)throw new Error('"endReadable()" called on non-empty stream');A.endEmitted||(A.ended=!0,h(Ht,A,O))}function Ht(O,A){!O.endEmitted&&O.length===0&&(O.endEmitted=!0,A.readable=!1,A.emit("end"))}function zt(O,A){for(var Q=0,it=O.length;Q<it;Q++)A(O[Q],Q)}function re(O,A){for(var Q=0,it=O.length;Q<it;Q++)if(O[Q]===A)return Q;return-1}}).call(t,n(6))},function(y,t,n){(function(f){"use strict";!f.version||f.version.indexOf("v0.")===0||f.version.indexOf("v1.")===0&&f.version.indexOf("v1.8.")!==0?y.exports=h:y.exports=f.nextTick;function h(l,v,x,g){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var u=arguments.length,_,d;switch(u){case 0:case 1:return f.nextTick(l);case 2:return f.nextTick(function(){l.call(null,v)});case 3:return f.nextTick(function(){l.call(null,v,x)});case 4:return f.nextTick(function(){l.call(null,v,x,g)});default:for(_=new Array(u-1),d=0;d<_.length;)_[d++]=arguments[d];return f.nextTick(function(){l.apply(null,_)})}}}).call(t,n(6))},function(y,t){var n={}.toString;y.exports=Array.isArray||function(f){return n.call(f)=="[object Array]"}},function(y,t,n){(function(f){"use strict";var h=n(2),l=h.Buffer,v=h.SlowBuffer,x=h.kMaxLength||2147483647;t.alloc=function(u,_,d){if(typeof l.alloc=="function")return l.alloc(u,_,d);if(typeof d=="number")throw new TypeError("encoding must not be number");if(typeof u!="number")throw new TypeError("size must be a number");if(u>x)throw new RangeError("size is too large");var N=d,T=_;T===void 0&&(N=void 0,T=0);var I=new l(u);if(typeof T=="string")for(var D=new l(T,N),C=D.length,W=-1;++W<u;)I[W]=D[W%C];else I.fill(T);return I},t.allocUnsafe=function(u){if(typeof l.allocUnsafe=="function")return l.allocUnsafe(u);if(typeof u!="number")throw new TypeError("size must be a number");if(u>x)throw new RangeError("size is too large");return new l(u)},t.from=function(u,_,d){if(typeof l.from=="function"&&(!f.Uint8Array||Uint8Array.from!==l.from))return l.from(u,_,d);if(typeof u=="number")throw new TypeError('"value" argument must not be a number');if(typeof u=="string")return new l(u,_);if(typeof ArrayBuffer<"u"&&u instanceof ArrayBuffer){var N=_;if(arguments.length===1)return new l(u);typeof N>"u"&&(N=0);var T=d;if(typeof T>"u"&&(T=u.byteLength-N),N>=u.byteLength)throw new RangeError("'offset' is out of bounds");if(T>u.byteLength-N)throw new RangeError("'length' is out of bounds");return new l(u.slice(N,N+T))}if(l.isBuffer(u)){var I=new l(u.length);return u.copy(I,0,0,u.length),I}if(u){if(Array.isArray(u)||typeof ArrayBuffer<"u"&&u.buffer instanceof ArrayBuffer||"length"in u)return new l(u);if(u.type==="Buffer"&&Array.isArray(u.data))return new l(u.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(u){if(typeof l.allocUnsafeSlow=="function")return l.allocUnsafeSlow(u);if(typeof u!="number")throw new TypeError("size must be a number");if(u>=x)throw new RangeError("size is too large");return new v(u)}}).call(t,function(){return this}())},function(y,t,n){(function(f){function h(B){return Array.isArray?Array.isArray(B):U(B)==="[object Array]"}t.isArray=h;function l(B){return typeof B=="boolean"}t.isBoolean=l;function v(B){return B===null}t.isNull=v;function x(B){return B==null}t.isNullOrUndefined=x;function g(B){return typeof B=="number"}t.isNumber=g;function u(B){return typeof B=="string"}t.isString=u;function _(B){return typeof B=="symbol"}t.isSymbol=_;function d(B){return B===void 0}t.isUndefined=d;function N(B){return U(B)==="[object RegExp]"}t.isRegExp=N;function T(B){return typeof B=="object"&&B!==null}t.isObject=T;function I(B){return U(B)==="[object Date]"}t.isDate=I;function D(B){return U(B)==="[object Error]"||B instanceof Error}t.isError=D;function C(B){return typeof B=="function"}t.isFunction=C;function W(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B>"u"}t.isPrimitive=W,t.isBuffer=f.isBuffer;function U(B){return Object.prototype.toString.call(B)}}).call(t,n(1))},function(y,t){},function(y,t,n){"use strict";var f=n(2).Buffer,h=n(17);y.exports=l;function l(){this.head=null,this.tail=null,this.length=0}l.prototype.push=function(v){var x={data:v,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length},l.prototype.unshift=function(v){var x={data:v,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length},l.prototype.shift=function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}},l.prototype.clear=function(){this.head=this.tail=null,this.length=0},l.prototype.join=function(v){if(this.length===0)return"";for(var x=this.head,g=""+x.data;x=x.next;)g+=v+x.data;return g},l.prototype.concat=function(v){if(this.length===0)return h.alloc(0);if(this.length===1)return this.head.data;for(var x=h.allocUnsafe(v>>>0),g=this.head,u=0;g;)g.data.copy(x,u),u+=g.data.length,g=g.next;return x}},function(y,t,n){"use strict";var f=Object.keys||function(D){var C=[];for(var W in D)C.push(W);return C};y.exports=d;var h=n(15),l=n(18);l.inherits=n(12);var v=n(14),x=n(22);l.inherits(d,v);for(var g=f(x.prototype),u=0;u<g.length;u++){var _=g[u];d.prototype[_]||(d.prototype[_]=x.prototype[_])}function d(D){if(!(this instanceof d))return new d(D);v.call(this,D),x.call(this,D),D&&D.readable===!1&&(this.readable=!1),D&&D.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,D&&D.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",N)}function N(){this.allowHalfOpen||this._writableState.ended||h(T,this)}function T(D){D.end()}function I(D,C){for(var W=0,U=D.length;W<U;W++)C(D[W],W)}},function(y,t,n){(function(f){"use strict";y.exports=C;var h=n(15),l=!f.browser&&["v0.10","v0.9."].indexOf(f.version.slice(0,5))>-1?setImmediate:h,v;C.WritableState=I;var x=n(18);x.inherits=n(12);var g={deprecate:n(23)},u;(function(){try{u=n(11)}catch{}finally{u||(u=n(8).EventEmitter)}})();var _=n(2).Buffer,d=n(17);x.inherits(C,u);function N(){}function T(H,q,et){this.chunk=H,this.encoding=q,this.callback=et,this.next=null}function I(H,q){v=v||n(21),H=H||{},this.objectMode=!!H.objectMode,q instanceof v&&(this.objectMode=this.objectMode||!!H.writableObjectMode);var et=H.highWaterMark,pt=this.objectMode?16:16*1024;this.highWaterMark=et||et===0?et:pt,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var Nt=H.decodeStrings===!1;this.decodeStrings=!Nt,this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(xt){M(q,xt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Gt(this)}I.prototype.getBuffer=function(){for(var q=this.bufferedRequest,et=[];q;)et.push(q),q=q.next;return et},function(){try{Object.defineProperty(I.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(H){return D.call(this,H)?!0:H&&H._writableState instanceof I}})):D=function(H){return H instanceof this};function C(H){if(v=v||n(21),!D.call(C,this)&&!(this instanceof v))return new C(H);this._writableState=new I(H,this),this.writable=!0,H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev)),u.call(this)}C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function W(H,q){var et=new Error("write after end");H.emit("error",et),h(q,et)}function U(H,q,et,pt){var Nt=!0,xt=!1;return et===null?xt=new TypeError("May not write null values to stream"):typeof et!="string"&&et!==void 0&&!q.objectMode&&(xt=new TypeError("Invalid non-string/buffer chunk")),xt&&(H.emit("error",xt),h(pt,xt),Nt=!1),Nt}C.prototype.write=function(H,q,et){var pt=this._writableState,Nt=!1,xt=_.isBuffer(H);return typeof q=="function"&&(et=q,q=null),xt?q="buffer":q||(q=pt.defaultEncoding),typeof et!="function"&&(et=N),pt.ended?W(this,et):(xt||U(this,pt,H,et))&&(pt.pendingcb++,Nt=ct(this,pt,xt,H,q,et)),Nt},C.prototype.cork=function(){var H=this._writableState;H.corked++},C.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,!H.writing&&!H.corked&&!H.finished&&!H.bufferProcessing&&H.bufferedRequest&&Ft(this,H))},C.prototype.setDefaultEncoding=function(q){if(typeof q=="string"&&(q=q.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((q+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+q);return this._writableState.defaultEncoding=q,this};function B(H,q,et){return!H.objectMode&&H.decodeStrings!==!1&&typeof q=="string"&&(q=d.from(q,et)),q}function ct(H,q,et,pt,Nt,xt){et||(pt=B(q,pt,Nt),_.isBuffer(pt)&&(Nt="buffer"));var It=q.objectMode?1:pt.length;q.length+=It;var Ot=q.length<q.highWaterMark;if(Ot||(q.needDrain=!0),q.writing||q.corked){var Ht=q.lastBufferedRequest;q.lastBufferedRequest=new T(pt,Nt,xt),Ht?Ht.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else J(H,q,!1,It,pt,Nt,xt);return Ot}function J(H,q,et,pt,Nt,xt,It){q.writelen=pt,q.writecb=It,q.writing=!0,q.sync=!0,et?H._writev(Nt,q.onwrite):H._write(Nt,xt,q.onwrite),q.sync=!1}function gt(H,q,et,pt,Nt){--q.pendingcb,et?h(Nt,pt):Nt(pt),H._writableState.errorEmitted=!0,H.emit("error",pt)}function lt(H){H.writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0}function M(H,q){var et=H._writableState,pt=et.sync,Nt=et.writecb;if(lt(et),q)gt(H,et,pt,q,Nt);else{var xt=mt(et);!xt&&!et.corked&&!et.bufferProcessing&&et.bufferedRequest&&Ft(H,et),pt?l(tt,H,et,xt,Nt):tt(H,et,xt,Nt)}}function tt(H,q,et,pt){et||ut(H,q),q.pendingcb--,pt(),Tt(H,q)}function ut(H,q){q.length===0&&q.needDrain&&(q.needDrain=!1,H.emit("drain"))}function Ft(H,q){q.bufferProcessing=!0;var et=q.bufferedRequest;if(H._writev&&et&&et.next){var pt=q.bufferedRequestCount,Nt=new Array(pt),xt=q.corkedRequestsFree;xt.entry=et;for(var It=0;et;)Nt[It]=et,et=et.next,It+=1;J(H,q,!0,q.length,Nt,"",xt.finish),q.pendingcb++,q.lastBufferedRequest=null,xt.next?(q.corkedRequestsFree=xt.next,xt.next=null):q.corkedRequestsFree=new Gt(q)}else{for(;et;){var Ot=et.chunk,Ht=et.encoding,zt=et.callback,re=q.objectMode?1:Ot.length;if(J(H,q,!1,re,Ot,Ht,zt),et=et.next,q.writing)break}et===null&&(q.lastBufferedRequest=null)}q.bufferedRequestCount=0,q.bufferedRequest=et,q.bufferProcessing=!1}C.prototype._write=function(H,q,et){et(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(H,q,et){var pt=this._writableState;typeof H=="function"?(et=H,H=null,q=null):typeof q=="function"&&(et=q,q=null),H!=null&&this.write(H,q),pt.corked&&(pt.corked=1,this.uncork()),!pt.ending&&!pt.finished&&_t(this,pt,et)};function mt(H){return H.ending&&H.length===0&&H.bufferedRequest===null&&!H.finished&&!H.writing}function At(H,q){q.prefinished||(q.prefinished=!0,H.emit("prefinish"))}function Tt(H,q){var et=mt(q);return et&&(q.pendingcb===0?(At(H,q),q.finished=!0,H.emit("finish")):At(H,q)),et}function _t(H,q,et){q.ending=!0,Tt(H,q),et&&(q.finished?h(et):H.once("finish",et)),q.ended=!0,H.writable=!1}function Gt(H){var q=this;this.next=null,this.entry=null,this.finish=function(et){var pt=q.entry;for(q.entry=null;pt;){var Nt=pt.callback;H.pendingcb--,Nt(et),pt=pt.next}H.corkedRequestsFree?H.corkedRequestsFree.next=q:H.corkedRequestsFree=q}}}).call(t,n(6))},function(y,t){(function(n){y.exports=f;function f(l,v){if(h("noDeprecation"))return l;var x=!1;function g(){if(!x){if(h("throwDeprecation"))throw new Error(v);h("traceDeprecation")?console.trace(v):console.warn(v),x=!0}return l.apply(this,arguments)}return g}function h(l){try{if(!n.localStorage)return!1}catch{return!1}var v=n.localStorage[l];return v==null?!1:String(v).toLowerCase()==="true"}}).call(t,function(){return this}())},function(y,t,n){var f=n(2).Buffer,h=f.isEncoding||function(_){switch(_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(_){if(_&&!h(_))throw new Error("Unknown encoding: "+_)}var v=t.StringDecoder=function(_){switch(this.encoding=(_||"utf8").toLowerCase().replace(/[-_]/,""),l(_),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=g;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:this.write=x;return}this.charBuffer=new f(6),this.charReceived=0,this.charLength=0};v.prototype.write=function(_){for(var d="";this.charLength;){var N=_.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:_.length;if(_.copy(this.charBuffer,this.charReceived,0,N),this.charReceived+=N,this.charReceived<this.charLength)return"";_=_.slice(N,_.length),d=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var I=d.charCodeAt(d.length-1);if(I>=55296&&I<=56319){this.charLength+=this.surrogateSize,d="";continue}if(this.charReceived=this.charLength=0,_.length===0)return d;break}this.detectIncompleteChar(_);var T=_.length;this.charLength&&(_.copy(this.charBuffer,0,_.length-this.charReceived,T),T-=this.charReceived),d+=_.toString(this.encoding,0,T);var T=d.length-1,I=d.charCodeAt(T);if(I>=55296&&I<=56319){var D=this.surrogateSize;return this.charLength+=D,this.charReceived+=D,this.charBuffer.copy(this.charBuffer,D,0,D),_.copy(this.charBuffer,0,0,D),d.substring(0,T)}return d},v.prototype.detectIncompleteChar=function(_){for(var d=_.length>=3?3:_.length;d>0;d--){var N=_[_.length-d];if(d==1&&N>>5==6){this.charLength=2;break}if(d<=2&&N>>4==14){this.charLength=3;break}if(d<=3&&N>>3==30){this.charLength=4;break}}this.charReceived=d},v.prototype.end=function(_){var d="";if(_&&_.length&&(d=this.write(_)),this.charReceived){var N=this.charReceived,T=this.charBuffer,I=this.encoding;d+=T.slice(0,N).toString(I)}return d};function x(_){return _.toString(this.encoding)}function g(_){this.charReceived=_.length%2,this.charLength=this.charReceived?2:0}function u(_){this.charReceived=_.length%3,this.charLength=this.charReceived?3:0}},function(y,t,n){"use strict";y.exports=x;var f=n(21),h=n(18);h.inherits=n(12),h.inherits(x,f);function l(u){this.afterTransform=function(_,d){return v(u,_,d)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function v(u,_,d){var N=u._transformState;N.transforming=!1;var T=N.writecb;if(!T)return u.emit("error",new Error("no writecb in Transform class"));N.writechunk=null,N.writecb=null,d!=null&&u.push(d),T(_);var I=u._readableState;I.reading=!1,(I.needReadable||I.length<I.highWaterMark)&&u._read(I.highWaterMark)}function x(u){if(!(this instanceof x))return new x(u);f.call(this,u),this._transformState=new l(this);var _=this;this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(d,N){g(_,d,N)}):g(_)})}x.prototype.push=function(u,_){return this._transformState.needTransform=!1,f.prototype.push.call(this,u,_)},x.prototype._transform=function(u,_,d){throw new Error("_transform() is not implemented")},x.prototype._write=function(u,_,d){var N=this._transformState;if(N.writecb=d,N.writechunk=u,N.writeencoding=_,!N.transforming){var T=this._readableState;(N.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},x.prototype._read=function(u){var _=this._transformState;_.writechunk!==null&&_.writecb&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0};function g(u,_,d){if(_)return u.emit("error",_);d!=null&&u.push(d);var N=u._writableState,T=u._transformState;if(N.length)throw new Error("Calling transform done when ws.length != 0");if(T.transforming)throw new Error("Calling transform done when still transforming");return u.push(null)}},function(y,t,n){"use strict";y.exports=l;var f=n(25),h=n(18);h.inherits=n(12),h.inherits(l,f);function l(v){if(!(this instanceof l))return new l(v);f.call(this,v)}l.prototype._transform=function(v,x,g){g(null,v)}},function(y,t,n){y.exports=n(22)},function(y,t,n){y.exports=n(21)},function(y,t,n){y.exports=n(25)},function(y,t,n){y.exports=n(26)},function(y,t,n){"use strict";var f=n(32),h=n(33),l=n(38),v=n(39),x=n(40),g=n(41),u=n(42),_=Object.prototype.toString;function d(I){if(!(this instanceof d))return new d(I);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},I||{});var D=this.options;D.raw&&D.windowBits>=0&&D.windowBits<16&&(D.windowBits=-D.windowBits,D.windowBits===0&&(D.windowBits=-15)),D.windowBits>=0&&D.windowBits<16&&!(I&&I.windowBits)&&(D.windowBits+=32),D.windowBits>15&&D.windowBits<48&&(D.windowBits&15)===0&&(D.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var C=f.inflateInit2(this.strm,D.windowBits);if(C!==v.Z_OK)throw new Error(x[C]);this.header=new u,f.inflateGetHeader(this.strm,this.header)}d.prototype.push=function(I,D){var C=this.strm,W=this.options.chunkSize,U=this.options.dictionary,B,ct,J,gt,lt,M,tt=!1;if(this.ended)return!1;ct=D===~~D?D:D===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof I=="string"?C.input=l.binstring2buf(I):_.call(I)==="[object ArrayBuffer]"?C.input=new Uint8Array(I):C.input=I,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new h.Buf8(W),C.next_out=0,C.avail_out=W),B=f.inflate(C,v.Z_NO_FLUSH),B===v.Z_NEED_DICT&&U&&(typeof U=="string"?M=l.string2buf(U):_.call(U)==="[object ArrayBuffer]"?M=new Uint8Array(U):M=U,B=f.inflateSetDictionary(this.strm,M)),B===v.Z_BUF_ERROR&&tt===!0&&(B=v.Z_OK,tt=!1),B!==v.Z_STREAM_END&&B!==v.Z_OK)return this.onEnd(B),this.ended=!0,!1;C.next_out&&(C.avail_out===0||B===v.Z_STREAM_END||C.avail_in===0&&(ct===v.Z_FINISH||ct===v.Z_SYNC_FLUSH))&&(this.options.to==="string"?(J=l.utf8border(C.output,C.next_out),gt=C.next_out-J,lt=l.buf2string(C.output,J),C.next_out=gt,C.avail_out=W-gt,gt&&h.arraySet(C.output,C.output,J,gt,0),this.onData(lt)):this.onData(h.shrinkBuf(C.output,C.next_out))),C.avail_in===0&&C.avail_out===0&&(tt=!0)}while((C.avail_in>0||C.avail_out===0)&&B!==v.Z_STREAM_END);return B===v.Z_STREAM_END&&(ct=v.Z_FINISH),ct===v.Z_FINISH?(B=f.inflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===v.Z_OK):(ct===v.Z_SYNC_FLUSH&&(this.onEnd(v.Z_OK),C.avail_out=0),!0)},d.prototype.onData=function(I){this.chunks.push(I)},d.prototype.onEnd=function(I){I===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg};function N(I,D){var C=new d(D);if(C.push(I,!0),C.err)throw C.msg||x[C.err];return C.result}function T(I,D){return D=D||{},D.raw=!0,N(I,D)}t.Inflate=d,t.inflate=N,t.inflateRaw=T,t.ungzip=N},function(y,t,n){"use strict";var f=n(33),h=n(34),l=n(35),v=n(36),x=n(37),g=0,u=1,_=2,d=4,N=5,T=6,I=0,D=1,C=2,W=-2,U=-3,B=-4,ct=-5,J=8,gt=1,lt=2,M=3,tt=4,ut=5,Ft=6,mt=7,At=8,Tt=9,_t=10,Gt=11,H=12,q=13,et=14,pt=15,Nt=16,xt=17,It=18,Ot=19,Ht=20,zt=21,re=22,O=23,A=24,Q=25,it=26,vt=27,ot=28,bt=29,St=30,Jt=31,le=32,Re=852,k=592,w=15,S=w;function R(V){return(V>>>24&255)+(V>>>8&65280)+((V&65280)<<8)+((V&255)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Y(V){var at;return!V||!V.state?W:(at=V.state,V.total_in=V.total_out=at.total=0,V.msg="",at.wrap&&(V.adler=at.wrap&1),at.mode=gt,at.last=0,at.havedict=0,at.dmax=32768,at.head=null,at.hold=0,at.bits=0,at.lencode=at.lendyn=new f.Buf32(Re),at.distcode=at.distdyn=new f.Buf32(k),at.sane=1,at.back=-1,I)}function $(V){var at;return!V||!V.state?W:(at=V.state,at.wsize=0,at.whave=0,at.wnext=0,Y(V))}function Rt(V,at){var F,ht;return!V||!V.state||(ht=V.state,at<0?(F=0,at=-at):(F=(at>>4)+1,at<48&&(at&=15)),at&&(at<8||at>15))?W:(ht.window!==null&&ht.wbits!==at&&(ht.window=null),ht.wrap=F,ht.wbits=at,$(V))}function Ct(V,at){var F,ht;return V?(ht=new P,V.state=ht,ht.window=null,F=Rt(V,at),F!==I&&(V.state=null),F):W}function Mt(V){return Ct(V,S)}var Kt=!0,Bt,Te;function ci(V){if(Kt){var at;for(Bt=new f.Buf32(512),Te=new f.Buf32(32),at=0;at<144;)V.lens[at++]=8;for(;at<256;)V.lens[at++]=9;for(;at<280;)V.lens[at++]=7;for(;at<288;)V.lens[at++]=8;for(x(u,V.lens,0,288,Bt,0,V.work,{bits:9}),at=0;at<32;)V.lens[at++]=5;x(_,V.lens,0,32,Te,0,V.work,{bits:5}),Kt=!1}V.lencode=Bt,V.lenbits=9,V.distcode=Te,V.distbits=5}function Je(V,at,F,ht){var Pt,st=V.state;return st.window===null&&(st.wsize=1<<st.wbits,st.wnext=0,st.whave=0,st.window=new f.Buf8(st.wsize)),ht>=st.wsize?(f.arraySet(st.window,at,F-st.wsize,st.wsize,0),st.wnext=0,st.whave=st.wsize):(Pt=st.wsize-st.wnext,Pt>ht&&(Pt=ht),f.arraySet(st.window,at,F-ht,Pt,st.wnext),ht-=Pt,ht?(f.arraySet(st.window,at,F-ht,ht,0),st.wnext=ht,st.whave=st.wsize):(st.wnext+=Pt,st.wnext===st.wsize&&(st.wnext=0),st.whave<st.wsize&&(st.whave+=Pt))),0}function Ke(V,at){var F,ht,Pt,st,pe,ft,Qt,K,G,ui,Ut,yt,Qe,Pe,qt=0,Lt,oe,he,se,hi,$e,Xt,de,ne=new f.Buf8(4),Oe,be,Wi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return W;F=V.state,F.mode===H&&(F.mode=q),pe=V.next_out,Pt=V.output,Qt=V.avail_out,st=V.next_in,ht=V.input,ft=V.avail_in,K=F.hold,G=F.bits,ui=ft,Ut=Qt,de=I;t:for(;;)switch(F.mode){case gt:if(F.wrap===0){F.mode=q;break}for(;G<16;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(F.wrap&2&&K===35615){F.check=0,ne[0]=K&255,ne[1]=K>>>8&255,F.check=l(F.check,ne,2,0),K=0,G=0,F.mode=lt;break}if(F.flags=0,F.head&&(F.head.done=!1),!(F.wrap&1)||(((K&255)<<8)+(K>>8))%31){V.msg="incorrect header check",F.mode=St;break}if((K&15)!==J){V.msg="unknown compression method",F.mode=St;break}if(K>>>=4,G-=4,Xt=(K&15)+8,F.wbits===0)F.wbits=Xt;else if(Xt>F.wbits){V.msg="invalid window size",F.mode=St;break}F.dmax=1<<Xt,V.adler=F.check=1,F.mode=K&512?_t:H,K=0,G=0;break;case lt:for(;G<16;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(F.flags=K,(F.flags&255)!==J){V.msg="unknown compression method",F.mode=St;break}if(F.flags&57344){V.msg="unknown header flags set",F.mode=St;break}F.head&&(F.head.text=K>>8&1),F.flags&512&&(ne[0]=K&255,ne[1]=K>>>8&255,F.check=l(F.check,ne,2,0)),K=0,G=0,F.mode=M;case M:for(;G<32;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}F.head&&(F.head.time=K),F.flags&512&&(ne[0]=K&255,ne[1]=K>>>8&255,ne[2]=K>>>16&255,ne[3]=K>>>24&255,F.check=l(F.check,ne,4,0)),K=0,G=0,F.mode=tt;case tt:for(;G<16;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}F.head&&(F.head.xflags=K&255,F.head.os=K>>8),F.flags&512&&(ne[0]=K&255,ne[1]=K>>>8&255,F.check=l(F.check,ne,2,0)),K=0,G=0,F.mode=ut;case ut:if(F.flags&1024){for(;G<16;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}F.length=K,F.head&&(F.head.extra_len=K),F.flags&512&&(ne[0]=K&255,ne[1]=K>>>8&255,F.check=l(F.check,ne,2,0)),K=0,G=0}else F.head&&(F.head.extra=null);F.mode=Ft;case Ft:if(F.flags&1024&&(yt=F.length,yt>ft&&(yt=ft),yt&&(F.head&&(Xt=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),f.arraySet(F.head.extra,ht,st,yt,Xt)),F.flags&512&&(F.check=l(F.check,ht,yt,st)),ft-=yt,st+=yt,F.length-=yt),F.length))break t;F.length=0,F.mode=mt;case mt:if(F.flags&2048){if(ft===0)break t;yt=0;do Xt=ht[st+yt++],F.head&&Xt&&F.length<65536&&(F.head.name+=String.fromCharCode(Xt));while(Xt&&yt<ft);if(F.flags&512&&(F.check=l(F.check,ht,yt,st)),ft-=yt,st+=yt,Xt)break t}else F.head&&(F.head.name=null);F.length=0,F.mode=At;case At:if(F.flags&4096){if(ft===0)break t;yt=0;do Xt=ht[st+yt++],F.head&&Xt&&F.length<65536&&(F.head.comment+=String.fromCharCode(Xt));while(Xt&&yt<ft);if(F.flags&512&&(F.check=l(F.check,ht,yt,st)),ft-=yt,st+=yt,Xt)break t}else F.head&&(F.head.comment=null);F.mode=Tt;case Tt:if(F.flags&512){for(;G<16;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(K!==(F.check&65535)){V.msg="header crc mismatch",F.mode=St;break}K=0,G=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),V.adler=F.check=0,F.mode=H;break;case _t:for(;G<32;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}V.adler=F.check=R(K),K=0,G=0,F.mode=Gt;case Gt:if(F.havedict===0)return V.next_out=pe,V.avail_out=Qt,V.next_in=st,V.avail_in=ft,F.hold=K,F.bits=G,C;V.adler=F.check=1,F.mode=H;case H:if(at===N||at===T)break t;case q:if(F.last){K>>>=G&7,G-=G&7,F.mode=vt;break}for(;G<3;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}switch(F.last=K&1,K>>>=1,G-=1,K&3){case 0:F.mode=et;break;case 1:if(ci(F),F.mode=Ht,at===T){K>>>=2,G-=2;break t}break;case 2:F.mode=xt;break;case 3:V.msg="invalid block type",F.mode=St}K>>>=2,G-=2;break;case et:for(K>>>=G&7,G-=G&7;G<32;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if((K&65535)!==(K>>>16^65535)){V.msg="invalid stored block lengths",F.mode=St;break}if(F.length=K&65535,K=0,G=0,F.mode=pt,at===T)break t;case pt:F.mode=Nt;case Nt:if(yt=F.length,yt){if(yt>ft&&(yt=ft),yt>Qt&&(yt=Qt),yt===0)break t;f.arraySet(Pt,ht,st,yt,pe),ft-=yt,st+=yt,Qt-=yt,pe+=yt,F.length-=yt;break}F.mode=H;break;case xt:for(;G<14;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(F.nlen=(K&31)+257,K>>>=5,G-=5,F.ndist=(K&31)+1,K>>>=5,G-=5,F.ncode=(K&15)+4,K>>>=4,G-=4,F.nlen>286||F.ndist>30){V.msg="too many length or distance symbols",F.mode=St;break}F.have=0,F.mode=It;case It:for(;F.have<F.ncode;){for(;G<3;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}F.lens[Wi[F.have++]]=K&7,K>>>=3,G-=3}for(;F.have<19;)F.lens[Wi[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,Oe={bits:F.lenbits},de=x(g,F.lens,0,19,F.lencode,0,F.work,Oe),F.lenbits=Oe.bits,de){V.msg="invalid code lengths set",F.mode=St;break}F.have=0,F.mode=Ot;case Ot:for(;F.have<F.nlen+F.ndist;){for(;qt=F.lencode[K&(1<<F.lenbits)-1],Lt=qt>>>24,oe=qt>>>16&255,he=qt&65535,!(Lt<=G);){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(he<16)K>>>=Lt,G-=Lt,F.lens[F.have++]=he;else{if(he===16){for(be=Lt+2;G<be;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(K>>>=Lt,G-=Lt,F.have===0){V.msg="invalid bit length repeat",F.mode=St;break}Xt=F.lens[F.have-1],yt=3+(K&3),K>>>=2,G-=2}else if(he===17){for(be=Lt+3;G<be;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}K>>>=Lt,G-=Lt,Xt=0,yt=3+(K&7),K>>>=3,G-=3}else{for(be=Lt+7;G<be;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}K>>>=Lt,G-=Lt,Xt=0,yt=11+(K&127),K>>>=7,G-=7}if(F.have+yt>F.nlen+F.ndist){V.msg="invalid bit length repeat",F.mode=St;break}for(;yt--;)F.lens[F.have++]=Xt}}if(F.mode===St)break;if(F.lens[256]===0){V.msg="invalid code -- missing end-of-block",F.mode=St;break}if(F.lenbits=9,Oe={bits:F.lenbits},de=x(u,F.lens,0,F.nlen,F.lencode,0,F.work,Oe),F.lenbits=Oe.bits,de){V.msg="invalid literal/lengths set",F.mode=St;break}if(F.distbits=6,F.distcode=F.distdyn,Oe={bits:F.distbits},de=x(_,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,Oe),F.distbits=Oe.bits,de){V.msg="invalid distances set",F.mode=St;break}if(F.mode=Ht,at===T)break t;case Ht:F.mode=zt;case zt:if(ft>=6&&Qt>=258){V.next_out=pe,V.avail_out=Qt,V.next_in=st,V.avail_in=ft,F.hold=K,F.bits=G,v(V,Ut),pe=V.next_out,Pt=V.output,Qt=V.avail_out,st=V.next_in,ht=V.input,ft=V.avail_in,K=F.hold,G=F.bits,F.mode===H&&(F.back=-1);break}for(F.back=0;qt=F.lencode[K&(1<<F.lenbits)-1],Lt=qt>>>24,oe=qt>>>16&255,he=qt&65535,!(Lt<=G);){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(oe&&(oe&240)===0){for(se=Lt,hi=oe,$e=he;qt=F.lencode[$e+((K&(1<<se+hi)-1)>>se)],Lt=qt>>>24,oe=qt>>>16&255,he=qt&65535,!(se+Lt<=G);){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}K>>>=se,G-=se,F.back+=se}if(K>>>=Lt,G-=Lt,F.back+=Lt,F.length=he,oe===0){F.mode=it;break}if(oe&32){F.back=-1,F.mode=H;break}if(oe&64){V.msg="invalid literal/length code",F.mode=St;break}F.extra=oe&15,F.mode=re;case re:if(F.extra){for(be=F.extra;G<be;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}F.length+=K&(1<<F.extra)-1,K>>>=F.extra,G-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=O;case O:for(;qt=F.distcode[K&(1<<F.distbits)-1],Lt=qt>>>24,oe=qt>>>16&255,he=qt&65535,!(Lt<=G);){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if((oe&240)===0){for(se=Lt,hi=oe,$e=he;qt=F.distcode[$e+((K&(1<<se+hi)-1)>>se)],Lt=qt>>>24,oe=qt>>>16&255,he=qt&65535,!(se+Lt<=G);){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}K>>>=se,G-=se,F.back+=se}if(K>>>=Lt,G-=Lt,F.back+=Lt,oe&64){V.msg="invalid distance code",F.mode=St;break}F.offset=he,F.extra=oe&15,F.mode=A;case A:if(F.extra){for(be=F.extra;G<be;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}F.offset+=K&(1<<F.extra)-1,K>>>=F.extra,G-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){V.msg="invalid distance too far back",F.mode=St;break}F.mode=Q;case Q:if(Qt===0)break t;if(yt=Ut-Qt,F.offset>yt){if(yt=F.offset-yt,yt>F.whave&&F.sane){V.msg="invalid distance too far back",F.mode=St;break}yt>F.wnext?(yt-=F.wnext,Qe=F.wsize-yt):Qe=F.wnext-yt,yt>F.length&&(yt=F.length),Pe=F.window}else Pe=Pt,Qe=pe-F.offset,yt=F.length;yt>Qt&&(yt=Qt),Qt-=yt,F.length-=yt;do Pt[pe++]=Pe[Qe++];while(--yt);F.length===0&&(F.mode=zt);break;case it:if(Qt===0)break t;Pt[pe++]=F.length,Qt--,F.mode=zt;break;case vt:if(F.wrap){for(;G<32;){if(ft===0)break t;ft--,K|=ht[st++]<<G,G+=8}if(Ut-=Qt,V.total_out+=Ut,F.total+=Ut,Ut&&(V.adler=F.check=F.flags?l(F.check,Pt,Ut,pe-Ut):h(F.check,Pt,Ut,pe-Ut)),Ut=Qt,(F.flags?K:R(K))!==F.check){V.msg="incorrect data check",F.mode=St;break}K=0,G=0}F.mode=ot;case ot:if(F.wrap&&F.flags){for(;G<32;){if(ft===0)break t;ft--,K+=ht[st++]<<G,G+=8}if(K!==(F.total&4294967295)){V.msg="incorrect length check",F.mode=St;break}K=0,G=0}F.mode=bt;case bt:de=D;break t;case St:de=U;break t;case Jt:return B;case le:default:return W}return V.next_out=pe,V.avail_out=Qt,V.next_in=st,V.avail_in=ft,F.hold=K,F.bits=G,(F.wsize||Ut!==V.avail_out&&F.mode<St&&(F.mode<vt||at!==d))&&Je(V,V.output,V.next_out,Ut-V.avail_out)?(F.mode=Jt,B):(ui-=V.avail_in,Ut-=V.avail_out,V.total_in+=ui,V.total_out+=Ut,F.total+=Ut,F.wrap&&Ut&&(V.adler=F.check=F.flags?l(F.check,Pt,Ut,V.next_out-Ut):h(F.check,Pt,Ut,V.next_out-Ut)),V.data_type=F.bits+(F.last?64:0)+(F.mode===H?128:0)+(F.mode===Ht||F.mode===pt?256:0),(ui===0&&Ut===0||at===d)&&de===I&&(de=ct),de)}function pr(V){if(!V||!V.state)return W;var at=V.state;return at.window&&(at.window=null),V.state=null,I}function dr(V,at){var F;return!V||!V.state||(F=V.state,(F.wrap&2)===0)?W:(F.head=at,at.done=!1,I)}function yr(V,at){var F=at.length,ht,Pt,st;return!V||!V.state||(ht=V.state,ht.wrap!==0&&ht.mode!==Gt)?W:ht.mode===Gt&&(Pt=1,Pt=h(Pt,at,F,0),Pt!==ht.check)?U:(st=Je(V,at,F,F),st?(ht.mode=Jt,B):(ht.havedict=1,I))}t.inflateReset=$,t.inflateReset2=Rt,t.inflateResetKeep=Y,t.inflateInit=Mt,t.inflateInit2=Ct,t.inflate=Ke,t.inflateEnd=pr,t.inflateGetHeader=dr,t.inflateSetDictionary=yr,t.inflateInfo="pako inflate (from Nodeca project)"},function(y,t){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(l){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var x=v.shift();if(!!x){if(typeof x!="object")throw new TypeError(x+"must be non-object");for(var g in x)x.hasOwnProperty(g)&&(l[g]=x[g])}}return l},t.shrinkBuf=function(l,v){return l.length===v?l:l.subarray?l.subarray(0,v):(l.length=v,l)};var f={arraySet:function(l,v,x,g,u){if(v.subarray&&l.subarray){l.set(v.subarray(x,x+g),u);return}for(var _=0;_<g;_++)l[u+_]=v[x+_]},flattenChunks:function(l){var v,x,g,u,_,d;for(g=0,v=0,x=l.length;v<x;v++)g+=l[v].length;for(d=new Uint8Array(g),u=0,v=0,x=l.length;v<x;v++)_=l[v],d.set(_,u),u+=_.length;return d}},h={arraySet:function(l,v,x,g,u){for(var _=0;_<g;_++)l[u+_]=v[x+_]},flattenChunks:function(l){return[].concat.apply([],l)}};t.setTyped=function(l){l?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,f)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,h))},t.setTyped(n)},function(y,t){"use strict";function n(f,h,l,v){for(var x=f&65535|0,g=f>>>16&65535|0,u=0;l!==0;){u=l>2e3?2e3:l,l-=u;do x=x+h[v++]|0,g=g+x|0;while(--u);x%=65521,g%=65521}return x|g<<16|0}y.exports=n},function(y,t){"use strict";function n(){for(var l,v=[],x=0;x<256;x++){l=x;for(var g=0;g<8;g++)l=l&1?3988292384^l>>>1:l>>>1;v[x]=l}return v}var f=n();function h(l,v,x,g){var u=f,_=g+x;l^=-1;for(var d=g;d<_;d++)l=l>>>8^u[(l^v[d])&255];return l^-1}y.exports=h},function(y,t){"use strict";var n=30,f=12;y.exports=function(l,v){var x,g,u,_,d,N,T,I,D,C,W,U,B,ct,J,gt,lt,M,tt,ut,Ft,mt,At,Tt,_t;x=l.state,g=l.next_in,Tt=l.input,u=g+(l.avail_in-5),_=l.next_out,_t=l.output,d=_-(v-l.avail_out),N=_+(l.avail_out-257),T=x.dmax,I=x.wsize,D=x.whave,C=x.wnext,W=x.window,U=x.hold,B=x.bits,ct=x.lencode,J=x.distcode,gt=(1<<x.lenbits)-1,lt=(1<<x.distbits)-1;t:do{B<15&&(U+=Tt[g++]<<B,B+=8,U+=Tt[g++]<<B,B+=8),M=ct[U&gt];e:for(;;){if(tt=M>>>24,U>>>=tt,B-=tt,tt=M>>>16&255,tt===0)_t[_++]=M&65535;else if(tt&16){ut=M&65535,tt&=15,tt&&(B<tt&&(U+=Tt[g++]<<B,B+=8),ut+=U&(1<<tt)-1,U>>>=tt,B-=tt),B<15&&(U+=Tt[g++]<<B,B+=8,U+=Tt[g++]<<B,B+=8),M=J[U&lt];i:for(;;){if(tt=M>>>24,U>>>=tt,B-=tt,tt=M>>>16&255,tt&16){if(Ft=M&65535,tt&=15,B<tt&&(U+=Tt[g++]<<B,B+=8,B<tt&&(U+=Tt[g++]<<B,B+=8)),Ft+=U&(1<<tt)-1,Ft>T){l.msg="invalid distance too far back",x.mode=n;break t}if(U>>>=tt,B-=tt,tt=_-d,Ft>tt){if(tt=Ft-tt,tt>D&&x.sane){l.msg="invalid distance too far back",x.mode=n;break t}if(mt=0,At=W,C===0){if(mt+=I-tt,tt<ut){ut-=tt;do _t[_++]=W[mt++];while(--tt);mt=_-Ft,At=_t}}else if(C<tt){if(mt+=I+C-tt,tt-=C,tt<ut){ut-=tt;do _t[_++]=W[mt++];while(--tt);if(mt=0,C<ut){tt=C,ut-=tt;do _t[_++]=W[mt++];while(--tt);mt=_-Ft,At=_t}}}else if(mt+=C-tt,tt<ut){ut-=tt;do _t[_++]=W[mt++];while(--tt);mt=_-Ft,At=_t}for(;ut>2;)_t[_++]=At[mt++],_t[_++]=At[mt++],_t[_++]=At[mt++],ut-=3;ut&&(_t[_++]=At[mt++],ut>1&&(_t[_++]=At[mt++]))}else{mt=_-Ft;do _t[_++]=_t[mt++],_t[_++]=_t[mt++],_t[_++]=_t[mt++],ut-=3;while(ut>2);ut&&(_t[_++]=_t[mt++],ut>1&&(_t[_++]=_t[mt++]))}}else if((tt&64)===0){M=J[(M&65535)+(U&(1<<tt)-1)];continue i}else{l.msg="invalid distance code",x.mode=n;break t}break}}else if((tt&64)===0){M=ct[(M&65535)+(U&(1<<tt)-1)];continue e}else if(tt&32){x.mode=f;break t}else{l.msg="invalid literal/length code",x.mode=n;break t}break}}while(g<u&&_<N);ut=B>>3,g-=ut,B-=ut<<3,U&=(1<<B)-1,l.next_in=g,l.next_out=_,l.avail_in=g<u?5+(u-g):5-(g-u),l.avail_out=_<N?257+(N-_):257-(_-N),x.hold=U,x.bits=B}},function(y,t,n){"use strict";var f=n(33),h=15,l=852,v=592,x=0,g=1,u=2,_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],T=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];y.exports=function(D,C,W,U,B,ct,J,gt){var lt=gt.bits,M=0,tt=0,ut=0,Ft=0,mt=0,At=0,Tt=0,_t=0,Gt=0,H=0,q,et,pt,Nt,xt,It=null,Ot=0,Ht,zt=new f.Buf16(h+1),re=new f.Buf16(h+1),O=null,A=0,Q,it,vt;for(M=0;M<=h;M++)zt[M]=0;for(tt=0;tt<U;tt++)zt[C[W+tt]]++;for(mt=lt,Ft=h;Ft>=1&&zt[Ft]===0;Ft--);if(mt>Ft&&(mt=Ft),Ft===0)return B[ct++]=1<<24|64<<16|0,B[ct++]=1<<24|64<<16|0,gt.bits=1,0;for(ut=1;ut<Ft&&zt[ut]===0;ut++);for(mt<ut&&(mt=ut),_t=1,M=1;M<=h;M++)if(_t<<=1,_t-=zt[M],_t<0)return-1;if(_t>0&&(D===x||Ft!==1))return-1;for(re[1]=0,M=1;M<h;M++)re[M+1]=re[M]+zt[M];for(tt=0;tt<U;tt++)C[W+tt]!==0&&(J[re[C[W+tt]]++]=tt);if(D===x?(It=O=J,Ht=19):D===g?(It=_,Ot-=257,O=d,A-=257,Ht=256):(It=N,O=T,Ht=-1),H=0,tt=0,M=ut,xt=ct,At=mt,Tt=0,pt=-1,Gt=1<<mt,Nt=Gt-1,D===g&&Gt>l||D===u&&Gt>v)return 1;for(;;){Q=M-Tt,J[tt]<Ht?(it=0,vt=J[tt]):J[tt]>Ht?(it=O[A+J[tt]],vt=It[Ot+J[tt]]):(it=32+64,vt=0),q=1<<M-Tt,et=1<<At,ut=et;do et-=q,B[xt+(H>>Tt)+et]=Q<<24|it<<16|vt|0;while(et!==0);for(q=1<<M-1;H&q;)q>>=1;if(q!==0?(H&=q-1,H+=q):H=0,tt++,--zt[M]===0){if(M===Ft)break;M=C[W+J[tt]]}if(M>mt&&(H&Nt)!==pt){for(Tt===0&&(Tt=mt),xt+=ut,At=M-Tt,_t=1<<At;At+Tt<Ft&&(_t-=zt[At+Tt],!(_t<=0));)At++,_t<<=1;if(Gt+=1<<At,D===g&&Gt>l||D===u&&Gt>v)return 1;pt=H&Nt,B[pt]=mt<<24|At<<16|xt-ct|0}}return H!==0&&(B[xt+H]=M-Tt<<24|64<<16|0),gt.bits=mt,0}},function(y,t,n){"use strict";var f=n(33),h=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var v=new f.Buf8(256),x=0;x<256;x++)v[x]=x>=252?6:x>=248?5:x>=240?4:x>=224?3:x>=192?2:1;v[254]=v[254]=1,t.string2buf=function(u){var _,d,N,T,I,D=u.length,C=0;for(T=0;T<D;T++)d=u.charCodeAt(T),(d&64512)===55296&&T+1<D&&(N=u.charCodeAt(T+1),(N&64512)===56320&&(d=65536+(d-55296<<10)+(N-56320),T++)),C+=d<128?1:d<2048?2:d<65536?3:4;for(_=new f.Buf8(C),I=0,T=0;I<C;T++)d=u.charCodeAt(T),(d&64512)===55296&&T+1<D&&(N=u.charCodeAt(T+1),(N&64512)===56320&&(d=65536+(d-55296<<10)+(N-56320),T++)),d<128?_[I++]=d:d<2048?(_[I++]=192|d>>>6,_[I++]=128|d&63):d<65536?(_[I++]=224|d>>>12,_[I++]=128|d>>>6&63,_[I++]=128|d&63):(_[I++]=240|d>>>18,_[I++]=128|d>>>12&63,_[I++]=128|d>>>6&63,_[I++]=128|d&63);return _};function g(u,_){if(_<65537&&(u.subarray&&l||!u.subarray&&h))return String.fromCharCode.apply(null,f.shrinkBuf(u,_));for(var d="",N=0;N<_;N++)d+=String.fromCharCode(u[N]);return d}t.buf2binstring=function(u){return g(u,u.length)},t.binstring2buf=function(u){for(var _=new f.Buf8(u.length),d=0,N=_.length;d<N;d++)_[d]=u.charCodeAt(d);return _},t.buf2string=function(u,_){var d,N,T,I,D=_||u.length,C=new Array(D*2);for(N=0,d=0;d<D;){if(T=u[d++],T<128){C[N++]=T;continue}if(I=v[T],I>4){C[N++]=65533,d+=I-1;continue}for(T&=I===2?31:I===3?15:7;I>1&&d<D;)T=T<<6|u[d++]&63,I--;if(I>1){C[N++]=65533;continue}T<65536?C[N++]=T:(T-=65536,C[N++]=55296|T>>10&1023,C[N++]=56320|T&1023)}return g(C,N)},t.utf8border=function(u,_){var d;for(_=_||u.length,_>u.length&&(_=u.length),d=_-1;d>=0&&(u[d]&192)===128;)d--;return d<0||d===0?_:d+v[u[d]]>_?d:_}},function(y,t){"use strict";y.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(y,t){"use strict";y.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(y,t){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}y.exports=n},function(y,t){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}y.exports=n}])})});var Zo=ae(ur=>{"use strict";ur.byteLength=fc;ur.toByteArray=uc;ur.fromByteArray=pc;var ze=[],Ne=[],ac=typeof Uint8Array<"u"?Uint8Array:Array,Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ai=0,qo=Xr.length;ai<qo;++ai)ze[ai]=Xr[ai],Ne[Xr.charCodeAt(ai)]=ai;var ai,qo;Ne["-".charCodeAt(0)]=62;Ne["_".charCodeAt(0)]=63;function Vo(y){var t=y.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=y.indexOf("=");n===-1&&(n=t);var f=n===t?0:4-n%4;return[n,f]}function fc(y){var t=Vo(y),n=t[0],f=t[1];return(n+f)*3/4-f}function cc(y,t,n){return(t+n)*3/4-n}function uc(y){var t,n=Vo(y),f=n[0],h=n[1],l=new ac(cc(y,f,h)),v=0,x=h>0?f-4:f,g;for(g=0;g<x;g+=4)t=Ne[y.charCodeAt(g)]<<18|Ne[y.charCodeAt(g+1)]<<12|Ne[y.charCodeAt(g+2)]<<6|Ne[y.charCodeAt(g+3)],l[v++]=t>>16&255,l[v++]=t>>8&255,l[v++]=t&255;return h===2&&(t=Ne[y.charCodeAt(g)]<<2|Ne[y.charCodeAt(g+1)]>>4,l[v++]=t&255),h===1&&(t=Ne[y.charCodeAt(g)]<<10|Ne[y.charCodeAt(g+1)]<<4|Ne[y.charCodeAt(g+2)]>>2,l[v++]=t>>8&255,l[v++]=t&255),l}function hc(y){return ze[y>>18&63]+ze[y>>12&63]+ze[y>>6&63]+ze[y&63]}function lc(y,t,n){for(var f,h=[],l=t;l<n;l+=3)f=(y[l]<<16&16711680)+(y[l+1]<<8&65280)+(y[l+2]&255),h.push(hc(f));return h.join("")}function pc(y){for(var t,n=y.length,f=n%3,h=[],l=16383,v=0,x=n-f;v<x;v+=l)h.push(lc(y,v,v+l>x?x:v+l));return f===1?(t=y[n-1],h.push(ze[t>>2]+ze[t<<4&63]+"==")):f===2&&(t=(y[n-2]<<8)+y[n-1],h.push(ze[t>>10]+ze[t>>4&63]+ze[t<<2&63]+"=")),h.join("")}});var Xo=ae(Yr=>{Yr.read=function(y,t,n,f,h){var l,v,x=h*8-f-1,g=(1<<x)-1,u=g>>1,_=-7,d=n?h-1:0,N=n?-1:1,T=y[t+d];for(d+=N,l=T&(1<<-_)-1,T>>=-_,_+=x;_>0;l=l*256+y[t+d],d+=N,_-=8);for(v=l&(1<<-_)-1,l>>=-_,_+=f;_>0;v=v*256+y[t+d],d+=N,_-=8);if(l===0)l=1-u;else{if(l===g)return v?NaN:(T?-1:1)*(1/0);v=v+Math.pow(2,f),l=l-u}return(T?-1:1)*v*Math.pow(2,l-f)};Yr.write=function(y,t,n,f,h,l){var v,x,g,u=l*8-h-1,_=(1<<u)-1,d=_>>1,N=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=f?0:l-1,I=f?1:-1,D=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,v=_):(v=Math.floor(Math.log(t)/Math.LN2),t*(g=Math.pow(2,-v))<1&&(v--,g*=2),v+d>=1?t+=N/g:t+=N*Math.pow(2,1-d),t*g>=2&&(v++,g/=2),v+d>=_?(x=0,v=_):v+d>=1?(x=(t*g-1)*Math.pow(2,h),v=v+d):(x=t*Math.pow(2,d-1)*Math.pow(2,h),v=0));h>=8;y[n+T]=x&255,T+=I,x/=256,h-=8);for(v=v<<h|x,u+=h;u>0;y[n+T]=v&255,T+=I,v/=256,u-=8);y[n+T-I]|=D*128}});var hs=ae(bi=>{"use strict";var Gr=Zo(),Ei=Xo(),Yo=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;bi.Buffer=Z;bi.SlowBuffer=wc;bi.INSPECT_MAX_BYTES=50;var hr=2147483647;bi.kMaxLength=hr;Z.TYPED_ARRAY_SUPPORT=dc();!Z.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function dc(){try{let y=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(y,t),y.foo()===42}catch{return!1}}Object.defineProperty(Z.prototype,"parent",{enumerable:!0,get:function(){if(!!Z.isBuffer(this))return this.buffer}});Object.defineProperty(Z.prototype,"offset",{enumerable:!0,get:function(){if(!!Z.isBuffer(this))return this.byteOffset}});function Ze(y){if(y>hr)throw new RangeError('The value "'+y+'" is invalid for option "size"');let t=new Uint8Array(y);return Object.setPrototypeOf(t,Z.prototype),t}function Z(y,t,n){if(typeof y=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $r(y)}return Qo(y,t,n)}Z.poolSize=8192;function Qo(y,t,n){if(typeof y=="string")return gc(y,t);if(ArrayBuffer.isView(y))return mc(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Me(y,ArrayBuffer)||y&&Me(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Me(y,SharedArrayBuffer)||y&&Me(y.buffer,SharedArrayBuffer)))return Kr(y,t,n);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let f=y.valueOf&&y.valueOf();if(f!=null&&f!==y)return Z.from(f,t,n);let h=vc(y);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return Z.from(y[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}Z.from=function(y,t,n){return Qo(y,t,n)};Object.setPrototypeOf(Z.prototype,Uint8Array.prototype);Object.setPrototypeOf(Z,Uint8Array);function $o(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function yc(y,t,n){return $o(y),y<=0?Ze(y):t!==void 0?typeof n=="string"?Ze(y).fill(t,n):Ze(y).fill(t):Ze(y)}Z.alloc=function(y,t,n){return yc(y,t,n)};function $r(y){return $o(y),Ze(y<0?0:tn(y)|0)}Z.allocUnsafe=function(y){return $r(y)};Z.allocUnsafeSlow=function(y){return $r(y)};function gc(y,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Z.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=ts(y,t)|0,f=Ze(n),h=f.write(y,t);return h!==n&&(f=f.slice(0,h)),f}function Jr(y){let t=y.length<0?0:tn(y.length)|0,n=Ze(t);for(let f=0;f<t;f+=1)n[f]=y[f]&255;return n}function mc(y){if(Me(y,Uint8Array)){let t=new Uint8Array(y);return Kr(t.buffer,t.byteOffset,t.byteLength)}return Jr(y)}function Kr(y,t,n){if(t<0||y.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let f;return t===void 0&&n===void 0?f=new Uint8Array(y):n===void 0?f=new Uint8Array(y,t):f=new Uint8Array(y,t,n),Object.setPrototypeOf(f,Z.prototype),f}function vc(y){if(Z.isBuffer(y)){let t=tn(y.length)|0,n=Ze(t);return n.length===0||y.copy(n,0,0,t),n}if(y.length!==void 0)return typeof y.length!="number"||rn(y.length)?Ze(0):Jr(y);if(y.type==="Buffer"&&Array.isArray(y.data))return Jr(y.data)}function tn(y){if(y>=hr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hr.toString(16)+" bytes");return y|0}function wc(y){return+y!=y&&(y=0),Z.alloc(+y)}Z.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Z.prototype};Z.compare=function(t,n){if(Me(t,Uint8Array)&&(t=Z.from(t,t.offset,t.byteLength)),Me(n,Uint8Array)&&(n=Z.from(n,n.offset,n.byteLength)),!Z.isBuffer(t)||!Z.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let f=t.length,h=n.length;for(let l=0,v=Math.min(f,h);l<v;++l)if(t[l]!==n[l]){f=t[l],h=n[l];break}return f<h?-1:h<f?1:0};Z.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Z.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Z.alloc(0);let f;if(n===void 0)for(n=0,f=0;f<t.length;++f)n+=t[f].length;let h=Z.allocUnsafe(n),l=0;for(f=0;f<t.length;++f){let v=t[f];if(Me(v,Uint8Array))l+v.length>h.length?(Z.isBuffer(v)||(v=Z.from(v)),v.copy(h,l)):Uint8Array.prototype.set.call(h,v,l);else if(Z.isBuffer(v))v.copy(h,l);else throw new TypeError('"list" argument must be an Array of Buffers');l+=v.length}return h};function ts(y,t){if(Z.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Me(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);let n=y.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&n===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Qr(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return us(y).length;default:if(h)return f?-1:Qr(y).length;t=(""+t).toLowerCase(),h=!0}}Z.byteLength=ts;function Sc(y,t,n){let f=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(y||(y="utf8");;)switch(y){case"hex":return Tc(this,t,n);case"utf8":case"utf-8":return is(this,t,n);case"ascii":return Nc(this,t,n);case"latin1":case"binary":return Rc(this,t,n);case"base64":return Ic(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oc(this,t,n);default:if(f)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),f=!0}}Z.prototype._isBuffer=!0;function fi(y,t,n){let f=y[t];y[t]=y[n],y[n]=f}Z.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)fi(this,n,n+1);return this};Z.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)fi(this,n,n+3),fi(this,n+1,n+2);return this};Z.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)fi(this,n,n+7),fi(this,n+1,n+6),fi(this,n+2,n+5),fi(this,n+3,n+4);return this};Z.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?is(this,0,t):Sc.apply(this,arguments)};Z.prototype.toLocaleString=Z.prototype.toString;Z.prototype.equals=function(t){if(!Z.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Z.compare(this,t)===0};Z.prototype.inspect=function(){let t="",n=bi.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};Yo&&(Z.prototype[Yo]=Z.prototype.inspect);Z.prototype.compare=function(t,n,f,h,l){if(Me(t,Uint8Array)&&(t=Z.from(t,t.offset,t.byteLength)),!Z.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),f===void 0&&(f=t?t.length:0),h===void 0&&(h=0),l===void 0&&(l=this.length),n<0||f>t.length||h<0||l>this.length)throw new RangeError("out of range index");if(h>=l&&n>=f)return 0;if(h>=l)return-1;if(n>=f)return 1;if(n>>>=0,f>>>=0,h>>>=0,l>>>=0,this===t)return 0;let v=l-h,x=f-n,g=Math.min(v,x),u=this.slice(h,l),_=t.slice(n,f);for(let d=0;d<g;++d)if(u[d]!==_[d]){v=u[d],x=_[d];break}return v<x?-1:x<v?1:0};function es(y,t,n,f,h){if(y.length===0)return-1;if(typeof n=="string"?(f=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,rn(n)&&(n=h?0:y.length-1),n<0&&(n=y.length+n),n>=y.length){if(h)return-1;n=y.length-1}else if(n<0)if(h)n=0;else return-1;if(typeof t=="string"&&(t=Z.from(t,f)),Z.isBuffer(t))return t.length===0?-1:Go(y,t,n,f,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(y,t,n):Uint8Array.prototype.lastIndexOf.call(y,t,n):Go(y,[t],n,f,h);throw new TypeError("val must be string, number or Buffer")}function Go(y,t,n,f,h){let l=1,v=y.length,x=t.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(y.length<2||t.length<2)return-1;l=2,v/=2,x/=2,n/=2}function g(_,d){return l===1?_[d]:_.readUInt16BE(d*l)}let u;if(h){let _=-1;for(u=n;u<v;u++)if(g(y,u)===g(t,_===-1?0:u-_)){if(_===-1&&(_=u),u-_+1===x)return _*l}else _!==-1&&(u-=u-_),_=-1}else for(n+x>v&&(n=v-x),u=n;u>=0;u--){let _=!0;for(let d=0;d<x;d++)if(g(y,u+d)!==g(t,d)){_=!1;break}if(_)return u}return-1}Z.prototype.includes=function(t,n,f){return this.indexOf(t,n,f)!==-1};Z.prototype.indexOf=function(t,n,f){return es(this,t,n,f,!0)};Z.prototype.lastIndexOf=function(t,n,f){return es(this,t,n,f,!1)};function xc(y,t,n,f){n=Number(n)||0;let h=y.length-n;f?(f=Number(f),f>h&&(f=h)):f=h;let l=t.length;f>l/2&&(f=l/2);let v;for(v=0;v<f;++v){let x=parseInt(t.substr(v*2,2),16);if(rn(x))return v;y[n+v]=x}return v}function Ec(y,t,n,f){return lr(Qr(t,y.length-n),y,n,f)}function _c(y,t,n,f){return lr(Cc(t),y,n,f)}function bc(y,t,n,f){return lr(us(t),y,n,f)}function Fc(y,t,n,f){return lr(Bc(t,y.length-n),y,n,f)}Z.prototype.write=function(t,n,f,h){if(n===void 0)h="utf8",f=this.length,n=0;else if(f===void 0&&typeof n=="string")h=n,f=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(f)?(f=f>>>0,h===void 0&&(h="utf8")):(h=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let l=this.length-n;if((f===void 0||f>l)&&(f=l),t.length>0&&(f<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let v=!1;for(;;)switch(h){case"hex":return xc(this,t,n,f);case"utf8":case"utf-8":return Ec(this,t,n,f);case"ascii":case"latin1":case"binary":return _c(this,t,n,f);case"base64":return bc(this,t,n,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fc(this,t,n,f);default:if(v)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),v=!0}};Z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ic(y,t,n){return t===0&&n===y.length?Gr.fromByteArray(y):Gr.fromByteArray(y.slice(t,n))}function is(y,t,n){n=Math.min(y.length,n);let f=[],h=t;for(;h<n;){let l=y[h],v=null,x=l>239?4:l>223?3:l>191?2:1;if(h+x<=n){let g,u,_,d;switch(x){case 1:l<128&&(v=l);break;case 2:g=y[h+1],(g&192)===128&&(d=(l&31)<<6|g&63,d>127&&(v=d));break;case 3:g=y[h+1],u=y[h+2],(g&192)===128&&(u&192)===128&&(d=(l&15)<<12|(g&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(v=d));break;case 4:g=y[h+1],u=y[h+2],_=y[h+3],(g&192)===128&&(u&192)===128&&(_&192)===128&&(d=(l&15)<<18|(g&63)<<12|(u&63)<<6|_&63,d>65535&&d<1114112&&(v=d))}}v===null?(v=65533,x=1):v>65535&&(v-=65536,f.push(v>>>10&1023|55296),v=56320|v&1023),f.push(v),h+=x}return kc(f)}var Jo=4096;function kc(y){let t=y.length;if(t<=Jo)return String.fromCharCode.apply(String,y);let n="",f=0;for(;f<t;)n+=String.fromCharCode.apply(String,y.slice(f,f+=Jo));return n}function Nc(y,t,n){let f="";n=Math.min(y.length,n);for(let h=t;h<n;++h)f+=String.fromCharCode(y[h]&127);return f}function Rc(y,t,n){let f="";n=Math.min(y.length,n);for(let h=t;h<n;++h)f+=String.fromCharCode(y[h]);return f}function Tc(y,t,n){let f=y.length;(!t||t<0)&&(t=0),(!n||n<0||n>f)&&(n=f);let h="";for(let l=t;l<n;++l)h+=zc[y[l]];return h}function Oc(y,t,n){let f=y.slice(t,n),h="";for(let l=0;l<f.length-1;l+=2)h+=String.fromCharCode(f[l]+f[l+1]*256);return h}Z.prototype.slice=function(t,n){let f=this.length;t=~~t,n=n===void 0?f:~~n,t<0?(t+=f,t<0&&(t=0)):t>f&&(t=f),n<0?(n+=f,n<0&&(n=0)):n>f&&(n=f),n<t&&(n=t);let h=this.subarray(t,n);return Object.setPrototypeOf(h,Z.prototype),h};function fe(y,t,n){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+t>n)throw new RangeError("Trying to access beyond buffer length")}Z.prototype.readUintLE=Z.prototype.readUIntLE=function(t,n,f){t=t>>>0,n=n>>>0,f||fe(t,n,this.length);let h=this[t],l=1,v=0;for(;++v<n&&(l*=256);)h+=this[t+v]*l;return h};Z.prototype.readUintBE=Z.prototype.readUIntBE=function(t,n,f){t=t>>>0,n=n>>>0,f||fe(t,n,this.length);let h=this[t+--n],l=1;for(;n>0&&(l*=256);)h+=this[t+--n]*l;return h};Z.prototype.readUint8=Z.prototype.readUInt8=function(t,n){return t=t>>>0,n||fe(t,1,this.length),this[t]};Z.prototype.readUint16LE=Z.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||fe(t,2,this.length),this[t]|this[t+1]<<8};Z.prototype.readUint16BE=Z.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||fe(t,2,this.length),this[t]<<8|this[t+1]};Z.prototype.readUint32LE=Z.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||fe(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Z.prototype.readUint32BE=Z.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||fe(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Z.prototype.readBigUInt64LE=Ge(function(t){t=t>>>0,_i(t,"offset");let n=this[t],f=this[t+7];(n===void 0||f===void 0)&&Ui(t,this.length-8);let h=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,l=this[++t]+this[++t]*2**8+this[++t]*2**16+f*2**24;return BigInt(h)+(BigInt(l)<<BigInt(32))});Z.prototype.readBigUInt64BE=Ge(function(t){t=t>>>0,_i(t,"offset");let n=this[t],f=this[t+7];(n===void 0||f===void 0)&&Ui(t,this.length-8);let h=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],l=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+f;return(BigInt(h)<<BigInt(32))+BigInt(l)});Z.prototype.readIntLE=function(t,n,f){t=t>>>0,n=n>>>0,f||fe(t,n,this.length);let h=this[t],l=1,v=0;for(;++v<n&&(l*=256);)h+=this[t+v]*l;return l*=128,h>=l&&(h-=Math.pow(2,8*n)),h};Z.prototype.readIntBE=function(t,n,f){t=t>>>0,n=n>>>0,f||fe(t,n,this.length);let h=n,l=1,v=this[t+--h];for(;h>0&&(l*=256);)v+=this[t+--h]*l;return l*=128,v>=l&&(v-=Math.pow(2,8*n)),v};Z.prototype.readInt8=function(t,n){return t=t>>>0,n||fe(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Z.prototype.readInt16LE=function(t,n){t=t>>>0,n||fe(t,2,this.length);let f=this[t]|this[t+1]<<8;return f&32768?f|4294901760:f};Z.prototype.readInt16BE=function(t,n){t=t>>>0,n||fe(t,2,this.length);let f=this[t+1]|this[t]<<8;return f&32768?f|4294901760:f};Z.prototype.readInt32LE=function(t,n){return t=t>>>0,n||fe(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Z.prototype.readInt32BE=function(t,n){return t=t>>>0,n||fe(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Z.prototype.readBigInt64LE=Ge(function(t){t=t>>>0,_i(t,"offset");let n=this[t],f=this[t+7];(n===void 0||f===void 0)&&Ui(t,this.length-8);let h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(f<<24);return(BigInt(h)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Z.prototype.readBigInt64BE=Ge(function(t){t=t>>>0,_i(t,"offset");let n=this[t],f=this[t+7];(n===void 0||f===void 0)&&Ui(t,this.length-8);let h=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+f)});Z.prototype.readFloatLE=function(t,n){return t=t>>>0,n||fe(t,4,this.length),Ei.read(this,t,!0,23,4)};Z.prototype.readFloatBE=function(t,n){return t=t>>>0,n||fe(t,4,this.length),Ei.read(this,t,!1,23,4)};Z.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||fe(t,8,this.length),Ei.read(this,t,!0,52,8)};Z.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||fe(t,8,this.length),Ei.read(this,t,!1,52,8)};function we(y,t,n,f,h,l){if(!Z.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<l)throw new RangeError('"value" argument is out of bounds');if(n+f>y.length)throw new RangeError("Index out of range")}Z.prototype.writeUintLE=Z.prototype.writeUIntLE=function(t,n,f,h){if(t=+t,n=n>>>0,f=f>>>0,!h){let x=Math.pow(2,8*f)-1;we(this,t,n,f,x,0)}let l=1,v=0;for(this[n]=t&255;++v<f&&(l*=256);)this[n+v]=t/l&255;return n+f};Z.prototype.writeUintBE=Z.prototype.writeUIntBE=function(t,n,f,h){if(t=+t,n=n>>>0,f=f>>>0,!h){let x=Math.pow(2,8*f)-1;we(this,t,n,f,x,0)}let l=f-1,v=1;for(this[n+l]=t&255;--l>=0&&(v*=256);)this[n+l]=t/v&255;return n+f};Z.prototype.writeUint8=Z.prototype.writeUInt8=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,1,255,0),this[n]=t&255,n+1};Z.prototype.writeUint16LE=Z.prototype.writeUInt16LE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};Z.prototype.writeUint16BE=Z.prototype.writeUInt16BE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};Z.prototype.writeUint32LE=Z.prototype.writeUInt32LE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};Z.prototype.writeUint32BE=Z.prototype.writeUInt32BE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function rs(y,t,n,f,h){cs(t,f,h,y,n,7);let l=Number(t&BigInt(4294967295));y[n++]=l,l=l>>8,y[n++]=l,l=l>>8,y[n++]=l,l=l>>8,y[n++]=l;let v=Number(t>>BigInt(32)&BigInt(4294967295));return y[n++]=v,v=v>>8,y[n++]=v,v=v>>8,y[n++]=v,v=v>>8,y[n++]=v,n}function ns(y,t,n,f,h){cs(t,f,h,y,n,7);let l=Number(t&BigInt(4294967295));y[n+7]=l,l=l>>8,y[n+6]=l,l=l>>8,y[n+5]=l,l=l>>8,y[n+4]=l;let v=Number(t>>BigInt(32)&BigInt(4294967295));return y[n+3]=v,v=v>>8,y[n+2]=v,v=v>>8,y[n+1]=v,v=v>>8,y[n]=v,n+8}Z.prototype.writeBigUInt64LE=Ge(function(t,n=0){return rs(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});Z.prototype.writeBigUInt64BE=Ge(function(t,n=0){return ns(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});Z.prototype.writeIntLE=function(t,n,f,h){if(t=+t,n=n>>>0,!h){let g=Math.pow(2,8*f-1);we(this,t,n,f,g-1,-g)}let l=0,v=1,x=0;for(this[n]=t&255;++l<f&&(v*=256);)t<0&&x===0&&this[n+l-1]!==0&&(x=1),this[n+l]=(t/v>>0)-x&255;return n+f};Z.prototype.writeIntBE=function(t,n,f,h){if(t=+t,n=n>>>0,!h){let g=Math.pow(2,8*f-1);we(this,t,n,f,g-1,-g)}let l=f-1,v=1,x=0;for(this[n+l]=t&255;--l>=0&&(v*=256);)t<0&&x===0&&this[n+l+1]!==0&&(x=1),this[n+l]=(t/v>>0)-x&255;return n+f};Z.prototype.writeInt8=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};Z.prototype.writeInt16LE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};Z.prototype.writeInt16BE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};Z.prototype.writeInt32LE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};Z.prototype.writeInt32BE=function(t,n,f){return t=+t,n=n>>>0,f||we(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};Z.prototype.writeBigInt64LE=Ge(function(t,n=0){return rs(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Z.prototype.writeBigInt64BE=Ge(function(t,n=0){return ns(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function os(y,t,n,f,h,l){if(n+f>y.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ss(y,t,n,f,h){return t=+t,n=n>>>0,h||os(y,t,n,4,34028234663852886e22,-34028234663852886e22),Ei.write(y,t,n,f,23,4),n+4}Z.prototype.writeFloatLE=function(t,n,f){return ss(this,t,n,!0,f)};Z.prototype.writeFloatBE=function(t,n,f){return ss(this,t,n,!1,f)};function as(y,t,n,f,h){return t=+t,n=n>>>0,h||os(y,t,n,8,17976931348623157e292,-17976931348623157e292),Ei.write(y,t,n,f,52,8),n+8}Z.prototype.writeDoubleLE=function(t,n,f){return as(this,t,n,!0,f)};Z.prototype.writeDoubleBE=function(t,n,f){return as(this,t,n,!1,f)};Z.prototype.copy=function(t,n,f,h){if(!Z.isBuffer(t))throw new TypeError("argument should be a Buffer");if(f||(f=0),!h&&h!==0&&(h=this.length),n>=t.length&&(n=t.length),n||(n=0),h>0&&h<f&&(h=f),h===f||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-n<h-f&&(h=t.length-n+f);let l=h-f;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,f,h):Uint8Array.prototype.set.call(t,this.subarray(f,h),n),l};Z.prototype.fill=function(t,n,f,h){if(typeof t=="string"){if(typeof n=="string"?(h=n,n=0,f=this.length):typeof f=="string"&&(h=f,f=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!Z.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){let v=t.charCodeAt(0);(h==="utf8"&&v<128||h==="latin1")&&(t=v)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<f)throw new RangeError("Out of range index");if(f<=n)return this;n=n>>>0,f=f===void 0?this.length:f>>>0,t||(t=0);let l;if(typeof t=="number")for(l=n;l<f;++l)this[l]=t;else{let v=Z.isBuffer(t)?t:Z.from(t,h),x=v.length;if(x===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(l=0;l<f-n;++l)this[l+n]=v[l%x]}return this};var xi={};function en(y,t,n){xi[y]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}en("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);en("ERR_INVALID_ARG_TYPE",function(y,t){return`The "${y}" argument must be of type number. Received type ${typeof t}`},TypeError);en("ERR_OUT_OF_RANGE",function(y,t,n){let f=`The value of "${y}" is out of range.`,h=n;return Number.isInteger(n)&&Math.abs(n)>2**32?h=Ko(String(n)):typeof n=="bigint"&&(h=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(h=Ko(h)),h+="n"),f+=` It must be ${t}. Received ${h}`,f},RangeError);function Ko(y){let t="",n=y.length,f=y[0]==="-"?1:0;for(;n>=f+4;n-=3)t=`_${y.slice(n-3,n)}${t}`;return`${y.slice(0,n)}${t}`}function Ac(y,t,n){_i(t,"offset"),(y[t]===void 0||y[t+n]===void 0)&&Ui(t,y.length-(n+1))}function cs(y,t,n,f,h,l){if(y>n||y<t){let v=typeof t=="bigint"?"n":"",x;throw l>3?t===0||t===BigInt(0)?x=`>= 0${v} and < 2${v} ** ${(l+1)*8}${v}`:x=`>= -(2${v} ** ${(l+1)*8-1}${v}) and < 2 ** ${(l+1)*8-1}${v}`:x=`>= ${t}${v} and <= ${n}${v}`,new xi.ERR_OUT_OF_RANGE("value",x,y)}Ac(f,h,l)}function _i(y,t){if(typeof y!="number")throw new xi.ERR_INVALID_ARG_TYPE(t,"number",y)}function Ui(y,t,n){throw Math.floor(y)!==y?(_i(y,n),new xi.ERR_OUT_OF_RANGE(n||"offset","an integer",y)):t<0?new xi.ERR_BUFFER_OUT_OF_BOUNDS:new xi.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,y)}var Lc=/[^+/0-9A-Za-z-_]/g;function Dc(y){if(y=y.split("=")[0],y=y.trim().replace(Lc,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function Qr(y,t){t=t||1/0;let n,f=y.length,h=null,l=[];for(let v=0;v<f;++v){if(n=y.charCodeAt(v),n>55295&&n<57344){if(!h){if(n>56319){(t-=3)>-1&&l.push(239,191,189);continue}else if(v+1===f){(t-=3)>-1&&l.push(239,191,189);continue}h=n;continue}if(n<56320){(t-=3)>-1&&l.push(239,191,189),h=n;continue}n=(h-55296<<10|n-56320)+65536}else h&&(t-=3)>-1&&l.push(239,191,189);if(h=null,n<128){if((t-=1)<0)break;l.push(n)}else if(n<2048){if((t-=2)<0)break;l.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;l.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return l}function Cc(y){let t=[];for(let n=0;n<y.length;++n)t.push(y.charCodeAt(n)&255);return t}function Bc(y,t){let n,f,h,l=[];for(let v=0;v<y.length&&!((t-=2)<0);++v)n=y.charCodeAt(v),f=n>>8,h=n%256,l.push(h),l.push(f);return l}function us(y){return Gr.toByteArray(Dc(y))}function lr(y,t,n,f){let h;for(h=0;h<f&&!(h+n>=t.length||h>=y.length);++h)t[h+n]=y[h];return h}function Me(y,t){return y instanceof t||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===t.name}function rn(y){return y!==y}var zc=function(){let y="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let f=n*16;for(let h=0;h<16;++h)t[f+h]=y[n]+y[h]}return t}();function Ge(y){return typeof BigInt>"u"?Mc:y}function Mc(){throw new Error("BigInt not supported")}});var vs=ae((mh,Vc)=>{Vc.exports=`\r
\r
\r
<!--\r
\r
<Menu>\r
<ImageOrVid><Result watched image>\r
<Result Spectrogram> <Compared Spectrogram> (can overlay)\r
<Res2>               <Comp2>\r
    ...                 ...\r
\r
todo:\r
\r
Concise menu, finish file loading\r
Result list + comparison\r
Result saving/loading files\r
mediarecorder on canvas result too for vod\r
webworkers probably good idea for processing image on secondary canvases\r
\r
frame buffering stuff cuz graphs\r
\r
\r
-->\r
\r
        <div>\r
            <canvas id="picker" style="position:absolute; z-index:3; width:49.99%; height:25%;" width="49.99%" height="25%"></canvas>\r
            <img src="" style="position:absolute; z-index:1; width:49.99%; height:25%;" width="49.99%" height="25%"></img>\r
            <video src="" style="position:absolute; display:none; z-index:2; width:49.99%; height:25%;" width="49.99%" height="25%"></video>\r
        </div>\r
        <canvas id="capture" style="position:absolute; left:50vw; z-index:11; width:49.99%; height:25%;"  width="49.99%" height="25%"></canvas>\r
\r
        <div id="menu" style="position:absolute; top:27.5%;">\r
            <button id="snip">Capture</button>\r
            <button id="animate">Record</button>\r
            <button id="webcam">Use Webcam</button>\r
            <button id="image">Use Image</button>\r
            <span style="color:white;">Image:</span><select id="imgselect">\r
                <option value="src/assets/spectrum_full.png" selected>Full Image</option>\r
                <option value="src/assets/spectrum1.png">Spectrum 1</option>\r
                <option value="src/assets/spectrum2.jpg">Spectrum 2</option>\r
                <option value="src/assets/shrimp.jpg">Shrimp</option>\r
                <option value="src/assets/chickenfat.png">Chicken Fat</option>\r
                <option value="src/assets/chickenbreast.png">Chicken Breast</option>\r
                <option value="src/assets/brownbeerbottle.png">Brown Beer Bottle</option>\r
            </select>\r
            <input type="url" id="imgurl" placeholder="Image URL"></input>\r
            <button id="setImgUrl">Set Image URL</button>\r
            <input type="url" id="videourl" placeholder="Video URL"></input>\r
            <button id="setVideoUrl">Set Video URL</button>\r
            <input type="file" id="fileinput" placeholder="From File"></input>\r
            <span style="color:white;">Click to draw a rectangle around the portion of the image you want to analyze!</span>\r
        <hr>\r
        <div width="45vw" id="compare">\r
            Compare\r
        </div>\r
        <div colspan="2" width="45vw" id="captured">\r
            Captured\r
        </div>\r
        <div width="10vw" id="saved">\r
            Saved\r
        </div>`});var ke=class extends HTMLElement{template=t=>`<div> Custom Fragment Props: ${JSON.stringify(t)} </div>`;props={test:!0};useShadow=!1;oncreate=void 0;onresize=void 0;ondelete=void 0;onchanged=void 0;FRAGMENT=void 0;attachedShadow=!1;obsAttributes=["props","options","onchanged","onresize","ondelete","oncreate","template"];get observedAttributes(){return this.obsAttributes}get obsAttributes(){return this.obsAttributes}set obsAttributes(t){typeof t=="string"?this.obsAttributes.push(t):Array.isArray(t)&&(this.obsAttributes=t)}static get tag(){return this.name.toLowerCase()+"-"}static addElement(t=this.tag,n=this,f=void 0){Ve(n,t,f)}attributeChangedCallback(t,n,f){if(t==="onchanged"){let h=f;if(typeof h=="string"&&(h=Si(h)),typeof h=="function"){this.onchanged=h,this.state.data.props=this.props,this.state.unsubscribeTrigger("props"),this.state.subscribeTrigger("props",this.onchanged);let l=new CustomEvent("changed",{detail:{props:this.props}});this.state.subscribeTrigger("props",()=>{this.dispatchEvent(l)})}}else if(t==="onresize"){let h=f;if(typeof h=="string"&&(h=Si(h)),typeof h=="function"){if(this.ONRESIZE)try{window.removeEventListener("resize",this.ONRESIZE)}catch{}this.ONRESIZE=l=>{this.onresize(this.props)},this.onresize=h,window.addEventListener("resize",this.ONRESIZE)}}else if(t==="ondelete"){let h=f;typeof h=="string"&&(h=Si(h)),typeof h=="function"&&(this.ondelete=()=>{this.ONRESIZE&&window.removeEventListener("resize",this.ONRESIZE),this.state.unsubscribeTrigger("props"),h&&h(this.props)})}else if(t==="oncreate"){let h=f;typeof h=="string"&&(h=Si(h)),typeof h=="function"&&(this.oncreate=h)}else if(t==="props"){let h=f;typeof h=="string"&&(h=JSON.parse(h)),Object.assign(this.props,h),this.state.setState({props:this.props})}else if(t==="template"){let h=f;this.template=options.template,typeof h=="function"?this.templateString=this.template(this.props):this.templateString=h,this.render(this.props);let l=new CustomEvent("created",{detail:{props:this.props}});this.dispatchEvent(l)}else{let h=f;if(t.includes("eval_"))t=t.split("_"),t.shift(),t=t.join(),h=Si(f);else if(typeof f=="string")try{h=JSON.parse(f)}catch{h=f}this[t]=h,t!=="props"&&(this.props[t]=h)}}connectedCallback(){let t=this.getAttribute("props");typeof t=="string"&&(t=JSON.parse(t)),Object.assign(this.props,t),this.state.setState({props:this.props}),Array.from(this.attributes).forEach(v=>{let x=v.name,g=v.value;if(x.includes("eval_"))x=x.split("_"),x.shift(),x=x.join(),g=Si(v.value);else if(typeof v.value=="string")try{g=JSON.parse(v.value)}catch{g=v.value}this[x]||Object.defineProperties(this,v,{value:g,writable:!0,get(){return this[x]},set(u){this.setAttribute(x,u)}}),this[x]=g,x!=="props"&&(this.props[x]=g),this.obsAttributes.push(x)});let n=new CustomEvent("resized",{detail:{props:this.props}}),f=new CustomEvent("changed",{detail:{props:this.props}}),h=new CustomEvent("deleted",{detail:{props:this.props}}),l=new CustomEvent("created",{detail:{props:this.props}});if(this.render(this.props),this.dispatchEvent(l),this.state.subscribeTrigger("props",()=>{this.dispatchEvent(f)}),typeof this.onresize=="function"){if(this.ONRESIZE)try{window.removeEventListener("resize",this.ONRESIZE)}catch{}this.ONRESIZE=v=>{this.onresize(this.props),this.dispatchEvent(n)},window.addEventListener("resize",this.ONRESIZE)}if(typeof this.ondelete=="function"){let v=this.ondelete;this.ondelete=(x=this.props)=>{this.ONRESIZE&&window.removeEventListener("resize",this.ONRESIZE),this.state.unsubscribeTrigger("props"),this.dispatchEvent(h),v(x)}}typeof this.onchanged=="function"&&(this.state.data.props=this.props,this.state.subscribeTrigger("props",this.onchanged))}constructor(){super()}delete=()=>{this.remove(),typeof this.ondelete=="function"&&this.ondelete(this.props)};render=(t=this.props)=>{typeof this.template=="function"?this.templateString=this.template(t):this.templateString=this.template;let n=document.createElement("template");n.innerHTML=this.templateString;let f=n.content;this.FRAGMENT&&(this.useShadow?this.shadowRoot.removeChild(this.FRAGMENT):this.removeChild(this.FRAGMENT)),this.useShadow?(this.attachedShadow||this.attachShadow({mode:"open"}),this.shadowRoot.prepend(f),this.FRAGMENT=this.shadowRoot.childNodes[0]):this.prepend(f),this.FRAGMENT=this.childNodes[0],this.oncreate&&this.oncreate(t)};state={pushToState:{},data:{},triggers:{},setState(t){if(Object.assign(this.pushToState,t),Object.keys(this.triggers).length>0)for(let n of Object.getOwnPropertyNames(this.triggers))this.pushToState[n]&&(this.data[n]=this.pushToState[n],delete this.pushToState[n],this.triggers[n].forEach(f=>{f.onchanged(this.data[n])}));return this.pushToState},subscribeTrigger(t,n=f=>{}){if(t){this.triggers[t]||(this.triggers[t]=[]);let f=this.triggers[t].length;return this.triggers[t].push({idx:f,onchanged:n}),this.triggers[t].length-1}else return},unsubscribeTrigger(t,n){let f,h=this.triggers[t];if(h)if(!n)delete this.triggers[t];else return h.find(v=>{if(v.idx===n)return!0})&&h.splice(f,1),!0},subscribeTriggerOnce(t=void 0,n=f=>{}){let f,h=l=>{n(l),this.unsubscribeTrigger(t,f)};f=this.subscribeTrigger(t,h)}};get props(){return this.props}set props(t={}){this.setAttribute("props",t)}get template(){return this.template}set template(t){this.setAttribute("template",t)}get render(){return this.render}get delete(){return this.delete}get state(){return this.state}get onchanged(){return this.onchanged}set onchanged(t){this.setAttribute("onchanged",t)}get onresize(){return this.props}set onresize(t){this.setAttribute("onresize",t)}get ondelete(){return this.props}set ondelete(t){this.setAttribute("ondelete",t)}get oncreate(){return this.oncreate}set oncreate(t){this.setAttribute("oncreated",t)}};function Ve(y,t,n=null){try{n?t?window.customElements.define(t,y,{extends:n}):window.customElements.define(y.name.toLowerCase()+"-",y,{extends:n}):t?window.customElements.define(t,y):window.customElements.define(y.name.toLowerCase()+"-",y)}catch{}}function eu(y=""){return y+Math.floor(Math.random()*1e15)}function Si(method){let getFunctionBody=y=>y.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=y=>{let t=y.indexOf(")");return y.slice(0,y.indexOf("{",t)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;try{if(newFuncHead.includes("function ")){let y=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(y,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let y=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(y,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else try{newFunc=eval(newFuncHead+newFuncBody+"}")}catch(err){newFunc=eval(method)}}catch(y){}return newFunc}var No={pushToState:{},data:{},triggers:{},setState(y){Object.assign(this.data,y);for(let t of Object.getOwnPropertyNames(y))this.triggers[t]&&this.triggers[t].forEach(n=>n.onchange(this.data[t]));return this.data},subscribeTrigger(y,t=n=>{}){if(y){this.triggers[y]||(this.triggers[y]=[]);let n=this.triggers[y].length;return this.triggers[y].push({idx:n,onchange:t}),this.triggers[y].length-1}else return},unsubscribeTrigger(y,t){let n,f=this.triggers[y];if(f)if(!t)delete this.triggers[y];else return f.find(l=>{if(l.idx===t)return!0})&&f.splice(n,1),!0},subscribeTriggerOnce(y=void 0,t=n=>{}){let n,f=h=>{t(h),this.unsubscribeTrigger(y,n)};n=this.subscribeTrigger(y,f)}},sr=class{state=No;nodes=new Map;nNodes=0;constructor(){}convertChildrenToNodes(t){t.convertChildrenToNodes(t)}addNode(t={}){return new _e(t,void 0,this)}getNode(t){return this.nodes.get(t)}run(t,n,f){if(typeof t=="string"&&(t=this.nodes.get(t)),t)return t.run(n,t,f)}runNode=this.run;removeTree(t){if(typeof t=="string"&&(t=this.nodes.get(t)),t){let n=function(f){f.children&&(Array.isArray(f.children)?f.children.forEach(h=>{h.stopNode&&h.stopNode(),h.tag&&this.nodes.get(h.tag)&&this.nodes.delete(h.tag),this.nodes.forEach(l=>{l.nodes.get(h.tag)&&l.nodes.delete(h.tag)}),n(h)}):typeof f.children=="object"&&(f.stopNode&&f.stopNode(),f.tag&&this.nodes.get(f.tag)&&this.nodes.delete(f.tag),this.nodes.forEach(h=>{h.nodes.get(f.tag)&&h.nodes.delete(f.tag)}),n(f)))};t.stopNode&&t.stopNode(),t.tag&&(this.nodes.delete(t.tag),this.nodes.forEach(f=>{f.nodes.get(t.tag)&&f.nodes.delete(t.tag)}),n(t))}}removeNode(t){typeof t=="string"&&(t=this.nodes.get(t)),t?.tag&&this.nodes.delete(t.tag),t?.tag&&this.nodes.get(t.tag)&&(this.nodes.delete(t.tag),this.nodes.forEach(n=>{n.nodes.get(t.tag)&&n.nodes.delete(t.tag)}))}appendNode(t={},n){n.addChildren(t)}async callParent(t,n,f=t,h){if(t?.parent)return await t.callParent(n,t.parent,f,h)}async callChildren(t,n,f=t,h,l){if(t?.children)return await t.callChildren(n,f,h,l)}subscribe(t,n=f=>{}){return this.state.subscribeTrigger(t,n)}unsubscribe(t,n){this.state.unsubscribeTrigger(t,n)}subscribeNode(t,n){return this.state.subscribeTrigger(t.tag,f=>{this.run(n,f,this)})}create(t=(h,l,v,x)=>{},n,f){return Lf(t,n,f,this)}print(t,n=!0){if(typeof t=="object"&&t.operator)return t.print(t,n)}reconstruct(t="{}"){let n=Ar(t);n&&this.addNode(n)}},_e=class{tag;parent;children;graph;state=No;nodes=new Map;ANIMATE="animate";LOOP="loop";looper=void 0;animation=void 0;constructor(t={},n,f){!t.tag&&f?t.tag=`node${f.nNodes}`:t.tag||(t.tag=`node${Math.floor(Math.random()*1e10)}`),Object.assign(this,t),this.parent=n,this.graph=f,f&&(f.nNodes++,f.nodes.set(t.tag,this)),this.children&&this.convertChildrenToNodes(this)}operator(t,n=this,f,h){return t}runOp(t,n=this,f,h){let l=n.operator(t,n,f,h);return l instanceof Promise?l.then(v=>(this.state.setState({[n.tag]:v}),v)):this.state.setState({[n.tag]:l}),l}runNode(t,n,f){if(typeof t=="string"&&(t=this.nodes.get(t)),t)return t.run(n,t,f)}run(t,n=this,f){if(typeof n=="string"){let h;if(this.graph&&(h=this.graph.nodes.get(n)),h||(h=this.nodes.get(n)),n=h,!n)return}if(!(n.children&&n.forward||n.parent&&n.backward||n.repeat||n.delay||n.frame||n.recursive||n.operator.constructor.name==="AsyncFunction")){let h=n.runOp(n,t,f);return n.animate&&!n.isAnimating&&this.runAnimation(this.animation,t,n,f),typeof n.loop=="number"&&!n.isLooping&&this.runLoop(this.looper,t,n,f),h}return new Promise(async h=>{if(n){let l=(x,g,u=0)=>new Promise(async _=>{u++;let d=await x.runOp(g,x,f,u);if(typeof x.repeat=="number"){for(;u<x.repeat;){if(x.delay){setTimeout(async()=>{_(await l(x,g,u))},x.delay);break}else if(x.frame&&requestAnimationFrame){requestAnimationFrame(async()=>{_(await l(x,g,u))});break}else d=await x.runOp(g,x,f,u);u++}if(u===x.repeat){_(d);return}}else if(typeof x.recursive=="number"){for(;u<x.recursive;){if(x.delay){setTimeout(async()=>{_(await l(x,d,u))},x.delay);break}else if(x.frame&&requestAnimationFrame){requestAnimationFrame(async()=>{_(await l(x,d,u))});break}else d=await x.runOp(d,x,f,u);u++}if(u===x.recursive){_(d);return}}else{_(d);return}}),v=async()=>{let x=await l(n,t);if(n.backward&&n.parent&&await this.runNode(n.parent,x,n),n.children&&n.forward)if(Array.isArray(n.children))for(let g=0;g<n.children.length;g++)await this.runNode(n.children[g],x,n);else await this.runNode(n.children,x,n);return n.animate&&!n.isAnimating&&this.runAnimation(this.animation,t,n,f),typeof n.loop=="number"&&!n.isLooping&&this.runLoop(this.looper,t,n,f),x};n.delay?setTimeout(async()=>{h(await v())},n.delay):n.frame&&requestAnimationFrame?requestAnimationFrame(async()=>{h(await v())}):h(await v())}else h(void 0)})}runAnimation(t=this.animation,n,f=this,h){if(this.animation=t,t||(this.animation=this.operator),f.animate&&!f.isAnimating){f.isAnimating=!0;let l=async()=>{if(f.isAnimating){let v=await this.animation(n,f,h,this.ANIMATE);if(this.tag&&typeof v<"u"&&(this.state.setState({[this.tag]:v}),f.backward&&f.parent&&await this.runNode(f.parent,v,f),f.children&&f.forward))if(Array.isArray(f.children))for(let x=0;x<f.children.length;x++)await this.runNode(f.children[x],v,f);else await this.runNode(f.children,v,f);requestAnimationFrame(async()=>{await l()})}};requestAnimationFrame(l)}}runLoop(t=this.looper,n,f=this,h){if(this.looper=t,t||(this.looper=this.operator),typeof f.loop=="number"&&!f.isLooping){f.isLooping=!0;let l=async()=>{if(f.looping){let v=await this.looper(n,f,h);if(this.tag&&typeof v<"u"&&(this.state.setState({[this.tag]:v}),f.backward&&f.parent&&await this.runNode(f.parent,v,f),f.children&&f.forward))if(Array.isArray(f.children))for(let x=0;x<f.children.length;x++)await this.runNode(f.children[x],v,f);else await this.runNode(f.children,v,f);setTimeout(async()=>{await l()},f.loop)}}}}setOperator(t=function(f,h=this,l,v){return f}){this.operator=t}setParent(t){this.parent=t}setChildren(t){this.children=t}removeTree(t){if(typeof t=="string"&&(t=this.nodes.get(t)),t){let n=function(f){f.children&&(Array.isArray(f.children)?f.children.forEach(h=>{h.stopNode&&h.stopNode(),h.tag&&this.nodes.get(h.tag)&&this.nodes.delete(h.tag),this.nodes.forEach(l=>{l.nodes.get(h.tag)&&l.nodes.delete(h.tag)}),n(h)}):typeof f.children=="object"&&(f.stopNode&&f.stopNode(),f.tag&&this.nodes.get(f.tag)&&this.nodes.delete(f.tag),this.nodes.forEach(h=>{h.nodes.get(f.tag)&&h.nodes.delete(f.tag)}),n(f)))};t.stopNode&&t.stopNode(),t.tag&&(this.nodes.delete(t.tag),this.nodes.forEach(f=>{f.nodes.get(t.tag)&&f.nodes.delete(t.tag)}),n(t),this.graph&&this.graph.nodes.removeTree(t))}}addNode(t={}){let n=new _e(t,this,this.graph);return this.nodes.set(convertedtag,n),this.graph&&this.graph.nodes.set(n.tag,n),n}removeNode(t){typeof t=="string"&&(t=this.nodes.get(t)),t?.tag&&this.nodes.delete(t.tag),t?.tag&&this.nodes.get(t.tag)&&(this.nodes.delete(t.tag),this.graph&&this.graph.nodes.delete(t.tag),this.nodes.forEach(n=>{n.nodes.get(t.tag)&&n.nodes.delete(t.tag)}))}appendNode(t,n=this){typeof t=="string"&&(t=this.nodes.get(t)),t&&n.addChildren(t)}getNode(t){return this.nodes.get(t)}stopLooping(t=this){t.isLooping=!1}stopAnimating(t=this){t.isAnimating=!1}stopNode(t=this){t.stopAnimating(t),t.stopLooping(t)}addChildren(t){this.children||(this.children=[]),Array.isArray(this.children)?Array.isArray(t)?(this.children.push(...t),t.forEach(n=>{typeof n=="object"&&n.tag&&(this.nodes.set(n.tag,n),this.graph&&this.graph.nodes.set(n.tag,n))})):(this.children.push(t),typeof t=="object"&&t.tag&&(this.nodes.set(t.tag,t),this.graph&&this.graph.nodes.set(t.tag,t))):(this.children=[t],typeof t=="object"&&t.tag&&(this.nodes.set(t.tag,t),this.graph&&this.graph.nodes.set(t.tag,t)))}convertChildrenToNodes(t=this){if(t.children?.name==="GraphNode")this.graph?.nodes.get(t.tag)||this.graph.nodes.set(t.tag,t),this.nodes.get(t.tag)||this.nodes.set(t.tag,t);else if(Array.isArray(t.children))for(let n=0;n<t.children.length;n++)if(t.children[n].name==="GraphNode"){this.graph?.nodes.get(t.children[n].tag)||this.graph.nodes.set(t.children[n].tag,t.children[n]),this.nodes.get(t.children[n].tag)||this.nodes.set(t.children[n].tag,t.children[n]);continue}else typeof t.children[n]=="object"?(t.children[n]=new _e(t.children[n],t,this.graph),this.nodes.set(t.children[n].tag,t.children[n]),this.convertChildrenToNodes(t.children[n])):typeof t.children[n]=="string"&&(this.graph&&(t.children[n]=this.graph.getNode(t.children[n]),this.nodes.get(t.children[n].tag)||this.nodes.set(t.children[n].tag,t.children[n])),t.children[n]||(t.children[n]=this.nodes.get(t.children[n])));else typeof t.children=="object"?(t.children=new _e(t.children,t,this.graph),this.nodes.set(t.children.tag,t.children),this.convertChildrenToNodes(t.children)):typeof t.children=="string"&&(this.graph&&(t.children=this.graph.getNode(t.children),this.nodes.get(t.children.tag)||this.nodes.set(t.children.tag,t.children)),t.children||(t.children=this.nodes.get(t.children)));return t.children}async callParent(t,n=this,f){if(typeof this.parent?.operator=="function")return await this.parent.runOp(t,this.parent,n,f)}async callChildren(t,n=this,f,h){let l;if(Array.isArray(this.children))if(h)l=await this.children[h]?.runOp(t,this.children[h],n,f);else{l=[];for(let v=0;v<this.children.length;v++)l.push(await this.children[v]?.runOp(t,this.children[v],n,f))}else this.children&&(l=await this.children.runOp(t,this.children,n,f));return l}setProps(t={}){Object.assign(this,t)}subscribe(t=f=>{},n=this.tag){return typeof t=="object"?this.subscribeNode(t):this.state.subscribeTrigger(n,t)}unsubscribe(t,n=this.tag){this.state.unsubscribeTrigger(n,t)}subscribeNode(t,n=this.tag){return this.state.subscribeTrigger(n,f=>{this.runNode(t,f,this)})}print(t=this,n=!0,f=[]){let h=new _e;f.push(t.tag);let l={tag:t.tag,operator:t.operator.toString()};t.parent&&(l.parent=t.parent.tag),t.children&&(Array.isArray(t.children)?t.children=t.children.map(v=>typeof v=="string"?v:f.includes(v.tag)?v.tag:n?v.print(v,n,f):v.tag):typeof t.children=="object"?(n||(l.children=[t.children.tag]),f.includes(t.children.tag)?l.children=[t.children.tag]:l.children=[t.children.print(t.children,n,f)]):typeof t.children=="string"&&(l.children=[t.children]));for(let v in t)v==="parent"||v==="children"||typeof h[v]>"u"&&(typeof t[v]=="function"?l[v]=t[v].toString():typeof t[v]=="object"?l[v]=JSON.stringifyWithCircularRefs(t[v]):l[v]=t[v]);return JSON.stringify(l)}reconstruct(t="{}"){let n=Ar(t);n&&this.addNode(n)}};function Lf(y,t,n,f){return typeof n=="object"?(n.operator=y,new _e(n,t,f)):new _e({operator:y},t,f)}function ou(y="{}",t,n){let f=Ar(y);if(f)return new _e(f,t,n)}function Ar(y="{}"){try{let n=function(f){for(let h in f)if(typeof f[h]=="string"){let l=Df(f[h]);typeof l=="function"&&(f[h]=l)}else typeof f[h]=="object"&&n(f[h]);return f},t=JSON.parse(y);return n(t)}catch(t){console.error(t);return}}JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let y=new Map,t=[],n=["this"];function f(){y.clear(),t.length=0,n.length=1}function h(v,x){var g=t.length-1,u=t[g];if(typeof u=="object")if(u[v]===x||g===0)n.push(v),t.push(x.pushed);else for(;g-->=0;){if(u=t[g],typeof u=="object"&&u[v]===x){g+=2,t.length=g,n.length=g,--g,t[g]=x,n[g]=v;break}g--}}function l(v,x){if(x!=null&&typeof x=="object"){v&&h(v,x);let g=y.get(x);if(g)return"[Circular Reference]"+g;y.set(x,n.join("."))}return x}return function(x,g){try{return t.push(x),JSON.stringify(x,l,g)}finally{f()}}}());function Df(method=""){let getFunctionBody=y=>y.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=y=>{let t=y.indexOf(")");return y.slice(0,y.indexOf("{",t)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;if(newFuncHead.includes("function ")){let y=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(y,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let y=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(y,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else newFunc=eval(newFuncHead+newFuncBody+"}");return newFunc}var Bf=Ro(),ee=class extends ke{props={operator:(t,n,f,h)=>(console.log(t),t),forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};input_delay=1;template=Bf;render=(t=this.props)=>{typeof this.template=="function"?this.templateString=this.template(t):this.templateString=this.template;let n=document.createElement("template");n.innerHTML=this.templateString;let f=n.content;this.fragment&&this.removeChild(this.fragment),this.fragment=f,this.appendChild(f),this.setupNode(this.props),this.props.input&&setTimeout(async()=>{this.props.node.runNode(this.props.node,this.props.input,this.props.graph)},this.input_delay),this.oncreate&&this.oncreate(t)};setupNode(t){let n=this.parentNode;if(n.props?.operator&&n.props?.node&&(t.parent=n.props.node),!t.graph){for(;!n.props?.nodes&&!(n.constructor.name==="HTMLBodyElement"||n.constructor.name==="HTMLHeadElement"||n.constructor.name==="HTMLHtmlElement"||n.constructor.name==="HTMLDocument");)n=n.parentNode;n.props?.nodes&&(t.graph=n.props.graph,t.input_delay=n.props.input_delay)}this.id&&!t.tag&&(t.tag=this.id),t.graph&&!t.node&&t.tag?t.node=t.graph.nodes.get(t.tag):t.graph&&typeof t.node=="string"&&(t.node=t.graph.nodes.get(t.node)),t.node||(t.node=new _e(t,t.parent,t.graph)),t.tag=t.node.tag,this.id||(this.id=t.tag),t.parent&&t.parent.addChildren(t.node)}};ee.addElement("graph-node");var Mf=To(),Lr=class extends ke{props={graph:new sr,nodes:[]};input_delay=1;template=Mf;constructor(){super(),setTimeout(()=>{let t=Array.from(this.children),n=[];t?.length>0&&t.forEach(f=>{f.props&&this.props.nodes.push(f.props.node),f.props&&f.parentNode.tagName===this.tagName&&n.push(f)}),this.children_ready(t,n)},this.input_delay)}children_ready(t=[],n=[]){this.querySelector("button").onclick=()=>{n.forEach(f=>{f.props.node.runNode(f.props.node)})}}};Lr.addElement("acyclic-graph");var Uf=Oo(),Dr=class extends ee{props={operator:(t,n,f,h)=>{if(h==="animate"){this.draw(t,n,f,h);for(let l=0;l<this.drawFuncs.length;l++){let v=this.drawFuncs[l];typeof v=="function"&&v(t,n,f,h)}}},forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!0,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=Uf;draw(t,n,f,h){let l=this.props.canvas,v=this.props.ctx}addDraw(t){typeof t=="function"&&this.drawFuncs.push(t)}drawFuncs=[];oncreate=t=>{this.canvas=this.querySelector("canvas"),t.width&&(this.canvas.width=t.width,this.canvas.style.width=t.width),t.height&&(this.canvas.height=t.height,this.canvas.style.height=t.height),t.style&&(this.canvas.style=t.style,setTimeout(()=>{this.canvas.height=this.canvas.clientHeight,this.canvas.width=this.canvas.clientWidth},10)),t.canvas=this.canvas,t.context?t.context=this.canvas.getContext(t.context):t.context=this.canvas.getContext("2d"),this.context=t.context,this.ctx=this.context,t.ctx=this.context,setTimeout(()=>{t.animate&&t.node.runAnimation()},10)};onresize=t=>{this.canvas&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.canvas.style.width=this.canvas.clientWidth,this.canvas.style.height=this.canvas.clientHeight)}};Dr.addElement("canvas-node");var Wf=Ao(),Cr=class extends ee{props={operator:(t,n,f,h)=>(t&&(this.props.input=t),this.props.input),forward:!0,backward:!1,children:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=Wf;oncreate=t=>{let n=this.querySelector("button");n.onclick=f=>{t.node.run(t.input)}}};Cr.addElement("button-node");var qf=Lo(),Br=class extends ee{props={operator:(t,n,f,h)=>(this.props.input=t,t),forward:!0,backward:!1,children:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=qf;oncreate=t=>{let n=this.querySelector("input");n.type=this.type,n.oninput=f=>{t.node&&t.node.callChildren(f.target.value)}}};Br.addElement("input-node");var Zf=Do(),zr=class extends ke{props={};template=Zf;oncreate=t=>{let n=this.querySelector("button"),f=this.querySelector("div");n&&(n.onclick=h=>{f.innerHTML="Clicked!"})}};zr.addElement("custom-");var Yf=Co(),Mr=class extends ee{log=(t,n=`<tr><td>${t}</td></tr>`)=>{let f=document.createElement("template");f.innerHTML=n;let h=f.content;this.props.div||(this.props.div=this.querySelector("table"),this.props.scrollable&&(this.props.div.style.overflow="hidden")),this.props.messages.length>=this.props.max&&(this.props.messages.shift(),this.props.messagedivs[0].remove(),this.props.messagedivs.shift()),this.props.messages.push(t),this.props.div.appendChild(h);let l=this.querySelectorAll("tr");this.props.messagedivs.push(l[l.length-1]),this.props.messagedivs.length+2>=this.props.max&&(this.props.messagedivs[this.props.max-3]&&this.props.messagedivs.length===this.props.max&&(this.props.messagedivs[0].style.opacity="0.25"),this.props.messagedivs[this.props.max-2]&&(this.props.messagedivs.length===this.props.max?this.props.messagedivs[1].style.opacity="0.5":this.props.messagedivs[0].style.opacity="0.5"),this.props.messagedivs.length===this.props.max?this.props.messagedivs[2].style.opacity="0.75":this.props.messagedivs.length+1>=this.props.max?this.props.messagedivs[1].style.opacity="0.75":this.props.messagedivs[0].style.opacity="0.75")};props={messages:[],messagedivs:[],max:5,scrollable:!1,div:void 0,log:this.log,operator:(t,n,f,h)=>(console.log(t),t),forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=Yf;oncreate=t=>{}};Mr.addElement("logger-");var ar=or(Pr()),Kf=zo(),Ur=class extends ke{props={protocol:ar.settings.socket_protocol,host:ar.settings.host,port:ar.settings.python,subdomain:"",ws:void 0,logger:void 0};template=Kf;constructor(){super()}onmessage=async t=>{let n=new Date(Date.now()),f=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),h=t.data;t.data.constructor.name==="Blob"&&(h=await t.data.text());let l=`${f}:: WS ${this.props.host}:${this.props.port} message:
 ${h}`,v=`<tr><td style='color:lightgreen;'>${l}</tr></td>`;this.props.logger?this.props.logger.props.log(l,v):console.log(l)};onopen=void 0;onclose=void 0;oncreate=t=>{t.logger?typeof t.logger=="string"&&(t.logger=document.getElementById(t.logger)):t.logger=document.querySelector("logger-");try{t.ws=new WebSocket(`${t.protocol}://${t.host}:${t.port}/${t.subdomain}`),t.ws.onmessage=this.onmessage,this.ws=t.ws,this.onopen&&t.ws.addEventListener("open",this.onopen),this.onclose&&t.ws.addEventListener("close",this.onclose),t.ws.onerror=n=>{t.ws.close()}}catch{}};ondelete=t=>{t.ws.close()}};Ve(Ur,"socket-");var fr=or(Pr()),$f=Mo(),jr=class extends ke{props={protocol:fr.settings.protocol,host:fr.settings.host,port:fr.settings.python,subdomain:"sse",sse:void 0,logger:void 0};template=$f;constructor(){super()}onmessage=async t=>{let n=new Date(Date.now()),f=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),h=t.data;t.data.constructor.name==="Blob"&&(h=await t.data.text());let l=`${f}:: SSE ${this.props.host}:${this.props.port} message:
 ${h}`,v=`<tr><td style='color:yellow;'>${l}</tr></td>`;this.props.logger?this.props.logger.props.log(l,v):console.log(l)};oncreate=t=>{t.logger?typeof t.logger=="string"&&(t.logger=document.getElementById(t.logger)):t.logger=document.querySelector("logger-");try{t.sse=new EventSource(`${t.protocol}://${t.host}:${t.port}/${t.subdomain}`),this.sse=t.sse,t.sse&&(t.sse.onmessage=this.onmessage),t.sse.onerror=n=>{console.error(n),t.sse.close()}}catch(n){console.error(n)}};ondelete=t=>{t.sse.close()}};Ve(jr,"sse-");var ec=Po(),Wr=class extends ee{props={radius:20,triggered:!1,operator:(t,n,f,h)=>{if(this.props.triggered||(this.props.radius+=Math.random()-.5),h==="animate"){this.draw();for(let l=0;l<this.drawFuncs.length;l++){let v=this.drawFuncs[l];typeof v=="function"&&v(t,n,f,h)}}else typeof t=="object"?(t.radius&&(this.props.radius+=t.radius),this.props.triggered=!0):typeof t=="number"?(this.props.radius+=t,this.props.triggered=!0):typeof t=="string"?(this.props.radius+=parseFloat(t),this.props.triggered=!0):(this.props.radius+=Math.random()-.5,this.props.triggered=!0)},forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!0,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=ec;draw(t,n,f,h){let l=this.props.canvas,v=this.props.ctx;this.props.radius<=1&&(this.props.radius=1),v.clearRect(0,0,l.width,l.height),this.drawCircle(l.width*.5,l.height*.5,this.props.radius,"green",5,"#003300")}addDraw(t){typeof t=="function"&&this.drawFuncs.push(t)}drawFuncs=[];drawCircle(t,n,f,h="green",l=5,v="#003300"){this.props.ctx.beginPath(),this.props.ctx.arc(t,n,f,0,2*Math.PI,!1),this.props.ctx.fillStyle=h,this.props.ctx.fill(),this.props.ctx.lineWidth=l,this.props.ctx.strokeStyle=v,this.props.ctx.stroke()}drawLine(t={x:0,y:0},n={x:1,y:1},f=5,h="#003300"){this.props.ctx.beginPath(),this.props.ctx.lineWidth=f,this.props.ctx.strokeStyle=h,this.props.ctx.moveTo(t.x,t.y),this.props.ctx.lineTo(n.x,n.y),this.props.ctx.stroke()}oncreate=t=>{this.canvas=this.querySelector("canvas"),t.width&&(this.canvas.width=t.width,this.canvas.style.height=t.height),t.height&&(this.canvas.height=t.height,this.canvas.style.height=t.height),t.style&&(this.canvas.style=t.style,setTimeout(()=>{this.canvas.height=this.canvas.clientHeight,this.canvas.width=this.canvas.clientWidth},10)),t.canvas=this.canvas,t.context?t.context=this.canvas.getContext(t.context):t.context=this.canvas.getContext("2d"),this.context=t.context,this.ctx=this.context,t.ctx=this.context,setTimeout(()=>{t.animate&&t.node.runAnimation()},10)};onresize=t=>{this.canvas&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.canvas.style.width=this.canvas.clientWidth,this.canvas.style.height=this.canvas.clientHeight)}};Wr.addElement("circlecanvas-node");var rc=Uo(),Hr=class extends ee{props={colorPicked:"red",xSize:128,ySize:128,xPosition:1,yPosition:1,xPixelSize:5,yPixelSize:5,zoom:1,data:{},canvasClicked:this.canvasClicked,updated:{},operator:(t,n,f,h)=>{if(h==="update"&&Object.assign(this.props.data,t),h==="animate"){this.draw(t,n,f,h);for(let l=0;l<this.drawFuncs.length;l++){let v=this.drawFuncs[l];typeof v=="function"&&v(t,n,f,h)}}},forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!0,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=rc;draw(t,n,f,h){let l=this.props.canvas,v=this.props.ctx,x=l.width*.5,g=l.height*.5,u=this.props.xPixelSize*this.props.zoom,_=this.props.yPixelSize*this.props.zoom,d=Math.ceil(l.width/u);d>this.props.xSize&&(d=this.props.xSize);let N=Math.ceil(l.height/_);N>this.props.ySize&&(N=this.props.ySize);let T=this.props.xPosition%this.props.xPixelSize,I=this.props.yPosition%this.props.yPixelSize,D=Math.floor(this.props.xPosition/this.props.xPixelSize),C=Math.floor(this.props.yPosition/this.props.yPixelSize),W=T;for(;W<x&&W<u*this.props.xSize*.5;)W+=u;W=W/u;let U=I;for(;U<g&&U<_*this.props.ySize*.5;)U+=_;U=U/_;let B=D-Math.floor(W),ct=C-Math.floor(U),J=B+d,gt=ct+N,lt=x-W*u,M=g-U*_;for(let tt=B;tt<J;tt++)for(let ut=ct;ut<gt;ut++){let Ft=tt+ut*this.props.xSize;if(!this.props.data[Ft]||!this.props.updated[Ft])continue;this.props.data[Ft]=this.props.updated[Ft],delete this.props.updated[Ft],v.fillStyle=this.props.data[Ft];let mt=lt+(tt-B)*u,At=M+(ut-ct)*_;if(mt<0)mt=0;else if(mt>l.width)continue;if(At<0)At=0;else if(At>l.height)continue;v.fillRect(mt,At,u,_)}}addDraw(t){typeof t=="function"&&this.drawFuncs.push(t)}drawFuncs=[];drawSquare(){console.time("square");let t=this.props.canvas,n=this.props.ctx;n.clearRect(0,0,t.width,t.height);let f=t.width*.5,h=t.height*.5,l=this.props.xPixelSize*this.props.zoom,v=this.props.yPixelSize*this.props.zoom,x=Math.ceil(t.width/l);x>this.props.xSize&&(x=this.props.xSize);let g=Math.ceil(t.height/v);g>this.props.ySize&&(g=this.props.ySize);let u=this.props.xPosition%this.props.xPixelSize,_=this.props.yPosition%this.props.yPixelSize,d=Math.floor(this.props.xPosition/this.props.xPixelSize),N=Math.floor(this.props.yPosition/this.props.yPixelSize),T=u;for(;T<f&&T<l*this.props.xSize*.5;)T+=l;T=T/l;let I=_;for(;I<h&&I<v*this.props.ySize*.5;)I+=v;I=I/v;let D=d-Math.floor(T),C=N-Math.floor(I),W=D+x,U=C+g,B=f-T*l,ct=h-I*v;for(let J=D;J<W;J++)for(let gt=C;gt<U;gt++){let lt=J+gt*this.props.xSize;if(!this.props.data[lt])continue;n.fillStyle=this.props.data[lt];let M=B+(J-D)*l,tt=ct+(gt-C)*v;if(M<0)M=0;else if(M>t.width)continue;if(tt<0)tt=0;else if(tt>t.height)continue;n.fillRect(M,tt,l,v)}console.timeEnd("square")}canvasClicked=(t,n)=>{let f=t,h=n,l=this.canvas.width*.5,v=this.canvas.height*.5,x=this.props.xPixelSize*this.props.zoom,g=this.props.yPixelSize*this.props.zoom,u=this.props.xPosition%this.props.xPixelSize,_=this.props.yPosition%this.props.yPixelSize,d=f-this.canvas.width*.5,N=h-this.canvas.height*.5,T=u;for(;T<l+d;)T+=x;T=(T-.5*(this.canvas.width-x*this.props.xSize))/x;let I=_;for(;I<v+N;)I+=g;I=(I-.5*(this.canvas.height-g*this.props.ySize))/g;let D=T+I*this.props.xSize;this.props.data[D]&&(this.props.updated[D]=this.props.colorPicked)};oncreate=t=>{this.canvas=this.querySelector("canvas"),t.width&&(this.canvas.width=t.width,this.canvas.style.height=t.height),t.height&&(this.canvas.height=t.height,this.canvas.style.height=t.height),t.style&&(this.canvas.style=t.style,setTimeout(()=>{this.canvas.height=this.canvas.clientHeight,this.canvas.width=this.canvas.clientWidth,this.generateDataStructure(),this.props.xPosition=this.props.xPixelSize*this.props.xSize*.5,this.props.yPosition=this.props.yPixelSize*this.props.ySize*.5,this.drawSquare()},10)),t.canvas=this.canvas,t.context?t.context=this.canvas.getContext(t.context):t.context=this.canvas.getContext("2d"),this.context=t.context,this.ctx=this.context,t.ctx=this.context,this.canvas.onmousedown=n=>{this.canvasClicked(n.pageX-this.canvas.offsetLeft,n.pageY-this.canvas.offsetTop),this.canvas.onmousemove=f=>{this.canvasClicked(f.pageX-this.canvas.offsetLeft,f.pageY-this.canvas.offsetTop)},this.canvas.onmouseup=f=>{this.canvas.onmousemove=void 0}},this.querySelector("#zoomin").onclick=n=>{this.props.zoom+=.1,this.drawSquare()},this.querySelector("#zoomout").onclick=n=>{this.props.zoom-=.1,this.drawSquare()},this.querySelector("#panleft").onclick=n=>{this.props.xPosition+=this.props.xPixelSize,this.drawSquare()},this.querySelector("#panright").onclick=n=>{this.props.xPosition-=this.props.xPixelSize,this.drawSquare()},this.querySelector("#panup").onclick=n=>{this.props.yPosition-=this.props.yPixelSize,this.drawSquare()},this.querySelector("#pandown").onclick=n=>{this.props.yPosition+=this.props.yPixelSize,this.drawSquare()},this.querySelector("#colorwheel").onchange=n=>{console.log(n.target.value),this.props.colorPicked=n.target.value},setTimeout(()=>{t.animate&&t.node.runAnimation()},10)};onresize=t=>{this.canvas&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.canvas.style.width=this.canvas.clientWidth,this.canvas.style.height=this.canvas.clientHeight,this.drawSquare())};generateDataStructure(t=(n,f)=>`rgb(${255*n/this.props.xSize},0,${255*f/this.props.ySize})`){for(let n=0;n<this.props.xSize;n++)for(let f=0;f<this.props.ySize;f++){let h=n+f*this.props.xSize;this.props.data[h]||(typeof t=="function"?this.props.data[h]=t(n,f):t?this.data[h]=t:this.props.data[h]="0xFFFFFF")}}};Hr.addElement("place-node");var cr=class{constructor(t=[["boids",100],["boids",50]],n=void 0,f=!0,h=!0){this.canvas=n,this.defaultCanvas=f,this.ctx=void 0,this.looping=!1,this.currFrame=performance.now()*.001,this.frameOffset=void 0,this.ticks=0,this.startingRules=t,this.nGroups=this.startingRules.length,this.particles=[],this.maxParticles=0,this.colorScale=["#000000","#030106","#06010c","#090211","#0c0215","#0e0318","#10031b","#12041f","#130522","#140525","#150628","#15072c","#16082f","#160832","#160936","#160939","#17093d","#170a40","#170a44","#170a48","#17094b","#17094f","#170953","#170956","#16085a","#16085e","#150762","#140766","#140669","#13066d","#110571","#100475","#0e0479","#0b037d","#080281","#050185","#020089","#00008d","#000090","#000093","#000096","#000099","#00009c","#00009f","#0000a2","#0000a5","#0000a8","#0000ab","#0000ae","#0000b2","#0000b5","#0000b8","#0000bb","#0000be","#0000c1","#0000c5","#0000c8","#0000cb","#0000ce","#0000d1","#0000d5","#0000d8","#0000db","#0000de","#0000e2","#0000e5","#0000e8","#0000ec","#0000ef","#0000f2","#0000f5","#0000f9","#0000fc","#0803fe","#2615f9","#3520f4","#3f29ef","#4830eb","#4e37e6","#543ee1","#5944dc","#5e49d7","#614fd2","#6554cd","#6759c8","#6a5ec3","#6c63be","#6e68b9","#6f6db4","#7072af","#7177aa","#717ba5","#7180a0","#71859b","#718996","#708e91","#6f928b","#6e9786","#6c9b80","#6aa07b","#68a475","#65a96f","#62ad69","#5eb163","#5ab65d","#55ba56","#4fbf4f","#48c347","#40c73f","#36cc35","#34ce32","#37cf31","#3ad130","#3cd230","#3fd32f","#41d52f","#44d62e","#46d72d","#48d92c","#4bda2c","#4ddc2b","#4fdd2a","#51de29","#53e029","#55e128","#58e227","#5ae426","#5ce525","#5ee624","#60e823","#62e922","#64eb20","#66ec1f","#67ed1e","#69ef1d","#6bf01b","#6df11a","#6ff318","#71f416","#73f614","#75f712","#76f810","#78fa0d","#7afb0a","#7cfd06","#7efe03","#80ff00","#85ff00","#89ff00","#8eff00","#92ff00","#96ff00","#9aff00","#9eff00","#a2ff00","#a6ff00","#aaff00","#adff00","#b1ff00","#b5ff00","#b8ff00","#bcff00","#bfff00","#c3ff00","#c6ff00","#c9ff00","#cdff00","#d0ff00","#d3ff00","#d6ff00","#daff00","#ddff00","#e0ff00","#e3ff00","#e6ff00","#e9ff00","#ecff00","#efff00","#f3ff00","#f6ff00","#f9ff00","#fcff00","#ffff00","#fffb00","#fff600","#fff100","#ffec00","#ffe700","#ffe200","#ffdd00","#ffd800","#ffd300","#ffcd00","#ffc800","#ffc300","#ffbe00","#ffb900","#ffb300","#ffae00","#ffa900","#ffa300","#ff9e00","#ff9800","#ff9300","#ff8d00","#ff8700","#ff8100","#ff7b00","#ff7500","#ff6f00","#ff6800","#ff6100","#ff5a00","#ff5200","#ff4900","#ff4000","#ff3600","#ff2800","#ff1500","#ff0004","#ff000c","#ff0013","#ff0019","#ff001e","#ff0023","#ff0027","#ff002b","#ff012f","#ff0133","#ff0137","#ff013b","#ff023e","#ff0242","#ff0246","#ff0349","#ff034d","#ff0450","#ff0454","#ff0557","#ff065b","#ff065e","#ff0762","#ff0865","#ff0969","#ff0a6c","#ff0a70","#ff0b73","#ff0c77","#ff0d7a","#ff0e7e","#ff0f81","#ff1085","#ff1188","#ff128c","#ff138f","#ff1493"],this.rules=[{type:"default",groupRuleGen:this.defaultGroupRule,timestepFunc:this.defaultTimestepFunc,animateParticle:this.defaultAnimation},{type:"boids",groupRuleGen:this.defaultGroupRule,timestepFunc:this.defaultTimestepFunc,animateParticle:this.defaultAnimation}],this.prototype={position:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},acceleration:{x:0,y:0,z:0},force:{x:0,y:0,z:0},timestepFunc:void 0,type:"boids",particleSize:5,startingX:.5,startingY:.5,maxSpeed:40,xBounce:-1,yBounce:-1,gravity:0,mass:1,drag:.033,life:0,lifeTime:1e8,boundingBox:{left:0,right:1,bot:1,top:0,front:0,back:1},boid:{boundingBox:{left:0,right:1,bot:1,top:0,front:0,back:1},cohesion:1e-5,separation:1e-4,alignment:.006,swirl:{x:.5,y:.5,z:.5,mul:.006},attractor:{x:.5,y:.5,z:.5,mul:.002},avoidance:{groups:[],mul:.1},useCohesion:!0,useSeparation:!0,useAlignment:!0,useSwirl:!0,useAttractor:!0,useAvoidance:!0,attraction:6674e-14,useAttraction:!1,groupRadius:200,groupSize:10,searchLimit:10},plant:{diet:"photosynthetic"},animal:{diet:"omnivore"},bacteria:{},atom:{},proton:{},neutron:{},electron:{},conway:{survivalRange:[2,3],reproductionRange:[3,3],groupRadius:10}},h&&this.init()}init=(t=this.startingRules)=>{this.canvas&&this.defaultCanvas&&(this.ctx=this.canvas.getContext("2d")),this.canvas&&window.addEventListener("resize",this.onresize),this.setupRules(t),this.startingRules=t,this.looping||(this.currFrame=performance.now()*.001,this.looping=!0,this.loop())};setupRules(t=this.startingRules){return t.forEach((n,f)=>{let h=this.addGroup(n)}),this.particles}deinit=()=>{this.looping=!1,this.canvas&&window.removeEventListener("resize",this.onresize())};defaultAnimation=t=>{this.ctx.beginPath();let n=Math.sqrt(t.velocity.x*t.velocity.x+t.velocity.y*t.velocity.y+t.velocity.z*t.velocity.z);var f=Math.floor(n*255/(t.maxSpeed*1.2));f>255?f=255:f<0&&(f=0),this.ctx.fillStyle=this.colorScale[f],this.ctx.arc(t.position.x,t.position.y,t.particleSize,0,Math.PI*2,!0),this.ctx.closePath(),this.ctx.fill()};distance3D(t,n){return Array.isArray(t)?Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])+(n[2]-t[2])*(n[2]-t[2])):Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)+(n.z-t.z)*(n.z-t.z))}normalize3D(t=[]){let n;return Array.isArray(t)?(n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),[t[0]/n,t[1]/n,t[2]/n]):(n=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),{x:t.x/n,y:t.y/n,z:t.z/n})}updateGroupProperties=(t,n={},f=void 0,h=void 0)=>{f?h?this.particles[t].particles.map(l=>Object.assign(l[f][h],n)):this.particles[t].particles.map(l=>Object.assign(l[f],n)):this.particles[t].particles.map(l=>Object.assign(l,n))};defaultGroupRule=(t,n)=>{t.type=n[0],n[1]>3e3&&n[1]<5e3?t.boid.searchLimit=3:n[1]>=5e3&&(t.boid.searchLimit=1);let f=n[7];f&&(t.boid.avoidance.groups=f);let h=1,l=1,v=1;n[2]?(h=n[2][0],l=n[2][1],v=n[2][2],t.boid.separation*=(h+l+v)/3):this.canvas?(h=this.canvas.height,l=this.canvas.width,v=this.canvas.width):(h=1,l=1,v=1);let x=Math.random()*l,g=Math.random()*h,u=Math.random()*v;t.startingX=Math.random(),t.startingY=Math.random(),t.startingZ=Math.random(),t.position={x,y:g,z:u},t.boundingBox={left:t.boundingBox.left*l,right:t.boundingBox.right*l,bot:t.boundingBox.bot*h,top:t.boundingBox.top*h,front:t.boundingBox.front*v,back:t.boundingBox.back*v},t.boid.boundingBox={left:t.boid.boundingBox.left*l,right:t.boid.boundingBox.right*l,bot:t.boid.boundingBox.bot*h,top:t.boid.boundingBox.top*h,front:t.boid.boundingBox.front*v,back:t.boid.boundingBox.back*v},t.boid.attractor={x:.5*l,y:.5*h,z:.5*v,mul:t.boid.attractor.mul},t.boid.swirl={x:.5*l,y:.5*h,z:.5*v,mul:t.boid.swirl.mul}};checkParticleBounds=t=>{if(t.velocity.x>t.maxSpeed||t.velocity.y>t.maxSpeed||t.velocity.z>t.maxSpeed||t.velocity.x<-t.maxSpeed||t.velocity.y<-t.maxSpeed||t.velocity.z<-t.maxSpeed){let n=this.normalize3D([t.velocity.x,t.velocity.y,t.velocity.z]);t.velocity.x=n[0]*t.maxSpeed,t.velocity.y=n[1]*t.maxSpeed,t.velocity.z=n[2]*t.maxSpeed}t.position.y-t.particleSize<=t.boundingBox.top&&(t.velocity.y*=t.yBounce,t.position.y=t.boundingBox.top+t.particleSize),t.position.y+t.particleSize>=t.boundingBox.bot&&(t.velocity.y*=t.yBounce,t.position.y=t.boundingBox.bot-t.particleSize),t.position.x-t.particleSize<=t.boundingBox.left&&(t.velocity.x*=t.xBounce,t.position.x=t.boundingBox.left+t.particleSize),t.position.x+t.particleSize>=t.boundingBox.right&&(t.velocity.x*=t.xBounce,t.position.x=t.boundingBox.right-t.particleSize),t.position.z-t.particleSize<=t.boundingBox.front&&(t.velocity.z*=t.xBounce,t.position.z=t.boundingBox.front+t.particleSize),t.position.z+t.particleSize>=t.boundingBox.back&&(t.velocity.z*=t.xBounce,t.position.z=t.boundingBox.back-t.particleSize)};defaultTimestepFunc=(t,n)=>{if(t.particles.length<t.max){let h=t.max,l=t.particles.length;for(t.spawnRate&&(l=0,h=t.spawnRate);l<h;)t.particles.push(this.newParticle()),t.groupRuleGen(t.particles[t.particles.length-1],t.rule),l++}else t.particles.length>t.max&&t.particles.splice(t.max);t.useBoids&&(this.calcBoids(t.particles,n)||console.error("boids error"));let f=[];t.particles.forEach((h,l)=>{h.timestepFunc&&h.timestepFunc(t,h,n),h.gravity!==0&&(h.velocity.y+=h.gravity*n),h.force.x!==0&&(h.velocity.x+=h.force.x*n/h.mass),h.force.y!==0&&(h.velocity.y+=h.force.y*n/h.mass),h.force.z!==0&&(h.velocity.z+=h.force.z*n/h.mass),h.acceleration.x!==0&&(h.velocity.x+=h.acceleration.x*n),h.acceleration.y!==0&&(h.velocity.y+=h.acceleration.y*n),h.acceleration.z!==0&&(h.velocity.z+=h.acceleration.z*n),h.velocity.x!==0&&(h.position.x+=h.velocity.x*n),h.velocity.y!==0&&(h.position.y+=h.velocity.y*n),h.velocity.z!==0&&(h.position.z+=h.velocity.z*n),this.checkParticleBounds(h),h.life+=n,this.defaultCanvas&&t.animateParticle(h),h.life>=h.lifeTime&&f.push(l)}),f.reverse().forEach(h=>{t.particles.splice(h,1)})};calcAttraction=(t,n,f,h)=>{let l=n.position.x-t.position.x,v=n.position.y-t.position.y,x=n.position.z-t.position.z,g=t.attraction*t.mass*n.mass/(f*f),u=g*l,_=g*v,d=g*x,N=h*u/t.mass,T=h*_/t.mass,I=h*d/t.mass;t.velocity.x+=N,t.velocity.y+=T,t.velocity.z+=I;let D=-h*u/n.mass,C=-h*_/n.mass,W=-h*d/n.mass;return n.velocity.x+=D,n.velocity.y+=C,n.velocity.z+=W,W};calcBoids=(t=[],n,f=0,h=t.length)=>{let l=[],v=1/n;t:for(var x=f;x<h;x++){let g=t[x],u=[],_=[],d=[g.position.x,g.position.y,g.position.z,0,0,0,g.velocity.x,g.velocity.y,g.velocity.z,0,0,0,0,0,0,0,0,0],N=1;e:for(let C=0;C<t.length;C++){let W=t[C];if(_.length>g.boid.groupSize||C>=g.boid.searchLimit)break e;let U=Math.floor(Math.random()*t.length);if(!(C===x||U===x||u.indexOf(U)>-1)){let B=t[U],ct=this.distance3D(g.position,B.position);if(!(ct>g.boid.groupRadius)){_.push(ct),u.push(U);let J;if((g.boid.useSeparation||g.boid.useAlignment)&&(J=g.boid.groupRadius/(ct*ct),J==1/0?J=W.maxSpeed:J==-1/0&&(J=-W.maxSpeed)),g.boid.useCohesion&&(d[0]+=(B.position.x-g.position.x)*.5*ct*v,d[1]+=(B.position.y-g.position.y)*.5*ct*v,d[2]+=(B.position.z-g.position.z)*.5*ct*v),isNaN(ct)||isNaN(d[0])||isNaN(B.position.x)){console.log(ct,x,U,g.position,B.position,d),g.position.x=NaN;return}g.boid.useSeparation&&(d[3]=d[3]+(g.position.x-B.position.x)*J,d[4]=d[4]+(g.position.y-B.position.y)*J,d[5]=d[5]+(g.position.z-B.position.z)*J),g.boid.useAttraction&&this.calcAttraction(g,B,ct,n),g.boid.useAlignment&&(d[6]=d[6]+B.velocity.x*J,d[7]=d[7]+B.velocity.y*J,d[8]=d[8]+B.velocity.z*J),N++}}}if(g.boid.useAvoidance&&g.boid.avoidance.groups.length>0){let C=Math.floor(Math.random()*g.boid.avoidanceGroups.length),W=[];e:for(let B=0;B<g.searchLimit;B++){C++;let ct=g.boid.avoidanceGroups[C%g.boid.avoidanceGroups.length];if(W>g.boid.groupSize)break e;let J=Math.floor(Math.random()*ct.length);if(!(j===x||J===x||W.indexOf(J)>-1)){let gt=ct[J],lt=this.distance3D(g.position,gt.position);if(!(lt>g.boid.groupRadius)){W.push(J);let M=g.boid.groupRadius/(lt*lt);M==1/0?M=p.maxSpeed:M==-1/0&&(M=-p.maxSpeed),d[15]=d[15]+(g.position.x-gt.position.x)*M,d[16]=d[16]+(g.position.y-gt.position.y)*M,d[17]=d[17]+(g.position.z-gt.position.z)*M}}}let U=W.length;d[15]=d[15]*U,d[16]=d[16]*U,d[17]=d[17]*U}let T=1/N;g.boid.useCohesion?(d[0]=g.boid.cohesion*(d[0]*T),d[1]=g.boid.cohesion*(d[1]*T),d[2]=g.boid.cohesion*(d[2]*T)):(d[0]=0,d[1]=0,d[2]=0),g.boid.useSeparation?(d[3]=g.boid.separation*d[3],d[4]=g.boid.separation*d[4],d[5]=g.boid.separation*d[5]):(d[3]=0,d[4]=0,d[5]=0),g.boid.useAlignment?(d[6]=-(g.boid.alignment*d[6]*T),d[7]=g.boid.alignment*d[7]*T,d[8]=g.boid.alignment*d[8]*T):(d[6]=0,d[7]=0,d[8]=0);let I=[0,0,0];g.boid.useSwirl==!0&&(d[9]=-(g.position.y-g.boid.swirl.y)*g.boid.swirl.mul,d[10]=(g.position.z-g.boid.swirl.z)*g.boid.swirl.mul,d[11]=(g.position.x-g.boid.swirl.x)*g.boid.swirl.mul);let D=[0,0,0];g.boid.useAttractor==!0&&(d[12]=(g.boid.attractor.x-g.position.x)*g.boid.attractor.mul,(g.position.x>g.boid.boundingBox.left||g.position.x<g.boid.boundingBox.right)&&(d[12]*=3),d[13]=(g.boid.attractor.y-g.position.y)*g.boid.attractor.mul,(g.position.y>g.boid.boundingBox.top||g.position.y<g.boid.boundingBox.bottom)&&(d[13]*=3),d[14]=(g.boid.attractor.z-g.position.z)*g.boid.attractor.mul,(g.position.z>g.boid.boundingBox.front||g.position.z<g.boid.boundingBox.back)&&(d[14]*=3)),l.push([g.velocity.x*g.drag+d[0]+d[3]+d[6]+d[9]+d[12]+d[15],g.velocity.y*g.drag+d[1]+d[4]+d[7]+d[10]+d[13]+d[16],g.velocity.z*g.drag+d[2]+d[5]+d[8]+d[11]+d[14]+d[17]]),isNaN(l[l.length-1][0])&&console.log(g,x,N,g.position,g.velocity,cohesionVec,separationVec,alignmentVec,I,D)}return l.length===t.length?(t.forEach((g,u)=>{g.velocity.x+=l[u][0],g.velocity.y+=l[u][1],g.velocity.z+=l[u][2]}),!0):(console.error("Boids error"),!1)};addRule(t="",n=(l,v)=>{},f=(l,v)=>{},h=l=>{}){if(t.length>0&&typeof n=="function"&&typeof timestepFunc=="function"&&typeof h=="function")this.rules.push({type:t,groupRuleGen:n,timestepFunc:f,animateParticle:h});else return!1}removeGroup(t=0){return this.particles[t]?(this.maxParticles-=this.particles[t].max,this.particles.slice(t,1),!0):!1}addGroup(t=["boids",50]){if(!Array.isArray(t))return!1;let n=t[0],f=t[1],h=t[2],l=t[3],v=t[4],x=t[5];n==="boids"&&(x=!0);let g=t[6];if(!t[0]||!t[1])return!1;this.maxParticles+=t[1];let u,_,d;if(this.rules.forEach(C=>{n===C.type&&(u=C.timestepFunc,_=C.groupRuleGen,d=C.animateParticle)}),!u||!_||this.defaultCanvas&&!d)return!1;let N=new Array(f).fill(0),T=Math.random()*.4+.35,I=Math.random()*.4+.35,D=Math.random()*.4+.35;if(l)for(let C=0;C<l;C++)N[C]=this.newParticle(),_(N[C],t),g&&(N[C].timestepFunc=u),n==="boids"&&(N[C].boid.attractor.x=N[C].boid.boundingBox.right*T,N[C].boid.attractor.y=N[C].boid.boundingBox.bot*I,N[C].boid.attractor.z=N[C].boid.boundingBox.back*D,T<.5&&(N[C].boid.swirl.mul=-N[C].boid.swirl.mul));else N.forEach((C,W)=>{N[W]=this.newParticle(),_(N[W],t),n==="boids"&&(g&&(N[W].timestepFunc=u),N[W].boid.attractor.x=N[W].boid.boundingBox.right*T,N[W].boid.attractor.y=N[W].boid.boundingBox.bot*I,N[W].boid.attractor.z=N[W].boid.boundingBox.back*D,T<.5&&(N[W].boid.swirl.mul=-N[W].boid.swirl.mul))});return this.particles.push({rule:t,type:n,max:f,particles:N,timestepFunc:u,groupRuleGen:_,animateParticle:d,spawnRate:v,useBoids:x,groupId:"id"+Math.floor(Math.random()*99999999)}),N}removeGroup=t=>{this.particles.splice(t,1)};newParticle(t=void 0){let n=JSON.parse(JSON.stringify(this.prototype));return t&&Object.assign(n,t),n}setParticle(t,n={}){return Object.assign(t,n),t}onresize=()=>{if(this.canvas){this.defaultCanvas&&(this.canvas.width=this.canvas.parentNode.clientWidth,this.canvas.height=this.canvas.parentNode.clientHeight,this.canvas.style.width=this.canvas.parentNode.clientWidth,this.canvas.style.height=this.canvas.parentNode.clientHeight);let t=this.canvas.clientHeight,n=this.canvas.clientWidth,f=JSON.parse(JSON.stringify(this.prototype)),h={left:f.boundingBox.left*n,right:f.boundingBox.right*n,bot:f.boundingBox.bot*t,top:f.boundingBox.top*t,front:f.boundingBox.front*t,back:f.boundingBox.back*t},l={left:f.boid.boundingBox.left*n,right:f.boid.boundingBox.right*n,bot:f.boid.boundingBox.bot*t,top:f.boid.boundingBox.top*t,front:f.boid.boundingBox.front*t,back:f.boid.boundingBox.back*t};this.particles.forEach(v=>{v.particles.forEach(x=>{x.boundingBox=JSON.parse(JSON.stringify(h)),x.boid.boundingBox=JSON.parse(JSON.stringify(l))})})}};frame=t=>{this.frameOffset||(this.frameOffset=t),this.currFrame=performance.now()*.001+this.frameOffset;let n=this.currFrame-t;return n>1&&(n=1),this.defaultCanvas&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(f=>{if(f.timestepFunc(f,n),isNaN(f.particles[0].position.x)){console.log(n,this.ticks,f.particles[0]),this.looping=!1;return}}),this.ticks++,this.currFrame};loop=()=>{this.looping!==!1&&(this.frame(this.currFrame),setTimeout(()=>{requestAnimationFrame(()=>{this.loop()})},15))}};var oc=jo(),qr=class extends ee{props={bodies:{},speed:3e5,lastTime:void 0,now:void 0,canvas:void 0,ctx:void 0,useCanvas:!0,useHTML:!0,meter_per_px:1e9,px_per_meter:1/1e9,zind:0,stars:[],boids:void 0,nstars:void 0,nboids:void 0,operator:(t,n,f,h)=>{if(h==="animate"){this.props.lastTime=this.props.now,this.props.now=Date.now();let l,v=(this.props.now-this.props.lastTime)*.001;v>.1&&(v=.1),l=v*this.props.speed;let x=this.props.bodies,g=Object.keys(x);for(let u=0;u<g.length;u++)for(let _=0;_<g.length;_++)u!==_&&!x[g[u]].fixed&&!x[g[_]].fixed&&this.newtonianMechanics(x[g[u]],x[g[_]],l);if(this.props.node.callChildren(l),this.props.useCanvas){this.draw(t,n,f,h);for(let u=0;u<this.drawFuncs.length;u++){let _=this.drawFuncs[u];typeof _=="function"&&_(t,n,f,h)}}}},forward:!0,backward:!1,children:void 0,delay:!1,repeat:!1,recursive:!1,animate:!0,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=oc;draw(t,n,f,h){let l=this.props.canvas,v=this.props.ctx;v.clearRect(0,0,l.width,l.height),v.fillStyle="#111111",v.fillRect(0,0,l.width,l.height),this.props.stars.forEach((x,g)=>{v.fillStyle=x.color,v.fillRect(x.x*l.width,x.y*l.height,2,2)}),this.props.boids.particles.forEach((x,g)=>{g===0&&x.particles.forEach((u,_)=>{this.props.bodies.saturn&&(u.boid.attractor.x=this.canvas.clientWidth*.5+this.props.bodies.saturn.position.x*this.props.px_per_meter,u.boid.attractor.y=this.canvas.clientHeight*.5-this.props.bodies.saturn.position.y*this.props.px_per_meter,u.boid.attractor.z=this.canvas.clientWidth*.5+this.props.bodies.saturn.position.z*this.props.px_per_meter),u.boid.swirl.x=u.boid.attractor.x,u.boid.swirl.y=u.boid.attractor.y,u.boid.swirl.z=u.boid.attractor.z;let d=Math.floor(10+_/x.particles.length*90);v.fillStyle=u.color,v.fillRect(u.position.x,u.position.y,2,2)}),g===1&&x.particles.forEach((u,_)=>{v.fillStyle=u.color,v.fillRect(u.position.x,u.position.y,2,2)})})}addDraw(t){typeof t=="function"&&this.drawFuncs.push(t)}drawFuncs=[];magnitude(t={}){let n=0;return Object.keys(t).forEach(f=>{n+=t[f]*t[f]}),Math.sqrt(n)}distance(t={},n={}){let f=0;return Object.keys(t).forEach((h,l)=>{let v=n[h]-t[h];f+=v*v}),Math.sqrt(f)}makeVec(t={},n={}){var f={};return Object.keys(t).forEach((h,l)=>{f[h]=n[h]-t[h]}),f}normalize(t={}){let n=1/this.magnitude(t),f={};return Object.keys(t).forEach((h,l)=>{f[h]=t[h]*n}),f}calcAzimuth(t={x:1,y:1,z:0}){return Math.atan2(t.x,t.y)}calcZenith(t={x:1,y:0,z:1}){return Math.acos(t.z/this.magnitude(t))}sphereCollision(t,n){let f=this.distance(t.position,n.position);return f<t.radius+n.radius?t.radius+n.radius-f:!1}newtonianMechanics(t,n,f){if(!t.mass||!n.mass||t.mass==0&&n.mass===0)return;let h=this.distance(t.position,n.position),l=this.normalize(this.makeVec(t.position,n.position)),v=this.sphereCollision(t,n);if(v){let N=t.mass+n.mass,T=t.mass/N,I=1-T;t.fixed===!1?(t.position.x+=l.x*v*I*1.01,t.position.y+=l.y*v*I*1.01,t.position.z+=l.z*v*I*1.001):(n.position.x-=l.x*v*1.01,n.position.y-=l.y*v*1.01,n.position.z-=l.z*v*1.01),n.fixed===!1?(n.position.x+=l.x*v*T*1.01,n.position.y+=l.y*v*T*1.01,n.position.z+=l.z*v*T*1.01):(t.position.x+=l.x*v*1.01,t.position.y+=l.y*v*1.01,t.position.z+=l.z*v*1.01),h=this.distance(t.position,n.position);let D={x:t.velocity.x-n.velocity.x,y:t.velocity.y-n.velocity.y,z:t.velocity.z-n.velocity.z},C=D.x*l.x+D.y*l.y+D.z*l.z;if(C>0){let W=2*C/N;t.fixed===!1&&(t.velocity.x-=W*l.x*n.mass*t.restitution,t.velocity.y-=W*l.y*n.mass*t.restitution,t.velocity.z-=W*l.z*n.mass*t.restitution),n.fixed===!1&&(n.velocity.x+=W*l.x*n.mass*n.restitution/n.mass,n.velocity.y+=W*l.y*n.mass*n.restitution/n.mass,n.velocity.z+=W*l.z*n.mass*n.restitution/n.mass)}}let x=1/t.mass,g=1/n.mass,u=6674e-14*t.mass*n.mass/(h*h),_={x:l.x*u,y:l.y*u,z:l.z*u},d={x:-l.x*u,y:-l.y*u,z:-l.z*u};t.fixed||(t.velocity.x+=f*_.x*x,t.velocity.y+=f*_.y*x,t.velocity.z+=f*_.z*x),n.fixed||(n.velocity.x+=f*d.x*g,n.velocity.y+=f*d.y*g,n.velocity.z+=f*d.z*g)}oncreate=t=>{this.canvas=this.querySelector("canvas"),t.meter_per_px&&(t.px_per_meter=1/t.meter_per_px),t.width&&(this.canvas.width=t.width,this.canvas.style.height=t.height),t.height&&(this.canvas.height=t.height,this.canvas.style.height=t.height),t.style&&(this.canvas.style=t.style,setTimeout(()=>{if(this.canvas.height=this.canvas.clientHeight,this.canvas.width=this.canvas.clientWidth,t.useCanvas){t.nstars||(t.nstars=200),t.nboids||(t.nboids=100),t.stars=[];let n=0;for(;n<t.nstars;){let h=Math.floor(Math.random()*100);h<20&&(h=20),t.stars.push({x:Math.random(),y:Math.random(),z:Math.random(),color:`#${h}${h}${h}`}),n++}let f=[["boids",t.nboids],["default",200]];t.boids=new cr(f,this.canvas,!1),this.props.boids.particles.forEach((h,l)=>{l===0&&h.particles.forEach((v,x)=>{v.maxSpeed=70,v.boid.separation=.1,v.boid.attractor.mul=.02,v.boid.swirl.mul=.1;let g=Math.floor(Math.random()*100);g<10&&(g=10),v.color=`#${g}DDFF`}),l===1&&h.particles.forEach((v,x)=>{v.velocity={x:Math.random()*10-5,y:Math.random()*10-5,z:Math.random()*10-5};let g=Math.floor(Math.random()*100);g<30&&(g=30);let u=Math.floor(Math.random()*100);u<30&&(u=30);let _=Math.floor(Math.random()*100);_<30&&(_=30),v.color=`#${g}${u}${_}`})})}},10)),t.canvas=this.canvas,t.context?t.context=this.canvas.getContext(t.context):t.context=this.canvas.getContext("2d"),this.context=t.context,this.ctx=this.context,t.ctx=this.context,setTimeout(()=>{t.animate&&(t.now=Date.now(),t.node.runAnimation())},10)};onresize=t=>{this.canvas&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.canvas.style.width=this.canvas.clientWidth,this.canvas.style.height=this.canvas.clientHeight,t.width=this.canvas.clientWidth,t.height=this.canvas.clientHeight);let n=t.bodies,f=Object.keys(n);for(let h=0;h<n.length;h++)n[f[h]].props.display===!1&&n[f[h]].props.display==="none"&&(n[f[h]].div.style.height=2*n[f[h]].radius/t.meter_per_px,n[f[h]].div.style.width=2*n[f[h]].radius/t.meter_per_px,n[f[h]].div.style.borderRadius=n[f[h]].radius/t.meter_per_px)}};Ve(qr,"space-node");var Vr=class extends ee{operator=(t,n,f,h)=>{let l;typeof t=="object"?(t.position&&(this.props.position=t.position),t.velocity&&(this.props.velocity=t.velocity),t.acceleration&&(this.props.acceleration=t.acceleration),t.force&&(this.props.force=t.force),t.tstep&&(l=t.tstep)):typeof t=="number"?l=t:typeof t=="string"&&(l=parseInt(t));let v=this.props.force,x=this.props.acceleration,g=this.props.velocity,u=this.props.position;if(l&&this.props.fixed===!1&&(v.x&&(x.x+=v.x/this.props.mass,v.x=0),v.y&&(x.y+=v.y/this.props.mass,v.y=0),v.z&&(x.z+=v.z/this.props.mass,v.z=0),x.x&&(g.x+=x.x*l),x.y&&(g.y+=x.y*l),x.z&&(g.z+=x.z*l),g.x&&(u.x+=g.x*l),g.y&&(u.y+=g.y*l),g.z&&(u.z+=g.z*l),this.props.bounded&&this.checkBoundaries(u,g),this.props.distance=this.magnitude(this.props.position),this.props.azimuth=this.calcAzimuth(this.props.position),this.props.zenith=this.calcZenith(this.props.position,this.props.distance),this.parentNode.props?.useHTML||!this.parentNode.props)){this.props.div.style.left=this.parentNode.clientWidth*.5+this.props.position.x/this.parentNode.props.meter_per_px+"px",this.props.div.style.top=this.parentNode.clientHeight*.5-this.props.position.y/this.parentNode.props.meter_per_px+"px";let _=Math.floor(this.props.position.z/this.parentNode.props.meter_per_px);this.parentNode.props.zind>_&&(this.parentNode.props.zind=_);let d=parseInt(this.parentNode.props.canvas.style.zIndex);d||(d=1),this.props.div.style.zIndex=_+d-this.parentNode.props.zind}return t};props={mass:5972e21,radius:63781e5,distance:void 0,theta:void 0,azimuth:void 0,position:{x:15e10,y:0,z:0},velocity:{x:0,y:0,z:0},acceleration:{x:0,y:0,z:0},force:{x:0,y:0,z:0},restitution:.01,vloss:1e-14,fixed:!1,bounded:!0,operator:this.operator,forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};template=t=>{let n="''";if((t.display===!1||t.display==="none"||this.parentNode.props?.useHTML===!1)&&(n="'none'"),this.parentNode.props?.useHTML===!1)return"";let f;return t.img?`
                <div>
                    <img src=${t.img} height="100%" width="100%" style="position:absolute;"></img>
                </div>
            `:(t.style?f=t.style:f=`"display:${n}; background-color:blue;"`,`
            <div style=${f}></div>
        `)};d2r(t){return Math.PI*t/180}r2d(t){return 180*t/Math.PI}magnitude(t={}){let n=0;return Object.keys(t).forEach(f=>{n+=t[f]*t[f]}),Math.sqrt(n)}distance(t={},n={}){let f=0;return Object.keys(t).forEach((h,l)=>{let v=n[h]-t[h];f+=v*v}),Math.sqrt(f)}makeVec(t={},n={}){var f={};return Object.keys(t).forEach((h,l)=>{f[h]=n[h]-t[h]}),f}normalize(t={}){let n=1/this.magnitude(t),f={};return Object.keys(t).forEach((h,l)=>{f[h]=t[h]*n}),f}calcAzimuth(t={x:1,y:1,z:0}){return Math.atan2(t.x,t.y)}calcZenith(t={x:1,y:0,z:1},n=this.magnitude(t)){if(n)return Math.acos(t.z/n);let f=this.magnitude(t);return(f=0)?0:Math.acos(t.z/f)}setAzimuth(t){this.props.azimuth=t,props.position.z=props.distance*Math.sin(2*props.azimuth)}setZenith(t){this.props.theta=t,this.props.position.x=this.props.distance*Math.cos(this.props.theta),this.props.position.y=this.props.distance*Math.sin(this.props.theta)}checkBoundaries=(t,n)=>{let f=this.parentNode.getBoundingClientRect(),h=1/this.parentNode.props.meter_per_px,l=f.left+this.parentNode.clientWidth*.5-t.x*h,v=f.top+this.parentNode.clientHeight*.5-t.y*h,x=f.left+this.parentNode.clientWidth*.5-t.z*h,g=this.props.radius*h;l+g>=f.right&&(t.x=-(this.parentNode.clientWidth*.5)*this.parentNode.props.meter_per_px+this.props.radius,n.x<0&&(n.x=-n.x)),l-g<=f.left&&(t.x=this.parentNode.clientWidth*.5*this.parentNode.props.meter_per_px-this.props.radius,n.x>0&&(n.x=-n.x)),v-g<=f.top&&(t.y=this.parentNode.clientHeight*.5*this.parentNode.props.meter_per_px-this.props.radius,n.y>0&&(n.y=-n.y)),v+g>=f.bottom&&(t.y=(this.parentNode.clientHeight*.5-(f.bottom-f.top))*this.parentNode.props.meter_per_px+this.props.radius,n.y<0&&(n.y=-n.y)),x+g>=f.right&&(t.z=-(this.parentNode.clientWidth*.5)*this.parentNode.props.meter_per_px+this.props.radius,n.z<0&&(n.z=-n.z)),x-g<=f.left&&(t.z=this.parentNode.clientWidth*.5*this.parentNode.props.meter_per_px-this.props.radius,n.z>0&&(n.z=-n.z))};setPositionFromSpherical(t){if(!t.distance)t.distance=this.magnitude(t.position),t.azimuth?(t.position.z=t.distance*Math.sin(2*t.azimuth),t.div.style.top=this.parentNode.clientHeight*.5-t.position.y/this.parentNode.props.meter_per_px+"px"):t.azimuth=this.calcZenith(t.position),t.theta?(t.position.x=t.distance*Math.cos(t.theta),t.position.y=t.distance*Math.sin(t.theta),t.div.style.left=this.parentNode.clientWidth*.5-t.position.x/this.parentNode.props.meter_per_px+"px"):t.theta=this.calcAzimuth(t.position);else if(t.azimuth||(t.azimuth=this.calcZenith(t.position)),t.position.z=t.distance*Math.sin(2*t.azimuth),t.theta||(t.theta=this.calcAzimuth(t.position)),t.position.x=t.distance*Math.cos(t.theta),t.position.y=t.distance*Math.sin(t.theta),this.parentNode.props?.useHTML||!this.parentNode.props){t.div.style.left=this.parentNode.clientWidth*.5+t.position.x/this.parentNode.props.meter_per_px+"px",t.div.style.top=this.parentNode.clientHeight*.5-t.position.y/this.parentNode.props.meter_per_px+"px";let n=Math.floor(t.position.z/this.parentNode.props.meter_per_px);Math.abs(this.parentNode.props.zind)>n&&(this.parentNode.props.zind=n),t.div.style.zIndex=n+parseInt(this.parentNode.props.canvas.style.zIndex)+this.parentNode.props.zind}}render=(t=this.props)=>{typeof this.template=="function"?this.templateString=this.template(t):this.templateString=this.template;let n=document.createElement("template");n.innerHTML=this.templateString;let f=n.content;this.fragment&&this.removeChild(this.fragment),this.fragment=f,this.appendChild(f),this.setupNode(this.props),this.props.input&&setTimeout(async()=>{this.props.node.runNode(this.props.node,this.props.input,this.props.graph)},this.input_delay),this.setupPhysicsBody(t),this.oncreate&&this.oncreate(t)};setupPhysicsBody(t){typeof t.px=="number"&&(t.position.x=t.px),typeof t.py=="number"&&(t.position.y=t.py),typeof t.pz=="number"&&(t.position.z=t.pz),typeof t.vx=="number"&&(t.velocity.x=t.vx),typeof t.vy=="number"&&(t.velocity.y=t.vy),typeof t.vz=="number"&&(t.velocity.z=t.vz);let n=this.querySelector("div");t.div=n;let f=t.radius;if(this.parentNode?.props?.meter_per_px&&(f=f/this.parentNode.props.meter_per_px),this.parentNode.props?.useHTML||!this.parentNode.props){let h=this.parentNode.clientWidth*.5+t.position.x/this.parentNode.props.meter_per_px,l=this.parentNode.clientHeight*.5-t.position.y/this.parentNode.props.meter_per_px;n.style.position="absolute",n.style.height=2*f+"px",n.style.width=2*f+"px",n.style.borderRadius=f+"px",n.style.left=h+"px",n.style.top=l+"px",n.style.transform="translate(-"+f+"px,-"+f+"px)",this.style.backgroundColor&&(n.style.backgroundColor=this.style.backgroundColor)}this.setPositionFromSpherical(t),this.dragElement(n),this.parentNode.props?.bodies&&(this.parentNode.props.bodies[t.tag]=t)}oncreate=t=>{};dragElement=t=>{let n=l=>{l=l||window.event,l.preventDefault();let v=!1;setTimeout(()=>{v||(document.onmouseup=h,document.onmousemove=f)},200),document.onmouseup=()=>{v=!0}},f=l=>{if(l=l||window.event,l.preventDefault(),this.parentNode.props?.meter_per_px){let v=this.parentNode.getBoundingClientRect();this.props.position.x=-(this.parentNode.clientWidth*.5+v.x-l.clientX)*this.parentNode.props.meter_per_px,this.props.position.y=(this.parentNode.clientHeight*.5+v.y-l.clientY)*this.parentNode.props.meter_per_px,this.props.velocity.x=0,this.props.velocity.y=0}(this.parentNode.props?.useHTML||!this.parentNode.props)&&(t.style.top=l.clientY+"px",t.style.left=l.clientX+"px")},h=()=>{document.onmouseup=null,document.onmousemove=null};t&&(t.style.cursor="pointer",t.onmousedown=n)}};Ve(Vr,"physics-body");var zi=class{constructor(t=this.onOpen,n=null,f=null){this.onOpen=t,this.notes=[{idx:0,text:"comment"}],n!==null&&document.getElementById(n).addEventListener("click",this.saveCSV),f!==null&&document.getElementById(f).addEventListener("click",this.openCSV)}processArraysForCSV(t=["1|2|3","3|2|1"],n="|",f="a,b,c",h=!1){let l=f+`
`,v=0;return t.forEach((x,g)=>{t[g]==="string"&&n!==","?l+=x.split(n).join(","):csvData+=x.join(","),h===!0&&this.notes[v].idx===g&&(x+=this.notes[v].text,v++),x.indexOf(`
`)<0&&(l+=`
`)}),l}static saveCSV(t=`a,b,c
1,2,3
3,2,1
`,n=new Date().toISOString()){var f=document.createElement("a");f.href="data:text/csv;charset=utf-8,"+encodeURI(t),f.target="_blank",n!==""?f.download=n+".csv":f.download=Date().toISOString()+".csv",f.click()}static openCSV(t=",",n=(f,h,l)=>l){var f=document.createElement("input");f.accept=".csv",f.type="file",f.onchange=h=>{var l=h.target.files[0],v=new FileReader;v.onload=x=>{var g=x.target.result,u=g.split(`
`);let _=[];var d=[];u.pop(),u.forEach((N,T)=>{if(T==0)_=N.split(t);else{var I=N.split(t);d.push(I)}}),n(d,_,f.value),f.value=""},v.readAsText(l)},f.click()}static openCSVRaw(t=(n,f)=>f){var n=document.createElement("input");n.accept=".csv",n.type="file",n.onchange=f=>{var h=f.target.files[0],l=new FileReader;l.onload=v=>{var x=v.target.result;t(x,n.value),n.value=""},l.readAsText(h)},n.click()}onOpen(t=[],n=[]){console.log("CSV Opened!",n,t)}};var Pi=or(Wo());var sc=Pi.BFSRequire("fs"),oh=Pi.BFSRequire("buffer").Buffer;var Ho=async(y,t,n="data",f=h=>{})=>new Promise(h=>{sc.writeFile("/"+n+"/"+y,t,l=>{if(l)throw l;f(t),h(!0)})});var nn=or(hs());var ls={getImageData:function(y){var t=y.width,n=y.height,f=y.getContext("2d").getImageData(0,0,t,n);return f},toArrayBuffer:function(y){var t=canvas.width,n=canvas.height,f=t*4,h=new Uint32Array(y.data.buffer),l=Math.floor((32*t+31)/32)*4,v=l*n,x=122+v,g=new ArrayBuffer(x),u=new DataView(g),_=0,d,N=0,T,I=0,D,C;for(W(19778),U(x),_+=4,U(122),U(108),U(t),U(-n>>>0),W(1),W(32),U(3),U(v),U(2835),U(2835),_+=8,U(16711680),U(65280),U(255),U(4278190080),U(1466527264);N<n;){for(T=122+N*l,d=0;d<f;)C=h[I++],D=C>>>24,u.setUint32(T+d,C<<8|D),d+=4;N++}return g;function W(B){u.setUint16(_,B,!0),_+=2}function U(B){u.setUint32(_,B,!0),_+=4}},toBlob:function(y){return new Blob([this.toArrayBuffer(this.getImageData(y))],{type:"image/bmp"})},ImageDatatoBlob:function(y){return new Blob([this.toArrayBuffer(y)],{type:"image/bmp"})},toDataURL:function(y){for(var t=new Uint8Array(this.toArrayBuffer(this.getImageData(y))),n="",f=0,h=t.length;f<h;)n+=String.fromCharCode(t[f++]);return"data:image/bmp;base64,"+nn.Buffer.from(n,"base64").toString("ascii")},ImageDatatoDataURL:function(y){for(var t=new Uint8Array(this.toArrayBuffer(y)),n="",f=0,h=t.length;f<h;)n+=String.fromCharCode(t[f++]);return"data:image/bmp;base64,"+nn.Buffer.from(n,"base64").toString("ascii")}};function ji(y,t,n,f,h=0,l=0){if(y.naturalWidth)return{x:y.naturalWidth*(n-h)/t.width,y:y.naturalHeight*(f-l)/t.height};if(y.videoWidth)return{x:y.videoWidth*(n-h)/t.width,y:y.videoHeight*(f-l)/t.height};if(y.width)return{x:y.width*(n-h)/t.width,y:y.height*(f-l)/t.height}}function Pc(y){let t=Array.from(y.data),n=[],f=0;for(let u=0;u<t.length;u+=4)u/4%y.width===0&&(f=0),n[f]?(n[f].i+=parseFloat(t[u]+t[u+1]+t[u+2]),n[f].r+=parseFloat(t[u]),n[f].g+=parseFloat(t[u+1]),n[f].b+=parseFloat(t[u+2])):n[f]={i:parseFloat(t[u]+t[u+1]+t[u+2]),r:parseFloat(t[u]),g:parseFloat(t[u+1]),b:parseFloat(t[u+2])},f++;let h=Math.max(...n.map(u=>u.i)),l=Math.max(...n.map(u=>u.r)),v=Math.max(...n.map(u=>u.b)),x=Math.max(...n.map(u=>u.g)),g=Math.max(l,v,x);return{bitmap:y,width:y.width,height:y.height,bitarr:t,xrgbintensities:n,xintmax:h,xrintmax:l,xbintmax:v,xgintmax:x,xrgbmax:g}}async function Uc(y,t){let n=Object.assign({},y);delete n.bitmap;let f=JSON.stringify(n);return await Ho(t,f,"processed")}function jc(y,t,n){return new ImageData(Uint8ClampedArray.from(y),t,n)}function ps(y,t,n=0,f=0,h=t.width,l=t.height,v=0,x=0,g=y.canvas.width,u=y.canvas.height){return y.drawImage(t,n,f,h,l,v,x,g,u)}function Wc(y,t,n=0,f=0,h=y.canvas.width,l=y.canvas.height){let v=Pc(t);y.fillStyle="white",y.strokeStyle="ghostwhite",y.lineWidth=1,y.beginPath();let x=v.xrgbintensities.length,g=h/x;return v.xrgbintensities.forEach((u,_)=>{_===0?y.moveTo(n,f+l*(1-u.i/v.xintmax)):y.lineTo(n+_*g,f+l*(1-u.i/v.xintmax))}),y.stroke(),y.strokeStyle="tomato",y.lineWidth=1,y.beginPath(),v.xrgbintensities.forEach((u,_)=>{_===0?y.moveTo(n,f+l*(1-u.r/v.xintmax)):y.lineTo(n+_*g,f+l*(1-u.r/v.xintmax))}),y.stroke(),y.strokeStyle="#00b8f5",y.beginPath(),v.xrgbintensities.forEach((u,_)=>{_===0?y.moveTo(n,f+l*(1-u.b/v.xintmax)):y.lineTo(n+_*g,f+l*(1-u.b/v.xintmax))}),y.stroke(),y.strokeStyle="chartreuse",y.beginPath(),v.xrgbintensities.forEach((u,_)=>{_===0?y.moveTo(n,f+l*(1-u.g/v.xintmax)):y.lineTo(n+_*g,f+l*(1-u.g/v.xintmax))}),y.stroke(),v}function ds(y,t=30,n=Hc){let f=y.captureStream(t),h=new MediaRecorder(f),l=[];return h.ondataavailable=function(v){l.push(v.data)},h.onstop=function(v){let x=new Blob(l,{type:"video/mp4"});l=[];let g=URL.createObjectURL(x);n(g)},h}function Hc(y,t=new Date().toISOString()){var n=document.createElement("a");n.href=y,n.target="_blank",t!==""?n.download=t+".mp4":n.download=new Date().toISOString()+".mp4",n.click()}function ys(y){var t=new DataView(y),n={};n.fileheader={},n.fileheader.bfType=t.getUint16(0,!0),n.fileheader.bfSize=t.getUint32(2,!0),n.fileheader.bfReserved1=t.getUint16(6,!0),n.fileheader.bfReserved2=t.getUint16(8,!0),n.fileheader.bfOffBits=t.getUint32(10,!0),n.infoheader={},n.infoheader.biSize=t.getUint32(14,!0),n.infoheader.biWidth=t.getUint32(18,!0),n.infoheader.biHeight=t.getUint32(22,!0),n.infoheader.biPlanes=t.getUint16(26,!0),n.infoheader.biBitCount=t.getUint16(28,!0),n.infoheader.biCompression=t.getUint32(30,!0),n.infoheader.biSizeImage=t.getUint32(34,!0),n.infoheader.biXPelsPerMeter=t.getUint32(38,!0),n.infoheader.biYPelsPerMeter=t.getUint32(42,!0),n.infoheader.biClrUsed=t.getUint32(46,!0),n.infoheader.biClrImportant=t.getUint32(50,!0);var f=n.fileheader.bfOffBits;return n.stride=Math.floor((n.infoheader.biBitCount*n.infoheader.biWidth+31)/32)*4,n.pixels=new Uint8Array(y,f),n}function gs(y){canvas=document.createElement("canvas");var t=canvas.getContext("2d"),n=y.infoheader.biWidth,f=y.infoheader.biHeight;canvas.width=n,canvas.height=f;for(var h=t.createImageData(n,f),l=h.data,v=y.pixels,x=y.stride,g=0;g<f;++g)for(var u=0;u<n;++u){var _=(u+n*(f-g))*4,d=u*3+x*g;l[_]=v[d+2],l[_+1]=v[d+1],l[_+2]=v[d],l[_+3]=255}return t.putImageData(h,0,0),canvas.toDataURL("image/png")}function qc(y,t){let n=`x,r,g,b,i
`,f="";y.forEach((l,v)=>{f+=`${v},${l.r},${l.g},${l.b},${l.i}
`});let h=n+f;zi.saveCSV(h,t+"_"+new Date().toISOString())}async function ms(y,t,n="320px",f="180px"){let h=`
    <div style='width:${n}; height:${f};'>
        <div>
            <input id='title' type='text' placeholder='name'>
            <button id='toggledisplay'>Toggle Display</button>
            <button id='savepng'>Save PNG</button>
            <button id='savebmp'>Save BMP</button>
            <button id='savecsv'>Save CSV</button>
            <button id='backup'>Backup</button>
            <button id='X'>X</button>
        </div>
        <canvas id='capturecanvas' style='width:100%; height:100%; z-index:5;'></canvas>
        <canvas id='graphcanvas' style='width:100%; height:100%; z-index:6;'></canvas>
    </div>`;if(typeof t=="string"&&(t=document.getElementById(t)),t){t.insertAdjacentHTML("afterbegin",h);let l=document.querySelector("#capturecanvas");l.width=y.width,l.height=y.height;let v=l.getContext("2d");v.drawImage(y,0,0);let x=document.querySelector("#title");console.log(y);let g=v.getImageData(0,0,l.width,l.height),u=document.querySelector("#graphcanvas"),_=Wc(u.getContext("2d"),g),d={parentNode:t,width:y.width,height:y.height,canvas:l,input:x,mapped:_};return t.querySelector("#toggledisplay").onclick=()=>{l.style.display==""&&u.style.display==""?l.style.display="none":l.style.display=="none"?(l.style.display="",u.style.display="none"):u.style.display=="none"&&(u.style.display="")},t.querySelector("#backup").onclick=()=>{Uc(d.mapped,x.value+"_"+new Date().toISOString())},t.querySelector("#savepng").onclick=()=>{let N=new OffscreenCanvas(d.mapped.bitmap.width,d.mapped.bitmap.height);N.getContext("2d").drawImage(y,0,0);let T=new FileReader;T.addEventListener("load",function(){var I=document.createElement("a");I.href=T.result,I.target="_blank",x.value!==""?I.download=x.value+"_"+new Date().toISOString()+".png":I.download=new Date().toISOString()+".png",I.click()},!1),N.convertToBlob({type:"image/png"}).then(I=>{T.readAsDataURL(I)})},t.querySelector("#savebmp").onclick=()=>{let N=ls.ImageDatatoDataURL(jc(d.mapped.bitarr,d.mapped.width,d.mapped.height));var T=document.createElement("a");T.href=N,T.target="_blank",x.value!==""?T.download=x.value+"_"+new Date().toISOString()+".bmp":T.download=new Date().toISOString()+".bmp",T.click()},t.querySelector("#savecsv").onclick=()=>{qc(d.mapped.xrgbintensities,x.value)},t.querySelector("#X").onclick=()=>{l.parentNode.parentNode.removeChild(l.parentNode)},d}return h}var Zc=vs(),on=class extends ee{bitmap;bitslice;canvas;ctx;offscreen;offscreenctx;capture;capturectx;img;video;imgselect;captures={};loaded={};template=Zc;props={picking:0,picked:{x0:void 0,x1:void 0,y0:void 0,y1:void 0},imgpicked:{x0:void 0,x1:void 0,y0:void 0,y1:void 0},running:!1,mode:"img",animation:(t,n,f,h)=>{},operator:(t,n,f,h)=>{},forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};oncreate=t=>{this.canvas=this.querySelector("#picker"),this.img=this.querySelector("img"),this.video=this.querySelector("video"),this.select=this.querySelector("#imgselect"),this.capture=this.querySelector("#capture"),this.querySelector("#fileinput").onchange=this.handleFileInput,this.querySelector("#snip").onclick=f=>{this.props.picked.y1&&this.props.picked.x1&&this.canvasCapture(f)};let n=()=>{if(this.props.mode==="video"&&this.props.picked.y1&&this.props.picked.x1){this.props.running=!0;let f=ds(this.capture);this.querySelector("#animate").innerHTML="Recording...",this.querySelector("#animate").onclick=()=>{this.props.running=!1,f.stop(),this.querySelector("#animate").innerHTML="Record",this.querySelector("#animate").onclick=n}}};this.querySelector("#animate").onclick=n,this.select.onchange=f=>{this.props.mode==="img"&&this.useImage()},this.querySelector("#webcam").onclick=this.useWebcam,this.querySelector("#image").onclick=this.useImage,this.querySelector("#setImgUrl").onclick=this.inputImgUrl,this.querySelector("#setVideoUrl").onclick=this.inputVideoSrc,t.width&&(this.canvas.width=t.width,this.canvas.style.width=t.width,this.video.width=t.width,this.video.style.width=t.width,this.img.width=t.width,this.img.style.width=t.width),t.height&&(this.canvas.height=t.height,this.canvas.style.height=t.height,this.video.height=t.height,this.video.style.height=t.height,this.img.height=t.height,this.img.style.height=t.height),t.style&&(this.canvas.style=t.style,this.canvas.zIndex=3,this.video.style=t.style,this.video.zIndex=2,this.img.style=t.style,this.img.zIndex=1,setTimeout(()=>{this.canvas.height=this.canvas.clientHeight,this.canvas.width=this.canvas.clientWidth,this.img.width=t.width,this.img.height=t.height,this.video.width=t.width,this.video.height=t.height},10)),t.canvas=this.canvas,t.context?t.context=this.canvas.getContext(t.context):t.context=this.canvas.getContext("2d"),this.context=t.context,this.ctx=this.context,t.ctx=this.context,this.offscreen=new OffscreenCanvas(this.canvas.width,this.canvas.height),this.offscreenctx=this.offscreen.getContext("2d"),this.capturectx=this.capture.getContext("2d"),this.props.picked.x0=0,this.props.picked.y0=0,this.props.picked.x1=this.canvas.width,this.props.picked.y1=this.canvas.height,this.canvas.onclick=this.canvasClicked,setTimeout(()=>{t.animate&&t.node.runAnimation()},10);try{this.useImage()}catch(f){console.error(f)}};useWebcam=()=>{this.props.running=!1,this.img.style.display="none",this.video.src&&(this.video.pause(),this.video.src=""),this.video.style.display="",navigator.getUserMedia&&navigator.getUserMedia({video:!0},t=>{this.video.srcObject=t,this.video.play(),this.video.width=this.canvas.width,this.video.height=this.canvas.height,this.props.mode="video"},console.error)};useImage=()=>{this.props.running=!1,this.video.src&&(this.video.pause(),this.video.src="",this.video.style.display="none"),this.img.src=this.select.options[this.select.selectedIndex].value,this.img.style.display="",this.props.mode="img",this.canvas.height=this.img.height,this.canvas.width=this.img.width,this.canvas.style.width=this.img.style.width,this.canvas.style.height=this.img.style.height};inputImgUrl(){this.props.running=!1;let t=this.querySelector("#imgurl").value;t&&(this.video.src&&(this.video.pause(),this.video.src="",this.video.style.display="none"),this.img.src=t,this.img.style.display="",this.props.mode="img",this.canvas.height=this.img.height,this.canvas.width=this.canvas.width,this.canvas.style.width=this.img.style.width,this.canvas.style.height=this.img.style.height)}inputVideoSrc(){this.props.running=!1,this.img.style.display="none",this.video.style.display="";let t=this.querySelector("#videourl").value;t&&(this.video.src=t,this.video.play(),this.props.mode="video",this.canvas.height=this.video.height,this.canvas.width=this.video.width,this.canvas.style.width=this.video.style.width,this.canvas.style.height=this.video.style.height)}loadFile(){var t=document.createElement("input");t.accept=".mp4,.png,.bmp,.jpg",t.type="file",t.onchange=n=>{let f=n.target.files[0],h=URL.createObjectURL(f);if(this.loaded[t.value]=h,this.video.src&&(this.video.pause(),this.video.src="",this.video.style.display="none"),t.value.endsWith(".mp4"))this.props.mode="video",this.video.src=h,this.video.play();else if(this.props.mode="img",t.value.endsWith(".bmp")){var l=new FileReader;l.onload=v=>{var x=v.target.result,g=ys(x);let u=gs(g);this.img.src=u},l.readAsArrayBuffer(f)}else this.img.src=h},t.click()}drawCircle(t,n,f,h="green",l=5,v="#003300",x=this.ctx){x.beginPath(),x.arc(t,n,f,0,2*Math.PI,!1),x.fillStyle=h,x.fill(),x.lineWidth=l,x.strokeStyle=v,x.closePath(),x.stroke()}drawLine(t={x:0,y:0},n={x:1,y:1},f=5,h="#003300",l=this.ctx){l.beginPath(),l.lineWidth=f,l.strokeStyle=h,l.moveTo(t.x,t.y),l.lineTo(n.x,n.y),l.stroke()}canvasClicked=t=>{if(this.props.running=!1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.props.picking===0){this.props.picked.x0=t.pageX-this.canvas.offsetLeft,this.props.picked.y0=t.pageY-this.canvas.offsetTop,this.props.picked.x1=void 0,this.props.picked.y1=void 0;let n;this.props.mode==="img"?n=ji(this.img,this.canvas,this.props.picked.x0,this.props.picked.y0):this.props.mode==="video"&&(n=ji(this.video,this.canvas,this.props.picked.x0,this.props.picked.y0)),this.props.imgpicked.x0=n.x,this.props.imgpicked.y0=n.y,this.props.imgpicked.x1=void 0,this.props.imgpicked.y1=void 0,this.drawCircle(this.props.picked.x0,this.props.picked.y0,2.5,"orange",1,"orange"),this.props.picking=1}else{this.props.picked.x1=t.pageX-this.canvas.offsetLeft,this.props.picked.y1=t.pageY-this.canvas.offsetTop;let n;if(this.props.mode==="img"?n=ji(this.img,this.canvas,this.props.picked.x1,this.props.picked.y1):this.props.mode==="video"&&(n=ji(this.video,this.canvas,this.props.picked.x1,this.props.picked.y1)),this.props.imgpicked.x1=n.x,this.props.imgpicked.y1=n.y,this.props.picked.x1<this.props.picked.x0){let f=this.props.picked.x1;this.props.picked.x1=this.props.picked.x0,this.props.picked.x0=f,f=this.props.imgpicked.x1,this.props.imgpicked.x1=this.props.imgpicked.x0,this.props.imgpicked.x0=f}if(this.props.picked.y1<this.props.picked.y0){let f=this.props.picked.y1;this.props.picked.y1=this.props.picked.y0,this.props.picked.y0=f,f=this.props.imgpicked.y1,this.props.imgpicked.y1=this.props.imgpicked.y0,this.props.imgpicked.y0=f}this.props.picking=0,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.strokeStyle="orange",this.ctx.rect(this.props.picked.x0,this.props.picked.y0,Math.abs(this.props.picked.x1-this.props.picked.x0),Math.abs(this.props.picked.y1-this.props.picked.y0)),this.ctx.stroke(),console.log(this.props.imgpicked),this.props.mode==="video"?this.continuousCapture(this.video):ps(this.capturectx,this.img,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),0,0,this.capture.width,this.capture.height)}};continuousCapture(t){this.props.imgpicked.x1&&this.props.imgpicked.x0&&this.props.imgpicked.y1&&this.props.imgpicked.y0&&(this.capturectx.drawImage(t,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),0,0,this.capturectx.width,this.capturectx.height),this.continuousCapture(t))}processCapture=t=>{ms(t,this.querySelector("#captured"),"49.99%","75px")};canvasCapture(t){if(this.props.mode==="img"){if(!this.img.src)return;createImageBitmap(this.img,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0)).then(this.processCapture)}else if(this.props.mode==="video"){if(!this.video.src)return;createImageBitmap(this.video,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0)).then(this.processCapture)}}onresize=t=>{this.canvas&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.canvas.style.width=this.canvas.clientWidth,this.canvas.style.height=this.canvas.clientHeight,this.img.width=this.img.clientWidth,this.img.height=this.img.clientHeight,this.img.style.width=this.img.clientWidth,this.img.style.height=this.img.clientHeight,this.video.width=this.video.clientWidth,this.video.height=this.video.clientHeight,this.video.style.width=this.video.clientWidth,this.video.style.height=this.video.clientHeight)}};on.addElement("spectrometer-node");var Xc=document.createElement("spectrometer-node");document.body.appendChild(Xc);})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/
/*! canvas-to-bmp version 1.0 ALPHA https://stackoverflow.com/questions/29652307/canvas-unable-to-generate-bmp-image-dataurl-in-chrome
    (c) 2015 Ken "Epistemex" Fyrstenberg, modified by Josh Brewster 2022
    MIT License (this header required)
*/
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */

        </script>
      </body>
    