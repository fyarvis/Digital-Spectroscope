
      <!DOCTYPE html>
      <head>
      </head>
      <body>  
        <script>
          (()=>{var au=Object.create;var mo=Object.defineProperty;var uu=Object.getOwnPropertyDescriptor;var cu=Object.getOwnPropertyNames;var fu=Object.getPrototypeOf,lu=Object.prototype.hasOwnProperty;var Ei=(p,s)=>()=>(s||p((s={exports:{}}).exports,s),s.exports);var hu=(p,s,u,f)=>{if(s&&typeof s=="object"||typeof s=="function")for(let m of cu(s))!lu.call(p,m)&&m!==u&&mo(p,m,{get:()=>s[m],enumerable:!(f=uu(s,m))||f.enumerable});return p};var vo=(p,s,u)=>(u=p!=null?au(fu(p)):{},hu(s||!p||!p.__esModule?mo(u,"default",{value:p,enumerable:!0}):u,p));var wo=Ei((ji,Or)=>{(function(s,u){typeof ji=="object"&&typeof Or=="object"?Or.exports=u():typeof define=="function"&&define.amd?define([],u):typeof ji=="object"?ji.BrowserFS=u():s.BrowserFS=u()})(ji,function(){return function(p){var s={};function u(f){if(s[f])return s[f].exports;var m=s[f]={exports:{},id:f,loaded:!1};return p[f].call(m.exports,m,m.exports,u),m.loaded=!0,m.exports}return u.m=p,u.c=s,u.p="",u(0)}([function(p,s,u){(function(f,m,v,_){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var F=u(2),w=u(9),h;(function(o){o[o.EPERM=1]="EPERM",o[o.ENOENT=2]="ENOENT",o[o.EIO=5]="EIO",o[o.EBADF=9]="EBADF",o[o.EACCES=13]="EACCES",o[o.EBUSY=16]="EBUSY",o[o.EEXIST=17]="EEXIST",o[o.ENOTDIR=20]="ENOTDIR",o[o.EISDIR=21]="EISDIR",o[o.EINVAL=22]="EINVAL",o[o.EFBIG=27]="EFBIG",o[o.ENOSPC=28]="ENOSPC",o[o.EROFS=30]="EROFS",o[o.ENOTEMPTY=39]="ENOTEMPTY",o[o.ENOTSUP=95]="ENOTSUP"})(h||(h={}));var I={};I[h.EPERM]="Operation not permitted.",I[h.ENOENT]="No such file or directory.",I[h.EIO]="Input/output error.",I[h.EBADF]="Bad file descriptor.",I[h.EACCES]="Permission denied.",I[h.EBUSY]="Resource busy or locked.",I[h.EEXIST]="File exists.",I[h.ENOTDIR]="File is not a directory.",I[h.EISDIR]="File is a directory.",I[h.EINVAL]="Invalid argument.",I[h.EFBIG]="File is too big.",I[h.ENOSPC]="No space left on disk.",I[h.EROFS]="Cannot modify a read-only file system.",I[h.ENOTEMPTY]="Directory is not empty.",I[h.ENOTSUP]="Operation is not supported.";var y=function(o){function t(n,e,a){e===void 0&&(e=I[n]),o.call(this,e),this.syscall="",this.errno=n,this.code=h[n],this.path=a,this.stack=new o().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var a=new t(0);return a.errno=e.errno,a.code=e.code,a.path=e.path,a.stack=e.stack,a.message=e.message,a},t.fromBuffer=function(e,a){return a===void 0&&(a=0),t.fromJSON(JSON.parse(e.toString("utf8",a+4,a+4+e.readUInt32LE(a))))},t.FileError=function(e,a){return new t(e,I[e],a)},t.ENOENT=function(e){return this.FileError(h.ENOENT,e)},t.EEXIST=function(e){return this.FileError(h.EEXIST,e)},t.EISDIR=function(e){return this.FileError(h.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(h.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(h.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(h.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,a){e===void 0&&(e=f.alloc(this.bufferSize())),a===void 0&&(a=0);var c=e.write(JSON.stringify(this.toJSON()),a+4);return e.writeUInt32LE(c,a),e},t.prototype.bufferSize=function(){return 4+f.byteLength(JSON.stringify(this.toJSON()))},t}(Error),A=Object.freeze({get ErrorCode(){return h},ErrorStrings:I,ApiError:y}),C;(function(o){o[o.NOP=0]="NOP",o[o.THROW_EXCEPTION=1]="THROW_EXCEPTION",o[o.TRUNCATE_FILE=2]="TRUNCATE_FILE",o[o.CREATE_FILE=3]="CREATE_FILE"})(C||(C={}));var T=function o(t){if(this.flagStr=t,o.validFlagStrs.indexOf(t)<0)throw new y(h.EINVAL,"Invalid flag: "+t)};T.getFileFlag=function(t){return T.flagCache.hasOwnProperty(t)?T.flagCache[t]:T.flagCache[t]=new T(t)},T.prototype.getFlagString=function(){return this.flagStr},T.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},T.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},T.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},T.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},T.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},T.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},T.prototype.pathExistsAction=function(){return this.isExclusive()?C.THROW_EXCEPTION:this.isTruncating()?C.TRUNCATE_FILE:C.NOP},T.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?C.CREATE_FILE:C.THROW_EXCEPTION},T.flagCache={},T.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var M;(function(o){o[o.FILE=32768]="FILE",o[o.DIRECTORY=16384]="DIRECTORY",o[o.SYMLINK=40960]="SYMLINK"})(M||(M={}));var U=function(t,n,e,a,c,l){if(a===void 0&&(a=new Date),c===void 0&&(c=new Date),l===void 0&&(l=new Date),this.size=n,this.atime=a,this.mtime=c,this.ctime=l,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case M.FILE:this.mode=420;break;case M.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(n/512),this.mode<4096&&(this.mode|=t)};U.fromBuffer=function(t){var n=t.readUInt32LE(0),e=t.readUInt32LE(4),a=t.readDoubleLE(8),c=t.readDoubleLE(16),l=t.readDoubleLE(24);return new U(e&61440,n,e&4095,new Date(a),new Date(c),new Date(l))},U.prototype.toBuffer=function(){var t=f.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},U.prototype.clone=function(){return new U(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},U.prototype.isFile=function(){return(this.mode&61440)===M.FILE},U.prototype.isDirectory=function(){return(this.mode&61440)===M.DIRECTORY},U.prototype.isSymbolicLink=function(){return(this.mode&61440)===M.SYMLINK},U.prototype.chmod=function(t){this.mode=this.mode&61440|t},U.prototype.isSocket=function(){return!1},U.prototype.isBlockDevice=function(){return!1},U.prototype.isCharacterDevice=function(){return!1},U.prototype.isFIFO=function(){return!1};var J=function(o,t){return o};function Z(o){if(o)return o;throw new y(h.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function j(o,t){switch(typeof o){case"number":return o;case"string":var n=parseInt(o,8);return isNaN(n)?t:n;default:return t}}function bt(o){if(o instanceof Date)return o;if(typeof o=="number")return new Date(o*1e3);throw new y(h.EINVAL,"Invalid time.")}function ot(o){if(o.indexOf("\0")>=0)throw new y(h.EINVAL,"Path must be a string without null bytes.");if(o==="")throw new y(h.EINVAL,"Path must not be empty.");return w.resolve(o)}function xt(o,t,n,e){switch(typeof o){case"object":return{encoding:typeof o.encoding<"u"?o.encoding:t,flag:typeof o.flag<"u"?o.flag:n,mode:j(o.mode,e)};case"string":return{encoding:o,flag:n,mode:e};default:return{encoding:t,flag:n,mode:e}}}function mt(){}var W=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};W.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new y(h.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},W.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},W.prototype.getRootFS=function(){return this.root?this.root:null},W.prototype.rename=function(t,n,e){e===void 0&&(e=mt);var a=J(e,1);try{Z(this.root).rename(ot(t),ot(n),a)}catch(c){a(c)}},W.prototype.renameSync=function(t,n){Z(this.root).renameSync(ot(t),ot(n))},W.prototype.exists=function(t,n){n===void 0&&(n=mt);var e=J(n,1);try{return Z(this.root).exists(ot(t),e)}catch{return e(!1)}},W.prototype.existsSync=function(t){try{return Z(this.root).existsSync(ot(t))}catch{return!1}},W.prototype.stat=function(t,n){n===void 0&&(n=mt);var e=J(n,2);try{return Z(this.root).stat(ot(t),!1,e)}catch(a){return e(a)}},W.prototype.statSync=function(t){return Z(this.root).statSync(ot(t),!1)},W.prototype.lstat=function(t,n){n===void 0&&(n=mt);var e=J(n,2);try{return Z(this.root).stat(ot(t),!0,e)}catch(a){return e(a)}},W.prototype.lstatSync=function(t){return Z(this.root).statSync(ot(t),!0)},W.prototype.truncate=function(t,n,e){n===void 0&&(n=0),e===void 0&&(e=mt);var a=0;typeof n=="function"?e=n:typeof n=="number"&&(a=n);var c=J(e,1);try{if(a<0)throw new y(h.EINVAL);return Z(this.root).truncate(ot(t),a,c)}catch(l){return c(l)}},W.prototype.truncateSync=function(t,n){if(n===void 0&&(n=0),n<0)throw new y(h.EINVAL);return Z(this.root).truncateSync(ot(t),n)},W.prototype.unlink=function(t,n){n===void 0&&(n=mt);var e=J(n,1);try{return Z(this.root).unlink(ot(t),e)}catch(a){return e(a)}},W.prototype.unlinkSync=function(t){return Z(this.root).unlinkSync(ot(t))},W.prototype.open=function(t,n,e,a){var c=this;a===void 0&&(a=mt);var l=j(e,420);a=typeof e=="function"?e:a;var d=J(a,2);try{Z(this.root).open(ot(t),T.getFileFlag(n),l,function(x,k){k?d(x,c.getFdForFile(k)):d(x)})}catch(x){d(x)}},W.prototype.openSync=function(t,n,e){return e===void 0&&(e=420),this.getFdForFile(Z(this.root).openSync(ot(t),T.getFileFlag(n),j(e,420)))},W.prototype.readFile=function(t,n,e){n===void 0&&(n={}),e===void 0&&(e=mt);var a=xt(n,null,"r",null);e=typeof n=="function"?n:e;var c=J(e,2);try{var l=T.getFileFlag(a.flag);return l.isReadable()?Z(this.root).readFile(ot(t),a.encoding,l,c):c(new y(h.EINVAL,"Flag passed to readFile must allow for reading."))}catch(d){return c(d)}},W.prototype.readFileSync=function(t,n){n===void 0&&(n={});var e=xt(n,null,"r",null),a=T.getFileFlag(e.flag);if(!a.isReadable())throw new y(h.EINVAL,"Flag passed to readFile must allow for reading.");return Z(this.root).readFileSync(ot(t),e.encoding,a)},W.prototype.writeFile=function(t,n,e,a){e===void 0&&(e={}),a===void 0&&(a=mt);var c=xt(e,"utf8","w",420);a=typeof e=="function"?e:a;var l=J(a,1);try{var d=T.getFileFlag(c.flag);return d.isWriteable()?Z(this.root).writeFile(ot(t),n,c.encoding,d,c.mode,l):l(new y(h.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(x){return l(x)}},W.prototype.writeFileSync=function(t,n,e){var a=xt(e,"utf8","w",420),c=T.getFileFlag(a.flag);if(!c.isWriteable())throw new y(h.EINVAL,"Flag passed to writeFile must allow for writing.");return Z(this.root).writeFileSync(ot(t),n,a.encoding,c,a.mode)},W.prototype.appendFile=function(t,n,e,a){a===void 0&&(a=mt);var c=xt(e,"utf8","a",420);a=typeof e=="function"?e:a;var l=J(a,1);try{var d=T.getFileFlag(c.flag);if(!d.isAppendable())return l(new y(h.EINVAL,"Flag passed to appendFile must allow for appending."));Z(this.root).appendFile(ot(t),n,c.encoding,d,c.mode,l)}catch(x){l(x)}},W.prototype.appendFileSync=function(t,n,e){var a=xt(e,"utf8","a",420),c=T.getFileFlag(a.flag);if(!c.isAppendable())throw new y(h.EINVAL,"Flag passed to appendFile must allow for appending.");return Z(this.root).appendFileSync(ot(t),n,a.encoding,c,a.mode)},W.prototype.fstat=function(t,n){n===void 0&&(n=mt);var e=J(n,2);try{var a=this.fd2file(t);a.stat(e)}catch(c){e(c)}},W.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},W.prototype.close=function(t,n){var e=this;n===void 0&&(n=mt);var a=J(n,1);try{this.fd2file(t).close(function(c){c||e.closeFd(t),a(c)})}catch(c){a(c)}},W.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},W.prototype.ftruncate=function(t,n,e){e===void 0&&(e=mt);var a=typeof n=="number"?n:0;e=typeof n=="function"?n:e;var c=J(e,1);try{var l=this.fd2file(t);if(a<0)throw new y(h.EINVAL);l.truncate(a,c)}catch(d){c(d)}},W.prototype.ftruncateSync=function(t,n){n===void 0&&(n=0);var e=this.fd2file(t);if(n<0)throw new y(h.EINVAL);e.truncateSync(n)},W.prototype.fsync=function(t,n){n===void 0&&(n=mt);var e=J(n,1);try{this.fd2file(t).sync(e)}catch(a){e(a)}},W.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},W.prototype.fdatasync=function(t,n){n===void 0&&(n=mt);var e=J(n,1);try{this.fd2file(t).datasync(e)}catch(a){e(a)}},W.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},W.prototype.write=function(t,n,e,a,c,l){l===void 0&&(l=mt);var d,x,k,B=null;if(typeof n=="string"){var P="utf8";switch(typeof e){case"function":l=e;break;case"number":B=e,P=typeof a=="string"?a:"utf8",l=typeof c=="function"?c:l;break;default:return l=typeof a=="function"?a:typeof c=="function"?c:l,l(new y(h.EINVAL,"Invalid arguments."))}d=f.from(n,P),x=0,k=d.length}else d=n,x=e,k=a,B=typeof c=="number"?c:null,l=typeof c=="function"?c:l;var Y=J(l,3);try{var rt=this.fd2file(t);B==null&&(B=rt.getPos()),rt.write(d,x,k,B,Y)}catch(st){Y(st)}},W.prototype.writeSync=function(t,n,e,a,c){var l,d=0,x,k;if(typeof n=="string"){k=typeof e=="number"?e:null;var B=typeof a=="string"?a:"utf8";d=0,l=f.from(n,B),x=l.length}else l=n,d=e,x=a,k=typeof c=="number"?c:null;var P=this.fd2file(t);return k==null&&(k=P.getPos()),P.writeSync(l,d,x,k)},W.prototype.read=function(t,n,e,a,c,l){l===void 0&&(l=mt);var d,x,k,B,P;if(typeof n=="number"){k=n,d=e;var Y=a;l=typeof c=="function"?c:l,x=0,B=f.alloc(k),P=J(function(st,pt,wt){if(st)return l(st);l(st,wt.toString(Y),pt)},3)}else B=n,x=e,k=a,d=c,P=J(l,3);try{var rt=this.fd2file(t);d==null&&(d=rt.getPos()),rt.read(B,x,k,d,P)}catch(st){P(st)}},W.prototype.readSync=function(t,n,e,a,c){var l=!1,d,x,k,B,P="utf8";typeof n=="number"?(k=n,B=e,P=a,x=0,d=f.alloc(k),l=!0):(d=n,x=e,k=a,B=c);var Y=this.fd2file(t);B==null&&(B=Y.getPos());var rt=Y.readSync(d,x,k,B);return l?[d.toString(P),rt]:rt},W.prototype.fchown=function(t,n,e,a){a===void 0&&(a=mt);var c=J(a,1);try{this.fd2file(t).chown(n,e,c)}catch(l){c(l)}},W.prototype.fchownSync=function(t,n,e){this.fd2file(t).chownSync(n,e)},W.prototype.fchmod=function(t,n,e){var a=J(e,1);try{var c=typeof n=="string"?parseInt(n,8):n;this.fd2file(t).chmod(c,a)}catch(l){a(l)}},W.prototype.fchmodSync=function(t,n){var e=typeof n=="string"?parseInt(n,8):n;this.fd2file(t).chmodSync(e)},W.prototype.futimes=function(t,n,e,a){a===void 0&&(a=mt);var c=J(a,1);try{var l=this.fd2file(t);typeof n=="number"&&(n=new Date(n*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),l.utimes(n,e,c)}catch(d){c(d)}},W.prototype.futimesSync=function(t,n,e){this.fd2file(t).utimesSync(bt(n),bt(e))},W.prototype.rmdir=function(t,n){n===void 0&&(n=mt);var e=J(n,1);try{t=ot(t),Z(this.root).rmdir(t,e)}catch(a){e(a)}},W.prototype.rmdirSync=function(t){return t=ot(t),Z(this.root).rmdirSync(t)},W.prototype.mkdir=function(t,n,e){e===void 0&&(e=mt),typeof n=="function"&&(e=n,n=511);var a=J(e,1);try{t=ot(t),Z(this.root).mkdir(t,n,a)}catch(c){a(c)}},W.prototype.mkdirSync=function(t,n){Z(this.root).mkdirSync(ot(t),j(n,511))},W.prototype.readdir=function(t,n){n===void 0&&(n=mt);var e=J(n,2);try{t=ot(t),Z(this.root).readdir(t,e)}catch(a){e(a)}},W.prototype.readdirSync=function(t){return t=ot(t),Z(this.root).readdirSync(t)},W.prototype.link=function(t,n,e){e===void 0&&(e=mt);var a=J(e,1);try{t=ot(t),n=ot(n),Z(this.root).link(t,n,a)}catch(c){a(c)}},W.prototype.linkSync=function(t,n){return t=ot(t),n=ot(n),Z(this.root).linkSync(t,n)},W.prototype.symlink=function(t,n,e,a){a===void 0&&(a=mt);var c=typeof e=="string"?e:"file";a=typeof e=="function"?e:a;var l=J(a,1);try{if(c!=="file"&&c!=="dir")return l(new y(h.EINVAL,"Invalid type: "+c));t=ot(t),n=ot(n),Z(this.root).symlink(t,n,c,l)}catch(d){l(d)}},W.prototype.symlinkSync=function(t,n,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new y(h.EINVAL,"Invalid type: "+e);return t=ot(t),n=ot(n),Z(this.root).symlinkSync(t,n,e)},W.prototype.readlink=function(t,n){n===void 0&&(n=mt);var e=J(n,2);try{t=ot(t),Z(this.root).readlink(t,e)}catch(a){e(a)}},W.prototype.readlinkSync=function(t){return t=ot(t),Z(this.root).readlinkSync(t)},W.prototype.chown=function(t,n,e,a){a===void 0&&(a=mt);var c=J(a,1);try{t=ot(t),Z(this.root).chown(t,!1,n,e,c)}catch(l){c(l)}},W.prototype.chownSync=function(t,n,e){t=ot(t),Z(this.root).chownSync(t,!1,n,e)},W.prototype.lchown=function(t,n,e,a){a===void 0&&(a=mt);var c=J(a,1);try{t=ot(t),Z(this.root).chown(t,!0,n,e,c)}catch(l){c(l)}},W.prototype.lchownSync=function(t,n,e){t=ot(t),Z(this.root).chownSync(t,!0,n,e)},W.prototype.chmod=function(t,n,e){e===void 0&&(e=mt);var a=J(e,1);try{var c=j(n,-1);if(c<0)throw new y(h.EINVAL,"Invalid mode.");Z(this.root).chmod(ot(t),!1,c,a)}catch(l){a(l)}},W.prototype.chmodSync=function(t,n){var e=j(n,-1);if(e<0)throw new y(h.EINVAL,"Invalid mode.");t=ot(t),Z(this.root).chmodSync(t,!1,e)},W.prototype.lchmod=function(t,n,e){e===void 0&&(e=mt);var a=J(e,1);try{var c=j(n,-1);if(c<0)throw new y(h.EINVAL,"Invalid mode.");Z(this.root).chmod(ot(t),!0,c,a)}catch(l){a(l)}},W.prototype.lchmodSync=function(t,n){var e=j(n,-1);if(e<1)throw new y(h.EINVAL,"Invalid mode.");Z(this.root).chmodSync(ot(t),!0,e)},W.prototype.utimes=function(t,n,e,a){a===void 0&&(a=mt);var c=J(a,1);try{Z(this.root).utimes(ot(t),bt(n),bt(e),c)}catch(l){c(l)}},W.prototype.utimesSync=function(t,n,e){Z(this.root).utimesSync(ot(t),bt(n),bt(e))},W.prototype.realpath=function(t,n,e){e===void 0&&(e=mt);var a=typeof n=="object"?n:{};e=typeof n=="function"?n:mt;var c=J(e,2);try{t=ot(t),Z(this.root).realpath(t,a,c)}catch(l){c(l)}},W.prototype.realpathSync=function(t,n){return n===void 0&&(n={}),t=ot(t),Z(this.root).realpathSync(t,n)},W.prototype.watchFile=function(t,n,e){throw e===void 0&&(e=mt),new y(h.ENOTSUP)},W.prototype.unwatchFile=function(t,n){throw n===void 0&&(n=mt),new y(h.ENOTSUP)},W.prototype.watch=function(t,n,e){throw e===void 0&&(e=mt),new y(h.ENOTSUP)},W.prototype.access=function(t,n,e){throw e===void 0&&(e=mt),new y(h.ENOTSUP)},W.prototype.accessSync=function(t,n){throw new y(h.ENOTSUP)},W.prototype.createReadStream=function(t,n){throw new y(h.ENOTSUP)},W.prototype.createWriteStream=function(t,n){throw new y(h.ENOTSUP)},W.prototype.wrapCallbacks=function(t){J=t},W.prototype.getFdForFile=function(t){var n=this.nextFd++;return this.fdMap[n]=t,n},W.prototype.fd2file=function(t){var n=this.fdMap[t];if(n)return n;throw new y(h.EBADF,"Invalid file descriptor.")},W.prototype.closeFd=function(t){delete this.fdMap[t]},W.Stats=U;var nt=new W,dt={},At=W.prototype;Object.keys(At).forEach(function(o){typeof nt[o]=="function"?dt[o]=function(){return nt[o].apply(nt,arguments)}:dt[o]=nt[o]}),dt.changeFSModule=function(o){nt=o},dt.getFSModule=function(){return nt},dt.FS=W;function vt(o,t,n,e,a){return o<t||n<t?o>n?n+1:o+1:e===a?t:t+1}function Mt(o,t){if(o===t)return 0;if(o.length>t.length){var n=o;o=t,t=n}for(var e=o.length,a=t.length;e>0&&o.charCodeAt(e-1)===t.charCodeAt(a-1);)e--,a--;for(var c=0;c<e&&o.charCodeAt(c)===t.charCodeAt(c);)c++;if(e-=c,a-=c,e===0||a===1)return a;for(var l=new Array(e<<1),d=0;d<e;)l[e+d]=o.charCodeAt(c+d),l[d]=++d;var x,k,B,P,Y;for(x=0;x+3<a;)for(var rt=t.charCodeAt(c+(k=x)),st=t.charCodeAt(c+(B=x+1)),pt=t.charCodeAt(c+(P=x+2)),wt=t.charCodeAt(c+(Y=x+3)),Rt=x+=4,Yt=0;Yt<e;){var fe=l[e+Yt],De=l[Yt];k=vt(De,k,B,rt,fe),B=vt(k,B,P,st,fe),P=vt(B,P,Y,pt,fe),Rt=vt(P,Y,Rt,wt,fe),l[Yt++]=Rt,Y=P,P=B,B=k,k=De}for(var Ce=0;x<a;){var Si=t.charCodeAt(c+(k=x));Ce=++x;for(var We=0;We<e;We++){var He=l[We];l[We]=Ce=He<k||Ce<k?He>Ce?Ce+1:He+1:Si===l[e+We]?k:k+1,k=He}}return Ce}function Ot(o,t,n){o&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(n)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var Ft=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Kt=typeof window>"u";function H(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function V(o,t,n){n.existsSync(o)||(V(w.dirname(o),t,n),n.mkdirSync(o,t))}function et(o){var t=ht(o),n=t.byteOffset,e=t.byteLength;return n===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(n,n+e)}function ht(o){return o instanceof Uint8Array?o:new Uint8Array(o)}function Nt(o){return o instanceof f?o:o instanceof Uint8Array?Et(o):f.from(o)}function Et(o){return o instanceof f?o:o.byteOffset===0&&o.byteLength===o.buffer.byteLength?kt(o.buffer):f.from(o.buffer,o.byteOffset,o.byteLength)}function kt(o){return f.from(o)}function Lt(o,t,n){if(t===void 0&&(t=0),n===void 0&&(n=o.length),t<0||n<0||n>o.length||t>n)throw new TypeError("Invalid slice bounds on buffer of length "+o.length+": ["+t+", "+n+"]");if(o.length===0)return Pt();var e=ht(o),a=o[0],c=(a+1)%255;return o[0]=c,e[0]===c?(e[0]=a,Et(e.slice(t,n))):(o[0]=a,Et(e.subarray(t,n)))}var qt=null;function Pt(){return qt||(qt=f.alloc(0))}function ne(o,t){f.isBuffer(o)?t():t(new y(h.EINVAL,"option must be a Buffer."))}function L(o,t,n){var e=o.Options,a=o.Name,c=0,l=!1,d=!1;function x(Y){l||(Y&&(l=!0,n(Y)),c--,c===0&&d&&n())}var k=function(Y){if(e.hasOwnProperty(Y)){var rt=e[Y],st=t[Y];if(st==null){if(!rt.optional){var pt=Object.keys(t).filter(function(Rt){return!(Rt in e)}).map(function(Rt){return{str:Rt,distance:Mt(Y,Rt)}}).filter(function(Rt){return Rt.distance<5}).sort(function(Rt,Yt){return Rt.distance-Yt.distance});return l?{}:(l=!0,{v:n(new y(h.EINVAL,"["+a+"] Required option '"+Y+"' not provided."+(pt.length>0?" You provided unrecognized option '"+pt[0].str+"'; perhaps you meant to type '"+Y+"'.":"")+`
Option description: `+rt.description))})}}else{var wt=!1;if(Array.isArray(rt.type)?wt=rt.type.indexOf(typeof st)!==-1:wt=typeof st===rt.type,wt)rt.validator&&(c++,rt.validator(st,x));else return l?{}:(l=!0,{v:n(new y(h.EINVAL,"["+a+"] Value provided for option "+Y+" is not the proper type. Expected "+(Array.isArray(rt.type)?"one of {"+rt.type.join(", ")+"}":rt.type)+", but received "+typeof st+`
Option description: `+rt.description))})}}};for(var B in e){var P=k(B);if(P)return P.v}d=!0,c===0&&!l&&n()}var D=Object.freeze({deprecationMessage:Ot,isIE:Ft,isWebWorker:Kt,fail:H,mkdirpSync:V,buffer2ArrayBuffer:et,buffer2Uint8array:ht,arrayish2Buffer:Nt,uint8Array2Buffer:Et,arrayBuffer2Buffer:kt,copyingSlice:Lt,emptyBuffer:Pt,bufferValidator:ne,checkOptions:L}),$=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};$.prototype.open=function(t){var n=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(n,this.fs.flagsToPermissionString(t.flags)))}catch(a){throw a.code?new e.ErrnoError(this.ERRNO_CODES[a.code]):a}},$.prototype.close=function(t){var n=this.FS;try{n.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new n.ErrnoError(this.ERRNO_CODES[e.code]):e}},$.prototype.read=function(t,n,e,a,c){try{return this.nodefs.readSync(t.nfd,Et(n),e,a,c)}catch(l){throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code])}},$.prototype.write=function(t,n,e,a,c){try{return this.nodefs.writeSync(t.nfd,Et(n),e,a,c)}catch(l){throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code])}},$.prototype.llseek=function(t,n,e){var a=n;if(e===1)a+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var c=this.nodefs.fstatSync(t.nfd);a+=c.size}catch(l){throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code])}if(a<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=a,a};var it=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};it.prototype.getattr=function(t){var n=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(n)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},it.prototype.setattr=function(t,n){var e=this.fs.realPath(t);try{if(n.mode!==void 0&&(this.nodefs.chmodSync(e,n.mode),t.mode=n.mode),n.timestamp!==void 0){var a=new Date(n.timestamp);this.nodefs.utimesSync(e,a,a)}}catch(c){if(!c.code)throw c;if(c.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code])}if(n.size!==void 0)try{this.nodefs.truncateSync(e,n.size)}catch(c){throw c.code?new this.FS.ErrnoError(this.ERRNO_CODES[c.code]):c}},it.prototype.lookup=function(t,n){var e=this.PATH.join2(this.fs.realPath(t),n),a=this.fs.getMode(e);return this.fs.createNode(t,n,a)},it.prototype.mknod=function(t,n,e,a){var c=this.fs.createNode(t,n,e,a),l=this.fs.realPath(c);try{this.FS.isDir(c.mode)?this.nodefs.mkdirSync(l,c.mode):this.nodefs.writeFileSync(l,"",{mode:c.mode})}catch(d){throw d.code?new this.FS.ErrnoError(this.ERRNO_CODES[d.code]):d}return c},it.prototype.rename=function(t,n,e){var a=this.fs.realPath(t),c=this.PATH.join2(this.fs.realPath(n),e);try{this.nodefs.renameSync(a,c),t.name=e,t.parent=n}catch(l){throw l.code?new this.FS.ErrnoError(this.ERRNO_CODES[l.code]):l}},it.prototype.unlink=function(t,n){var e=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.unlinkSync(e)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},it.prototype.rmdir=function(t,n){var e=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.rmdirSync(e)}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},it.prototype.readdir=function(t){var n=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(n);return e.push(".",".."),e}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},it.prototype.symlink=function(t,n,e){var a=this.PATH.join2(this.fs.realPath(t),n);try{this.nodefs.symlinkSync(e,a)}catch(c){throw c.code?new this.FS.ErrnoError(this.ERRNO_CODES[c.code]):c}},it.prototype.readlink=function(t){var n=this.fs.realPath(t);try{return this.nodefs.readlinkSync(n)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var gt=function(t,n,e,a){t===void 0&&(t=self.FS),n===void 0&&(n=self.PATH),e===void 0&&(e=self.ERRNO_CODES),a===void 0&&(a=dt),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=a,this.FS=t,this.PATH=n,this.ERRNO_CODES=e,this.node_ops=new it(this),this.stream_ops=new $(this)};gt.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},gt.prototype.createNode=function(t,n,e,a){var c=this.FS;if(!c.isDir(e)&&!c.isFile(e)&&!c.isLink(e))throw new c.ErrnoError(this.ERRNO_CODES.EINVAL);var l=c.createNode(t,n,e);return l.node_ops=this.node_ops,l.stream_ops=this.stream_ops,l},gt.prototype.getMode=function(t){var n;try{n=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return n.mode},gt.prototype.realPath=function(t){for(var n=[];t.parent!==t;)n.push(t.name),t=t.parent;return n.push(t.mount.opts.root),n.reverse(),this.PATH.join.apply(null,n)},gt.prototype.flagsToPermissionString=function(t){var n=typeof t=="string"?parseInt(t,10):t;return n&=8191,n in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[n]:t},gt.prototype.getNodeFS=function(){return this.nodefs},gt.prototype.getFS=function(){return this.FS},gt.prototype.getPATH=function(){return this.PATH},gt.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var at=function(){};at.prototype.supportsLinks=function(){return!1},at.prototype.diskSpace=function(t,n){n(0,0)},at.prototype.openFile=function(t,n,e){throw new y(h.ENOTSUP)},at.prototype.createFile=function(t,n,e,a){throw new y(h.ENOTSUP)},at.prototype.open=function(t,n,e,a){var c=this,l=function(d,x){if(d)switch(n.pathNotExistsAction()){case C.CREATE_FILE:return c.stat(w.dirname(t),!1,function(k,B){k?a(k):B&&!B.isDirectory()?a(y.ENOTDIR(w.dirname(t))):c.createFile(t,n,e,a)});case C.THROW_EXCEPTION:return a(y.ENOENT(t));default:return a(new y(h.EINVAL,"Invalid FileFlag object."))}else{if(x&&x.isDirectory())return a(y.EISDIR(t));switch(n.pathExistsAction()){case C.THROW_EXCEPTION:return a(y.EEXIST(t));case C.TRUNCATE_FILE:return c.openFile(t,n,function(k,B){k?a(k):B?B.truncate(0,function(){B.sync(function(){a(null,B)})}):H()});case C.NOP:return c.openFile(t,n,a);default:return a(new y(h.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,l)},at.prototype.rename=function(t,n,e){e(new y(h.ENOTSUP))},at.prototype.renameSync=function(t,n){throw new y(h.ENOTSUP)},at.prototype.stat=function(t,n,e){e(new y(h.ENOTSUP))},at.prototype.statSync=function(t,n){throw new y(h.ENOTSUP)},at.prototype.openFileSync=function(t,n,e){throw new y(h.ENOTSUP)},at.prototype.createFileSync=function(t,n,e){throw new y(h.ENOTSUP)},at.prototype.openSync=function(t,n,e){var a;try{a=this.statSync(t,!1)}catch{switch(n.pathNotExistsAction()){case C.CREATE_FILE:var c=this.statSync(w.dirname(t),!1);if(!c.isDirectory())throw y.ENOTDIR(w.dirname(t));return this.createFileSync(t,n,e);case C.THROW_EXCEPTION:throw y.ENOENT(t);default:throw new y(h.EINVAL,"Invalid FileFlag object.")}}if(a.isDirectory())throw y.EISDIR(t);switch(n.pathExistsAction()){case C.THROW_EXCEPTION:throw y.EEXIST(t);case C.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,n,a.mode);case C.NOP:return this.openFileSync(t,n,e);default:throw new y(h.EINVAL,"Invalid FileFlag object.")}},at.prototype.unlink=function(t,n){n(new y(h.ENOTSUP))},at.prototype.unlinkSync=function(t){throw new y(h.ENOTSUP)},at.prototype.rmdir=function(t,n){n(new y(h.ENOTSUP))},at.prototype.rmdirSync=function(t){throw new y(h.ENOTSUP)},at.prototype.mkdir=function(t,n,e){e(new y(h.ENOTSUP))},at.prototype.mkdirSync=function(t,n){throw new y(h.ENOTSUP)},at.prototype.readdir=function(t,n){n(new y(h.ENOTSUP))},at.prototype.readdirSync=function(t){throw new y(h.ENOTSUP)},at.prototype.exists=function(t,n){this.stat(t,null,function(e){n(!e)})},at.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},at.prototype.realpath=function(t,n,e){if(this.supportsLinks())for(var a=t.split(w.sep),c=0;c<a.length;c++){var l=a.slice(0,c+1);a[c]=w.join.apply(null,l)}else this.exists(t,function(d){d?e(null,t):e(y.ENOENT(t))})},at.prototype.realpathSync=function(t,n){if(this.supportsLinks()){for(var e=t.split(w.sep),a=0;a<e.length;a++){var c=e.slice(0,a+1);e[a]=w.join.apply(w,c)}return e.join(w.sep)}else{if(this.existsSync(t))return t;throw y.ENOENT(t)}},at.prototype.truncate=function(t,n,e){this.open(t,T.getFileFlag("r+"),420,function(a,c){if(a)return e(a);c.truncate(n,function(l){c.close(function(d){e(l||d)})})})},at.prototype.truncateSync=function(t,n){var e=this.openSync(t,T.getFileFlag("r+"),420);try{e.truncateSync(n)}catch(a){throw a}finally{e.closeSync()}},at.prototype.readFile=function(t,n,e,a){var c=a;this.open(t,e,420,function(l,d){if(l)return a(l);a=function(x,k){d.close(function(B){return x||(x=B),c(x,k)})},d.stat(function(x,k){if(x)return a(x);var B=f.alloc(k.size);d.read(B,0,k.size,0,function(P){if(P)return a(P);if(n===null)return a(P,B);try{a(null,B.toString(n))}catch(Y){a(Y)}})})})},at.prototype.readFileSync=function(t,n,e){var a=this.openSync(t,e,420);try{var c=a.statSync(),l=f.alloc(c.size);return a.readSync(l,0,c.size,0),a.closeSync(),n===null?l:l.toString(n)}finally{a.closeSync()}},at.prototype.writeFile=function(t,n,e,a,c,l){var d=l;this.open(t,a,420,function(x,k){if(x)return l(x);l=function(B){k.close(function(P){d(B||P)})};try{typeof n=="string"&&(n=f.from(n,e))}catch(B){return l(B)}k.write(n,0,n.length,0,l)})},at.prototype.writeFileSync=function(t,n,e,a,c){var l=this.openSync(t,a,c);try{typeof n=="string"&&(n=f.from(n,e)),l.writeSync(n,0,n.length,0)}finally{l.closeSync()}},at.prototype.appendFile=function(t,n,e,a,c,l){var d=l;this.open(t,a,c,function(x,k){if(x)return l(x);l=function(B){k.close(function(P){d(B||P)})},typeof n=="string"&&(n=f.from(n,e)),k.write(n,0,n.length,null,l)})},at.prototype.appendFileSync=function(t,n,e,a,c){var l=this.openSync(t,a,c);try{typeof n=="string"&&(n=f.from(n,e)),l.writeSync(n,0,n.length,null)}finally{l.closeSync()}},at.prototype.chmod=function(t,n,e,a){a(new y(h.ENOTSUP))},at.prototype.chmodSync=function(t,n,e){throw new y(h.ENOTSUP)},at.prototype.chown=function(t,n,e,a,c){c(new y(h.ENOTSUP))},at.prototype.chownSync=function(t,n,e,a){throw new y(h.ENOTSUP)},at.prototype.utimes=function(t,n,e,a){a(new y(h.ENOTSUP))},at.prototype.utimesSync=function(t,n,e){throw new y(h.ENOTSUP)},at.prototype.link=function(t,n,e){e(new y(h.ENOTSUP))},at.prototype.linkSync=function(t,n){throw new y(h.ENOTSUP)},at.prototype.symlink=function(t,n,e,a){a(new y(h.ENOTSUP))},at.prototype.symlinkSync=function(t,n,e){throw new y(h.ENOTSUP)},at.prototype.readlink=function(t,n){n(new y(h.ENOTSUP))},at.prototype.readlinkSync=function(t){throw new y(h.ENOTSUP)};var It=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,a,c){try{this.renameSync(e,a),c()}catch(l){c(l)}},t.prototype.stat=function(e,a,c){try{c(null,this.statSync(e,a))}catch(l){c(l)}},t.prototype.open=function(e,a,c,l){try{l(null,this.openSync(e,a,c))}catch(d){l(d)}},t.prototype.unlink=function(e,a){try{this.unlinkSync(e),a()}catch(c){a(c)}},t.prototype.rmdir=function(e,a){try{this.rmdirSync(e),a()}catch(c){a(c)}},t.prototype.mkdir=function(e,a,c){try{this.mkdirSync(e,a),c()}catch(l){c(l)}},t.prototype.readdir=function(e,a){try{a(null,this.readdirSync(e))}catch(c){a(c)}},t.prototype.chmod=function(e,a,c,l){try{this.chmodSync(e,a,c),l()}catch(d){l(d)}},t.prototype.chown=function(e,a,c,l,d){try{this.chownSync(e,a,c,l),d()}catch(x){d(x)}},t.prototype.utimes=function(e,a,c,l){try{this.utimesSync(e,a,c),l()}catch(d){l(d)}},t.prototype.link=function(e,a,c){try{this.linkSync(e,a),c()}catch(l){c(l)}},t.prototype.symlink=function(e,a,c,l){try{this.symlinkSync(e,a,c),l()}catch(d){l(d)}},t.prototype.readlink=function(e,a){try{a(null,this.readlinkSync(e))}catch(c){a(c)}},t}(at),St=function(){};St.prototype.sync=function(t){t(new y(h.ENOTSUP))},St.prototype.syncSync=function(){throw new y(h.ENOTSUP)},St.prototype.datasync=function(t){this.sync(t)},St.prototype.datasyncSync=function(){return this.syncSync()},St.prototype.chown=function(t,n,e){e(new y(h.ENOTSUP))},St.prototype.chownSync=function(t,n){throw new y(h.ENOTSUP)},St.prototype.chmod=function(t,n){n(new y(h.ENOTSUP))},St.prototype.chmodSync=function(t){throw new y(h.ENOTSUP)},St.prototype.utimes=function(t,n,e){e(new y(h.ENOTSUP))},St.prototype.utimesSync=function(t,n){throw new y(h.ENOTSUP)};var Qt=function(o){function t(n,e,a,c,l){if(o.call(this),this._pos=0,this._dirty=!1,this._fs=n,this._path=e,this._flag=a,this._stat=c,l?this._buffer=l:this._buffer=Pt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(a){e(a)}},t.prototype.syncSync=function(){throw new y(h.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(a){e(a)}},t.prototype.closeSync=function(){throw new y(h.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(a){e(a)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,a){try{this.truncateSync(e),this._flag.isSynchronous()&&!dt.getRootFS().supportsSynch()&&this.sync(a),a()}catch(c){return a(c)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new y(h.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var a=f.alloc(e-this._buffer.length,0);this.writeSync(a,0,a.length,this._buffer.length),this._flag.isSynchronous()&&dt.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var c=f.alloc(e);this._buffer.copy(c,0,0,e),this._buffer=c,this._flag.isSynchronous()&&dt.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,a,c,l,d){try{d(null,this.writeSync(e,a,c,l),e)}catch(x){d(x)}},t.prototype.writeSync=function(e,a,c,l){if(this._dirty=!0,l==null&&(l=this.getPos()),!this._flag.isWriteable())throw new y(h.EPERM,"File not opened with a writeable mode.");var d=l+c;if(d>this._stat.size&&(this._stat.size=d,d>this._buffer.length)){var x=f.alloc(d);this._buffer.copy(x),this._buffer=x}var k=e.copy(this._buffer,l,a,a+c);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),k):(this.setPos(l+k),k)},t.prototype.read=function(e,a,c,l,d){try{d(null,this.readSync(e,a,c,l),e)}catch(x){d(x)}},t.prototype.readSync=function(e,a,c,l){if(!this._flag.isReadable())throw new y(h.EPERM,"File not opened with a readable mode.");l==null&&(l=this.getPos());var d=l+c;d>this._stat.size&&(c=this._stat.size-l);var x=this._buffer.copy(e,a,l,l+c);return this._stat.atime=new Date,this._pos=l+c,x},t.prototype.chmod=function(e,a){try{this.chmodSync(e),a()}catch(c){a(c)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new y(h.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(St),he=function(o){function t(n,e,a,c,l){o.call(this,n,e,a,c,l)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(Qt),Re=function(o){function t(n,e,a,c,l){o.call(this,n,e,a,c,l)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(Qt),N=function(o){function t(n,e,a){if(a===void 0&&(a=!0),o.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=n,this._async=e,!n.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Ot(a,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){try{var c=new t(e.sync,e.async,!1);c.initialize(function(l){l?a(l):a(null,c)},!1)}catch(l){a(l)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,T.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,a){var c=this;a===void 0&&(a=!0),a&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var l=this._initializeCallbacks,d=function(P){c._isInitialized=!P,c._initializeCallbacks=[],l.forEach(function(Y){return Y(P)})};if(this._isInitialized)e();else if(l.push(e)===1){var x=function(P,Y,rt){P!=="/"&&c._sync.mkdirSync(P,Y),c._async.readdir(P,function(st,pt){var wt=0;function Rt(Yt){Yt?rt(Yt):wt<pt.length?(B(w.join(P,pt[wt]),Rt),wt++):rt()}st?rt(st):Rt()})},k=function(P,Y,rt){c._async.readFile(P,null,T.getFileFlag("r"),function(st,pt){if(st)rt(st);else try{c._sync.writeFileSync(P,pt,null,T.getFileFlag("w"),Y)}catch(wt){st=wt}finally{rt(st)}})},B=function(P,Y){c._async.stat(P,!1,function(rt,st){rt?Y(rt):st.isDirectory()?x(P,st.mode,Y):k(P,st.mode,Y)})};x("/",0,d)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,a){this.checkInitialized(),this._sync.renameSync(e,a),this.enqueueOp({apiMethod:"rename",arguments:[e,a]})},t.prototype.statSync=function(e,a){return this.checkInitialized(),this._sync.statSync(e,a)},t.prototype.openSync=function(e,a,c){this.checkInitialized();var l=this._sync.openSync(e,a,c);return l.closeSync(),new Re(this,e,a,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,T.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,a){this.checkInitialized(),this._sync.mkdirSync(e,a),this.enqueueOp({apiMethod:"mkdir",arguments:[e,a]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,a,c){this.checkInitialized(),this._sync.chmodSync(e,a,c),this.enqueueOp({apiMethod:"chmod",arguments:[e,a,c]})},t.prototype.chownSync=function(e,a,c,l){this.checkInitialized(),this._sync.chownSync(e,a,c,l),this.enqueueOp({apiMethod:"chown",arguments:[e,a,c,l]})},t.prototype.utimesSync=function(e,a,c){this.checkInitialized(),this._sync.utimesSync(e,a,c),this.enqueueOp({apiMethod:"utimes",arguments:[e,a,c]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new y(h.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var a=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var c=function(l){if(l&&console.error("WARNING: File system has desynchronized. Received following error: "+l+`
$`),a._queue.length>0){var d=a._queue.shift(),x=d.arguments;x.push(c),a._async[d.apiMethod].apply(a._async,x)}else a._queueRunning=!1};c()}},t}(It);N.Name="AsyncMirror",N.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function S(o,t,n){switch(n.length){case 0:return o.call(t);case 1:return o.call(t,n[0]);case 2:return o.call(t,n[0],n[1]);case 3:return o.call(t,n[0],n[1],n[2])}return o.apply(t,n)}var E=Math.max;function O(o,t,n){return t=E(t===void 0?o.length-1:t,0),function(){for(var e=arguments,a=-1,c=E(e.length-t,0),l=Array(c);++a<c;)l[a]=e[t+a];a=-1;for(var d=Array(t+1);++a<t;)d[a]=e[a];return d[t]=n(l),S(o,this,d)}}function z(o){return o}function G(o,t){return O(o,t,z)}var tt=function(o){return G(function(t){var n=t.pop();o.call(this,t,n)})};function Tt(o){return G(function(t,n){var e=tt(function(a,c){var l=this;return o(t,function(d,x){d.apply(l,a.concat(x))},c)});return n.length?e.apply(this,n):e})}var Bt=typeof m=="object"&&m&&m.Object===Object&&m,zt=typeof self=="object"&&self&&self.Object===Object&&self,$t=Bt||zt||Function("return this")(),Ut=$t.Symbol,Ne=Object.prototype,fi=Ne.hasOwnProperty,Je=Ne.toString,Ke=Ut?Ut.toStringTag:void 0;function hr(o){var t=fi.call(o,Ke),n=o[Ke];try{o[Ke]=void 0;var e=!0}catch{}var a=Je.call(o);return e&&(t?o[Ke]=n:delete o[Ke]),a}var pr=Object.prototype,dr=pr.toString;function q(o){return dr.call(o)}var ct="[object Null]",R="[object Undefined]",lt=Ut?Ut.toStringTag:void 0;function jt(o){return o==null?o===void 0?R:ct:lt&&lt in Object(o)?hr(o):q(o)}function ut(o){var t=typeof o;return o!=null&&(t=="object"||t=="function")}var pe="[object AsyncFunction]",ft="[object Function]",te="[object GeneratorFunction]",Q="[object Proxy]";function K(o){if(!ut(o))return!1;var t=jt(o);return t==ft||t==te||t==pe||t==Q}var li=9007199254740991;function Wt(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=li}function yt(o){return o!=null&&Wt(o.length)&&!K(o)}var Qe={};function Ue(){}function Zt(o){return function(){if(o!==null){var t=o;o=null,t.apply(this,arguments)}}}var Dt=typeof Symbol=="function"&&Symbol.iterator,se=function(o){return Dt&&o[Dt]&&o[Dt]()};function le(o,t){for(var n=-1,e=Array(o);++n<o;)e[n]=t(n);return e}function ae(o){return o!=null&&typeof o=="object"}var hi="[object Arguments]";function $e(o){return ae(o)&&jt(o)==hi}var Gt=Object.prototype,de=Gt.hasOwnProperty,oe=Gt.propertyIsEnumerable,Te=$e(function(){return arguments}())?$e:function(o){return ae(o)&&de.call(o,"callee")&&!oe.call(o,"callee")},Fe=Array.isArray;function qi(){return!1}var Gr=typeof s=="object"&&s&&!s.nodeType&&s,Jr=Gr&&typeof v=="object"&&v&&!v.nodeType&&v,$o=Jr&&Jr.exports===Gr,Kr=$o?$t.Buffer:void 0,ts=Kr?Kr.isBuffer:void 0,es=ts||qi,is=9007199254740991,rs=/^(?:0|[1-9]\d*)$/;function ns(o,t){return t=t??is,!!t&&(typeof o=="number"||rs.test(o))&&o>-1&&o%1==0&&o<t}var os="[object Arguments]",ss="[object Array]",as="[object Boolean]",us="[object Date]",cs="[object Error]",ls="[object Function]",hs="[object Map]",ps="[object Number]",ds="[object Object]",ys="[object RegExp]",gs="[object Set]",ms="[object String]",vs="[object WeakMap]",ws="[object ArrayBuffer]",Ss="[object DataView]",Es="[object Float32Array]",_s="[object Float64Array]",xs="[object Int8Array]",Fs="[object Int16Array]",bs="[object Int32Array]",Is="[object Uint8Array]",ks="[object Uint8ClampedArray]",Rs="[object Uint16Array]",Ns="[object Uint32Array]",Ht={};Ht[Es]=Ht[_s]=Ht[xs]=Ht[Fs]=Ht[bs]=Ht[Is]=Ht[ks]=Ht[Rs]=Ht[Ns]=!0,Ht[os]=Ht[ss]=Ht[ws]=Ht[as]=Ht[Ss]=Ht[us]=Ht[cs]=Ht[ls]=Ht[hs]=Ht[ps]=Ht[ds]=Ht[ys]=Ht[gs]=Ht[ms]=Ht[vs]=!1;function Ts(o){return ae(o)&&Wt(o.length)&&!!Ht[jt(o)]}function Os(o){return function(t){return o(t)}}var Qr=typeof s=="object"&&s&&!s.nodeType&&s,$r=Qr&&typeof v=="object"&&v&&!v.nodeType&&v,As=$r&&$r.exports===Qr,yr=As&&Bt.process,tn=function(){try{return yr&&yr.binding&&yr.binding("util")}catch{}}(),en=tn&&tn.isTypedArray,Ls=en?Os(en):Ts,Ds=Object.prototype,Cs=Ds.hasOwnProperty;function Bs(o,t){var n=Fe(o),e=!n&&Te(o),a=!n&&!e&&es(o),c=!n&&!e&&!a&&Ls(o),l=n||e||a||c,d=l?le(o.length,String):[],x=d.length;for(var k in o)(t||Cs.call(o,k))&&!(l&&(k=="length"||a&&(k=="offset"||k=="parent")||c&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||ns(k,x)))&&d.push(k);return d}var Ms=Object.prototype;function Us(o){var t=o&&o.constructor,n=typeof t=="function"&&t.prototype||Ms;return o===n}function Ps(o,t){return function(n){return o(t(n))}}var zs=Ps(Object.keys,Object),js=Object.prototype,Ws=js.hasOwnProperty;function Hs(o){if(!Us(o))return zs(o);var t=[];for(var n in Object(o))Ws.call(o,n)&&n!="constructor"&&t.push(n);return t}function rn(o){return yt(o)?Bs(o):Hs(o)}function Vs(o){var t=-1,n=o.length;return function(){return++t<n?{value:o[t],key:t}:null}}function qs(o){var t=-1;return function(){var e=o.next();return e.done?null:(t++,{value:e.value,key:t})}}function Zs(o){var t=rn(o),n=-1,e=t.length;return function(){var c=t[++n];return n<e?{value:o[c],key:c}:null}}function Xs(o){if(yt(o))return Vs(o);var t=se(o);return t?qs(t):Zs(o)}function nn(o){return function(){if(o===null)throw new Error("Callback was already called.");var t=o;o=null,t.apply(this,arguments)}}function on(o){return function(t,n,e){if(e=Zt(e||Ue),o<=0||!t)return e(null);var a=Xs(t),c=!1,l=0;function d(k,B){if(l-=1,k)c=!0,e(k);else{if(B===Qe||c&&l<=0)return c=!0,e(null);x()}}function x(){for(;l<o&&!c;){var k=a();if(k===null){c=!0,l<=0&&e(null);return}l+=1,n(k.value,k.key,nn(d))}}x()}}function sn(o,t,n,e){on(t)(o,n,e)}function gr(o,t){return function(n,e,a){return o(n,t,e,a)}}function Ys(o,t,n){n=Zt(n||Ue);var e=0,a=0,c=o.length;c===0&&n(null);function l(d,x){d?n(d):(++a===c||x===Qe)&&n(null)}for(;e<c;e++)t(o[e],e,nn(l))}var Gs=gr(sn,1/0),an=function(o,t,n){var e=yt(o)?Ys:Gs;e(o,t,n)};function Js(o){return function(t,n,e){return o(an,t,n,e)}}function un(o,t,n,e){e=e||Ue,t=t||[];var a=[],c=0;o(t,function(l,d,x){var k=c++;n(l,function(B,P){a[k]=P,x(B)})},function(l){e(l,a)})}var Ks=Js(un);Tt(Ks);function Qs(o){return function(t,n,e,a){return o(on(n),t,e,a)}}var $s=Qs(un),ta=gr($s,1);Tt(ta),G(function(o,t){return G(function(n){return o.apply(null,t.concat(n))})});function ea(o,t){for(var n=-1,e=o==null?0:o.length;++n<e&&t(o[n],n,o)!==!1;);return o}function ia(o){return function(t,n,e){for(var a=-1,c=Object(t),l=e(t),d=l.length;d--;){var x=l[o?d:++a];if(n(c[x],x,c)===!1)break}return t}}var ra=ia();function ec(o,t){return o&&ra(o,t,rn)}function na(o,t,n,e){for(var a=o.length,c=n+(e?1:-1);e?c--:++c<a;)if(t(o[c],c,o))return c;return-1}function oa(o){return o!==o}function sa(o,t,n){for(var e=n-1,a=o.length;++e<a;)if(o[e]===t)return e;return-1}function ic(o,t,n){return t===t?sa(o,t,n):na(o,oa,n)}var cn="\\ud800-\\udfff",aa="\\u0300-\\u036f",ua="\\ufe20-\\ufe2f",ca="\\u20d0-\\u20ff",fa=aa+ua+ca,la="\\ufe0e\\ufe0f",ha="["+cn+"]",mr="["+fa+"]",pa="\\ud83c[\\udffb-\\udfff]",da="(?:"+mr+"|"+pa+")",fn="[^"+cn+"]",ln="(?:\\ud83c[\\udde6-\\uddff]){2}",hn="[\\ud800-\\udbff][\\udc00-\\udfff]",ya="\\u200d",pn=da+"?",dn="["+la+"]?",ga="(?:"+ya+"(?:"+[fn,ln,hn].join("|")+")"+dn+pn+")*",rc=dn+pn+ga,nc="(?:"+[fn+mr+"?",mr,ln,hn,ha].join("|")+")",yn=typeof setImmediate=="function"&&setImmediate,gn=typeof _=="object"&&typeof _.nextTick=="function";function mn(o){setTimeout(o,0)}function vn(o){return G(function(t,n){o(function(){t.apply(null,n)})})}var Zi;yn?Zi=setImmediate:gn?Zi=_.nextTick:Zi=mn,vn(Zi);var ma=gr(sn,1);function va(o,t,n,e){e=Zt(e||Ue),ma(o,function(a,c,l){n(t,a,function(d,x){t=x,l(d)})},function(a){e(a,t)})}var wa=G(function(t){return G(function(n){var e=this,a=n[n.length-1];typeof a=="function"?n.pop():a=Ue,va(t,n,function(c,l,d){l.apply(e,c.concat(G(function(x,k){d(x,k)})))},function(c,l){a.apply(e,[c].concat(l))})})});G(function(o){return wa.apply(null,o.reverse())}),G(function(o){var t=[null].concat(o);return tt(function(n,e){return e.apply(this,t)})});function wn(o){return G(function(t,n){t.apply(null,n.concat(G(function(e,a){typeof console=="object"&&(e?console.error&&console.error(e):console[o]&&ea(a,function(c){console[o](c)}))})))})}wn("dir");function Sa(o){return function(t,n,e){return o(t,e)}}function Sn(o,t,n){an(o,Sa(t),n)}wn("log");var Xi;gn?Xi=_.nextTick:yn?Xi=setImmediate:Xi=mn,vn(Xi);var oc=Math.ceil,sc=Math.max,ye;function Ea(){ye||(ye={},ye[Dropbox.ApiError.NETWORK_ERROR]=h.EIO,ye[Dropbox.ApiError.INVALID_PARAM]=h.EINVAL,ye[Dropbox.ApiError.INVALID_TOKEN]=h.EPERM,ye[Dropbox.ApiError.OAUTH_ERROR]=h.EPERM,ye[Dropbox.ApiError.NOT_FOUND]=h.ENOENT,ye[Dropbox.ApiError.INVALID_METHOD]=h.EINVAL,ye[Dropbox.ApiError.NOT_ACCEPTABLE]=h.EINVAL,ye[Dropbox.ApiError.CONFLICT]=h.EINVAL,ye[Dropbox.ApiError.RATE_LIMITED]=h.EBUSY,ye[Dropbox.ApiError.SERVER_ERROR]=h.EBUSY,ye[Dropbox.ApiError.OVER_QUOTA]=h.ENOSPC)}function _a(o){return o&&o.stat.isFile}function xa(o){return o&&o.stat.isFolder}function Fa(o){return o==null||typeof o=="object"&&typeof o.byteLength=="number"}var ce=function(t){this._cache={},this._client=t};ce.prototype.readdir=function(t,n){var e=this,a=this.getCachedDirInfo(t);this._wrap(function(c){a!==null&&a.contents?e._client.readdir(t,{contentHash:a.stat.contentHash},c):e._client.readdir(t,c)},function(c,l,d,x){c?c.status===Dropbox.ApiError.NO_CONTENT&&a!==null?n(null,a.contents.slice(0)):n(c):(e.updateCachedDirInfo(t,d,l.slice(0)),x.forEach(function(k){e.updateCachedInfo(w.join(t,k.name),k)}),n(null,l))})},ce.prototype.remove=function(t,n){var e=this;this._wrap(function(a){e._client.remove(t,a)},function(a,c){a||e.updateCachedInfo(t,c),n(a)})},ce.prototype.move=function(t,n,e){var a=this;this._wrap(function(c){a._client.move(t,n,c)},function(c,l){c||(a.deleteCachedInfo(t),a.updateCachedInfo(n,l)),e(c)})},ce.prototype.stat=function(t,n){var e=this;this._wrap(function(a){e._client.stat(t,a)},function(a,c){a||e.updateCachedInfo(t,c),n(a,c)})},ce.prototype.readFile=function(t,n){var e=this,a=this.getCachedFileInfo(t);a!==null&&a.contents!==null?this.stat(t,function(c,l){c?n(c):l.contentHash===a.stat.contentHash?n(c,a.contents.slice(0),a.stat):e.readFile(t,n)}):this._wrap(function(c){e._client.readFile(t,{arrayBuffer:!0},c)},function(c,l,d){c||e.updateCachedInfo(t,d,l.slice(0)),n(c,l,d)})},ce.prototype.writeFile=function(t,n,e){var a=this;this._wrap(function(c){a._client.writeFile(t,n,c)},function(c,l){c||a.updateCachedInfo(t,l,n.slice(0)),e(c,l)})},ce.prototype.mkdir=function(t,n){var e=this;this._wrap(function(a){e._client.mkdir(t,a)},function(a,c){a||e.updateCachedInfo(t,c,[]),n(a)})},ce.prototype._wrap=function(t,n){var e=0,a=function(c){var l=2;if(c&&3>++e)switch(c.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(a)},l*1e3);break;default:n.apply(null,arguments);break}else n.apply(null,arguments)};t(a)},ce.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},ce.prototype.putCachedInfo=function(t,n){this._cache[t.toLowerCase()]=n},ce.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},ce.prototype.getCachedDirInfo=function(t){var n=this.getCachedInfo(t);return xa(n)?n:null},ce.prototype.getCachedFileInfo=function(t){var n=this.getCachedInfo(t);return _a(n)?n:null},ce.prototype.updateCachedDirInfo=function(t,n,e){e===void 0&&(e=null);var a=this.getCachedInfo(t);n.contentHash!==null&&(a===void 0||a.stat.contentHash!==n.contentHash)&&this.putCachedInfo(t,{stat:n,contents:e})},ce.prototype.updateCachedFileInfo=function(t,n,e){e===void 0&&(e=null);var a=this.getCachedInfo(t);n.versionTag!==null&&(a===void 0||a.stat.versionTag!==n.versionTag)&&this.putCachedInfo(t,{stat:n,contents:e})},ce.prototype.updateCachedInfo=function(t,n,e){e===void 0&&(e=null),n.isFile&&Fa(e)?this.updateCachedFileInfo(t,n,e):n.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,n,e)};var ba=function(o){function t(n,e,a,c,l){o.call(this,n,e,a,c,l)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var a=this;if(this.isDirty()){var c=this.getBuffer(),l=et(c);this._fs._writeFileStrict(this.getPath(),l,function(d){d||a.resetDirty(),e(d)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(Qt),Yi=function(o){function t(n,e){e===void 0&&(e=!0),o.call(this),this._client=new ce(n),Ot(e,t.Name,{client:"authenticated dropbox client instance"}),Ea()}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){a(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var a=this;this._client.readdir("/",function(c,l){if(c)e(a.convert(c,"/"));else{var d=function(k,B){var P=w.join("/",k);a._client.remove(P,function(Y){B(Y?a.convert(Y,P):null)})},x=function(k){k?e(k):e()};Sn(l,d,x)}})},t.prototype.rename=function(e,a,c){var l=this;this._client.move(e,a,function(d){d?l._client.stat(a,function(x,k){if(x||k.isFolder){var B=d.response.error.indexOf(e)>-1?e:a;c(l.convert(d,B))}else l._client.remove(a,function(P){P?c(l.convert(P,a)):l.rename(e,a,c)})}):c()})},t.prototype.stat=function(e,a,c){var l=this;this._client.stat(e,function(d,x){if(d)c(l.convert(d,e));else if(x&&x.isRemoved)c(y.FileError(h.ENOENT,e));else{var k=new U(l._statType(x),x.size);return c(null,k)}})},t.prototype.open=function(e,a,c,l){var d=this;this._client.readFile(e,function(x,k,B){if(x)if(a.isReadable())l(d.convert(x,e));else switch(x.status){case Dropbox.ApiError.NOT_FOUND:var P=new ArrayBuffer(0);return d._writeFileStrict(e,P,function(st,pt){if(st)l(st);else{var wt=d._makeFile(e,a,pt,kt(P));l(null,wt)}});default:return l(d.convert(x,e))}else{var Y;k===null?Y=Pt():Y=kt(k);var rt=d._makeFile(e,a,B,Y);return l(null,rt)}})},t.prototype._writeFileStrict=function(e,a,c){var l=this,d=w.dirname(e);this.stat(d,!1,function(x,k){x?c(y.FileError(h.ENOENT,d)):l._client.writeFile(e,a,function(B,P){B?c(l.convert(B,e)):c(null,P)})})},t.prototype._statType=function(e){return e.isFile?M.FILE:M.DIRECTORY},t.prototype._makeFile=function(e,a,c,l){var d=this._statType(c),x=new U(d,c.size);return new ba(this,e,a,x,l)},t.prototype._remove=function(e,a,c){var l=this;this._client.stat(e,function(d,x){d?a(l.convert(d,e)):x.isFile&&!c?a(y.FileError(h.ENOTDIR,e)):!x.isFile&&c?a(y.FileError(h.EISDIR,e)):l._client.remove(e,function(k){a(k?l.convert(k,e):null)})})},t.prototype.unlink=function(e,a){this._remove(e,a,!0)},t.prototype.rmdir=function(e,a){this._remove(e,a,!1)},t.prototype.mkdir=function(e,a,c){var l=this,d=w.dirname(e);this._client.stat(d,function(x,k){x?c(l.convert(x,d)):l._client.mkdir(e,function(B){c(B?y.FileError(h.EEXIST,e):null)})})},t.prototype.readdir=function(e,a){var c=this;this._client.readdir(e,function(l,d){return l?a(c.convert(l)):a(null,d)})},t.prototype.convert=function(e,a){a===void 0&&(a=null);var c=ye[e.status];return c===void 0&&(c=h.EIO),a?y.FileError(c,a):new y(c)},t}(at);Yi.Name="Dropbox",Yi.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(o,t){o.isAuthenticated&&o.isAuthenticated()?t():t(new y(h.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Jt(o,t){t===void 0&&(t="");for(var n=o.errno,e=o.node,a=[];e&&(a.unshift(e.name),e!==e.parent);)e=e.parent;return new y(n,I[n],a.length>0?"/"+a.join("/"):t)}var Ia=function(o){function t(n,e,a,c){o.call(this),this._fs=n,this._FS=e,this._path=a,this._stream=c}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var a=null;try{this.closeSync()}catch(c){a=c}finally{e(a)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Jt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(a){e(a)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Jt(e,this._path)}},t.prototype.truncate=function(e,a){var c=null;try{this.truncateSync(e)}catch(l){c=l}finally{a(c)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(a){throw Jt(a,this._path)}},t.prototype.write=function(e,a,c,l,d){try{d(null,this.writeSync(e,a,c,l),e)}catch(x){d(x)}},t.prototype.writeSync=function(e,a,c,l){try{var d=ht(e),x=l===null?void 0:l;return this._FS.write(this._stream,d,a,c,x)}catch(k){throw Jt(k,this._path)}},t.prototype.read=function(e,a,c,l,d){try{d(null,this.readSync(e,a,c,l),e)}catch(x){d(x)}},t.prototype.readSync=function(e,a,c,l){try{var d=ht(e),x=l===null?void 0:l;return this._FS.read(this._stream,d,a,c,x)}catch(k){throw Jt(k,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,a,c){var l=null;try{this.chownSync(e,a)}catch(d){l=d}finally{c(l)}},t.prototype.chownSync=function(e,a){try{this._FS.fchown(this._stream.fd,e,a)}catch(c){throw Jt(c,this._path)}},t.prototype.chmod=function(e,a){var c=null;try{this.chmodSync(e)}catch(l){c=l}finally{a(c)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(a){throw Jt(a,this._path)}},t.prototype.utimes=function(e,a,c){var l=null;try{this.utimesSync(e,a)}catch(d){l=d}finally{c(l)}},t.prototype.utimesSync=function(e,a){this._fs.utimesSync(this._path,e,a)},t}(St),Gi=function(o){function t(n){o.call(this),this._FS=n}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){a(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,a){try{this._FS.rename(e,a)}catch(c){throw c.errno===h.ENOENT?Jt(c,this.existsSync(e)?a:e):Jt(c)}},t.prototype.statSync=function(e,a){try{var c=a?this._FS.lstat(e):this._FS.stat(e),l=this.modeToFileType(c.mode);return new U(l,c.size,c.mode,c.atime,c.mtime,c.ctime)}catch(d){throw Jt(d,e)}},t.prototype.openSync=function(e,a,c){try{var l=this._FS.open(e,a.getFlagString(),c);if(this._FS.isDir(l.node.mode))throw this._FS.close(l),y.EISDIR(e);return new Ia(this,this._FS,e,l)}catch(d){throw Jt(d,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(a){throw Jt(a,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(a){throw Jt(a,e)}},t.prototype.mkdirSync=function(e,a){try{this._FS.mkdir(e,a)}catch(c){throw Jt(c,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(a){return a!=="."&&a!==".."})}catch(a){throw Jt(a,e)}},t.prototype.truncateSync=function(e,a){try{this._FS.truncate(e,a)}catch(c){throw Jt(c,e)}},t.prototype.readFileSync=function(e,a,c){try{var l=this._FS.readFile(e,{flags:c.getFlagString()}),d=Et(l);return a?d.toString(a):d}catch(x){throw Jt(x,e)}},t.prototype.writeFileSync=function(e,a,c,l,d){try{c&&(a=f.from(a,c));var x=ht(a);this._FS.writeFile(e,x,{flags:l.getFlagString(),encoding:"binary"}),this._FS.chmod(e,d)}catch(k){throw Jt(k,e)}},t.prototype.chmodSync=function(e,a,c){try{a?this._FS.lchmod(e,c):this._FS.chmod(e,c)}catch(l){throw Jt(l,e)}},t.prototype.chownSync=function(e,a,c,l){try{a?this._FS.lchown(e,c,l):this._FS.chown(e,c,l)}catch(d){throw Jt(d,e)}},t.prototype.symlinkSync=function(e,a,c){try{this._FS.symlink(e,a)}catch(l){throw Jt(l)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(a){throw Jt(a,e)}},t.prototype.utimesSync=function(e,a,c){try{this._FS.utime(e,a.getTime(),c.getTime())}catch(l){throw Jt(l,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return M.DIRECTORY;if(this._FS.isFile(e))return M.FILE;if(this._FS.isLink(e))return M.SYMLINK;throw y.EPERM("Invalid mode: "+e)},t}(It);Gi.Name="EmscriptenFileSystem",Gi.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var pi=function(o){function t(n,e){o.call(this),this._folder=n,this._wrapped=e}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){a(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var a=this;this._wrapped.exists(this._folder,function(c){c?e():a._wrapped.isReadOnly()?e(y.ENOENT(a._folder)):a._wrapped.mkdir(a._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(at);pi.Name="FolderAdapter",pi.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function En(o,t){if(t!==null&&typeof t=="object"){var n=t,e=n.path;e&&(e="/"+w.relative(o,e),n.message=n.message.replace(n.path,e),n.path=e)}return t}function ka(o,t){return typeof t=="function"?function(n){arguments.length>0&&(arguments[0]=En(o,n)),t.apply(null,arguments)}:t}function _n(o,t,n){return o.slice(o.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=w.join(this._folder,arguments[0])),n&&(arguments[1]=w.join(this._folder,arguments[1])),arguments[arguments.length-1]=ka(this._folder,arguments[arguments.length-1])),this._wrapped[o].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=w.join(this._folder,arguments[0])),n&&(arguments[1]=w.join(this._folder,arguments[1])),this._wrapped[o].apply(this._wrapped,arguments)}catch(e){throw En(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(o){pi.prototype[o]=_n(o,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(o){pi.prototype[o]=_n(o,!0,!0)});var Ji;typeof window<"u"?Ji=window:typeof self<"u"?Ji=self:Ji=m;var ee=Ji;function Ra(o){return o.isDirectory}var vr=ee.webkitRequestFileSystem||ee.requestFileSystem||null;function Na(o,t,n,e){if(typeof navigator.webkitPersistentStorage<"u")switch(o){case ee.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,n,e);break;case ee.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,n,e);break;default:e(new TypeError("Invalid storage type: "+o));break}else ee.webkitStorageInfo.requestQuota(o,t,n,e)}function Ta(o){return Array.prototype.slice.call(o||[],0)}function Oe(o,t,n){switch(o.name){case"PathExistsError":return y.EEXIST(t);case"QuotaExceededError":return y.FileError(h.ENOSPC,t);case"NotFoundError":return y.ENOENT(t);case"SecurityError":return y.FileError(h.EACCES,t);case"InvalidModificationError":return y.FileError(h.EPERM,t);case"TypeMismatchError":return y.FileError(n?h.ENOTDIR:h.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return y.FileError(h.EINVAL,t)}}var Oa=function(o){function t(n,e,a,c,l,d){o.call(this,n,a,c,l,d),this._entry=e}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var a=this;if(!this.isDirty())return e();this._entry.createWriter(function(c){var l=a.getBuffer(),d=new Blob([et(l)]),x=d.size;c.onwriteend=function(k){c.onwriteend=null,c.onerror=null,c.truncate(x),a.resetDirty(),e()},c.onerror=function(k){e(Oe(k,a.getPath(),!1))},c.write(d)})},t.prototype.close=function(e){this.sync(e)},t}(Qt),Ki=function(o){function t(n,e,a){n===void 0&&(n=5),e===void 0&&(e=ee.PERSISTENT),a===void 0&&(a=!0),o.call(this),this.size=1024*1024*n,this.type=e,Ot(a,t.Name,{size:n,type:e})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){var c=new t(e.size,e.type,!1);c.allocate(function(l){return l?a(l):a(null,c)},!1)},t.isAvailable=function(){return!!vr},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,a){var c=this;e===void 0&&(e=function(){}),a===void 0&&(a=!0),a&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var l=function(x){c.fs=x,e()},d=function(x){e(Oe(x,"/",!0))};this.type===ee.PERSISTENT?Na(this.type,this.size,function(x){vr(c.type,x,l,d)},d):vr(this.type,this.size,l,d)},t.prototype.empty=function(e){this._readdir("/",function(a,c){if(a)console.error("Failed to empty FS"),e(a);else{var l=function(x){a?(console.error("Failed to empty FS"),e(a)):e()},d=function(x,k){var B=function(){k()},P=function(Y){k(Oe(Y,x.fullPath,!x.isDirectory))};Ra(x)?x.removeRecursively(B,P):x.remove(B,P)};Sn(c,d,l)}})},t.prototype.rename=function(e,a,c){var l=this,d=2,x=0,k=this.fs.root,B=e,P=function(rt){--d<=0&&c(Oe(rt,B,!1))},Y=function(rt){if(++x===2)return c(new y(h.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===a)return c();B=w.dirname(a),k.getDirectory(B,{},function(st){B=w.basename(a),rt.moveTo(st,B,function(pt){c()},function(pt){rt.isDirectory?(B=a,l.unlink(a,function(wt){wt?P(pt):l.rename(e,a,c)})):P(pt)})},P)};k.getFile(e,{},Y,P),k.getDirectory(e,{},Y,P)},t.prototype.stat=function(e,a,c){var l=this,d={create:!1},x=function(Y){var rt=function(st){var pt=new U(M.FILE,st.size);c(null,pt)};Y.file(rt,B)},k=function(Y){var rt=4096,st=new U(M.DIRECTORY,rt);c(null,st)},B=function(Y){c(Oe(Y,e,!1))},P=function(){l.fs.root.getDirectory(e,d,k,B)};this.fs.root.getFile(e,d,x,P)},t.prototype.open=function(e,a,c,l){var d=this,x=function(k){k.name==="InvalidModificationError"&&a.isExclusive()?l(y.EEXIST(e)):l(Oe(k,e,!1))};this.fs.root.getFile(e,{create:a.pathNotExistsAction()===C.CREATE_FILE,exclusive:a.isExclusive()},function(k){k.file(function(B){var P=new FileReader;P.onloadend=function(Y){var rt=d._makeFile(e,k,a,B,P.result);l(null,rt)},P.onerror=function(Y){x(P.error)},P.readAsArrayBuffer(B)},x)},x)},t.prototype.unlink=function(e,a){this._remove(e,a,!0)},t.prototype.rmdir=function(e,a){var c=this;this.readdir(e,function(l,d){l?a(l):d.length>0?a(y.ENOTEMPTY(e)):c._remove(e,a,!1)})},t.prototype.mkdir=function(e,a,c){var l={create:!0,exclusive:!0},d=function(k){c()},x=function(k){c(Oe(k,e,!0))};this.fs.root.getDirectory(e,l,d,x)},t.prototype.readdir=function(e,a){this._readdir(e,function(c,l){if(l){for(var d=[],x=0,k=l;x<k.length;x+=1){var B=k[x];d.push(B.name)}a(null,d)}else return a(c)})},t.prototype._makeFile=function(e,a,c,l,d){d===void 0&&(d=new ArrayBuffer(0));var x=new U(M.FILE,l.size),k=kt(d);return new Oa(this,a,e,c,x,k)},t.prototype._readdir=function(e,a){var c=function(l){a(Oe(l,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(l){var d=l.createReader(),x=[],k=function(){d.readEntries(function(B){B.length?(x=x.concat(Ta(B)),k()):a(null,x)},c)};k()},c)},t.prototype._remove=function(e,a,c){var l=function(k){var B=function(){a()},P=function(Y){a(Oe(Y,e,!c))};k.remove(B,P)},d=function(k){a(Oe(k,e,!c))},x={create:!1};c?this.fs.root.getFile(e,x,l,d):this.fs.root.getDirectory(e,x,l,d)},t}(at);Ki.Name="HTML5FS",Ki.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var ge=function(t,n,e,a,c,l){this.id=t,this.size=n,this.mode=e,this.atime=a,this.mtime=c,this.ctime=l};ge.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new ge(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},ge.prototype.toStats=function(){return new U((this.mode&61440)===M.DIRECTORY?M.DIRECTORY:M.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},ge.prototype.getSize=function(){return 30+this.id.length},ge.prototype.toBuffer=function(t){return t===void 0&&(t=f.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},ge.prototype.update=function(t){var n=!1;this.size!==t.size&&(this.size=t.size,n=!0),this.mode!==t.mode&&(this.mode=t.mode,n=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,n=!0);var a=t.mtime.getTime();this.mtime!==a&&(this.mtime=a,n=!0);var c=t.ctime.getTime();return this.ctime!==c&&(this.ctime=c,n=!0),n},ge.prototype.isFile=function(){return(this.mode&61440)===M.FILE},ge.prototype.isDirectory=function(){return(this.mode&61440)===M.DIRECTORY};var Ze="/",wr=null;function xn(){return wr||(wr=f.from("{}"))}function Qi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var t=Math.random()*16|0,n=o==="x"?t:t&3|8;return n.toString(16)})}function Se(o,t){return o?(t(o),!1):!0}function re(o,t,n){return o?(t.abort(function(){n(o)}),!1):!0}var Pe=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};Pe.prototype.get=function(t){var n=this.store.get(t);return this.stashOldValue(t,n),n},Pe.prototype.put=function(t,n,e){return this.markModified(t),this.store.put(t,n,e)},Pe.prototype.del=function(t){this.markModified(t),this.store.del(t)},Pe.prototype.commit=function(){},Pe.prototype.abort=function(){for(var t=this,n=0,e=t.modifiedKeys;n<e.length;n+=1){var a=e[n],c=t.originalData[a];c?t.store.put(a,c,!0):t.store.del(a)}},Pe.prototype.stashOldValue=function(t,n){this.originalData.hasOwnProperty(t)||(this.originalData[t]=n)},Pe.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var Fn=function(o){function t(n,e,a,c,l){o.call(this,n,e,a,c,l)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(Qt),bn=function(o){function t(n){o.call(this),this.store=n.store,this.makeRootDirectory()}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,a){var c=this.store.beginTransaction("readwrite"),l=w.dirname(e),d=w.basename(e),x=w.dirname(a),k=w.basename(a),B=this.findINode(c,l),P=this.getDirListing(c,l,B);if(!P[d])throw y.ENOENT(e);var Y=P[d];if(delete P[d],(x+"/").indexOf(e+"/")===0)throw new y(h.EBUSY,l);var rt,st;if(x===l?(rt=B,st=P):(rt=this.findINode(c,x),st=this.getDirListing(c,x,rt)),st[k]){var pt=this.getINode(c,a,st[k]);if(pt.isFile())try{c.del(pt.id),c.del(st[k])}catch(wt){throw c.abort(),wt}else throw y.EPERM(a)}st[k]=Y;try{c.put(B.id,f.from(JSON.stringify(P)),!0),c.put(rt.id,f.from(JSON.stringify(st)),!0)}catch(wt){throw c.abort(),wt}c.commit()},t.prototype.statSync=function(e,a){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,a,c){var l=this.store.beginTransaction("readwrite"),d=Pt(),x=this.commitNewFile(l,e,M.FILE,c,d);return new Fn(this,e,a,x.toStats(),d)},t.prototype.openFileSync=function(e,a){var c=this.store.beginTransaction("readonly"),l=this.findINode(c,e),d=c.get(l.id);if(d===void 0)throw y.ENOENT(e);return new Fn(this,e,a,l.toStats(),d)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw y.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,a){var c=this.store.beginTransaction("readwrite"),l=f.from("{}");this.commitNewFile(c,e,M.DIRECTORY,a,l)},t.prototype.readdirSync=function(e){var a=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(a,e,this.findINode(a,e)))},t.prototype._syncSync=function(e,a,c){var l=this.store.beginTransaction("readwrite"),d=this._findINode(l,w.dirname(e),w.basename(e)),x=this.getINode(l,e,d),k=x.update(c);try{l.put(x.id,a,!0),k&&l.put(d,x.toBuffer(),!0)}catch(B){throw l.abort(),B}l.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(Ze)===void 0){var a=new Date().getTime(),c=new ge(Qi(),4096,511|M.DIRECTORY,a,a,a);e.put(c.id,xn(),!1),e.put(Ze,c.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,a,c){var l=this,d=function(x){var k=l.getDirListing(e,a,x);if(k[c])return k[c];throw y.ENOENT(w.resolve(a,c))};return a==="/"?c===""?Ze:d(this.getINode(e,a,Ze)):d(this.getINode(e,a+w.sep+c,this._findINode(e,w.dirname(a),w.basename(a))))},t.prototype.findINode=function(e,a){return this.getINode(e,a,this._findINode(e,w.dirname(a),w.basename(a)))},t.prototype.getINode=function(e,a,c){var l=e.get(c);if(l===void 0)throw y.ENOENT(a);return ge.fromBuffer(l)},t.prototype.getDirListing=function(e,a,c){if(!c.isDirectory())throw y.ENOTDIR(a);var l=e.get(c.id);if(l===void 0)throw y.ENOENT(a);return JSON.parse(l.toString())},t.prototype.addNewNode=function(e,a){for(var c=0,l;c<5;)try{return l=Qi(),e.put(l,a,!1),l}catch{}throw new y(h.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,a,c,l,d){var x=w.dirname(a),k=w.basename(a),B=this.findINode(e,x),P=this.getDirListing(e,x,B),Y=new Date().getTime();if(a==="/"||P[k])throw y.EEXIST(a);var rt;try{var st=this.addNewNode(e,d);rt=new ge(st,d.length,l|c,Y,Y,Y);var pt=this.addNewNode(e,rt.toBuffer());P[k]=pt,e.put(B.id,f.from(JSON.stringify(P)),!0)}catch(wt){throw e.abort(),wt}return e.commit(),rt},t.prototype.removeEntry=function(e,a){var c=this.store.beginTransaction("readwrite"),l=w.dirname(e),d=this.findINode(c,l),x=this.getDirListing(c,l,d),k=w.basename(e);if(!x[k])throw y.ENOENT(e);var B=x[k];delete x[k];var P=this.getINode(c,e,B);if(!a&&P.isDirectory())throw y.EISDIR(e);if(a&&!P.isDirectory())throw y.ENOTDIR(e);try{c.del(P.id),c.del(B),c.put(d.id,f.from(JSON.stringify(x)),!0)}catch(Y){throw c.abort(),Y}c.commit()},t}(It),In=function(o){function t(n,e,a,c,l){o.call(this,n,e,a,c,l)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var a=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(c){c||a.resetDirty(),e(c)}):e()},t.prototype.close=function(e){this.sync(e)},t}(Qt),Aa=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,a){this.store=e,this.makeRootDirectory(a)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var a=this;this.store.clear(function(c){Se(c,e)&&a.makeRootDirectory(e)})},t.prototype.rename=function(e,a,c){var l=this,d=this.store.beginTransaction("readwrite"),x=w.dirname(e),k=w.basename(e),B=w.dirname(a),P=w.basename(a),Y={},rt={},st=!1;if((B+"/").indexOf(e+"/")===0)return c(new y(h.EBUSY,x));var pt=function(){if(!(st||!rt.hasOwnProperty(x)||!rt.hasOwnProperty(B))){var Rt=rt[x],Yt=Y[x],fe=rt[B],De=Y[B];if(!Rt[k])c(y.ENOENT(e));else{var Ce=Rt[k];delete Rt[k];var Si=function(){fe[P]=Ce,d.put(Yt.id,f.from(JSON.stringify(Rt)),!0,function(We){re(We,d,c)&&(x===B?d.commit(c):d.put(De.id,f.from(JSON.stringify(fe)),!0,function(He){re(He,d,c)&&d.commit(c)}))})};fe[P]?l.getINode(d,a,fe[P],function(We,He){re(We,d,c)&&(He.isFile()?d.del(He.id,function(go){re(go,d,c)&&d.del(fe[P],function(su){re(su,d,c)&&Si()})}):d.abort(function(go){c(y.EPERM(a))}))}):Si()}}},wt=function(Rt){l.findINodeAndDirListing(d,Rt,function(Yt,fe,De){Yt?st||(st=!0,d.abort(function(){c(Yt)})):(Y[Rt]=fe,rt[Rt]=De,pt())})};wt(x),x!==B&&wt(B)},t.prototype.stat=function(e,a,c){var l=this.store.beginTransaction("readonly");this.findINode(l,e,function(d,x){Se(d,c)&&c(null,x.toStats())})},t.prototype.createFile=function(e,a,c,l){var d=this,x=this.store.beginTransaction("readwrite"),k=Pt();this.commitNewFile(x,e,M.FILE,c,k,function(B,P){Se(B,l)&&l(null,new In(d,e,a,P.toStats(),k))})},t.prototype.openFile=function(e,a,c){var l=this,d=this.store.beginTransaction("readonly");this.findINode(d,e,function(x,k){Se(x,c)&&d.get(k.id,function(B,P){Se(B,c)&&(P===void 0?c(y.ENOENT(e)):c(null,new In(l,e,a,k.toStats(),P)))})})},t.prototype.unlink=function(e,a){this.removeEntry(e,!1,a)},t.prototype.rmdir=function(e,a){var c=this;this.readdir(e,function(l,d){l?a(l):d.length>0?a(y.ENOTEMPTY(e)):c.removeEntry(e,!0,a)})},t.prototype.mkdir=function(e,a,c){var l=this.store.beginTransaction("readwrite"),d=f.from("{}");this.commitNewFile(l,e,M.DIRECTORY,a,d,c)},t.prototype.readdir=function(e,a){var c=this,l=this.store.beginTransaction("readonly");this.findINode(l,e,function(d,x){Se(d,a)&&c.getDirListing(l,e,x,function(k,B){Se(k,a)&&a(null,Object.keys(B))})})},t.prototype._sync=function(e,a,c,l){var d=this,x=this.store.beginTransaction("readwrite");this._findINode(x,w.dirname(e),w.basename(e),function(k,B){re(k,x,l)&&d.getINode(x,e,B,function(P,Y){if(re(P,x,l)){var rt=Y.update(c);x.put(Y.id,a,!0,function(st){re(st,x,l)&&(rt?x.put(B,Y.toBuffer(),!0,function(pt){re(pt,x,l)&&x.commit(l)}):x.commit(l))})}})})},t.prototype.makeRootDirectory=function(e){var a=this.store.beginTransaction("readwrite");a.get(Ze,function(c,l){if(c||l===void 0){var d=new Date().getTime(),x=new ge(Qi(),4096,511|M.DIRECTORY,d,d,d);a.put(x.id,xn(),!1,function(k){re(k,a,e)&&a.put(Ze,x.toBuffer(),!1,function(B){B?a.abort(function(){e(B)}):a.commit(e)})})}else a.commit(e)})},t.prototype._findINode=function(e,a,c,l){var d=this,x=function(k,B,P){k?l(k):P[c]?l(null,P[c]):l(y.ENOENT(w.resolve(a,c)))};a==="/"?c===""?l(null,Ze):this.getINode(e,a,Ze,function(k,B){Se(k,l)&&d.getDirListing(e,a,B,function(P,Y){x(P,B,Y)})}):this.findINodeAndDirListing(e,a,x)},t.prototype.findINode=function(e,a,c){var l=this;this._findINode(e,w.dirname(a),w.basename(a),function(d,x){Se(d,c)&&l.getINode(e,a,x,c)})},t.prototype.getINode=function(e,a,c,l){e.get(c,function(d,x){Se(d,l)&&(x===void 0?l(y.ENOENT(a)):l(null,ge.fromBuffer(x)))})},t.prototype.getDirListing=function(e,a,c,l){c.isDirectory()?e.get(c.id,function(d,x){if(Se(d,l))try{l(null,JSON.parse(x.toString()))}catch{l(y.ENOENT(a))}}):l(y.ENOTDIR(a))},t.prototype.findINodeAndDirListing=function(e,a,c){var l=this;this.findINode(e,a,function(d,x){Se(d,c)&&l.getDirListing(e,a,x,function(k,B){Se(k,c)&&c(null,x,B)})})},t.prototype.addNewNode=function(e,a,c){var l=0,d,x=function(){++l===5?c(new y(h.EIO,"Unable to commit data to key-value store.")):(d=Qi(),e.put(d,a,!1,function(k,B){k||!B?x():c(null,d)}))};x()},t.prototype.commitNewFile=function(e,a,c,l,d,x){var k=this,B=w.dirname(a),P=w.basename(a),Y=new Date().getTime();if(a==="/")return x(y.EEXIST(a));this.findINodeAndDirListing(e,B,function(rt,st,pt){re(rt,e,x)&&(pt[P]?e.abort(function(){x(y.EEXIST(a))}):k.addNewNode(e,d,function(wt,Rt){if(re(wt,e,x)){var Yt=new ge(Rt,d.length,l|c,Y,Y,Y);k.addNewNode(e,Yt.toBuffer(),function(fe,De){re(fe,e,x)&&(pt[P]=De,e.put(st.id,f.from(JSON.stringify(pt)),!0,function(Ce){re(Ce,e,x)&&e.commit(function(Si){re(Si,e,x)&&x(null,Yt)})}))})}}))})},t.prototype.removeEntry=function(e,a,c){var l=this,d=this.store.beginTransaction("readwrite"),x=w.dirname(e),k=w.basename(e);this.findINodeAndDirListing(d,x,function(B,P,Y){if(re(B,d,c))if(!Y[k])d.abort(function(){c(y.ENOENT(e))});else{var rt=Y[k];delete Y[k],l.getINode(d,e,rt,function(st,pt){re(st,d,c)&&(!a&&pt.isDirectory()?d.abort(function(){c(y.EISDIR(e))}):a&&!pt.isDirectory()?d.abort(function(){c(y.ENOTDIR(e))}):d.del(pt.id,function(wt){re(wt,d,c)&&d.del(rt,function(Rt){re(Rt,d,c)&&d.put(P.id,f.from(JSON.stringify(Y)),!0,function(Yt){re(Yt,d,c)&&d.commit(c)})})}))})}})},t}(at),ti=function(){this.store={}};ti.prototype.name=function(){return di.Name},ti.prototype.clear=function(){this.store={}},ti.prototype.beginTransaction=function(t){return new Pe(this)},ti.prototype.get=function(t){return this.store[t]},ti.prototype.put=function(t,n,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=n,!0)},ti.prototype.del=function(t){delete this.store[t]};var di=function(o){function t(){o.call(this,{store:new ti})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){a(null,new t)},t}(bn);di.Name="InMemory",di.Options={};var Sr=ee.indexedDB||ee.mozIndexedDB||ee.webkitIndexedDB||ee.msIndexedDB;function Ri(o,t){switch(t===void 0&&(t=o.toString()),o.name){case"NotFoundError":return new y(h.ENOENT,t);case"QuotaExceededError":return new y(h.ENOSPC,t);default:return new y(h.EIO,t)}}function Ni(o,t,n){return t===void 0&&(t=h.EIO),n===void 0&&(n=null),function(e){e.preventDefault(),o(new y(t,n!==null?n:void 0))}}var Er=function(t,n){this.tx=t,this.store=n};Er.prototype.get=function(t,n){try{var e=this.store.get(t);e.onerror=Ni(n),e.onsuccess=function(a){var c=a.target.result;c===void 0?n(null,c):n(null,kt(c))}}catch(a){n(Ri(a))}};var La=function(o){function t(n,e){o.call(this,n,e)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.put=function(e,a,c,l){try{var d=et(a),x;c?x=this.store.put(d,e):x=this.store.add(d,e),x.onerror=Ni(l),x.onsuccess=function(k){l(null,!0)}}catch(k){l(Ri(k))}},t.prototype.del=function(e,a){try{var c=this.store.delete(e);c.onerror=Ni(a),c.onsuccess=function(l){a()}}catch(l){a(Ri(l))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var a=null;try{this.tx.abort()}catch(c){a=Ri(c)}finally{e(a)}},t}(Er),$i=function(t,n){var e=this;n===void 0&&(n="browserfs"),this.storeName=n;var a=Sr.open(this.storeName,1);a.onupgradeneeded=function(c){var l=c.target.result;l.objectStoreNames.contains(e.storeName)&&l.deleteObjectStore(e.storeName),l.createObjectStore(e.storeName)},a.onsuccess=function(c){e.db=c.target.result,t(null,e)},a.onerror=Ni(t,h.EACCES)};$i.prototype.name=function(){return Ti.Name+" - "+this.storeName},$i.prototype.clear=function(t){try{var n=this.db.transaction(this.storeName,"readwrite"),e=n.objectStore(this.storeName),a=e.clear();a.onsuccess=function(c){setTimeout(t,0)},a.onerror=Ni(t)}catch(c){t(Ri(c))}},$i.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var n=this.db.transaction(this.storeName,t),e=n.objectStore(this.storeName);if(t==="readwrite")return new La(n,e);if(t==="readonly")return new Er(n,e);throw new y(h.EINVAL,"Invalid transaction type.")};var Ti=function(o){function t(n,e,a){var c=this;a===void 0&&(a=!0),o.call(this),this.store=new $i(function(l){l?n(l):c.init(c.store,function(d){n(d,c)})},e),Ot(a,t.Name,{storeName:e})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){new t(a,e.storeName,!1)},t.isAvailable=function(){try{return typeof Sr<"u"&&Sr.open("__browserfs_test__")!==null}catch{return!1}},t}(Aa);Ti.Name="IndexedDB",Ti.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var _r=!1,Oi;try{ee.localStorage.setItem("__test__",String.fromCharCode(55296)),_r=ee.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{_r=!1}Oi=_r?"binary_string":"binary_string_ie",f.isEncoding(Oi)||(Oi="base64");var ei=function(){};ei.prototype.name=function(){return Ai.Name},ei.prototype.clear=function(){ee.localStorage.clear()},ei.prototype.beginTransaction=function(t){return new Pe(this)},ei.prototype.get=function(t){try{var n=ee.localStorage.getItem(t);if(n!==null)return f.from(n,Oi)}catch{}},ei.prototype.put=function(t,n,e){try{return!e&&ee.localStorage.getItem(t)!==null?!1:(ee.localStorage.setItem(t,n.toString(Oi)),!0)}catch{throw new y(h.ENOSPC,"LocalStorage is full.")}},ei.prototype.del=function(t){try{ee.localStorage.removeItem(t)}catch(n){throw new y(h.EIO,"Unable to delete key "+t+": "+n)}};var Ai=function(o){function t(){o.call(this,{store:new ei})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){a(null,new t)},t.isAvailable=function(){return typeof ee.localStorage<"u"},t}(bn);Ai.Name="LocalStorage",Ai.Options={};var yi=function(o){function t(){o.call(this),this.mountList=[],this.mntMap={},this.rootFs=new di}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){var c=new t;Object.keys(e).forEach(function(l){c.mount(l,e[l])}),a(null,c)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,a){if(e[0]!=="/"&&(e="/"+e),e=w.resolve(e),this.mntMap[e])throw new y(h.EINVAL,"Mount point "+e+" is already taken.");V(e,511,this.rootFs),this.mntMap[e]=a,this.mountList.push(e),this.mountList=this.mountList.sort(function(c,l){return l.length-c.length})},t.prototype.umount=function(e){var a=this;if(e[0]!=="/"&&(e="/"+e),e=w.resolve(e),!this.mntMap[e])throw new y(h.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&a.rootFs.readdirSync(e).length===0;)a.rootFs.rmdirSync(e),e=w.dirname(e)},t.prototype._getFs=function(e){for(var a=this,c=this.mountList,l=c.length,d=0;d<l;d++){var x=c[d];if(x.length<=e.length&&e.indexOf(x)===0)return e=e.substr(x.length>1?x.length:0),e===""&&(e="/"),{fs:a.mntMap[x],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,a){a(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,a,c){var l=e.message.indexOf(a);return l!==-1&&(e.message=e.message.substr(0,l)+c+e.message.substr(l+a.length),e.path=c),e},t.prototype.rename=function(e,a,c){var l=this,d=this._getFs(e),x=this._getFs(a);return d.fs===x.fs?d.fs.rename(d.path,x.path,function(k){k&&l.standardizeError(l.standardizeError(k,d.path,e),x.path,a),c(k)}):dt.readFile(e,function(k,B){if(k)return c(k);dt.writeFile(a,B,function(P){if(P)return c(P);dt.unlink(e,c)})})},t.prototype.renameSync=function(e,a){var c=this._getFs(e),l=this._getFs(a);if(c.fs===l.fs)try{return c.fs.renameSync(c.path,l.path)}catch(x){throw this.standardizeError(this.standardizeError(x,c.path,e),l.path,a),x}var d=dt.readFileSync(e);return dt.writeFileSync(a,d),dt.unlinkSync(e)},t.prototype.readdirSync=function(e){var a=this._getFs(e),c=null;if(a.fs!==this.rootFs)try{c=this.rootFs.readdirSync(e)}catch{}try{var l=a.fs.readdirSync(a.path);return c===null?l:l.concat(c.filter(function(d){return l.indexOf(d)===-1}))}catch(d){if(c===null)throw this.standardizeError(d,a.path,e);return c}},t.prototype.readdir=function(e,a){var c=this,l=this._getFs(e);l.fs.readdir(l.path,function(d,x){if(l.fs!==c.rootFs)try{var k=c.rootFs.readdirSync(e);x?x=x.concat(k.filter(function(B){return x.indexOf(B)===-1})):x=k}catch{if(d)return a(c.standardizeError(d,l.path,e))}else if(d)return a(c.standardizeError(d,l.path,e));a(null,x)})},t.prototype.rmdirSync=function(e){var a=this._getFs(e);if(this._containsMountPt(e))throw y.ENOTEMPTY(e);try{a.fs.rmdirSync(a.path)}catch(c){throw this.standardizeError(c,a.path,e)}},t.prototype.rmdir=function(e,a){var c=this,l=this._getFs(e);this._containsMountPt(e)?a(y.ENOTEMPTY(e)):l.fs.rmdir(l.path,function(d){a(d?c.standardizeError(d,l.path,e):null)})},t.prototype._containsMountPt=function(e){for(var a=this.mountList,c=a.length,l=0;l<c;l++){var d=a[l];if(d.length>=e.length&&d.slice(0,e.length)===e)return!0}return!1},t}(at);yi.Name="MountableFileSystem",yi.Options={};function kn(o,t,n){return t?function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];var c=e[0],l=this._getFs(c);e[0]=l.path;try{return l.fs[o].apply(l.fs,e)}catch(d){throw this.standardizeError(d,l.path,c),d}}:function(){for(var e=this,a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=a[0],d=this._getFs(l);if(a[0]=d.path,typeof a[a.length-1]=="function"){var x=a[a.length-1];a[a.length-1]=function(){for(var k=[],B=arguments.length;B--;)k[B]=arguments[B];k.length>0&&k[0]instanceof y&&e.standardizeError(k[0],d.path,l),x.apply(null,k)}}return d.fs[o].apply(d.fs,a)}}for(var Rn=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Li=0;Li<Rn.length;Li++)for(var Da=Rn[Li],xr=0,Nn=Da;xr<Nn.length;xr+=1){var tr=Nn[xr];yi.prototype[tr]=kn(tr,!1,Li+1),yi.prototype[tr+"Sync"]=kn(tr+"Sync",!0,Li+1)}var Di;if(typeof setImmediate<"u")Di=setImmediate;else{var be=ee,gi=[],Tn="zero-timeout-message",Ca=function(){if(typeof be.importScripts<"u"||!be.postMessage)return!1;var o=!0,t=be.onmessage;return be.onmessage=function(){o=!1},be.postMessage("","*"),be.onmessage=t,o};if(Ca()){Di=function(o){gi.push(o),be.postMessage(Tn,"*")};var On=function(o){if(o.source===self&&o.data===Tn&&(o.stopPropagation?o.stopPropagation():o.cancelBubble=!0,gi.length>0)){var t=gi.shift();return t()}};be.addEventListener?be.addEventListener("message",On,!0):be.attachEvent("onmessage",On)}else if(be.MessageChannel){var An=new be.MessageChannel;An.port1.onmessage=function(o){if(gi.length>0)return gi.shift()()},Di=function(o){gi.push(o),An.port2.postMessage("")}}else Di=function(o){return setTimeout(o,0)}}var Fr=Di,Ci=function(){this._locked=!1,this._waiters=[]};Ci.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},Ci.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){Fr(t);return}this._locked=!1},Ci.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},Ci.prototype.isLocked=function(){return this._locked};var _t=function(t){this._fs=t,this._mu=new Ci};_t.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},_t.prototype.getFSUnlocked=function(){return this._fs},_t.prototype.initialize=function(t){this._fs.initialize(t)},_t.prototype.diskSpace=function(t,n){this._fs.diskSpace(t,n)},_t.prototype.isReadOnly=function(){return this._fs.isReadOnly()},_t.prototype.supportsLinks=function(){return this._fs.supportsLinks()},_t.prototype.supportsProps=function(){return this._fs.supportsProps()},_t.prototype.supportsSynch=function(){return this._fs.supportsSynch()},_t.prototype.rename=function(t,n,e){var a=this;this._mu.lock(function(){a._fs.rename(t,n,function(c){a._mu.unlock(),e(c)})})},_t.prototype.renameSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,n)},_t.prototype.stat=function(t,n,e){var a=this;this._mu.lock(function(){a._fs.stat(t,n,function(c,l){a._mu.unlock(),e(c,l)})})},_t.prototype.statSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,n)},_t.prototype.open=function(t,n,e,a){var c=this;this._mu.lock(function(){c._fs.open(t,n,e,function(l,d){c._mu.unlock(),a(l,d)})})},_t.prototype.openSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,n,e)},_t.prototype.unlink=function(t,n){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(a){e._mu.unlock(),n(a)})})},_t.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},_t.prototype.rmdir=function(t,n){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(a){e._mu.unlock(),n(a)})})},_t.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},_t.prototype.mkdir=function(t,n,e){var a=this;this._mu.lock(function(){a._fs.mkdir(t,n,function(c){a._mu.unlock(),e(c)})})},_t.prototype.mkdirSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,n)},_t.prototype.readdir=function(t,n){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(a,c){e._mu.unlock(),n(a,c)})})},_t.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},_t.prototype.exists=function(t,n){var e=this;this._mu.lock(function(){e._fs.exists(t,function(a){e._mu.unlock(),n(a)})})},_t.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},_t.prototype.realpath=function(t,n,e){var a=this;this._mu.lock(function(){a._fs.realpath(t,n,function(c,l){a._mu.unlock(),e(c,l)})})},_t.prototype.realpathSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,n)},_t.prototype.truncate=function(t,n,e){var a=this;this._mu.lock(function(){a._fs.truncate(t,n,function(c){a._mu.unlock(),e(c)})})},_t.prototype.truncateSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,n)},_t.prototype.readFile=function(t,n,e,a){var c=this;this._mu.lock(function(){c._fs.readFile(t,n,e,function(l,d){c._mu.unlock(),a(l,d)})})},_t.prototype.readFileSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,n,e)},_t.prototype.writeFile=function(t,n,e,a,c,l){var d=this;this._mu.lock(function(){d._fs.writeFile(t,n,e,a,c,function(x){d._mu.unlock(),l(x)})})},_t.prototype.writeFileSync=function(t,n,e,a,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,n,e,a,c)},_t.prototype.appendFile=function(t,n,e,a,c,l){var d=this;this._mu.lock(function(){d._fs.appendFile(t,n,e,a,c,function(x){d._mu.unlock(),l(x)})})},_t.prototype.appendFileSync=function(t,n,e,a,c){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,n,e,a,c)},_t.prototype.chmod=function(t,n,e,a){var c=this;this._mu.lock(function(){c._fs.chmod(t,n,e,function(l){c._mu.unlock(),a(l)})})},_t.prototype.chmodSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,n,e)},_t.prototype.chown=function(t,n,e,a,c){var l=this;this._mu.lock(function(){l._fs.chown(t,n,e,a,function(d){l._mu.unlock(),c(d)})})},_t.prototype.chownSync=function(t,n,e,a){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,n,e,a)},_t.prototype.utimes=function(t,n,e,a){var c=this;this._mu.lock(function(){c._fs.utimes(t,n,e,function(l){c._mu.unlock(),a(l)})})},_t.prototype.utimesSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,n,e)},_t.prototype.link=function(t,n,e){var a=this;this._mu.lock(function(){a._fs.link(t,n,function(c){a._mu.unlock(),e(c)})})},_t.prototype.linkSync=function(t,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,n)},_t.prototype.symlink=function(t,n,e,a){var c=this;this._mu.lock(function(){c._fs.symlink(t,n,e,function(l){c._mu.unlock(),a(l)})})},_t.prototype.symlinkSync=function(t,n,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,n,e)},_t.prototype.readlink=function(t,n){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(a,c){e._mu.unlock(),n(a,c)})})},_t.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var ze="/.deletedFiles.log";function Ln(o){return 146|o}function Ee(o){return T.getFileFlag(o)}var Dn=function(o){function t(n,e,a,c,l){o.call(this,n,e,a,c,l)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var a=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(c){a.resetDirty(),e(c)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(Qt),Cn=function(o){function t(n,e){if(o.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=n,this._readable=e,this._writable.isReadOnly())throw new y(h.EINVAL,"Writable file system must be writable.")}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,a){var c=this;this.createParentDirectoriesAsync(e.getPath(),function(l){if(l)return a(l);c._writable.writeFile(e.getPath(),e.getBuffer(),null,Ee("w"),e.getStats().mode,a)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,Ee("w"),e.getStats().mode)},t.prototype.getName=function(){return Bi.Name},t.prototype.initialize=function(e){var a=this,c=this._initializeCallbacks,l=function(d){a._isInitialized=!d,a._initializeCallbacks=[],c.forEach(function(x){return x(d)})};if(this._isInitialized)return e();c.push(e),c.length===1&&this._writable.readFile(ze,"utf8",Ee("r"),function(d,x){if(d){if(d.errno!==h.ENOENT)return l(d)}else a._deleteLog=x;a._reparseDeletionLog(),l()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,a,c){var l=this;if(!(!this.checkInitAsync(c)||this.checkPathAsync(e,c)||this.checkPathAsync(a,c))){if(e===ze||a===ze)return c(y.EPERM("Cannot rename deletion log."));if(e===a)return c();this.stat(e,!1,function(d,x){return d?c(d):l.stat(a,!1,function(k,B){var P=l;function Y(st){var pt=st.shift();if(!pt)return c();var wt=w.resolve(e,pt),Rt=w.resolve(a,pt);P.rename(wt,Rt,function(Yt){if(Yt)return c(Yt);Y(st)})}var rt=511;if(x.isDirectory()){if(k)return k.errno!==h.ENOENT?c(k):l._writable.exists(e,function(st){if(st)return l._writable.rename(e,a,c);l._writable.mkdir(a,rt,function(pt){if(pt)return c(pt);l._readable.readdir(e,function(wt,Rt){if(wt)return c();Y(Rt)})})});if(rt=B.mode,!B.isDirectory())return c(y.ENOTDIR(a));l.readdir(a,function(st,pt){if(pt&&pt.length)return c(y.ENOTEMPTY(a));l._readable.readdir(e,function(wt,Rt){if(wt)return c();Y(Rt)})})}if(B&&B.isDirectory())return c(y.EISDIR(a));l.readFile(e,null,Ee("r"),function(st,pt){return st?c(st):l.writeFile(a,pt,null,Ee("w"),x.mode,function(wt){return wt?c(wt):l.unlink(e,c)})})})})}},t.prototype.renameSync=function(e,a){var c=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(a),e===ze||a===ze)throw y.EPERM("Cannot rename deletion log.");var l=this.statSync(e,!1);if(l.isDirectory()){if(e===a)return;var d=511;if(this.existsSync(a)){var x=this.statSync(a,!1);if(d=x.mode,x.isDirectory()){if(this.readdirSync(a).length>0)throw y.ENOTEMPTY(a)}else throw y.ENOTDIR(a)}this._writable.existsSync(e)?this._writable.renameSync(e,a):this._writable.existsSync(a)||this._writable.mkdirSync(a,d),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(k){c.renameSync(w.resolve(e,k),w.resolve(a,k))})}else{if(this.existsSync(a)&&this.statSync(a,!1).isDirectory())throw y.EISDIR(a);this.writeFileSync(a,this.readFileSync(e,null,Ee("r")),null,Ee("w"),l.mode)}e!==a&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,a,c){var l=this;!this.checkInitAsync(c)||this._writable.stat(e,a,function(d,x){d&&d.errno===h.ENOENT?(l._deletedFiles[e]&&c(y.ENOENT(e)),l._readable.stat(e,a,function(k,B){B&&(B=B.clone(),B.mode=Ln(B.mode)),c(k,B)})):c(d,x)})},t.prototype.statSync=function(e,a){this.checkInitialized();try{return this._writable.statSync(e,a)}catch{if(this._deletedFiles[e])throw y.ENOENT(e);var c=this._readable.statSync(e,a).clone();return c.mode=Ln(c.mode),c}},t.prototype.open=function(e,a,c,l){var d=this;!this.checkInitAsync(l)||this.checkPathAsync(e,l)||this.stat(e,!1,function(x,k){if(k)switch(a.pathExistsAction()){case C.TRUNCATE_FILE:return d.createParentDirectoriesAsync(e,function(B){if(B)return l(B);d._writable.open(e,a,c,l)});case C.NOP:return d._writable.exists(e,function(B){B?d._writable.open(e,a,c,l):(k=k.clone(),k.mode=c,d._readable.readFile(e,null,Ee("r"),function(P,Y){if(P)return l(P);k.size===-1&&(k.size=Y.length);var rt=new Dn(d,e,a,k,Y);l(null,rt)}))});default:return l(y.EEXIST(e))}else switch(a.pathNotExistsAction()){case C.CREATE_FILE:return d.createParentDirectoriesAsync(e,function(B){return B?l(B):d._writable.open(e,a,c,l)});default:return l(y.ENOENT(e))}})},t.prototype.openSync=function(e,a,c){if(this.checkInitialized(),this.checkPath(e),e===ze)throw y.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(a.pathExistsAction()){case C.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,a,c);case C.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,a,c);var l=this._readable.readFileSync(e,null,Ee("r")),d=this._readable.statSync(e,!1).clone();return d.mode=c,new Dn(this,e,a,d,l);default:throw y.EEXIST(e)}else switch(a.pathNotExistsAction()){case C.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,a,c);default:throw y.ENOENT(e)}},t.prototype.unlink=function(e,a){var c=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.exists(e,function(l){if(!l)return a(y.ENOENT(e));c._writable.exists(e,function(d){if(d)return c._writable.unlink(e,function(x){if(x)return a(x);c.exists(e,function(k){k&&c.deletePath(e),a(null)})});c.deletePath(e),a(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw y.ENOENT(e)},t.prototype.rmdir=function(e,a){var c=this;if(!!this.checkInitAsync(a)){var l=function(){c.readdir(e,function(d,x){if(d)return a(d);if(x.length)return a(y.ENOTEMPTY(e));c.deletePath(e),a(null)})};this.exists(e,function(d){if(!d)return a(y.ENOENT(e));c._writable.exists(e,function(x){x?c._writable.rmdir(e,function(k){if(k)return a(k);c._readable.exists(e,function(B){B?l():a()})}):l()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw y.ENOTEMPTY(e);this.deletePath(e)}}else throw y.ENOENT(e)},t.prototype.mkdir=function(e,a,c){var l=this;!this.checkInitAsync(c)||this.exists(e,function(d){if(d)return c(y.EEXIST(e));l.createParentDirectoriesAsync(e,function(x){if(x)return c(x);l._writable.mkdir(e,a,c)})})},t.prototype.mkdirSync=function(e,a){if(this.checkInitialized(),this.existsSync(e))throw y.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,a)},t.prototype.readdir=function(e,a){var c=this;!this.checkInitAsync(a)||this.stat(e,!1,function(l,d){if(l)return a(l);if(!d.isDirectory())return a(y.ENOTDIR(e));c._writable.readdir(e,function(x,k){if(x&&x.code!=="ENOENT")return a(x);(x||!k)&&(k=[]),c._readable.readdir(e,function(B,P){(B||!P)&&(P=[]);var Y={},rt=k.concat(P.filter(function(st){return!c._deletedFiles[e+"/"+st]})).filter(function(st){var pt=!Y[st];return Y[st]=!0,pt});a(null,rt)})})})},t.prototype.readdirSync=function(e){var a=this;this.checkInitialized();var c=this.statSync(e,!1);if(!c.isDirectory())throw y.ENOTDIR(e);var l=[];try{l=l.concat(this._writable.readdirSync(e))}catch{}try{l=l.concat(this._readable.readdirSync(e).filter(function(x){return!a._deletedFiles[e+"/"+x]}))}catch{}var d={};return l.filter(function(x){var k=!d[x];return d[x]=!0,k})},t.prototype.exists=function(e,a){var c=this;this.checkInitialized(),this._writable.exists(e,function(l){if(l)return a(!0);c._readable.exists(e,function(d){a(d&&c._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,a,c,l){var d=this;!this.checkInitAsync(l)||this.operateOnWritableAsync(e,function(x){if(x)return l(x);d._writable.chmod(e,a,c,l)})},t.prototype.chmodSync=function(e,a,c){var l=this;this.checkInitialized(),this.operateOnWritable(e,function(){l._writable.chmodSync(e,a,c)})},t.prototype.chown=function(e,a,c,l,d){var x=this;!this.checkInitAsync(d)||this.operateOnWritableAsync(e,function(k){if(k)return d(k);x._writable.chown(e,a,c,l,d)})},t.prototype.chownSync=function(e,a,c,l){var d=this;this.checkInitialized(),this.operateOnWritable(e,function(){d._writable.chownSync(e,a,c,l)})},t.prototype.utimes=function(e,a,c,l){var d=this;!this.checkInitAsync(l)||this.operateOnWritableAsync(e,function(x){if(x)return l(x);d._writable.utimes(e,a,c,l)})},t.prototype.utimesSync=function(e,a,c){var l=this;this.checkInitialized(),this.operateOnWritable(e,function(){l._writable.utimesSync(e,a,c)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var a=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(ze,this._deleteLog,"utf8",T.getFileFlag("w"),420,function(c){a._deleteLogUpdatePending=!1,c?a._deleteLogError=c:a._deleteLogUpdateNeeded&&(a._deleteLogUpdateNeeded=!1,a.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(a){e._deletedFiles[a.slice(1)]=a.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new y(h.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var a=this._deleteLogError;return this._deleteLogError=null,e(a),!1}}else return e(new y(h.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===ze)throw y.EPERM(e)},t.prototype.checkPathAsync=function(e,a){return e===ze?(a(y.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,a){var c=w.dirname(e),l=[],d=this;this._writable.stat(c,!1,x);function x(B,P){B?(l.push(c),c=w.dirname(c),d._writable.stat(c,!1,x)):k()}function k(){if(!l.length)return a();var B=l.pop();d._readable.stat(B,!1,function(P,Y){if(!Y)return a();d._writable.mkdir(B,Y.mode,function(rt){if(rt)return a(rt);k()})})}},t.prototype.createParentDirectories=function(e){for(var a=this,c=w.dirname(e),l=[];!this._writable.existsSync(c);)l.push(c),c=w.dirname(c);l=l.reverse(),l.forEach(function(d){a._writable.mkdirSync(d,a.statSync(d,!1).mode)})},t.prototype.operateOnWritable=function(e,a){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),a();else throw y.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,a){var c=this;this.exists(e,function(l){if(!l)return a(y.ENOENT(e));c._writable.exists(e,function(d){if(d)a();else return c.copyToWritableAsync(e,a)})})},t.prototype.copyToWritable=function(e){var a=this.statSync(e,!1);a.isDirectory()?this._writable.mkdirSync(e,a.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,Ee("r")),null,Ee("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,a){var c=this;this.stat(e,!1,function(l,d){if(l)return a(l);if(d.isDirectory())return c._writable.mkdir(e,d.mode,a);c._readable.readFile(e,null,Ee("r"),function(x,k){if(x)return a(x);c.writeFile(e,k,null,Ee("w"),d.mode,a)})})},t}(at),Bi=function(o){function t(n,e,a){a===void 0&&(a=!0),o.call(this,new Cn(n,e)),Ot(a,t.Name,{readable:"readable file system",writable:"writable file system"})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){try{var c=new t(e.writable,e.readable,!1);c.initialize(function(l){a(l,c)},!1)}catch(l){a(l)}},t.isAvailable=function(){return Cn.isAvailable()},t.prototype.initialize=function(e,a){a===void 0&&(a=!0),a&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),o.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return o.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return o.prototype.getFSUnlocked.call(this)},t}(_t);Bi.Name="OverlayFS",Bi.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Xt;(function(o){o[o.CB=0]="CB",o[o.FD=1]="FD",o[o.API_ERROR=2]="API_ERROR",o[o.STATS=3]="STATS",o[o.PROBE=4]="PROBE",o[o.FILEFLAG=5]="FILEFLAG",o[o.BUFFER=6]="BUFFER",o[o.ERROR=7]="ERROR"})(Xt||(Xt={}));var br=function(){this._callbacks={},this._nextId=0};br.prototype.toRemoteArg=function(t){var n=this._nextId++;return this._callbacks[n]=t,{type:Xt.CB,id:n}},br.prototype.toLocalArg=function(t){var n=this._callbacks[t];return delete this._callbacks[t],n};var er=function(){this._fileDescriptors={},this._nextId=0};er.prototype.toRemoteArg=function(t,n,e,a){var c=this._nextId++,l,d;this._fileDescriptors[c]=t,t.stat(function(x,k){x?a(x):(d=ii(k.toBuffer()),e.isReadable()?t.read(f.alloc(k.size),0,k.size,0,function(B,P,Y){B?a(B):(l=ii(Y),a(null,{type:Xt.FD,id:c,data:l,stat:d,path:n,flag:e.getFlagString()}))}):a(null,{type:Xt.FD,id:c,data:new ArrayBuffer(0),stat:d,path:n,flag:e.getFlagString()}))})},er.prototype.applyFdAPIRequest=function(t,n){var e=this,a=t.args[0];this._applyFdChanges(a,function(c,l){c?n(c):l[t.method](function(d){t.method==="close"&&delete e._fileDescriptors[a.id],n(d)})})},er.prototype._applyFdChanges=function(t,n){var e=this._fileDescriptors[t.id],a=ri(t.data),c=U.fromBuffer(ri(t.stat)),l=T.getFileFlag(t.flag);l.isWriteable()?e.write(a,0,a.length,l.isAppendable()?e.getPos():0,function(d){function x(){e.stat(function(k,B){k?n(k):B.mode!==c.mode?e.chmod(c.mode,function(P){n(P,e)}):n(k,e)})}d?n(d):l.isAppendable()?x():e.truncate(a.length,function(){x()})}):n(null,e)};function ir(o){return{type:Xt.API_ERROR,errorData:ii(o.writeToBuffer())}}function Bn(o){return y.fromBuffer(ri(o.errorData))}function Mn(o){return{type:Xt.ERROR,name:o.name,message:o.message,stack:o.stack}}function Un(o){var t=ee[o.name];typeof t!="function"&&(t=Error);var n=new t(o.message);return n.stack=o.stack,n}function Pn(o){return{type:Xt.STATS,statsData:ii(o.toBuffer())}}function zn(o){return U.fromBuffer(ri(o.statsData))}function jn(o){return{type:Xt.FILEFLAG,flagStr:o.getFlagString()}}function Wn(o){return T.getFileFlag(o.flagStr)}function ii(o){return et(o)}function ri(o){return kt(o)}function Hn(o){return{type:Xt.BUFFER,data:ii(o)}}function Vn(o){return ri(o.data)}function Ba(o){return o&&typeof o=="object"&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage}function Ma(o){return o&&typeof o=="object"&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage}var qn=function(o){function t(n,e,a,c,l,d){o.call(this,n,e,a,c,d),this._remoteFdId=l}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Xt.FD,id:this._remoteFdId,data:ii(this.getBuffer()),stat:ii(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,a){var c=this;this.isDirty()?this._fs.syncClose(e,this,function(l){l||c.resetDirty(),a(l)}):a()},t}(Qt),rr=function(o){function t(n,e){var a=this;e===void 0&&(e=!0),o.call(this),this._callbackConverter=new br,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=n,Ot(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(c){var l=c.data;if(Ma(l)){var d,x=l.args,k=new Array(x.length);for(d=0;d<k.length;d++)k[d]=a._argRemote2Local(x[d]);a._callbackConverter.toLocalArg(l.cbId).apply(null,k)}})}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){var c=new t(e.worker,!1);c.initialize(function(){a(null,c)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var a=new er;function c(d,x,k){switch(typeof d){case"object":d instanceof U?k(null,Pn(d)):d instanceof y?k(null,ir(d)):d instanceof St?k(null,a.toRemoteArg(d,x[0],x[1],k)):d instanceof T?k(null,jn(d)):d instanceof f?k(null,Hn(d)):d instanceof Error?k(null,Mn(d)):k(null,d);break;default:k(null,d);break}}function l(d,x){if(!d)return d;switch(typeof d){case"object":if(typeof d.type=="number"){var k=d;switch(k.type){case Xt.CB:var B=d.id;return function(){var P=arguments,Y,rt=new Array(arguments.length),st,pt=arguments.length;function wt(Rt){pt>0&&(pt=-1,st={browserfsMessage:!0,cbId:B,args:[ir(Rt)]},e.postMessage(st))}for(Y=0;Y<arguments.length;Y++)(function(Rt,Yt){c(Yt,x,function(fe,De){rt[Rt]=De,fe?wt(fe):--pt===0&&(st={browserfsMessage:!0,cbId:B,args:rt},e.postMessage(st))})})(Y,P[Y]);arguments.length===0&&(st={browserfsMessage:!0,cbId:B,args:rt},e.postMessage(st))};case Xt.API_ERROR:return Bn(k);case Xt.STATS:return zn(k);case Xt.FILEFLAG:return Wn(k);case Xt.BUFFER:return Vn(k);case Xt.ERROR:return Un(k);default:return d}}else return d;default:return d}}e.addEventListener("message",function(d){var x=d.data;if(Ba(x)){var k=x.args,B=new Array(k.length);switch(x.method){case"close":case"sync":(function(){var rt=k[1];a.applyFdAPIRequest(x,function(st){var pt={browserfsMessage:!0,cbId:rt.id,args:st?[ir(st)]:[]};e.postMessage(pt)})})();break;case"probe":(function(){var rt=dt.getRootFS(),st=k[1],pt={type:Xt.PROBE,isReadOnly:rt.isReadOnly(),supportsLinks:rt.supportsLinks(),supportsProps:rt.supportsProps()},wt={browserfsMessage:!0,cbId:st.id,args:[pt]};e.postMessage(wt)})();break;default:for(var P=0;P<k.length;P++)B[P]=l(k[P],B);var Y=dt.getRootFS();Y[x.method].apply(Y,B);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var a=this;if(this._isInitialized)e();else{var c={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Pt()),this._callbackConverter.toRemoteArg(function(l){a._isInitialized=!0,a._isReadOnly=l.isReadOnly,a._supportLinks=l.supportsLinks,a._supportProps=l.supportsProps,e()})]};this._worker.postMessage(c)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,a,c){this._rpc("rename",arguments)},t.prototype.stat=function(e,a,c){this._rpc("stat",arguments)},t.prototype.open=function(e,a,c,l){this._rpc("open",arguments)},t.prototype.unlink=function(e,a){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,a){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,a,c){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,a){this._rpc("readdir",arguments)},t.prototype.exists=function(e,a){this._rpc("exists",arguments)},t.prototype.realpath=function(e,a,c){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,a,c){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,a,c,l){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,a,c,l,d,x){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,a,c,l,d,x){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,a,c,l){this._rpc("chmod",arguments)},t.prototype.chown=function(e,a,c,l,d){this._rpc("chown",arguments)},t.prototype.utimes=function(e,a,c,l){this._rpc("utimes",arguments)},t.prototype.link=function(e,a,c){this._rpc("link",arguments)},t.prototype.symlink=function(e,a,c,l){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,a){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,a,c){this._worker.postMessage({browserfsMessage:!0,method:e,args:[a.toRemoteArg(),this._callbackConverter.toRemoteArg(c)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var a=e;switch(a.type){case Xt.API_ERROR:return Bn(a);case Xt.FD:var c=a;return new qn(this,c.path,T.getFileFlag(c.flag),U.fromBuffer(ri(c.stat)),c.id,ri(c.data));case Xt.STATS:return zn(a);case Xt.FILEFLAG:return Wn(a);case Xt.BUFFER:return Vn(a);case Xt.ERROR:return Un(a);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,a){for(var c=this,l=new Array(a.length),d=0;d<a.length;d++)l[d]=c._argLocal2Remote(a[d]);var x={browserfsMessage:!0,method:e,args:l};this._worker.postMessage(x)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof U?Pn(e):e instanceof y?ir(e):e instanceof qn?e.toRemoteArg():e instanceof T?jn(e):e instanceof f?Hn(e):e instanceof Error?Mn(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(at);rr.Name="WorkerFS",rr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(o,t){o.postMessage?t():t(new y(h.EINVAL,"option must be a Web Worker instance."))}}};function Ua(o,t,n){var e=new XMLHttpRequest;e.open("GET",o,!0);var a=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",a=e.responseType==="json"}catch{a=!1}break;default:return n(new y(h.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(c){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return n(null,e.response?f.from(e.response):Pt());case"json":return a?n(null,e.response):n(null,JSON.parse(e.responseText))}else return n(new y(e.status,"XHR error."))},e.send()}function Pa(o,t){var n=new XMLHttpRequest;n.open("GET",o,!1);var e=null,a=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(c){if(n.readyState===4)if(n.status===200)switch(t){case"buffer":var l=n.responseText;e=f.alloc(l.length);for(var d=0;d<l.length;d++)e[d]=l.charCodeAt(d);return;case"json":e=JSON.parse(n.responseText);return}else{a=new y(n.status,"XHR error.");return}},n.send(),a)throw a;return e}function za(o,t){var n=new XMLHttpRequest;switch(n.open("GET",o,!1),t){case"buffer":n.responseType="arraybuffer";break;case"json":break;default:throw new y(h.EINVAL,"Invalid download type: "+t)}var e,a;if(n.onreadystatechange=function(c){if(n.readyState===4)if(n.status===200)switch(t){case"buffer":e=f.from(n.response);break;case"json":e=JSON.parse(n.response);break}else a=new y(n.status,"XHR error.")},n.send(),a)throw a;return e}function Zn(o,t,n){var e=new XMLHttpRequest;e.open("HEAD",t,o),e.onreadystatechange=function(a){if(e.readyState===4)if(e.status===200)try{return n(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return n(new y(h.EIO,"XHR HEAD error: Could not read content-length."))}else return n(new y(e.status,"XHR HEAD error."))},e.send()}var Xn=Ua,ja=Ft&&typeof Blob<"u"?za:Pa;function Wa(o){var t=-1;return Zn(!1,o,function(n,e){if(n)throw n;t=e}),t}function Ha(o,t){Zn(!0,o,t)}var Ie=function(){this._index={},this.addPath("/",new me)};Ie.fromListing=function(t){var n=new Ie,e=new me;n._index["/"]=e;for(var a=[["",t,e]];a.length>0;){var c=void 0,l=a.pop(),d=l[0],x=l[1],k=l[2];for(var B in x)if(x.hasOwnProperty(B)){var P=x[B],Y=d+"/"+B;P?(n._index[Y]=c=new me,a.push([Y,P,c])):c=new mi(new U(M.FILE,-1,365)),k&&(k._ls[B]=c)}}return n},Ie.prototype.fileIterator=function(t){var n=this;for(var e in n._index)if(n._index.hasOwnProperty(e))for(var a=n._index[e],c=a.getListing(),l=0,d=c;l<d.length;l+=1){var x=d[l],k=a.getItem(x);je(k)&&t(k.getData())}},Ie.prototype.addPath=function(t,n){if(!n)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===n;var e=this._split_path(t),a=e[0],c=e[1],l=this._index[a];return l===void 0&&t!=="/"&&(l=new me,!this.addPath(a,l))||t!=="/"&&!l.addItem(c,n)?!1:(Xe(n)&&(this._index[t]=n),!0)},Ie.prototype.addPathFast=function(t,n){var e=t.lastIndexOf("/"),a=e===0?"/":t.substring(0,e),c=t.substring(e+1),l=this._index[a];return l===void 0&&(l=new me,this.addPathFast(a,l)),l.addItem(c,n)?(n.isDir()&&(this._index[t]=n),!0):!1},Ie.prototype.removePath=function(t){var n=this,e=this._split_path(t),a=e[0],c=e[1],l=this._index[a];if(l===void 0)return null;var d=l.remItem(c);if(d===null)return null;if(Xe(d)){for(var x=d.getListing(),k=0,B=x;k<B.length;k+=1){var P=B[k];n.removePath(t+"/"+P)}t!=="/"&&delete this._index[t]}return d},Ie.prototype.ls=function(t){var n=this._index[t];return n===void 0?null:n.getListing()},Ie.prototype.getInode=function(t){var n=this._split_path(t),e=n[0],a=n[1],c=this._index[e];return c===void 0?null:e===t?c:c.getItem(a)},Ie.prototype._split_path=function(t){var n=w.dirname(t),e=t.substr(n.length+(n==="/"?0:1));return[n,e]};var mi=function(t){this.data=t};mi.prototype.isFile=function(){return!0},mi.prototype.isDir=function(){return!1},mi.prototype.getData=function(){return this.data},mi.prototype.setData=function(t){this.data=t};var me=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};me.prototype.isFile=function(){return!1},me.prototype.isDir=function(){return!0},me.prototype.getData=function(){return this.data},me.prototype.getStats=function(){return new U(M.DIRECTORY,4096,365)},me.prototype.getListing=function(){return Object.keys(this._ls)},me.prototype.getItem=function(t){var n=this._ls[t];return n||null},me.prototype.addItem=function(t,n){return t in this._ls?!1:(this._ls[t]=n,!0)},me.prototype.remItem=function(t){var n=this._ls[t];return n===void 0?null:(delete this._ls[t],n)};function je(o){return!!o&&o.isFile()}function Xe(o){return!!o&&o.isDir()}function Va(o,t,n){try{n(null,o.toString(t))}catch(e){n(e)}}var nr=function(o){function t(n,e,a){e===void 0&&(e=""),a===void 0&&(a=!0),o.call(this),n||(n="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var c=null;if(typeof n=="string"){if(c=this._requestFileSync(n,"json"),!c)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else c=n;Ot(a,t.Name,{index:typeof n=="string"?n:"file index as an object",baseUrl:e}),this._index=Ie.fromListing(c)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,a,e.baseUrl,!1):a(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,a,c,l){c===void 0&&(c=e.slice(0,e.lastIndexOf("/")+1)),l===void 0&&(l=!0),l&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+c+`" }, cb)' instead.`),Xn(e,"json",function(d,x){d?a(d):a(null,new t(x,c,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,a){a(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,a){var c=this._index.getInode(e);if(je(c)){if(c===null)throw y.ENOENT(e);var l=c.getData();l.size=a.length,l.fileData=a}else throw y.EISDIR(e)},t.prototype.stat=function(e,a,c){var l=this._index.getInode(e);if(l===null)return c(y.ENOENT(e));var d;je(l)?(d=l.getData(),d.size<0?this._requestFileSizeAsync(e,function(x,k){if(x)return c(x);d.size=k,c(null,d.clone())}):c(null,d.clone())):Xe(l)?(d=l.getStats(),c(null,d)):c(y.FileError(h.EINVAL,e))},t.prototype.statSync=function(e,a){var c=this._index.getInode(e);if(c===null)throw y.ENOENT(e);var l;if(je(c))l=c.getData(),l.size<0&&(l.size=this._requestFileSizeSync(e));else if(Xe(c))l=c.getStats();else throw y.FileError(h.EINVAL,e);return l},t.prototype.open=function(e,a,c,l){if(a.isWriteable())return l(new y(h.EPERM,e));var d=this,x=this._index.getInode(e);if(x===null)return l(y.ENOENT(e));if(je(x)){var k=x.getData();switch(a.pathExistsAction()){case C.THROW_EXCEPTION:case C.TRUNCATE_FILE:return l(y.EEXIST(e));case C.NOP:if(k.fileData)return l(null,new he(d,e,a,k.clone(),k.fileData));this._requestFileAsync(e,"buffer",function(B,P){return B?l(B):(k.size=P.length,k.fileData=P,l(null,new he(d,e,a,k.clone(),P)))});break;default:return l(new y(h.EINVAL,"Invalid FileMode object."))}}else return l(y.EISDIR(e))},t.prototype.openSync=function(e,a,c){if(a.isWriteable())throw new y(h.EPERM,e);var l=this._index.getInode(e);if(l===null)throw y.ENOENT(e);if(je(l)){var d=l.getData();switch(a.pathExistsAction()){case C.THROW_EXCEPTION:case C.TRUNCATE_FILE:throw y.EEXIST(e);case C.NOP:if(d.fileData)return new he(this,e,a,d.clone(),d.fileData);var x=this._requestFileSync(e,"buffer");return d.size=x.length,d.fileData=x,new he(this,e,a,d.clone(),x);default:throw new y(h.EINVAL,"Invalid FileMode object.")}}else throw y.EISDIR(e)},t.prototype.readdir=function(e,a){try{a(null,this.readdirSync(e))}catch(c){a(c)}},t.prototype.readdirSync=function(e){var a=this._index.getInode(e);if(a===null)throw y.ENOENT(e);if(Xe(a))return a.getListing();throw y.ENOTDIR(e)},t.prototype.readFile=function(e,a,c,l){var d=l;this.open(e,c,420,function(x,k){if(x)return l(x);l=function(Y,rt){k.close(function(st){return Y||(Y=st),d(Y,rt)})};var B=k,P=B.getBuffer();a===null?l(x,Lt(P)):Va(P,a,l)})},t.prototype.readFileSync=function(e,a,c){var l=this.openSync(e,c,420);try{var d=l,x=d.getBuffer();return a===null?Lt(x):x.toString(a)}finally{l.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,a,c){Xn(this.getXhrPath(e),a,c)},t.prototype._requestFileSync=function(e,a){return ja(this.getXhrPath(e),a)},t.prototype._requestFileSizeAsync=function(e,a){Ha(this.getXhrPath(e),a)},t.prototype._requestFileSizeSync=function(e){return Wa(this.getXhrPath(e))},t}(at);nr.Name="XmlHttpRequest",nr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var ni=function(){};ni.str2byte=function(t,n){for(var e=t.length>n.length?n.length:t.length,a=0;a<e;a++){var c=t.charCodeAt(a);if(c>127){var l=ni.extendedChars.indexOf(t.charAt(a));l>-1&&(c=l+128)}n[c]=a}return e},ni.byte2str=function(t){for(var n=new Array(t.length),e=0;e<t.length;e++){var a=t[e];a>127?n[e]=ni.extendedChars[a-128]:n[e]=String.fromCharCode(a)}return n.join("")},ni.byteLength=function(t){return t.length},ni.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var qa=u(31).inflateRaw,Yn={},Gn;(function(o){o[o.MSDOS=0]="MSDOS",o[o.AMIGA=1]="AMIGA",o[o.OPENVMS=2]="OPENVMS",o[o.UNIX=3]="UNIX",o[o.VM_CMS=4]="VM_CMS",o[o.ATARI_ST=5]="ATARI_ST",o[o.OS2_HPFS=6]="OS2_HPFS",o[o.MAC=7]="MAC",o[o.Z_SYSTEM=8]="Z_SYSTEM",o[o.CP_M=9]="CP_M",o[o.NTFS=10]="NTFS",o[o.MVS=11]="MVS",o[o.VSE=12]="VSE",o[o.ACORN_RISC=13]="ACORN_RISC",o[o.VFAT=14]="VFAT",o[o.ALT_MVS=15]="ALT_MVS",o[o.BEOS=16]="BEOS",o[o.TANDEM=17]="TANDEM",o[o.OS_400=18]="OS_400",o[o.OSX=19]="OSX"})(Gn||(Gn={}));var vi;(function(o){o[o.STORED=0]="STORED",o[o.SHRUNK=1]="SHRUNK",o[o.REDUCED_1=2]="REDUCED_1",o[o.REDUCED_2=3]="REDUCED_2",o[o.REDUCED_3=4]="REDUCED_3",o[o.REDUCED_4=5]="REDUCED_4",o[o.IMPLODE=6]="IMPLODE",o[o.DEFLATE=8]="DEFLATE",o[o.DEFLATE64=9]="DEFLATE64",o[o.TERSE_OLD=10]="TERSE_OLD",o[o.BZIP2=12]="BZIP2",o[o.LZMA=14]="LZMA",o[o.TERSE_NEW=18]="TERSE_NEW",o[o.LZ77=19]="LZ77",o[o.WAVPACK=97]="WAVPACK",o[o.PPMD=98]="PPMD"})(vi||(vi={}));function Jn(o,t){var n=t&31,e=(t>>5&15)-1,a=(t>>9)+1980,c=o&31,l=o>>5&63,d=o>>11;return new Date(a,e,n,d,l,c)}function or(o,t,n,e){return e===0?"":t?o.toString("utf8",n,n+e):ni.byte2str(o.slice(n,n+e))}var _e=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new y(h.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};_e.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},_e.prototype.flags=function(){return this.data.readUInt16LE(6)},_e.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},_e.prototype.lastModFileTime=function(){return Jn(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},_e.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},_e.prototype.crc32=function(){return this.data.readUInt32LE(14)},_e.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},_e.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},_e.prototype.fileName=function(){return or(this.data,this.useUTF8(),30,this.fileNameLength())},_e.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},_e.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},_e.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var Mi=function(t,n,e){this.header=t,this.record=n,this.data=e};Mi.prototype.decompress=function(){var t=this.header.compressionMethod(),n=Yn[t];if(n)return n(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=vi[t];throw e||(e="Unknown: "+t),new y(h.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},Mi.prototype.getHeader=function(){return this.header},Mi.prototype.getRecord=function(){return this.record},Mi.prototype.getRawData=function(){return this.data};var Ir=function(t){this.data=t};Ir.prototype.crc32=function(){return this.data.readUInt32LE(0)},Ir.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},Ir.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)};var Kn=function(t){if(this.data=t,this.data.readUInt32LE(0)!==134630224)throw new y(h.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};Kn.prototype.length=function(){return this.data.readUInt32LE(4)},Kn.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())};var Qn=function(t){if(this.data=t,this.data.readUInt32LE(0)!==84233040)throw new y(h.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};Qn.prototype.size=function(){return this.data.readUInt16LE(4)},Qn.prototype.signatureData=function(){return this.data.slice(6,6+this.size())};var Ct=function(t,n){if(this.zipData=t,this.data=n,this.data.readUInt32LE(0)!==33639248)throw new y(h.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Ct.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Ct.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Ct.prototype.flag=function(){return this.data.readUInt16LE(8)},Ct.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Ct.prototype.lastModFileTime=function(){return Jn(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Ct.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Ct.prototype.crc32=function(){return this.data.readUInt32LE(16)},Ct.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Ct.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Ct.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Ct.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Ct.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Ct.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Ct.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Ct.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Ct.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Ct.prototype.produceFilename=function(){var t=or(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Ct.prototype.fileName=function(){return this._filename},Ct.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Ct.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Ct.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return or(this.data,this.useUTF8(),t,this.fileCommentLength())},Ct.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Ct.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Ct.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Ct.prototype.isFile=function(){return!this.isDirectory()},Ct.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Ct.prototype.isEncrypted=function(){return(this.flag()&1)===1},Ct.prototype.getFileData=function(){var t=this.headerRelativeOffset(),n=new _e(this.zipData.slice(t));return new Mi(n,this,this.zipData.slice(t+n.totalSize()))},Ct.prototype.getData=function(){return this.getFileData().decompress()},Ct.prototype.getRawData=function(){return this.getFileData().getRawData()},Ct.prototype.getStats=function(){return new U(M.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Ae=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new y(h.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Ae.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Ae.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Ae.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Ae.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Ae.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Ae.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Ae.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Ae.prototype.cdZipComment=function(){return or(this.data,!0,22,this.cdZipCommentLength())},Ae.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var $n=function(t,n,e,a){this.index=t,this.directoryEntries=n,this.eocd=e,this.data=a},oi=function(o){function t(n,e,a){e===void 0&&(e=""),a===void 0&&(a=!0),o.call(this),this.name=e,this._index=new Ie,this._directoryEntries=[],this._eocd=null,Ot(a,t.Name,{zipData:"zip data as a Buffer",name:e}),n instanceof $n?(this._index=n.index,this._directoryEntries=n.directoryEntries,this._eocd=n.eocd,this.data=n.data):(this.data=n,this.populateIndex())}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){try{t.computeIndex(e.zipData,function(c){var l=new t(c,e.name,!1);a(null,l)},!1)}catch(c){a(c)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,a){Yn[e]=a},t.computeIndex=function(e,a,c){c===void 0&&(c=!0),c&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var l=new Ie,d=t.getEOCD(e);if(d.diskNumber()!==d.cdDiskNumber())throw new y(h.EINVAL,"ZipFS does not support spanned zip files.");var x=d.cdOffset();if(x===4294967295)throw new y(h.EINVAL,"ZipFS does not support Zip64.");var k=x+d.cdSize();t.computeIndexResponsive(e,l,x,k,a,[],d)},t.getEOCD=function(e){for(var a=22,c=Math.min(a+65535,e.length-1),l=a;l<c;l++)if(e.readUInt32LE(e.length-l)===101010256)return new Ae(e.slice(e.length-l));throw new y(h.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,a){var c=e.fileName();if(c.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");c.charAt(c.length-1)==="/"&&(c=c.substr(0,c.length-1)),e.isDirectory()?a.addPathFast("/"+c,new me(e)):a.addPathFast("/"+c,new mi(e))},t.computeIndexResponsive=function(e,a,c,l,d,x,k){if(c<l){for(var B=0;B++<200&&c<l;){var P=new Ct(e,e.slice(c));t.addToIndex(P,a),c+=P.totalSize(),x.push(P)}Fr(function(){t.computeIndexResponsive(e,a,c,l,d,x,k)})}else d(new $n(a,x,k,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var a=this._index.getInode(e);if(a===null)throw y.ENOENT(e);if(je(a))return a.getData();if(Xe(a))return a.getData();throw y.EPERM("Invalid inode: "+a)},t.prototype.getCentralDirectoryEntryAt=function(e){var a=this._directoryEntries[e];if(!a)throw new RangeError("Invalid directory index: "+e+".");return a},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,a){a(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,a){var c=this._index.getInode(e);if(c===null)throw y.ENOENT(e);var l;if(je(c))l=c.getData().getStats();else if(Xe(c))l=c.getStats();else throw new y(h.EINVAL,"Invalid inode.");return l},t.prototype.openSync=function(e,a,c){if(a.isWriteable())throw new y(h.EPERM,e);var l=this._index.getInode(e);if(l)if(je(l)){var d=l.getData(),x=d.getStats();switch(a.pathExistsAction()){case C.THROW_EXCEPTION:case C.TRUNCATE_FILE:throw y.EEXIST(e);case C.NOP:return new he(this,e,a,x,d.getData());default:throw new y(h.EINVAL,"Invalid FileMode object.")}}else throw y.EISDIR(e);else throw y.ENOENT(e)},t.prototype.readdirSync=function(e){var a=this._index.getInode(e);if(a){if(Xe(a))return a.getListing();throw y.ENOTDIR(e)}else throw y.ENOENT(e)},t.prototype.readFileSync=function(e,a,c){var l=this.openSync(e,c,420);try{var d=l,x=d.getBuffer();return a===null?Lt(x):x.toString(a)}finally{l.closeSync()}},t.prototype.populateIndex=function(){var e=this,a=this._eocd=t.getEOCD(this.data);if(a.diskNumber()!==a.cdDiskNumber())throw new y(h.EINVAL,"ZipFS does not support spanned zip files.");var c=a.cdOffset();if(c===4294967295)throw new y(h.EINVAL,"ZipFS does not support Zip64.");for(var l=c+a.cdSize();c<l;){var d=new Ct(e.data,e.data.slice(c));c+=d.totalSize(),t.addToIndex(d,e._index),e._directoryEntries.push(d)}},t}(It);oi.Name="ZipFS",oi.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:ne},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},oi.CompressionMethod=vi,oi.RegisterDecompressionMethod(vi.DEFLATE,function(o,t,n){return Nt(qa(o.slice(0,t),{chunkSize:n}))}),oi.RegisterDecompressionMethod(vi.STORED,function(o,t,n){return Lt(o,0,n)});var Za="IEEE_P1282";function ve(o,t,n){return o.toString("ascii",t,t+n).trim()}function kr(o,t,n){if(n===1)return String.fromCharCode(o[t]);for(var e=Math.floor(n/2),a=new Array(e),c=0;c<e;c++){var l=t+(c<<1);a[c]=String.fromCharCode(o[l+1]|o[l]<<8)}return a.join("")}function Le(o,t){var n=parseInt(ve(o,t,4),10),e=parseInt(ve(o,t+4,2),10),a=parseInt(ve(o,t+6,2),10),c=parseInt(ve(o,t+8,2),10),l=parseInt(ve(o,t+10,2),10),d=parseInt(ve(o,t+12,2),10),x=parseInt(ve(o,t+14,2),10);return new Date(n,e,a,c,l,d,x*100)}function si(o,t){var n=o[t],e=o[t+1],a=o[t+2],c=o[t+3],l=o[t+4],d=o[t+5];return new Date(n,e-1,a,c,l,d)}function Xa(o,t){var n=o.slice(t),e=new ie(n);switch(e.signatureWord()){case 17221:return new no(n);case 20548:return new Ja(n);case 21328:return new oo(n);case 21332:return new so(n);case 17746:return new ao(n);case 17747:return new Ka(n);case 20568:return new co(n);case 20558:return new Qa(n);case 21324:return new Rr(n);case 20045:return new fo(n);case 17228:return new Nr(n);case 20556:return new $a(n);case 21061:return new lo(n);case 21574:return new ho(n);case 21318:return new tu(n);case 21074:return new uo(n);default:return e}}function to(o,t,n,e){n=n-4;for(var a=new Array;t<n;){var c=Xa(o,t),l=c.length();if(l===0)return a;if(t+=l,c instanceof so)break;c instanceof no?a=a.concat(c.getEntries(e)):a.push(c)}return a}var wi=function(t){this._data=t};wi.prototype.type=function(){return this._data[0]},wi.prototype.standardIdentifier=function(){return ve(this._data,1,5)},wi.prototype.version=function(){return this._data[6]},wi.prototype.data=function(){return this._data.slice(7,2048)};var eo=function(o){function t(n){o.call(this,n),this._root=null}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Le(this._data,813)},t.prototype.volumeModificationDate=function(){return Le(this._data,830)},t.prototype.volumeExpirationDate=function(){return Le(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Le(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,883+512)},t.prototype.reserved=function(){return this._data.slice(1395,1395+653)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(wi),Ya=function(o){function t(n){if(o.call(this,n),this.type()!==1)throw new y(h.EIO,"Invalid primary volume descriptor.")}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new io(e,-1)},t.prototype._getString=function(e,a){return this._getString(e,a)},t}(eo),Ga=function(o){function t(n){if(o.call(this,n),this.type()!==2)throw new y(h.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),a=e[2];if(e[0]!==37||e[1]!==47||a!==64&&a!==67&&a!==69)throw new y(h.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new ro(e,-1)},t.prototype._getString=function(e,a){return kr(this._data,e,a)},t}(eo),Vt=function(t,n){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=n};Vt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},Vt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},Vt.prototype.rootCheckForRockRidge=function(t){var n=this.getDirectory(t);this._rockRidgeOffset=n.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},Vt.prototype.length=function(){return this._data[0]},Vt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},Vt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},Vt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},Vt.prototype.recordingDate=function(){return si(this._data,18)},Vt.prototype.fileFlags=function(){return this._data[25]},Vt.prototype.fileUnitSize=function(){return this._data[26]},Vt.prototype.interleaveGapSize=function(){return this._data[27]},Vt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},Vt.prototype.identifier=function(){return this._getString(33,this._data[32])},Vt.prototype.fileName=function(t){if(this.hasRockRidge()){var n=this._rockRidgeFilename(t);if(n!==null)return n}var e=this.identifier();if(this.isDirectory(t))return e;var a=e.indexOf(";");return a===-1?e:e[a-1]==="."?e.slice(0,a-1):e.slice(0,a)},Vt.prototype.isDirectory=function(t){var n=!!(this.fileFlags()&2);return!n&&this.hasRockRidge()&&(n=this.getSUEntries(t).filter(function(e){return e instanceof Nr}).length>0),n},Vt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(n){return n instanceof Rr}).length>0},Vt.prototype.getSymlinkPath=function(t){for(var n="",e=this.getSUEntries(t),a=this._getGetString(),c=0,l=e;c<l.length;c+=1){var d=l[c];if(d instanceof Rr){for(var x=d.componentRecords(),k=0,B=x;k<B.length;k+=1){var P=B[k],Y=P.flags();Y&2?n+="./":Y&4?n+="../":Y&8?n+="/":(n+=P.content(a),Y&1||(n+="/"))}if(!d.continueFlag())break}}return n.length>1&&n[n.length-1]==="/"?n.slice(0,n.length-1):n},Vt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},Vt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},Vt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},Vt.prototype._rockRidgeFilename=function(t){var n=this.getSUEntries(t).filter(function(x){return x instanceof fo});if(n.length===0||n[0].flags()&6)return null;for(var e="",a=this._getGetString(),c=0,l=n;c<l.length;c+=1){var d=l[c];if(e+=d.name(a),!(d.flags()&1))break}return e},Vt.prototype._constructSUEntries=function(t){var n=33+this._data[32];n%2===1&&n++,n+=this._rockRidgeOffset,this._suEntries=to(this._data,n,this.length(),t)},Vt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var n=this.getSUEntries(t);if(n.length>0){var e=n[0];if(e instanceof oo&&e.checkBytesPass())for(var a=1;a<n.length;a++){var c=n[a];if(c instanceof uo||c instanceof ao&&c.extensionIdentifier()===Za)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var io=function(o){function t(n,e){o.call(this,n,e)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,a){return ve(this._data,e,a)},t.prototype._constructDirectory=function(e){return new eu(this,e)},t.prototype._getGetString=function(){return ve},t}(Vt),ro=function(o){function t(n,e){o.call(this,n,e)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,a){return kr(this._data,e,a)},t.prototype._constructDirectory=function(e){return new iu(this,e)},t.prototype._getGetString=function(){return kr},t}(Vt),ie=function(t){this._data=t};ie.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},ie.prototype.signatureWordString=function(){return ve(this._data,0,2)},ie.prototype.length=function(){return this._data[2]},ie.prototype.suVersion=function(){return this._data[3]};var no=function(o){function t(n){o.call(this,n),this._entries=null}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var a=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=to(e,a,this.continuationLength(),e)}return this._entries},t}(ie),Ja=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t}(ie),oo=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}(ie),so=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t}(ie),ao=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return ve(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return ve(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return ve(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(ie),Ka=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(ie),uo=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t}(ie),co=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(ie),Qa=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(ie),Rr=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,a=new Array,c=5;c<this.length();){var l=new Ui(e._data.slice(c));a.push(l),c+=l.length()}return a},t}(ie),Ui=function(t){this._data=t};Ui.prototype.flags=function(){return this._data[0]},Ui.prototype.length=function(){return 2+this.componentLength()},Ui.prototype.componentLength=function(){return this._data[1]},Ui.prototype.content=function(t){return t(this._data,2,this.componentLength())};var fo=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(ie),Nr=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(ie),$a=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(ie),lo=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t}(ie),ho=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?Le(this._data,5):si(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Le(this._data,5+e*17):si(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Le(this._data,5+e*17):si(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Le(this._data,5+e*17):si(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Le(this._data,5+e*17):si(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Le(this._data,5+e*17):si(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(ie),tu=function(o){function t(n){o.call(this,n)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(ie),Pi=function(t,n){var e=this;this._fileList=[],this._fileMap={},this._record=t;var a=t.lba(),c=a+t.dataLength();if(!(t.fileFlags()&2)){var l=t.getSUEntries(n).filter(function(B){return B instanceof Nr})[0];a=l.childDirectoryLba()*2048,c=1/0}for(;a<c;){var d=n[a];if(d===0){a++;continue}var x=e._constructDirectoryRecord(n.slice(a)),k=x.fileName(n);k!=="\0"&&k!==""?(!x.hasRockRidge()||x.getSUEntries(n).filter(function(B){return B instanceof lo}).length===0)&&(e._fileMap[k]=x,e._fileList.push(k)):c===1/0&&(c=a+x.dataLength()),a+=x.length()}};Pi.prototype.getRecord=function(t){return this._fileMap[t]},Pi.prototype.getFileList=function(){return this._fileList},Pi.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var eu=function(o){function t(n,e){o.call(this,n,e)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new io(e,this._record.getRockRidgeOffset())},t}(Pi),iu=function(o){function t(n,e){o.call(this,n,e)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new ro(e,this._record.getRockRidgeOffset())},t}(Pi),sr=function(o){function t(n,e,a){var c=this;e===void 0&&(e=""),a===void 0&&(a=!0),o.call(this),this._data=n,Ot(a,t.Name,{data:"ISO data as a Buffer",name:e});for(var l=!1,d=16*2048,x=new Array;!l;){var k=n.slice(d),B=new wi(k);switch(B.type()){case 1:x.push(new Ya(k));break;case 2:x.push(new Ga(k));break;case 255:l=!0;break}d+=2048}if(x.length===0)throw new y(h.EIO,"Unable to find a suitable volume descriptor.");x.forEach(function(P){(!c._pvd||c._pvd.type()!==2)&&(c._pvd=P)}),this._root=this._pvd.rootDirectoryEntry(n),this._name=e}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),t.prototype.constructor=t,t.Create=function(e,a){var c,l;try{c=new t(e.data,e.name,!1)}catch(d){d=d}finally{a(l,c)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,a){a(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,a){var c=this._getDirectoryRecord(e);if(c===null)throw y.ENOENT(e);return this._getStats(e,c)},t.prototype.openSync=function(e,a,c){if(a.isWriteable())throw new y(h.EPERM,e);var l=this._getDirectoryRecord(e);if(l){if(l.isSymlink(this._data))return this.openSync(w.resolve(e,l.getSymlinkPath(this._data)),a,c);if(l.isDirectory(this._data))throw y.EISDIR(e);var d=l.getFile(this._data),x=this._getStats(e,l);switch(a.pathExistsAction()){case C.THROW_EXCEPTION:case C.TRUNCATE_FILE:throw y.EEXIST(e);case C.NOP:return new he(this,e,a,x,d);default:throw new y(h.EINVAL,"Invalid FileMode object.")}}else throw y.ENOENT(e)},t.prototype.readdirSync=function(e){var a=this._getDirectoryRecord(e);if(a){if(a.isDirectory(this._data))return a.getDirectory(this._data).getFileList().slice(0);throw y.ENOTDIR(e)}else throw y.ENOENT(e)},t.prototype.readFileSync=function(e,a,c){var l=this.openSync(e,c,420);try{var d=l,x=d.getBuffer();return a===null?Lt(x):x.toString(a)}finally{l.closeSync()}},t.prototype._getDirectoryRecord=function(e){var a=this;if(e==="/")return this._root;for(var c=e.split("/").slice(1),l=this._root,d=0,x=c;d<x.length;d+=1){var k=x[d];if(l.isDirectory(a._data)){if(l=l.getDirectory(a._data).getRecord(k),!l)return null}else return null}return l},t.prototype._getStats=function(e,a){if(a.isSymlink(this._data)){var c=w.resolve(e,a.getSymlinkPath(this._data)),l=this._getDirectoryRecord(c);return l?this._getStats(c,l):null}else{var d=a.dataLength(),x=365,k=a.recordingDate(),B=k,P=k,Y=k;if(a.hasRockRidge())for(var rt=a.getSUEntries(this._data),st=0,pt=rt;st<pt.length;st+=1){var wt=pt[st];if(wt instanceof co)x=wt.mode();else if(wt instanceof ho){var Rt=wt.flags();Rt&4&&(B=wt.access()),Rt&2&&(P=wt.modify()),Rt&1&&(Y=wt.creation())}}return x=x&365,new U(a.isDirectory(this._data)?M.DIRECTORY:M.FILE,d,x,B,P,Y)}},t}(It);sr.Name="IsoFS",sr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:ne}},[N,Yi,Gi,pi,Ki,di,Ti,sr,Ai,yi,Bi,rr,nr,oi].forEach(function(o){var t=o.Create;o.Create=function(n,e){var a=typeof n=="function",c=a?n:e,l=a?{}:n;function d(x){x?c(x):t.call(o,l,c)}L(o,l,d)}});var ar={AsyncMirror:N,Dropbox:Yi,Emscripten:Gi,FolderAdapter:pi,HTML5FS:Ki,InMemory:di,IndexedDB:Ti,IsoFS:sr,LocalStorage:Ai,MountableFileSystem:yi,OverlayFS:Bi,WorkerFS:rr,XmlHttpRequest:nr,ZipFS:oi};_.initializeTTYs&&_.initializeTTYs();function ru(o){o.Buffer=f,o.process=_;var t=o.require?o.require:null;o.require=function(n){var e=po(n);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function nu(o,t){ar[o]=t}function po(o){switch(o){case"fs":return dt;case"path":return w;case"buffer":return F;case"process":return _;case"bfs_utils":return D;default:return ar[o]}}function yo(o){return dt.initialize(o)}function ou(o,t){Tr(o,function(n,e){e?(yo(e),t()):t(n)})}function Tr(o,t){var n=o.fs;if(!n)return t(new y(h.EPERM,'Missing "fs" property on configuration object.'));var e=o.options,a=0,c=!1;function l(){if(!c){c=!0;var k=ar[n];k?k.Create(e,t):t(new y(h.EPERM,"File system "+n+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var d=!1,x=Object.keys(e).filter(function(k){return k!=="fs"});x.forEach(function(k){var B=e[k];B!==null&&typeof B=="object"&&B.fs&&(a++,Tr(B,function(P,Y){if(a--,P){if(c)return;c=!0,t(P)}else e[k]=Y,a===0&&d&&l()}))}),d=!0}a===0&&l()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(o){return function(t,n){return t<0&&(t=this.length+t),o.call(this,t,n)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(o,t){o===void 0&&(o=0),t===void 0&&(t=this.length);var n=this;return o<0&&(o=this.length+o,o<0&&(o=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<o&&(t=o),new Uint8Array(n.buffer,n.byteOffset+o,t-o)})),s.install=ru,s.registerFileSystem=nu,s.BFSRequire=po,s.initialize=yo,s.configure=ou,s.getFileSystem=Tr,s.EmscriptenFS=gt,s.FileSystem=ar,s.Errors=A,s.setImmediate=Fr}).call(s,u(1),function(){return this}(),u(5)(p),u(6))},function(p,s,u){p.exports=u(2).Buffer},function(p,s,u){(function(h){"use strict";var m=u(3),v=u(4);s.Buffer=h,s.SlowBuffer=j,s.INSPECT_MAX_BYTES=50;var _=2147483647;s.kMaxLength=_,h.TYPED_ARRAY_SUPPORT=F(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function F(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},N.foo()===42}catch{return!1}}function w(N){if(N>_)throw new RangeError("Invalid typed array length");var S=new Uint8Array(N);return S.__proto__=h.prototype,S}function h(N,S,E){if(typeof N=="number"){if(typeof S=="string")throw new Error("If encoding is specified then the first argument must be a string");return C(N)}return I(N,S,E)}typeof Symbol<"u"&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192;function I(N,S,E){if(typeof N=="number")throw new TypeError('"value" argument must not be a number');return Qt(N)?U(N,S,E):typeof N=="string"?T(N,S):J(N)}h.from=function(N,S,E){return I(N,S,E)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array;function y(N){if(typeof N!="number")throw new TypeError('"size" argument must be a number');if(N<0)throw new RangeError('"size" argument must not be negative')}function A(N,S,E){return y(N),N<=0?w(N):S!==void 0?typeof E=="string"?w(N).fill(S,E):w(N).fill(S):w(N)}h.alloc=function(N,S,E){return A(N,S,E)};function C(N){return y(N),w(N<0?0:Z(N)|0)}h.allocUnsafe=function(N){return C(N)},h.allocUnsafeSlow=function(N){return C(N)};function T(N,S){if((typeof S!="string"||S==="")&&(S="utf8"),!h.isEncoding(S))throw new TypeError('"encoding" must be a valid string encoding');var E=bt(N,S)|0,O=w(E),z=O.write(N,S);return z!==E&&(O=O.slice(0,z)),O}function M(N){for(var S=N.length<0?0:Z(N.length)|0,E=w(S),O=0;O<S;O+=1)E[O]=N[O]&255;return E}function U(N,S,E){if(S<0||N.byteLength<S)throw new RangeError("'offset' is out of bounds");if(N.byteLength<S+(E||0))throw new RangeError("'length' is out of bounds");var O;return S===void 0&&E===void 0?O=new Uint8Array(N):E===void 0?O=new Uint8Array(N,S):O=new Uint8Array(N,S,E),O.__proto__=h.prototype,O}function J(N){if(h.isBuffer(N)){var S=Z(N.length)|0,E=w(S);return E.length===0||N.copy(E,0,0,S),E}if(N){if(he(N)||"length"in N)return typeof N.length!="number"||Re(N.length)?w(0):M(N);if(N.type==="Buffer"&&Array.isArray(N.data))return M(N.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Z(N){if(N>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return N|0}function j(N){return+N!=N&&(N=0),h.alloc(+N)}h.isBuffer=function(S){return S!=null&&S._isBuffer===!0},h.compare=function(S,E){if(!h.isBuffer(S)||!h.isBuffer(E))throw new TypeError("Arguments must be Buffers");if(S===E)return 0;for(var O=S.length,z=E.length,G=0,tt=Math.min(O,z);G<tt;++G)if(S[G]!==E[G]){O=S[G],z=E[G];break}return O<z?-1:z<O?1:0},h.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(S,E){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return h.alloc(0);var O;if(E===void 0)for(E=0,O=0;O<S.length;++O)E+=S[O].length;var z=h.allocUnsafe(E),G=0;for(O=0;O<S.length;++O){var tt=S[O];if(!h.isBuffer(tt))throw new TypeError('"list" argument must be an Array of Buffers');tt.copy(z,G),G+=tt.length}return z};function bt(N,S){if(h.isBuffer(N))return N.length;if(he(N)||Qt(N))return N.byteLength;typeof N!="string"&&(N=""+N);var E=N.length;if(E===0)return 0;for(var O=!1;;)switch(S){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":case void 0:return it(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return It(N).length;default:if(O)return it(N).length;S=(""+S).toLowerCase(),O=!0}}h.byteLength=bt;function ot(N,S,E){var O=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,S>>>=0,E<=S))return"";for(N||(N="utf8");;)switch(N){case"hex":return Nt(this,S,E);case"utf8":case"utf-8":return Kt(this,S,E);case"ascii":return et(this,S,E);case"latin1":case"binary":return ht(this,S,E);case"base64":return Ft(this,S,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Et(this,S,E);default:if(O)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),O=!0}}h.prototype._isBuffer=!0;function xt(N,S,E){var O=N[S];N[S]=N[E],N[E]=O}h.prototype.swap16=function(){var S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<S;E+=2)xt(this,E,E+1);return this},h.prototype.swap32=function(){var S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<S;E+=4)xt(this,E,E+3),xt(this,E+1,E+2);return this},h.prototype.swap64=function(){var S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<S;E+=8)xt(this,E,E+7),xt(this,E+1,E+6),xt(this,E+2,E+5),xt(this,E+3,E+4);return this},h.prototype.toString=function(){var S=this.length;return S===0?"":arguments.length===0?Kt(this,0,S):ot.apply(this,arguments)},h.prototype.equals=function(S){if(!h.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:h.compare(this,S)===0},h.prototype.inspect=function(){var S="",E=s.INSPECT_MAX_BYTES;return this.length>0&&(S=this.toString("hex",0,E).match(/.{2}/g).join(" "),this.length>E&&(S+=" ... ")),"<Buffer "+S+">"},h.prototype.compare=function(S,E,O,z,G){if(!h.isBuffer(S))throw new TypeError("Argument must be a Buffer");if(E===void 0&&(E=0),O===void 0&&(O=S?S.length:0),z===void 0&&(z=0),G===void 0&&(G=this.length),E<0||O>S.length||z<0||G>this.length)throw new RangeError("out of range index");if(z>=G&&E>=O)return 0;if(z>=G)return-1;if(E>=O)return 1;if(E>>>=0,O>>>=0,z>>>=0,G>>>=0,this===S)return 0;for(var tt=G-z,Tt=O-E,Bt=Math.min(tt,Tt),zt=this.slice(z,G),$t=S.slice(E,O),Ut=0;Ut<Bt;++Ut)if(zt[Ut]!==$t[Ut]){tt=zt[Ut],Tt=$t[Ut];break}return tt<Tt?-1:Tt<tt?1:0};function mt(N,S,E,O,z){if(N.length===0)return-1;if(typeof E=="string"?(O=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,Re(E)&&(E=z?0:N.length-1),E<0&&(E=N.length+E),E>=N.length){if(z)return-1;E=N.length-1}else if(E<0)if(z)E=0;else return-1;if(typeof S=="string"&&(S=h.from(S,O)),h.isBuffer(S))return S.length===0?-1:W(N,S,E,O,z);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(N,S,E):Uint8Array.prototype.lastIndexOf.call(N,S,E):W(N,[S],E,O,z);throw new TypeError("val must be string, number or Buffer")}function W(N,S,E,O,z){var G=1,tt=N.length,Tt=S.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(N.length<2||S.length<2)return-1;G=2,tt/=2,Tt/=2,E/=2}function Bt(fi,Je){return G===1?fi[Je]:fi.readUInt16BE(Je*G)}var zt;if(z){var $t=-1;for(zt=E;zt<tt;zt++)if(Bt(N,zt)===Bt(S,$t===-1?0:zt-$t)){if($t===-1&&($t=zt),zt-$t+1===Tt)return $t*G}else $t!==-1&&(zt-=zt-$t),$t=-1}else for(E+Tt>tt&&(E=tt-Tt),zt=E;zt>=0;zt--){for(var Ut=!0,Ne=0;Ne<Tt;Ne++)if(Bt(N,zt+Ne)!==Bt(S,Ne)){Ut=!1;break}if(Ut)return zt}return-1}h.prototype.includes=function(S,E,O){return this.indexOf(S,E,O)!==-1},h.prototype.indexOf=function(S,E,O){return mt(this,S,E,O,!0)},h.prototype.lastIndexOf=function(S,E,O){return mt(this,S,E,O,!1)};function nt(N,S,E,O){E=Number(E)||0;var z=N.length-E;O?(O=Number(O),O>z&&(O=z)):O=z;var G=S.length;if(G%2!==0)throw new TypeError("Invalid hex string");O>G/2&&(O=G/2);for(var tt=0;tt<O;++tt){var Tt=parseInt(S.substr(tt*2,2),16);if(Re(Tt))return tt;N[E+tt]=Tt}return tt}function dt(N,S,E,O){return St(it(S,N.length-E),N,E,O)}function At(N,S,E,O){return St(gt(S),N,E,O)}function vt(N,S,E,O){return At(N,S,E,O)}function Mt(N,S,E,O){return St(It(S),N,E,O)}function Ot(N,S,E,O){return St(at(S,N.length-E),N,E,O)}h.prototype.write=function(S,E,O,z){if(E===void 0)z="utf8",O=this.length,E=0;else if(O===void 0&&typeof E=="string")z=E,O=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(O)?(O=O>>>0,z===void 0&&(z="utf8")):(z=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var G=this.length-E;if((O===void 0||O>G)&&(O=G),S.length>0&&(O<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");for(var tt=!1;;)switch(z){case"hex":return nt(this,S,E,O);case"utf8":case"utf-8":return dt(this,S,E,O);case"ascii":return At(this,S,E,O);case"latin1":case"binary":return vt(this,S,E,O);case"base64":return Mt(this,S,E,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,S,E,O);default:if(tt)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),tt=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ft(N,S,E){return S===0&&E===N.length?m.fromByteArray(N):m.fromByteArray(N.slice(S,E))}function Kt(N,S,E){E=Math.min(N.length,E);for(var O=[],z=S;z<E;){var G=N[z],tt=null,Tt=G>239?4:G>223?3:G>191?2:1;if(z+Tt<=E){var Bt,zt,$t,Ut;switch(Tt){case 1:G<128&&(tt=G);break;case 2:Bt=N[z+1],(Bt&192)===128&&(Ut=(G&31)<<6|Bt&63,Ut>127&&(tt=Ut));break;case 3:Bt=N[z+1],zt=N[z+2],(Bt&192)===128&&(zt&192)===128&&(Ut=(G&15)<<12|(Bt&63)<<6|zt&63,Ut>2047&&(Ut<55296||Ut>57343)&&(tt=Ut));break;case 4:Bt=N[z+1],zt=N[z+2],$t=N[z+3],(Bt&192)===128&&(zt&192)===128&&($t&192)===128&&(Ut=(G&15)<<18|(Bt&63)<<12|(zt&63)<<6|$t&63,Ut>65535&&Ut<1114112&&(tt=Ut))}}tt===null?(tt=65533,Tt=1):tt>65535&&(tt-=65536,O.push(tt>>>10&1023|55296),tt=56320|tt&1023),O.push(tt),z+=Tt}return V(O)}var H=4096;function V(N){var S=N.length;if(S<=H)return String.fromCharCode.apply(String,N);for(var E="",O=0;O<S;)E+=String.fromCharCode.apply(String,N.slice(O,O+=H));return E}function et(N,S,E){var O="";E=Math.min(N.length,E);for(var z=S;z<E;++z)O+=String.fromCharCode(N[z]&127);return O}function ht(N,S,E){var O="";E=Math.min(N.length,E);for(var z=S;z<E;++z)O+=String.fromCharCode(N[z]);return O}function Nt(N,S,E){var O=N.length;(!S||S<0)&&(S=0),(!E||E<0||E>O)&&(E=O);for(var z="",G=S;G<E;++G)z+=$(N[G]);return z}function Et(N,S,E){for(var O=N.slice(S,E),z="",G=0;G<O.length;G+=2)z+=String.fromCharCode(O[G]+O[G+1]*256);return z}h.prototype.slice=function(S,E){var O=this.length;S=~~S,E=E===void 0?O:~~E,S<0?(S+=O,S<0&&(S=0)):S>O&&(S=O),E<0?(E+=O,E<0&&(E=0)):E>O&&(E=O),E<S&&(E=S);var z=this.subarray(S,E);return z.__proto__=h.prototype,z};function kt(N,S,E){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+S>E)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUIntLE=function(S,E,O){S=S>>>0,E=E>>>0,O||kt(S,E,this.length);for(var z=this[S],G=1,tt=0;++tt<E&&(G*=256);)z+=this[S+tt]*G;return z},h.prototype.readUIntBE=function(S,E,O){S=S>>>0,E=E>>>0,O||kt(S,E,this.length);for(var z=this[S+--E],G=1;E>0&&(G*=256);)z+=this[S+--E]*G;return z},h.prototype.readUInt8=function(S,E){return S=S>>>0,E||kt(S,1,this.length),this[S]},h.prototype.readUInt16LE=function(S,E){return S=S>>>0,E||kt(S,2,this.length),this[S]|this[S+1]<<8},h.prototype.readUInt16BE=function(S,E){return S=S>>>0,E||kt(S,2,this.length),this[S]<<8|this[S+1]},h.prototype.readUInt32LE=function(S,E){return S=S>>>0,E||kt(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},h.prototype.readUInt32BE=function(S,E){return S=S>>>0,E||kt(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},h.prototype.readIntLE=function(S,E,O){S=S>>>0,E=E>>>0,O||kt(S,E,this.length);for(var z=this[S],G=1,tt=0;++tt<E&&(G*=256);)z+=this[S+tt]*G;return G*=128,z>=G&&(z-=Math.pow(2,8*E)),z},h.prototype.readIntBE=function(S,E,O){S=S>>>0,E=E>>>0,O||kt(S,E,this.length);for(var z=E,G=1,tt=this[S+--z];z>0&&(G*=256);)tt+=this[S+--z]*G;return G*=128,tt>=G&&(tt-=Math.pow(2,8*E)),tt},h.prototype.readInt8=function(S,E){return S=S>>>0,E||kt(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},h.prototype.readInt16LE=function(S,E){S=S>>>0,E||kt(S,2,this.length);var O=this[S]|this[S+1]<<8;return O&32768?O|4294901760:O},h.prototype.readInt16BE=function(S,E){S=S>>>0,E||kt(S,2,this.length);var O=this[S+1]|this[S]<<8;return O&32768?O|4294901760:O},h.prototype.readInt32LE=function(S,E){return S=S>>>0,E||kt(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},h.prototype.readInt32BE=function(S,E){return S=S>>>0,E||kt(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},h.prototype.readFloatLE=function(S,E){return S=S>>>0,E||kt(S,4,this.length),v.read(this,S,!0,23,4)},h.prototype.readFloatBE=function(S,E){return S=S>>>0,E||kt(S,4,this.length),v.read(this,S,!1,23,4)},h.prototype.readDoubleLE=function(S,E){return S=S>>>0,E||kt(S,8,this.length),v.read(this,S,!0,52,8)},h.prototype.readDoubleBE=function(S,E){return S=S>>>0,E||kt(S,8,this.length),v.read(this,S,!1,52,8)};function Lt(N,S,E,O,z,G){if(!h.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>z||S<G)throw new RangeError('"value" argument is out of bounds');if(E+O>N.length)throw new RangeError("Index out of range")}h.prototype.writeUIntLE=function(S,E,O,z){if(S=+S,E=E>>>0,O=O>>>0,!z){var G=Math.pow(2,8*O)-1;Lt(this,S,E,O,G,0)}var tt=1,Tt=0;for(this[E]=S&255;++Tt<O&&(tt*=256);)this[E+Tt]=S/tt&255;return E+O},h.prototype.writeUIntBE=function(S,E,O,z){if(S=+S,E=E>>>0,O=O>>>0,!z){var G=Math.pow(2,8*O)-1;Lt(this,S,E,O,G,0)}var tt=O-1,Tt=1;for(this[E+tt]=S&255;--tt>=0&&(Tt*=256);)this[E+tt]=S/Tt&255;return E+O},h.prototype.writeUInt8=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,1,255,0),this[E]=S&255,E+1},h.prototype.writeUInt16LE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,2,65535,0),this[E]=S&255,this[E+1]=S>>>8,E+2},h.prototype.writeUInt16BE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,2,65535,0),this[E]=S>>>8,this[E+1]=S&255,E+2},h.prototype.writeUInt32LE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,4,4294967295,0),this[E+3]=S>>>24,this[E+2]=S>>>16,this[E+1]=S>>>8,this[E]=S&255,E+4},h.prototype.writeUInt32BE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,4,4294967295,0),this[E]=S>>>24,this[E+1]=S>>>16,this[E+2]=S>>>8,this[E+3]=S&255,E+4},h.prototype.writeIntLE=function(S,E,O,z){if(S=+S,E=E>>>0,!z){var G=Math.pow(2,8*O-1);Lt(this,S,E,O,G-1,-G)}var tt=0,Tt=1,Bt=0;for(this[E]=S&255;++tt<O&&(Tt*=256);)S<0&&Bt===0&&this[E+tt-1]!==0&&(Bt=1),this[E+tt]=(S/Tt>>0)-Bt&255;return E+O},h.prototype.writeIntBE=function(S,E,O,z){if(S=+S,E=E>>>0,!z){var G=Math.pow(2,8*O-1);Lt(this,S,E,O,G-1,-G)}var tt=O-1,Tt=1,Bt=0;for(this[E+tt]=S&255;--tt>=0&&(Tt*=256);)S<0&&Bt===0&&this[E+tt+1]!==0&&(Bt=1),this[E+tt]=(S/Tt>>0)-Bt&255;return E+O},h.prototype.writeInt8=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,1,127,-128),S<0&&(S=255+S+1),this[E]=S&255,E+1},h.prototype.writeInt16LE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,2,32767,-32768),this[E]=S&255,this[E+1]=S>>>8,E+2},h.prototype.writeInt16BE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,2,32767,-32768),this[E]=S>>>8,this[E+1]=S&255,E+2},h.prototype.writeInt32LE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,4,2147483647,-2147483648),this[E]=S&255,this[E+1]=S>>>8,this[E+2]=S>>>16,this[E+3]=S>>>24,E+4},h.prototype.writeInt32BE=function(S,E,O){return S=+S,E=E>>>0,O||Lt(this,S,E,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[E]=S>>>24,this[E+1]=S>>>16,this[E+2]=S>>>8,this[E+3]=S&255,E+4};function qt(N,S,E,O,z,G){if(E+O>N.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Pt(N,S,E,O,z){return S=+S,E=E>>>0,z||qt(N,S,E,4,34028234663852886e22,-34028234663852886e22),v.write(N,S,E,O,23,4),E+4}h.prototype.writeFloatLE=function(S,E,O){return Pt(this,S,E,!0,O)},h.prototype.writeFloatBE=function(S,E,O){return Pt(this,S,E,!1,O)};function ne(N,S,E,O,z){return S=+S,E=E>>>0,z||qt(N,S,E,8,17976931348623157e292,-17976931348623157e292),v.write(N,S,E,O,52,8),E+8}h.prototype.writeDoubleLE=function(S,E,O){return ne(this,S,E,!0,O)},h.prototype.writeDoubleBE=function(S,E,O){return ne(this,S,E,!1,O)},h.prototype.copy=function(S,E,O,z){if(O||(O=0),!z&&z!==0&&(z=this.length),E>=S.length&&(E=S.length),E||(E=0),z>0&&z<O&&(z=O),z===O||S.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("sourceStart out of bounds");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),S.length-E<z-O&&(z=S.length-E+O);var G=z-O,tt;if(this===S&&O<E&&E<z)for(tt=G-1;tt>=0;--tt)S[tt+E]=this[tt+O];else if(G<1e3)for(tt=0;tt<G;++tt)S[tt+E]=this[tt+O];else Uint8Array.prototype.set.call(S,this.subarray(O,O+G),E);return G},h.prototype.fill=function(S,E,O,z){if(typeof S=="string"){if(typeof E=="string"?(z=E,E=0,O=this.length):typeof O=="string"&&(z=O,O=this.length),S.length===1){var G=S.charCodeAt(0);G<256&&(S=G)}if(z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!h.isEncoding(z))throw new TypeError("Unknown encoding: "+z)}else typeof S=="number"&&(S=S&255);if(E<0||this.length<E||this.length<O)throw new RangeError("Out of range index");if(O<=E)return this;E=E>>>0,O=O===void 0?this.length:O>>>0,S||(S=0);var tt;if(typeof S=="number")for(tt=E;tt<O;++tt)this[tt]=S;else{var Tt=h.isBuffer(S)?S:new h(S,z),Bt=Tt.length;for(tt=0;tt<O-E;++tt)this[tt+E]=Tt[tt%Bt]}return this};var L=/[^+/0-9A-Za-z-_]/g;function D(N){if(N=N.trim().replace(L,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function $(N){return N<16?"0"+N.toString(16):N.toString(16)}function it(N,S){S=S||1/0;for(var E,O=N.length,z=null,G=[],tt=0;tt<O;++tt){if(E=N.charCodeAt(tt),E>55295&&E<57344){if(!z){if(E>56319){(S-=3)>-1&&G.push(239,191,189);continue}else if(tt+1===O){(S-=3)>-1&&G.push(239,191,189);continue}z=E;continue}if(E<56320){(S-=3)>-1&&G.push(239,191,189),z=E;continue}E=(z-55296<<10|E-56320)+65536}else z&&(S-=3)>-1&&G.push(239,191,189);if(z=null,E<128){if((S-=1)<0)break;G.push(E)}else if(E<2048){if((S-=2)<0)break;G.push(E>>6|192,E&63|128)}else if(E<65536){if((S-=3)<0)break;G.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((S-=4)<0)break;G.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return G}function gt(N){for(var S=[],E=0;E<N.length;++E)S.push(N.charCodeAt(E)&255);return S}function at(N,S){for(var E,O,z,G=[],tt=0;tt<N.length&&!((S-=2)<0);++tt)E=N.charCodeAt(tt),O=E>>8,z=E%256,G.push(z),G.push(O);return G}function It(N){return m.toByteArray(D(N))}function St(N,S,E,O){for(var z=0;z<O&&!(z+E>=S.length||z>=N.length);++z)S[z+E]=N[z];return z}function Qt(N){return N instanceof ArrayBuffer||N!=null&&N.constructor!=null&&N.constructor.name==="ArrayBuffer"&&typeof N.byteLength=="number"}function he(N){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(N)}function Re(N){return N!==N}}).call(s,u(1))},function(p,s){"use strict";s.byteLength=h,s.toByteArray=I,s.fromByteArray=C;for(var u=[],f=[],m=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,F=v.length;_<F;++_)u[_]=v[_],f[v.charCodeAt(_)]=_;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function w(T){var M=T.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return T[M-2]==="="?2:T[M-1]==="="?1:0}function h(T){return T.length*3/4-w(T)}function I(T){var M,U,J,Z,j,bt,ot=T.length;j=w(T),bt=new m(ot*3/4-j),J=j>0?ot-4:ot;var xt=0;for(M=0,U=0;M<J;M+=4,U+=3)Z=f[T.charCodeAt(M)]<<18|f[T.charCodeAt(M+1)]<<12|f[T.charCodeAt(M+2)]<<6|f[T.charCodeAt(M+3)],bt[xt++]=Z>>16&255,bt[xt++]=Z>>8&255,bt[xt++]=Z&255;return j===2?(Z=f[T.charCodeAt(M)]<<2|f[T.charCodeAt(M+1)]>>4,bt[xt++]=Z&255):j===1&&(Z=f[T.charCodeAt(M)]<<10|f[T.charCodeAt(M+1)]<<4|f[T.charCodeAt(M+2)]>>2,bt[xt++]=Z>>8&255,bt[xt++]=Z&255),bt}function y(T){return u[T>>18&63]+u[T>>12&63]+u[T>>6&63]+u[T&63]}function A(T,M,U){for(var J,Z=[],j=M;j<U;j+=3)J=(T[j]<<16)+(T[j+1]<<8)+T[j+2],Z.push(y(J));return Z.join("")}function C(T){for(var M,U=T.length,J=U%3,Z="",j=[],bt=16383,ot=0,xt=U-J;ot<xt;ot+=bt)j.push(A(T,ot,ot+bt>xt?xt:ot+bt));return J===1?(M=T[U-1],Z+=u[M>>2],Z+=u[M<<4&63],Z+="=="):J===2&&(M=(T[U-2]<<8)+T[U-1],Z+=u[M>>10],Z+=u[M>>4&63],Z+=u[M<<2&63],Z+="="),j.push(Z),j.join("")}},function(p,s){s.read=function(u,f,m,v,_){var F,w,h=_*8-v-1,I=(1<<h)-1,y=I>>1,A=-7,C=m?_-1:0,T=m?-1:1,M=u[f+C];for(C+=T,F=M&(1<<-A)-1,M>>=-A,A+=h;A>0;F=F*256+u[f+C],C+=T,A-=8);for(w=F&(1<<-A)-1,F>>=-A,A+=v;A>0;w=w*256+u[f+C],C+=T,A-=8);if(F===0)F=1-y;else{if(F===I)return w?NaN:(M?-1:1)*(1/0);w=w+Math.pow(2,v),F=F-y}return(M?-1:1)*w*Math.pow(2,F-v)},s.write=function(u,f,m,v,_,F){var w,h,I,y=F*8-_-1,A=(1<<y)-1,C=A>>1,T=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=v?0:F-1,U=v?1:-1,J=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(h=isNaN(f)?1:0,w=A):(w=Math.floor(Math.log(f)/Math.LN2),f*(I=Math.pow(2,-w))<1&&(w--,I*=2),w+C>=1?f+=T/I:f+=T*Math.pow(2,1-C),f*I>=2&&(w++,I/=2),w+C>=A?(h=0,w=A):w+C>=1?(h=(f*I-1)*Math.pow(2,_),w=w+C):(h=f*Math.pow(2,C-1)*Math.pow(2,_),w=0));_>=8;u[m+M]=h&255,M+=U,h/=256,_-=8);for(w=w<<_|h,y+=_;y>0;u[m+M]=w&255,M+=U,w/=256,y-=8);u[m+M-U]|=J*128}},function(p,s){p.exports=function(u){return u.webpackPolyfill||(u.deprecate=function(){},u.paths=[],u.children=[],u.webpackPolyfill=1),u}},function(p,s,u){"use strict";var f=u(7),m=new f,v={};function _(w){v[w]||(typeof m[w]=="function"?v[w]=function(){return m[w].apply(m,arguments)}:v[w]=m[w])}for(var F in m)_(F);v.initializeTTYs=function(){m.stdin===null&&(m.initializeTTYs(),v.stdin=m.stdin,v.stdout=m.stdout,v.stderr=m.stderr)},m.nextTick(function(){v.initializeTTYs()}),p.exports=v},function(p,s,u){(function(f){"use strict";var m=this&&this.__extends||function(I,y){for(var A in y)y.hasOwnProperty(A)&&(I[A]=y[A]);function C(){this.constructor=I}I.prototype=y===null?Object.create(y):(C.prototype=y.prototype,new C)},v=u(8),_=null,F=function(){function I(y,A){this.fun=y,this.array=A}return I.prototype.run=function(){this.fun.apply(null,this.array)},I}(),w=function(){function I(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return I.prototype.push=function(y){var A=this;this._queue.push(y)===1&&!this._draining&&setTimeout(function(){return A._drainQueue()},0)},I.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},I.prototype._drainQueue=function(){var y=this;if(!this._draining){var A=setTimeout(function(){return y._cleanUpNextTick()});this._draining=!0;for(var C=this._queue.length;C;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<C;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,C=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(A)}},I}(),h=function(I){m(y,I);function y(){I.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new w,this.execPath=f,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return y.prototype.chdir=function(A){_===null&&(_=u(9)),this._cwd=_.resolve(A)},y.prototype.cwd=function(){return this._cwd},y.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},y.prototype.nextTick=function(A){for(var C=[],T=1;T<arguments.length;T++)C[T-1]=arguments[T];this._queue.push(new F(A,C))},y.prototype.abort=function(){this.emit("abort")},y.prototype.exit=function(A){this.exitCode=A,this.emit("exit",[A])},y.prototype.getgid=function(){return this._gid},y.prototype.setgid=function(A){typeof A=="number"?this._gid=A:this._gid=1},y.prototype.getuid=function(){return this._uid},y.prototype.setuid=function(A){typeof A=="number"?this._uid=A:this._uid=1},y.prototype.kill=function(A,C){this.emit("kill",[A,C])},y.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},y.prototype.umask=function(A){A===void 0&&(A=this._mask);var C=this._mask;return this._mask=A,this.emit("umask",[A]),C},y.prototype.hrtime=function(){var A;typeof performance<"u"?A=performance.now():Date.now?A=Date.now():A=new Date().getTime();var C=A/1e3|0;return A-=C*1e3,A=A*1e6|0,[C,A]},y.prototype.initializeTTYs=function(){if(this.stdout===null){var A=u(10);this.stdout=new A,this.stderr=new A,this.stdin=new A}},y.prototype.disconnect=function(){},y}(v.EventEmitter);p.exports=h}).call(s,"/")},function(p,s){function u(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}p.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._maxListeners=void 0,u.defaultMaxListeners=10,u.prototype.setMaxListeners=function(F){if(!m(F)||F<0||isNaN(F))throw TypeError("n must be a positive number");return this._maxListeners=F,this},u.prototype.emit=function(F){var w,h,I,y,A,C;if(this._events||(this._events={}),F==="error"&&(!this._events.error||v(this._events.error)&&!this._events.error.length)){if(w=arguments[1],w instanceof Error)throw w;var T=new Error('Uncaught, unspecified "error" event. ('+w+")");throw T.context=w,T}if(h=this._events[F],_(h))return!1;if(f(h))switch(arguments.length){case 1:h.call(this);break;case 2:h.call(this,arguments[1]);break;case 3:h.call(this,arguments[1],arguments[2]);break;default:y=Array.prototype.slice.call(arguments,1),h.apply(this,y)}else if(v(h))for(y=Array.prototype.slice.call(arguments,1),C=h.slice(),I=C.length,A=0;A<I;A++)C[A].apply(this,y);return!0},u.prototype.addListener=function(F,w){var h;if(!f(w))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",F,f(w.listener)?w.listener:w),this._events[F]?v(this._events[F])?this._events[F].push(w):this._events[F]=[this._events[F],w]:this._events[F]=w,v(this._events[F])&&!this._events[F].warned&&(_(this._maxListeners)?h=u.defaultMaxListeners:h=this._maxListeners,h&&h>0&&this._events[F].length>h&&(this._events[F].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[F].length),typeof console.trace=="function"&&console.trace())),this},u.prototype.on=u.prototype.addListener,u.prototype.once=function(F,w){if(!f(w))throw TypeError("listener must be a function");var h=!1;function I(){this.removeListener(F,I),h||(h=!0,w.apply(this,arguments))}return I.listener=w,this.on(F,I),this},u.prototype.removeListener=function(F,w){var h,I,y,A;if(!f(w))throw TypeError("listener must be a function");if(!this._events||!this._events[F])return this;if(h=this._events[F],y=h.length,I=-1,h===w||f(h.listener)&&h.listener===w)delete this._events[F],this._events.removeListener&&this.emit("removeListener",F,w);else if(v(h)){for(A=y;A-- >0;)if(h[A]===w||h[A].listener&&h[A].listener===w){I=A;break}if(I<0)return this;h.length===1?(h.length=0,delete this._events[F]):h.splice(I,1),this._events.removeListener&&this.emit("removeListener",F,w)}return this},u.prototype.removeAllListeners=function(F){var w,h;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[F]&&delete this._events[F],this;if(arguments.length===0){for(w in this._events)w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events={},this}if(h=this._events[F],f(h))this.removeListener(F,h);else if(h)for(;h.length;)this.removeListener(F,h[h.length-1]);return delete this._events[F],this},u.prototype.listeners=function(F){var w;return!this._events||!this._events[F]?w=[]:f(this._events[F])?w=[this._events[F]]:w=this._events[F].slice(),w},u.prototype.listenerCount=function(F){if(this._events){var w=this._events[F];if(f(w))return 1;if(w)return w.length}return 0},u.listenerCount=function(F,w){return F.listenerCount(w)};function f(F){return typeof F=="function"}function m(F){return typeof F=="number"}function v(F){return typeof F=="object"&&F!==null}function _(F){return F===void 0}},function(p,s,u){(function(f){"use strict";var m=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function v(w){var h=m.exec(w);return h.shift(),h}var _=function(){function w(){}return w.normalize=function(h){h===""&&(h=".");var I=h.charAt(0)===w.sep;h=w._removeDuplicateSeps(h);for(var y=h.split(w.sep),A=[],C=0;C<y.length;C++){var T=y[C];T!=="."&&(T===".."&&(I||!I&&A.length>0&&A[0]!=="..")?A.pop():A.push(T))}if(!I&&A.length<2)switch(A.length){case 1:A[0]===""&&A.unshift(".");break;default:A.push(".")}return h=A.join(w.sep),I&&h.charAt(0)!==w.sep&&(h=w.sep+h),h},w.join=function(){for(var h=[],I=0;I<arguments.length;I++)h[I-0]=arguments[I];for(var y=[],A=0;A<h.length;A++){var C=h[A];if(typeof C!="string")throw new TypeError("Invalid argument type to path.join: "+typeof C);C!==""&&y.push(C)}return w.normalize(y.join(w.sep))},w.resolve=function(){for(var h=[],I=0;I<arguments.length;I++)h[I-0]=arguments[I];for(var y=[],A=0;A<h.length;A++){var C=h[A];if(typeof C!="string")throw new TypeError("Invalid argument type to path.join: "+typeof C);C!==""&&(C.charAt(0)===w.sep&&(y=[]),y.push(C))}var T=w.normalize(y.join(w.sep));if(T.length>1&&T.charAt(T.length-1)===w.sep)return T.substr(0,T.length-1);if(T.charAt(0)!==w.sep){T.charAt(0)==="."&&(T.length===1||T.charAt(1)===w.sep)&&(T=T.length===1?"":T.substr(2));var M=f.cwd();T!==""?T=this.normalize(M+(M!=="/"?w.sep:"")+T):T=M}return T},w.relative=function(h,I){var y;h=w.resolve(h),I=w.resolve(I);var A=h.split(w.sep),C=I.split(w.sep);C.shift(),A.shift();var T=0,M=[];for(y=0;y<A.length;y++){var U=A[y];if(U!==C[y]){T=A.length-y;break}}M=C.slice(y),A.length===1&&A[0]===""&&(T=0),T>A.length&&(T=A.length);var J="";for(y=0;y<T;y++)J+="../";return J+=M.join(w.sep),J.length>1&&J.charAt(J.length-1)===w.sep&&(J=J.substr(0,J.length-1)),J},w.dirname=function(h){h=w._removeDuplicateSeps(h);var I=h.charAt(0)===w.sep,y=h.split(w.sep);return y.pop()===""&&y.length>0&&y.pop(),y.length>1||y.length===1&&!I?y.join(w.sep):I?w.sep:"."},w.basename=function(h,I){if(I===void 0&&(I=""),h==="")return h;h=w.normalize(h);var y=h.split(w.sep),A=y[y.length-1];if(A===""&&y.length>1)return y[y.length-2];if(I.length>0){var C=A.substr(A.length-I.length);if(C===I)return A.substr(0,A.length-I.length)}return A},w.extname=function(h){h=w.normalize(h);var I=h.split(w.sep);if(h=I.pop(),h===""&&I.length>0&&(h=I.pop()),h==="..")return"";var y=h.lastIndexOf(".");return y===-1||y===0?"":h.substr(y)},w.isAbsolute=function(h){return h.length>0&&h.charAt(0)===w.sep},w._makeLong=function(h){return h},w.parse=function(h){var I=v(h);return{root:I[0],dir:I[0]+I[1].slice(0,-1),base:I[2],ext:I[3],name:I[2].slice(0,I[2].length-I[3].length)}},w.format=function(h){if(h===null||typeof h!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof h);var I=h.root||"";if(typeof I!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof h.root);var y=h.dir?h.dir+w.sep:"",A=h.base||"";return y+A},w._removeDuplicateSeps=function(h){return h=h.replace(this._replaceRegex,this.sep),h},w.sep="/",w._replaceRegex=new RegExp("//+","g"),w.delimiter=":",w.posix=w,w.win32=w,w}(),F=_;p.exports=_}).call(s,u(6))},function(p,s,u){(function(f){"use strict";var m=this&&this.__extends||function(F,w){for(var h in w)w.hasOwnProperty(h)&&(F[h]=w[h]);function I(){this.constructor=F}F.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)},v=u(11),_=function(F){m(w,F);function w(){F.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return w.prototype.setRawMode=function(h){this.isRaw!==h&&(this.isRaw=h,this.emit("modeChange"))},w.prototype.changeColumns=function(h){h!==this.columns&&(this.columns=h,this.emit("resize"))},w.prototype.changeRows=function(h){h!==this.rows&&(this.rows=h,this.emit("resize"))},w.isatty=function(h){return h&&h instanceof w},w.prototype._write=function(h,I,y){var A;try{var C;typeof h=="string"?C=new f(h,I):C=h,this._bufferedWrites.push(C),this._waitingForWrites&&this._read(1024)}catch(T){A=T}finally{y(A)}},w.prototype._read=function(h){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},w}(v.Duplex);p.exports=_}).call(s,u(1))},function(p,s,u){p.exports=v;var f=u(8).EventEmitter,m=u(12);m(v,f),v.Readable=u(13),v.Writable=u(27),v.Duplex=u(28),v.Transform=u(29),v.PassThrough=u(30),v.Stream=v;function v(){f.call(this)}v.prototype.pipe=function(_,F){var w=this;function h(U){_.writable&&_.write(U)===!1&&w.pause&&w.pause()}w.on("data",h);function I(){w.readable&&w.resume&&w.resume()}_.on("drain",I),!_._isStdio&&(!F||F.end!==!1)&&(w.on("end",A),w.on("close",C));var y=!1;function A(){y||(y=!0,_.end())}function C(){y||(y=!0,typeof _.destroy=="function"&&_.destroy())}function T(U){if(M(),f.listenerCount(this,"error")===0)throw U}w.on("error",T),_.on("error",T);function M(){w.removeListener("data",h),_.removeListener("drain",I),w.removeListener("end",A),w.removeListener("close",C),w.removeListener("error",T),_.removeListener("error",T),w.removeListener("end",M),w.removeListener("close",M),_.removeListener("close",M)}return w.on("end",M),w.on("close",M),_.on("close",M),_.emit("pipe",w),_}},function(p,s){typeof Object.create=="function"?p.exports=function(f,m){f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:p.exports=function(f,m){f.super_=m;var v=function(){};v.prototype=m.prototype,f.prototype=new v,f.prototype.constructor=f}},function(p,s,u){(function(f){var m=function(){try{return u(11)}catch{}}();s=p.exports=u(14),s.Stream=m||s,s.Readable=s,s.Writable=u(22),s.Duplex=u(21),s.Transform=u(25),s.PassThrough=u(26),!f.browser&&f.env.READABLE_STREAM==="disable"&&m&&(p.exports=m)}).call(s,u(6))},function(p,s,u){(function(f){"use strict";p.exports=j;var m=u(15),v=u(16),_;j.ReadableState=Z;var F=u(8).EventEmitter,w=function(L,D){return L.listeners(D).length},h;(function(){try{h=u(11)}catch{}finally{h||(h=u(8).EventEmitter)}})();var I=u(2).Buffer,y=u(17),A=u(18);A.inherits=u(12);var C=u(19),T=void 0;C&&C.debuglog?T=C.debuglog("stream"):T=function(){};var M=u(20),U;A.inherits(j,h);function J(L,D,$){if(typeof L.prependListener=="function")return L.prependListener(D,$);!L._events||!L._events[D]?L.on(D,$):v(L._events[D])?L._events[D].unshift($):L._events[D]=[$,L._events[D]]}function Z(L,D){_=_||u(21),L=L||{},this.objectMode=!!L.objectMode,D instanceof _&&(this.objectMode=this.objectMode||!!L.readableObjectMode);var $=L.highWaterMark,it=this.objectMode?16:16*1024;this.highWaterMark=$||$===0?$:it,this.highWaterMark=~~this.highWaterMark,this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(U||(U=u(24).StringDecoder),this.decoder=new U(L.encoding),this.encoding=L.encoding)}function j(L){if(_=_||u(21),!(this instanceof j))return new j(L);this._readableState=new Z(L,this),this.readable=!0,L&&typeof L.read=="function"&&(this._read=L.read),h.call(this)}j.prototype.push=function(L,D){var $=this._readableState;return!$.objectMode&&typeof L=="string"&&(D=D||$.defaultEncoding,D!==$.encoding&&(L=y.from(L,D),D="")),bt(this,$,L,D,!1)},j.prototype.unshift=function(L){var D=this._readableState;return bt(this,D,L,"",!0)},j.prototype.isPaused=function(){return this._readableState.flowing===!1};function bt(L,D,$,it,gt){var at=nt(D,$);if(at)L.emit("error",at);else if($===null)D.reading=!1,dt(L,D);else if(D.objectMode||$&&$.length>0)if(D.ended&&!gt){var It=new Error("stream.push() after EOF");L.emit("error",It)}else if(D.endEmitted&&gt){var St=new Error("stream.unshift() after end event");L.emit("error",St)}else{var Qt;D.decoder&&!gt&&!it&&($=D.decoder.write($),Qt=!D.objectMode&&$.length===0),gt||(D.reading=!1),Qt||(D.flowing&&D.length===0&&!D.sync?(L.emit("data",$),L.read(0)):(D.length+=D.objectMode?1:$.length,gt?D.buffer.unshift($):D.buffer.push($),D.needReadable&&At(L))),Mt(L,D)}else gt||(D.reading=!1);return ot(D)}function ot(L){return!L.ended&&(L.needReadable||L.length<L.highWaterMark||L.length===0)}j.prototype.setEncoding=function(L){return U||(U=u(24).StringDecoder),this._readableState.decoder=new U(L),this._readableState.encoding=L,this};var xt=8388608;function mt(L){return L>=xt?L=xt:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L}function W(L,D){return L<=0||D.length===0&&D.ended?0:D.objectMode?1:L!==L?D.flowing&&D.length?D.buffer.head.data.length:D.length:(L>D.highWaterMark&&(D.highWaterMark=mt(L)),L<=D.length?L:D.ended?D.length:(D.needReadable=!0,0))}j.prototype.read=function(L){T("read",L),L=parseInt(L,10);var D=this._readableState,$=L;if(L!==0&&(D.emittedReadable=!1),L===0&&D.needReadable&&(D.length>=D.highWaterMark||D.ended))return T("read: emitReadable",D.length,D.ended),D.length===0&&D.ended?Lt(this):At(this),null;if(L=W(L,D),L===0&&D.ended)return D.length===0&&Lt(this),null;var it=D.needReadable;T("need readable",it),(D.length===0||D.length-L<D.highWaterMark)&&(it=!0,T("length less than watermark",it)),D.ended||D.reading?(it=!1,T("reading or ended",it)):it&&(T("do read"),D.reading=!0,D.sync=!0,D.length===0&&(D.needReadable=!0),this._read(D.highWaterMark),D.sync=!1,D.reading||(L=W($,D)));var gt;return L>0?gt=ht(L,D):gt=null,gt===null?(D.needReadable=!0,L=0):D.length-=L,D.length===0&&(D.ended||(D.needReadable=!0),$!==L&&D.ended&&Lt(this)),gt!==null&&this.emit("data",gt),gt};function nt(L,D){var $=null;return!I.isBuffer(D)&&typeof D!="string"&&D!==null&&D!==void 0&&!L.objectMode&&($=new TypeError("Invalid non-string/buffer chunk")),$}function dt(L,D){if(!D.ended){if(D.decoder){var $=D.decoder.end();$&&$.length&&(D.buffer.push($),D.length+=D.objectMode?1:$.length)}D.ended=!0,At(L)}}function At(L){var D=L._readableState;D.needReadable=!1,D.emittedReadable||(T("emitReadable",D.flowing),D.emittedReadable=!0,D.sync?m(vt,L):vt(L))}function vt(L){T("emit readable"),L.emit("readable"),et(L)}function Mt(L,D){D.readingMore||(D.readingMore=!0,m(Ot,L,D))}function Ot(L,D){for(var $=D.length;!D.reading&&!D.flowing&&!D.ended&&D.length<D.highWaterMark&&(T("maybeReadMore read 0"),L.read(0),$!==D.length);)$=D.length;D.readingMore=!1}j.prototype._read=function(L){this.emit("error",new Error("_read() is not implemented"))},j.prototype.pipe=function(L,D){var $=this,it=this._readableState;switch(it.pipesCount){case 0:it.pipes=L;break;case 1:it.pipes=[it.pipes,L];break;default:it.pipes.push(L);break}it.pipesCount+=1,T("pipe count=%d opts=%j",it.pipesCount,D);var gt=(!D||D.end!==!1)&&L!==f.stdout&&L!==f.stderr,at=gt?St:Re;it.endEmitted?m(at):$.once("end",at),L.on("unpipe",It);function It(tt){T("onunpipe"),tt===$&&Re()}function St(){T("onend"),L.end()}var Qt=Ft($);L.on("drain",Qt);var he=!1;function Re(){T("cleanup"),L.removeListener("close",O),L.removeListener("finish",z),L.removeListener("drain",Qt),L.removeListener("error",E),L.removeListener("unpipe",It),$.removeListener("end",St),$.removeListener("end",Re),$.removeListener("data",S),he=!0,it.awaitDrain&&(!L._writableState||L._writableState.needDrain)&&Qt()}var N=!1;$.on("data",S);function S(tt){T("ondata"),N=!1;var Tt=L.write(tt);Tt===!1&&!N&&((it.pipesCount===1&&it.pipes===L||it.pipesCount>1&&ne(it.pipes,L)!==-1)&&!he&&(T("false write response, pause",$._readableState.awaitDrain),$._readableState.awaitDrain++,N=!0),$.pause())}function E(tt){T("onerror",tt),G(),L.removeListener("error",E),w(L,"error")===0&&L.emit("error",tt)}J(L,"error",E);function O(){L.removeListener("finish",z),G()}L.once("close",O);function z(){T("onfinish"),L.removeListener("close",O),G()}L.once("finish",z);function G(){T("unpipe"),$.unpipe(L)}return L.emit("pipe",$),it.flowing||(T("pipe resume"),$.resume()),L};function Ft(L){return function(){var D=L._readableState;T("pipeOnDrain",D.awaitDrain),D.awaitDrain&&D.awaitDrain--,D.awaitDrain===0&&w(L,"data")&&(D.flowing=!0,et(L))}}j.prototype.unpipe=function(L){var D=this._readableState;if(D.pipesCount===0)return this;if(D.pipesCount===1)return L&&L!==D.pipes?this:(L||(L=D.pipes),D.pipes=null,D.pipesCount=0,D.flowing=!1,L&&L.emit("unpipe",this),this);if(!L){var $=D.pipes,it=D.pipesCount;D.pipes=null,D.pipesCount=0,D.flowing=!1;for(var gt=0;gt<it;gt++)$[gt].emit("unpipe",this);return this}var at=ne(D.pipes,L);return at===-1?this:(D.pipes.splice(at,1),D.pipesCount-=1,D.pipesCount===1&&(D.pipes=D.pipes[0]),L.emit("unpipe",this),this)},j.prototype.on=function(L,D){var $=h.prototype.on.call(this,L,D);if(L==="data")this._readableState.flowing!==!1&&this.resume();else if(L==="readable"){var it=this._readableState;!it.endEmitted&&!it.readableListening&&(it.readableListening=it.needReadable=!0,it.emittedReadable=!1,it.reading?it.length&&At(this,it):m(Kt,this))}return $},j.prototype.addListener=j.prototype.on;function Kt(L){T("readable nexttick read 0"),L.read(0)}j.prototype.resume=function(){var L=this._readableState;return L.flowing||(T("resume"),L.flowing=!0,H(this,L)),this};function H(L,D){D.resumeScheduled||(D.resumeScheduled=!0,m(V,L,D))}function V(L,D){D.reading||(T("resume read 0"),L.read(0)),D.resumeScheduled=!1,D.awaitDrain=0,L.emit("resume"),et(L),D.flowing&&!D.reading&&L.read(0)}j.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function et(L){var D=L._readableState;for(T("flow",D.flowing);D.flowing&&L.read()!==null;);}j.prototype.wrap=function(L){var D=this._readableState,$=!1,it=this;L.on("end",function(){if(T("wrapped end"),D.decoder&&!D.ended){var It=D.decoder.end();It&&It.length&&it.push(It)}it.push(null)}),L.on("data",function(It){if(T("wrapped data"),D.decoder&&(It=D.decoder.write(It)),!(D.objectMode&&It==null)&&!(!D.objectMode&&(!It||!It.length))){var St=it.push(It);St||($=!0,L.pause())}});for(var gt in L)this[gt]===void 0&&typeof L[gt]=="function"&&(this[gt]=function(It){return function(){return L[It].apply(L,arguments)}}(gt));var at=["error","close","destroy","pause","resume"];return Pt(at,function(It){L.on(It,it.emit.bind(it,It))}),it._read=function(It){T("wrapped _read",It),$&&($=!1,L.resume())},it},j._fromList=ht;function ht(L,D){if(D.length===0)return null;var $;return D.objectMode?$=D.buffer.shift():!L||L>=D.length?(D.decoder?$=D.buffer.join(""):D.buffer.length===1?$=D.buffer.head.data:$=D.buffer.concat(D.length),D.buffer.clear()):$=Nt(L,D.buffer,D.decoder),$}function Nt(L,D,$){var it;return L<D.head.data.length?(it=D.head.data.slice(0,L),D.head.data=D.head.data.slice(L)):L===D.head.data.length?it=D.shift():it=$?Et(L,D):kt(L,D),it}function Et(L,D){var $=D.head,it=1,gt=$.data;for(L-=gt.length;$=$.next;){var at=$.data,It=L>at.length?at.length:L;if(It===at.length?gt+=at:gt+=at.slice(0,L),L-=It,L===0){It===at.length?(++it,$.next?D.head=$.next:D.head=D.tail=null):(D.head=$,$.data=at.slice(It));break}++it}return D.length-=it,gt}function kt(L,D){var $=y.allocUnsafe(L),it=D.head,gt=1;for(it.data.copy($),L-=it.data.length;it=it.next;){var at=it.data,It=L>at.length?at.length:L;if(at.copy($,$.length-L,0,It),L-=It,L===0){It===at.length?(++gt,it.next?D.head=it.next:D.head=D.tail=null):(D.head=it,it.data=at.slice(It));break}++gt}return D.length-=gt,$}function Lt(L){var D=L._readableState;if(D.length>0)throw new Error('"endReadable()" called on non-empty stream');D.endEmitted||(D.ended=!0,m(qt,D,L))}function qt(L,D){!L.endEmitted&&L.length===0&&(L.endEmitted=!0,D.readable=!1,D.emit("end"))}function Pt(L,D){for(var $=0,it=L.length;$<it;$++)D(L[$],$)}function ne(L,D){for(var $=0,it=L.length;$<it;$++)if(L[$]===D)return $;return-1}}).call(s,u(6))},function(p,s,u){(function(f){"use strict";!f.version||f.version.indexOf("v0.")===0||f.version.indexOf("v1.")===0&&f.version.indexOf("v1.8.")!==0?p.exports=m:p.exports=f.nextTick;function m(v,_,F,w){if(typeof v!="function")throw new TypeError('"callback" argument must be a function');var h=arguments.length,I,y;switch(h){case 0:case 1:return f.nextTick(v);case 2:return f.nextTick(function(){v.call(null,_)});case 3:return f.nextTick(function(){v.call(null,_,F)});case 4:return f.nextTick(function(){v.call(null,_,F,w)});default:for(I=new Array(h-1),y=0;y<I.length;)I[y++]=arguments[y];return f.nextTick(function(){v.apply(null,I)})}}}).call(s,u(6))},function(p,s){var u={}.toString;p.exports=Array.isArray||function(f){return u.call(f)=="[object Array]"}},function(p,s,u){(function(f){"use strict";var m=u(2),v=m.Buffer,_=m.SlowBuffer,F=m.kMaxLength||2147483647;s.alloc=function(h,I,y){if(typeof v.alloc=="function")return v.alloc(h,I,y);if(typeof y=="number")throw new TypeError("encoding must not be number");if(typeof h!="number")throw new TypeError("size must be a number");if(h>F)throw new RangeError("size is too large");var A=y,C=I;C===void 0&&(A=void 0,C=0);var T=new v(h);if(typeof C=="string")for(var M=new v(C,A),U=M.length,J=-1;++J<h;)T[J]=M[J%U];else T.fill(C);return T},s.allocUnsafe=function(h){if(typeof v.allocUnsafe=="function")return v.allocUnsafe(h);if(typeof h!="number")throw new TypeError("size must be a number");if(h>F)throw new RangeError("size is too large");return new v(h)},s.from=function(h,I,y){if(typeof v.from=="function"&&(!f.Uint8Array||Uint8Array.from!==v.from))return v.from(h,I,y);if(typeof h=="number")throw new TypeError('"value" argument must not be a number');if(typeof h=="string")return new v(h,I);if(typeof ArrayBuffer<"u"&&h instanceof ArrayBuffer){var A=I;if(arguments.length===1)return new v(h);typeof A>"u"&&(A=0);var C=y;if(typeof C>"u"&&(C=h.byteLength-A),A>=h.byteLength)throw new RangeError("'offset' is out of bounds");if(C>h.byteLength-A)throw new RangeError("'length' is out of bounds");return new v(h.slice(A,A+C))}if(v.isBuffer(h)){var T=new v(h.length);return h.copy(T,0,0,h.length),T}if(h){if(Array.isArray(h)||typeof ArrayBuffer<"u"&&h.buffer instanceof ArrayBuffer||"length"in h)return new v(h);if(h.type==="Buffer"&&Array.isArray(h.data))return new v(h.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},s.allocUnsafeSlow=function(h){if(typeof v.allocUnsafeSlow=="function")return v.allocUnsafeSlow(h);if(typeof h!="number")throw new TypeError("size must be a number");if(h>=F)throw new RangeError("size is too large");return new _(h)}}).call(s,function(){return this}())},function(p,s,u){(function(f){function m(j){return Array.isArray?Array.isArray(j):Z(j)==="[object Array]"}s.isArray=m;function v(j){return typeof j=="boolean"}s.isBoolean=v;function _(j){return j===null}s.isNull=_;function F(j){return j==null}s.isNullOrUndefined=F;function w(j){return typeof j=="number"}s.isNumber=w;function h(j){return typeof j=="string"}s.isString=h;function I(j){return typeof j=="symbol"}s.isSymbol=I;function y(j){return j===void 0}s.isUndefined=y;function A(j){return Z(j)==="[object RegExp]"}s.isRegExp=A;function C(j){return typeof j=="object"&&j!==null}s.isObject=C;function T(j){return Z(j)==="[object Date]"}s.isDate=T;function M(j){return Z(j)==="[object Error]"||j instanceof Error}s.isError=M;function U(j){return typeof j=="function"}s.isFunction=U;function J(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||typeof j>"u"}s.isPrimitive=J,s.isBuffer=f.isBuffer;function Z(j){return Object.prototype.toString.call(j)}}).call(s,u(1))},function(p,s){},function(p,s,u){"use strict";var f=u(2).Buffer,m=u(17);p.exports=v;function v(){this.head=null,this.tail=null,this.length=0}v.prototype.push=function(_){var F={data:_,next:null};this.length>0?this.tail.next=F:this.head=F,this.tail=F,++this.length},v.prototype.unshift=function(_){var F={data:_,next:this.head};this.length===0&&(this.tail=F),this.head=F,++this.length},v.prototype.shift=function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}},v.prototype.clear=function(){this.head=this.tail=null,this.length=0},v.prototype.join=function(_){if(this.length===0)return"";for(var F=this.head,w=""+F.data;F=F.next;)w+=_+F.data;return w},v.prototype.concat=function(_){if(this.length===0)return m.alloc(0);if(this.length===1)return this.head.data;for(var F=m.allocUnsafe(_>>>0),w=this.head,h=0;w;)w.data.copy(F,h),h+=w.data.length,w=w.next;return F}},function(p,s,u){"use strict";var f=Object.keys||function(M){var U=[];for(var J in M)U.push(J);return U};p.exports=y;var m=u(15),v=u(18);v.inherits=u(12);var _=u(14),F=u(22);v.inherits(y,_);for(var w=f(F.prototype),h=0;h<w.length;h++){var I=w[h];y.prototype[I]||(y.prototype[I]=F.prototype[I])}function y(M){if(!(this instanceof y))return new y(M);_.call(this,M),F.call(this,M),M&&M.readable===!1&&(this.readable=!1),M&&M.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,M&&M.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",A)}function A(){this.allowHalfOpen||this._writableState.ended||m(C,this)}function C(M){M.end()}function T(M,U){for(var J=0,Z=M.length;J<Z;J++)U(M[J],J)}},function(p,s,u){(function(f){"use strict";p.exports=U;var m=u(15),v=!f.browser&&["v0.10","v0.9."].indexOf(f.version.slice(0,5))>-1?setImmediate:m,_;U.WritableState=T;var F=u(18);F.inherits=u(12);var w={deprecate:u(23)},h;(function(){try{h=u(11)}catch{}finally{h||(h=u(8).EventEmitter)}})();var I=u(2).Buffer,y=u(17);F.inherits(U,h);function A(){}function C(H,V,et){this.chunk=H,this.encoding=V,this.callback=et,this.next=null}function T(H,V){_=_||u(21),H=H||{},this.objectMode=!!H.objectMode,V instanceof _&&(this.objectMode=this.objectMode||!!H.writableObjectMode);var et=H.highWaterMark,ht=this.objectMode?16:16*1024;this.highWaterMark=et||et===0?et:ht,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var Nt=H.decodeStrings===!1;this.decodeStrings=!Nt,this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Et){W(V,Et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Kt(this)}T.prototype.getBuffer=function(){for(var V=this.bufferedRequest,et=[];V;)et.push(V),V=V.next;return et},function(){try{Object.defineProperty(T.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var M;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty(U,Symbol.hasInstance,{value:function(H){return M.call(this,H)?!0:H&&H._writableState instanceof T}})):M=function(H){return H instanceof this};function U(H){if(_=_||u(21),!M.call(U,this)&&!(this instanceof _))return new U(H);this._writableState=new T(H,this),this.writable=!0,H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev)),h.call(this)}U.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function J(H,V){var et=new Error("write after end");H.emit("error",et),m(V,et)}function Z(H,V,et,ht){var Nt=!0,Et=!1;return et===null?Et=new TypeError("May not write null values to stream"):typeof et!="string"&&et!==void 0&&!V.objectMode&&(Et=new TypeError("Invalid non-string/buffer chunk")),Et&&(H.emit("error",Et),m(ht,Et),Nt=!1),Nt}U.prototype.write=function(H,V,et){var ht=this._writableState,Nt=!1,Et=I.isBuffer(H);return typeof V=="function"&&(et=V,V=null),Et?V="buffer":V||(V=ht.defaultEncoding),typeof et!="function"&&(et=A),ht.ended?J(this,et):(Et||Z(this,ht,H,et))&&(ht.pendingcb++,Nt=bt(this,ht,Et,H,V,et)),Nt},U.prototype.cork=function(){var H=this._writableState;H.corked++},U.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,!H.writing&&!H.corked&&!H.finished&&!H.bufferProcessing&&H.bufferedRequest&&At(this,H))},U.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+V);return this._writableState.defaultEncoding=V,this};function j(H,V,et){return!H.objectMode&&H.decodeStrings!==!1&&typeof V=="string"&&(V=y.from(V,et)),V}function bt(H,V,et,ht,Nt,Et){et||(ht=j(V,ht,Nt),I.isBuffer(ht)&&(Nt="buffer"));var kt=V.objectMode?1:ht.length;V.length+=kt;var Lt=V.length<V.highWaterMark;if(Lt||(V.needDrain=!0),V.writing||V.corked){var qt=V.lastBufferedRequest;V.lastBufferedRequest=new C(ht,Nt,Et),qt?qt.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else ot(H,V,!1,kt,ht,Nt,Et);return Lt}function ot(H,V,et,ht,Nt,Et,kt){V.writelen=ht,V.writecb=kt,V.writing=!0,V.sync=!0,et?H._writev(Nt,V.onwrite):H._write(Nt,Et,V.onwrite),V.sync=!1}function xt(H,V,et,ht,Nt){--V.pendingcb,et?m(Nt,ht):Nt(ht),H._writableState.errorEmitted=!0,H.emit("error",ht)}function mt(H){H.writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0}function W(H,V){var et=H._writableState,ht=et.sync,Nt=et.writecb;if(mt(et),V)xt(H,et,ht,V,Nt);else{var Et=vt(et);!Et&&!et.corked&&!et.bufferProcessing&&et.bufferedRequest&&At(H,et),ht?v(nt,H,et,Et,Nt):nt(H,et,Et,Nt)}}function nt(H,V,et,ht){et||dt(H,V),V.pendingcb--,ht(),Ot(H,V)}function dt(H,V){V.length===0&&V.needDrain&&(V.needDrain=!1,H.emit("drain"))}function At(H,V){V.bufferProcessing=!0;var et=V.bufferedRequest;if(H._writev&&et&&et.next){var ht=V.bufferedRequestCount,Nt=new Array(ht),Et=V.corkedRequestsFree;Et.entry=et;for(var kt=0;et;)Nt[kt]=et,et=et.next,kt+=1;ot(H,V,!0,V.length,Nt,"",Et.finish),V.pendingcb++,V.lastBufferedRequest=null,Et.next?(V.corkedRequestsFree=Et.next,Et.next=null):V.corkedRequestsFree=new Kt(V)}else{for(;et;){var Lt=et.chunk,qt=et.encoding,Pt=et.callback,ne=V.objectMode?1:Lt.length;if(ot(H,V,!1,ne,Lt,qt,Pt),et=et.next,V.writing)break}et===null&&(V.lastBufferedRequest=null)}V.bufferedRequestCount=0,V.bufferedRequest=et,V.bufferProcessing=!1}U.prototype._write=function(H,V,et){et(new Error("_write() is not implemented"))},U.prototype._writev=null,U.prototype.end=function(H,V,et){var ht=this._writableState;typeof H=="function"?(et=H,H=null,V=null):typeof V=="function"&&(et=V,V=null),H!=null&&this.write(H,V),ht.corked&&(ht.corked=1,this.uncork()),!ht.ending&&!ht.finished&&Ft(this,ht,et)};function vt(H){return H.ending&&H.length===0&&H.bufferedRequest===null&&!H.finished&&!H.writing}function Mt(H,V){V.prefinished||(V.prefinished=!0,H.emit("prefinish"))}function Ot(H,V){var et=vt(V);return et&&(V.pendingcb===0?(Mt(H,V),V.finished=!0,H.emit("finish")):Mt(H,V)),et}function Ft(H,V,et){V.ending=!0,Ot(H,V),et&&(V.finished?m(et):H.once("finish",et)),V.ended=!0,H.writable=!1}function Kt(H){var V=this;this.next=null,this.entry=null,this.finish=function(et){var ht=V.entry;for(V.entry=null;ht;){var Nt=ht.callback;H.pendingcb--,Nt(et),ht=ht.next}H.corkedRequestsFree?H.corkedRequestsFree.next=V:H.corkedRequestsFree=V}}}).call(s,u(6))},function(p,s){(function(u){p.exports=f;function f(v,_){if(m("noDeprecation"))return v;var F=!1;function w(){if(!F){if(m("throwDeprecation"))throw new Error(_);m("traceDeprecation")?console.trace(_):console.warn(_),F=!0}return v.apply(this,arguments)}return w}function m(v){try{if(!u.localStorage)return!1}catch{return!1}var _=u.localStorage[v];return _==null?!1:String(_).toLowerCase()==="true"}}).call(s,function(){return this}())},function(p,s,u){var f=u(2).Buffer,m=f.isEncoding||function(I){switch(I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function v(I){if(I&&!m(I))throw new Error("Unknown encoding: "+I)}var _=s.StringDecoder=function(I){switch(this.encoding=(I||"utf8").toLowerCase().replace(/[-_]/,""),v(I),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=w;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=h;break;default:this.write=F;return}this.charBuffer=new f(6),this.charReceived=0,this.charLength=0};_.prototype.write=function(I){for(var y="";this.charLength;){var A=I.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:I.length;if(I.copy(this.charBuffer,this.charReceived,0,A),this.charReceived+=A,this.charReceived<this.charLength)return"";I=I.slice(A,I.length),y=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var T=y.charCodeAt(y.length-1);if(T>=55296&&T<=56319){this.charLength+=this.surrogateSize,y="";continue}if(this.charReceived=this.charLength=0,I.length===0)return y;break}this.detectIncompleteChar(I);var C=I.length;this.charLength&&(I.copy(this.charBuffer,0,I.length-this.charReceived,C),C-=this.charReceived),y+=I.toString(this.encoding,0,C);var C=y.length-1,T=y.charCodeAt(C);if(T>=55296&&T<=56319){var M=this.surrogateSize;return this.charLength+=M,this.charReceived+=M,this.charBuffer.copy(this.charBuffer,M,0,M),I.copy(this.charBuffer,0,0,M),y.substring(0,C)}return y},_.prototype.detectIncompleteChar=function(I){for(var y=I.length>=3?3:I.length;y>0;y--){var A=I[I.length-y];if(y==1&&A>>5==6){this.charLength=2;break}if(y<=2&&A>>4==14){this.charLength=3;break}if(y<=3&&A>>3==30){this.charLength=4;break}}this.charReceived=y},_.prototype.end=function(I){var y="";if(I&&I.length&&(y=this.write(I)),this.charReceived){var A=this.charReceived,C=this.charBuffer,T=this.encoding;y+=C.slice(0,A).toString(T)}return y};function F(I){return I.toString(this.encoding)}function w(I){this.charReceived=I.length%2,this.charLength=this.charReceived?2:0}function h(I){this.charReceived=I.length%3,this.charLength=this.charReceived?3:0}},function(p,s,u){"use strict";p.exports=F;var f=u(21),m=u(18);m.inherits=u(12),m.inherits(F,f);function v(h){this.afterTransform=function(I,y){return _(h,I,y)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function _(h,I,y){var A=h._transformState;A.transforming=!1;var C=A.writecb;if(!C)return h.emit("error",new Error("no writecb in Transform class"));A.writechunk=null,A.writecb=null,y!=null&&h.push(y),C(I);var T=h._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&h._read(T.highWaterMark)}function F(h){if(!(this instanceof F))return new F(h);f.call(this,h),this._transformState=new v(this);var I=this;this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(y,A){w(I,y,A)}):w(I)})}F.prototype.push=function(h,I){return this._transformState.needTransform=!1,f.prototype.push.call(this,h,I)},F.prototype._transform=function(h,I,y){throw new Error("_transform() is not implemented")},F.prototype._write=function(h,I,y){var A=this._transformState;if(A.writecb=y,A.writechunk=h,A.writeencoding=I,!A.transforming){var C=this._readableState;(A.needTransform||C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}},F.prototype._read=function(h){var I=this._transformState;I.writechunk!==null&&I.writecb&&!I.transforming?(I.transforming=!0,this._transform(I.writechunk,I.writeencoding,I.afterTransform)):I.needTransform=!0};function w(h,I,y){if(I)return h.emit("error",I);y!=null&&h.push(y);var A=h._writableState,C=h._transformState;if(A.length)throw new Error("Calling transform done when ws.length != 0");if(C.transforming)throw new Error("Calling transform done when still transforming");return h.push(null)}},function(p,s,u){"use strict";p.exports=v;var f=u(25),m=u(18);m.inherits=u(12),m.inherits(v,f);function v(_){if(!(this instanceof v))return new v(_);f.call(this,_)}v.prototype._transform=function(_,F,w){w(null,_)}},function(p,s,u){p.exports=u(22)},function(p,s,u){p.exports=u(21)},function(p,s,u){p.exports=u(25)},function(p,s,u){p.exports=u(26)},function(p,s,u){"use strict";var f=u(32),m=u(33),v=u(38),_=u(39),F=u(40),w=u(41),h=u(42),I=Object.prototype.toString;function y(T){if(!(this instanceof y))return new y(T);this.options=m.assign({chunkSize:16384,windowBits:0,to:""},T||{});var M=this.options;M.raw&&M.windowBits>=0&&M.windowBits<16&&(M.windowBits=-M.windowBits,M.windowBits===0&&(M.windowBits=-15)),M.windowBits>=0&&M.windowBits<16&&!(T&&T.windowBits)&&(M.windowBits+=32),M.windowBits>15&&M.windowBits<48&&(M.windowBits&15)===0&&(M.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var U=f.inflateInit2(this.strm,M.windowBits);if(U!==_.Z_OK)throw new Error(F[U]);this.header=new h,f.inflateGetHeader(this.strm,this.header)}y.prototype.push=function(T,M){var U=this.strm,J=this.options.chunkSize,Z=this.options.dictionary,j,bt,ot,xt,mt,W,nt=!1;if(this.ended)return!1;bt=M===~~M?M:M===!0?_.Z_FINISH:_.Z_NO_FLUSH,typeof T=="string"?U.input=v.binstring2buf(T):I.call(T)==="[object ArrayBuffer]"?U.input=new Uint8Array(T):U.input=T,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new m.Buf8(J),U.next_out=0,U.avail_out=J),j=f.inflate(U,_.Z_NO_FLUSH),j===_.Z_NEED_DICT&&Z&&(typeof Z=="string"?W=v.string2buf(Z):I.call(Z)==="[object ArrayBuffer]"?W=new Uint8Array(Z):W=Z,j=f.inflateSetDictionary(this.strm,W)),j===_.Z_BUF_ERROR&&nt===!0&&(j=_.Z_OK,nt=!1),j!==_.Z_STREAM_END&&j!==_.Z_OK)return this.onEnd(j),this.ended=!0,!1;U.next_out&&(U.avail_out===0||j===_.Z_STREAM_END||U.avail_in===0&&(bt===_.Z_FINISH||bt===_.Z_SYNC_FLUSH))&&(this.options.to==="string"?(ot=v.utf8border(U.output,U.next_out),xt=U.next_out-ot,mt=v.buf2string(U.output,ot),U.next_out=xt,U.avail_out=J-xt,xt&&m.arraySet(U.output,U.output,ot,xt,0),this.onData(mt)):this.onData(m.shrinkBuf(U.output,U.next_out))),U.avail_in===0&&U.avail_out===0&&(nt=!0)}while((U.avail_in>0||U.avail_out===0)&&j!==_.Z_STREAM_END);return j===_.Z_STREAM_END&&(bt=_.Z_FINISH),bt===_.Z_FINISH?(j=f.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===_.Z_OK):(bt===_.Z_SYNC_FLUSH&&(this.onEnd(_.Z_OK),U.avail_out=0),!0)},y.prototype.onData=function(T){this.chunks.push(T)},y.prototype.onEnd=function(T){T===_.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function A(T,M){var U=new y(M);if(U.push(T,!0),U.err)throw U.msg||F[U.err];return U.result}function C(T,M){return M=M||{},M.raw=!0,A(T,M)}s.Inflate=y,s.inflate=A,s.inflateRaw=C,s.ungzip=A},function(p,s,u){"use strict";var f=u(33),m=u(34),v=u(35),_=u(36),F=u(37),w=0,h=1,I=2,y=4,A=5,C=6,T=0,M=1,U=2,J=-2,Z=-3,j=-4,bt=-5,ot=8,xt=1,mt=2,W=3,nt=4,dt=5,At=6,vt=7,Mt=8,Ot=9,Ft=10,Kt=11,H=12,V=13,et=14,ht=15,Nt=16,Et=17,kt=18,Lt=19,qt=20,Pt=21,ne=22,L=23,D=24,$=25,it=26,gt=27,at=28,It=29,St=30,Qt=31,he=32,Re=852,N=592,S=15,E=S;function O(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}function z(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(q){var ct;return!q||!q.state?J:(ct=q.state,q.total_in=q.total_out=ct.total=0,q.msg="",ct.wrap&&(q.adler=ct.wrap&1),ct.mode=xt,ct.last=0,ct.havedict=0,ct.dmax=32768,ct.head=null,ct.hold=0,ct.bits=0,ct.lencode=ct.lendyn=new f.Buf32(Re),ct.distcode=ct.distdyn=new f.Buf32(N),ct.sane=1,ct.back=-1,T)}function tt(q){var ct;return!q||!q.state?J:(ct=q.state,ct.wsize=0,ct.whave=0,ct.wnext=0,G(q))}function Tt(q,ct){var R,lt;return!q||!q.state||(lt=q.state,ct<0?(R=0,ct=-ct):(R=(ct>>4)+1,ct<48&&(ct&=15)),ct&&(ct<8||ct>15))?J:(lt.window!==null&&lt.wbits!==ct&&(lt.window=null),lt.wrap=R,lt.wbits=ct,tt(q))}function Bt(q,ct){var R,lt;return q?(lt=new z,q.state=lt,lt.window=null,R=Tt(q,ct),R!==T&&(q.state=null),R):J}function zt(q){return Bt(q,E)}var $t=!0,Ut,Ne;function fi(q){if($t){var ct;for(Ut=new f.Buf32(512),Ne=new f.Buf32(32),ct=0;ct<144;)q.lens[ct++]=8;for(;ct<256;)q.lens[ct++]=9;for(;ct<280;)q.lens[ct++]=7;for(;ct<288;)q.lens[ct++]=8;for(F(h,q.lens,0,288,Ut,0,q.work,{bits:9}),ct=0;ct<32;)q.lens[ct++]=5;F(I,q.lens,0,32,Ne,0,q.work,{bits:5}),$t=!1}q.lencode=Ut,q.lenbits=9,q.distcode=Ne,q.distbits=5}function Je(q,ct,R,lt){var jt,ut=q.state;return ut.window===null&&(ut.wsize=1<<ut.wbits,ut.wnext=0,ut.whave=0,ut.window=new f.Buf8(ut.wsize)),lt>=ut.wsize?(f.arraySet(ut.window,ct,R-ut.wsize,ut.wsize,0),ut.wnext=0,ut.whave=ut.wsize):(jt=ut.wsize-ut.wnext,jt>lt&&(jt=lt),f.arraySet(ut.window,ct,R-lt,jt,ut.wnext),lt-=jt,lt?(f.arraySet(ut.window,ct,R-lt,lt,0),ut.wnext=lt,ut.whave=ut.wsize):(ut.wnext+=jt,ut.wnext===ut.wsize&&(ut.wnext=0),ut.whave<ut.wsize&&(ut.whave+=jt))),0}function Ke(q,ct){var R,lt,jt,ut,pe,ft,te,Q,K,li,Wt,yt,Qe,Ue,Zt=0,Dt,se,le,ae,hi,$e,Gt,de,oe=new f.Buf8(4),Te,Fe,qi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!q||!q.state||!q.output||!q.input&&q.avail_in!==0)return J;R=q.state,R.mode===H&&(R.mode=V),pe=q.next_out,jt=q.output,te=q.avail_out,ut=q.next_in,lt=q.input,ft=q.avail_in,Q=R.hold,K=R.bits,li=ft,Wt=te,de=T;t:for(;;)switch(R.mode){case xt:if(R.wrap===0){R.mode=V;break}for(;K<16;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(R.wrap&2&&Q===35615){R.check=0,oe[0]=Q&255,oe[1]=Q>>>8&255,R.check=v(R.check,oe,2,0),Q=0,K=0,R.mode=mt;break}if(R.flags=0,R.head&&(R.head.done=!1),!(R.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){q.msg="incorrect header check",R.mode=St;break}if((Q&15)!==ot){q.msg="unknown compression method",R.mode=St;break}if(Q>>>=4,K-=4,Gt=(Q&15)+8,R.wbits===0)R.wbits=Gt;else if(Gt>R.wbits){q.msg="invalid window size",R.mode=St;break}R.dmax=1<<Gt,q.adler=R.check=1,R.mode=Q&512?Ft:H,Q=0,K=0;break;case mt:for(;K<16;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(R.flags=Q,(R.flags&255)!==ot){q.msg="unknown compression method",R.mode=St;break}if(R.flags&57344){q.msg="unknown header flags set",R.mode=St;break}R.head&&(R.head.text=Q>>8&1),R.flags&512&&(oe[0]=Q&255,oe[1]=Q>>>8&255,R.check=v(R.check,oe,2,0)),Q=0,K=0,R.mode=W;case W:for(;K<32;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}R.head&&(R.head.time=Q),R.flags&512&&(oe[0]=Q&255,oe[1]=Q>>>8&255,oe[2]=Q>>>16&255,oe[3]=Q>>>24&255,R.check=v(R.check,oe,4,0)),Q=0,K=0,R.mode=nt;case nt:for(;K<16;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}R.head&&(R.head.xflags=Q&255,R.head.os=Q>>8),R.flags&512&&(oe[0]=Q&255,oe[1]=Q>>>8&255,R.check=v(R.check,oe,2,0)),Q=0,K=0,R.mode=dt;case dt:if(R.flags&1024){for(;K<16;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}R.length=Q,R.head&&(R.head.extra_len=Q),R.flags&512&&(oe[0]=Q&255,oe[1]=Q>>>8&255,R.check=v(R.check,oe,2,0)),Q=0,K=0}else R.head&&(R.head.extra=null);R.mode=At;case At:if(R.flags&1024&&(yt=R.length,yt>ft&&(yt=ft),yt&&(R.head&&(Gt=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),f.arraySet(R.head.extra,lt,ut,yt,Gt)),R.flags&512&&(R.check=v(R.check,lt,yt,ut)),ft-=yt,ut+=yt,R.length-=yt),R.length))break t;R.length=0,R.mode=vt;case vt:if(R.flags&2048){if(ft===0)break t;yt=0;do Gt=lt[ut+yt++],R.head&&Gt&&R.length<65536&&(R.head.name+=String.fromCharCode(Gt));while(Gt&&yt<ft);if(R.flags&512&&(R.check=v(R.check,lt,yt,ut)),ft-=yt,ut+=yt,Gt)break t}else R.head&&(R.head.name=null);R.length=0,R.mode=Mt;case Mt:if(R.flags&4096){if(ft===0)break t;yt=0;do Gt=lt[ut+yt++],R.head&&Gt&&R.length<65536&&(R.head.comment+=String.fromCharCode(Gt));while(Gt&&yt<ft);if(R.flags&512&&(R.check=v(R.check,lt,yt,ut)),ft-=yt,ut+=yt,Gt)break t}else R.head&&(R.head.comment=null);R.mode=Ot;case Ot:if(R.flags&512){for(;K<16;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(Q!==(R.check&65535)){q.msg="header crc mismatch",R.mode=St;break}Q=0,K=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),q.adler=R.check=0,R.mode=H;break;case Ft:for(;K<32;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}q.adler=R.check=O(Q),Q=0,K=0,R.mode=Kt;case Kt:if(R.havedict===0)return q.next_out=pe,q.avail_out=te,q.next_in=ut,q.avail_in=ft,R.hold=Q,R.bits=K,U;q.adler=R.check=1,R.mode=H;case H:if(ct===A||ct===C)break t;case V:if(R.last){Q>>>=K&7,K-=K&7,R.mode=gt;break}for(;K<3;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}switch(R.last=Q&1,Q>>>=1,K-=1,Q&3){case 0:R.mode=et;break;case 1:if(fi(R),R.mode=qt,ct===C){Q>>>=2,K-=2;break t}break;case 2:R.mode=Et;break;case 3:q.msg="invalid block type",R.mode=St}Q>>>=2,K-=2;break;case et:for(Q>>>=K&7,K-=K&7;K<32;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if((Q&65535)!==(Q>>>16^65535)){q.msg="invalid stored block lengths",R.mode=St;break}if(R.length=Q&65535,Q=0,K=0,R.mode=ht,ct===C)break t;case ht:R.mode=Nt;case Nt:if(yt=R.length,yt){if(yt>ft&&(yt=ft),yt>te&&(yt=te),yt===0)break t;f.arraySet(jt,lt,ut,yt,pe),ft-=yt,ut+=yt,te-=yt,pe+=yt,R.length-=yt;break}R.mode=H;break;case Et:for(;K<14;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(R.nlen=(Q&31)+257,Q>>>=5,K-=5,R.ndist=(Q&31)+1,Q>>>=5,K-=5,R.ncode=(Q&15)+4,Q>>>=4,K-=4,R.nlen>286||R.ndist>30){q.msg="too many length or distance symbols",R.mode=St;break}R.have=0,R.mode=kt;case kt:for(;R.have<R.ncode;){for(;K<3;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}R.lens[qi[R.have++]]=Q&7,Q>>>=3,K-=3}for(;R.have<19;)R.lens[qi[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,Te={bits:R.lenbits},de=F(w,R.lens,0,19,R.lencode,0,R.work,Te),R.lenbits=Te.bits,de){q.msg="invalid code lengths set",R.mode=St;break}R.have=0,R.mode=Lt;case Lt:for(;R.have<R.nlen+R.ndist;){for(;Zt=R.lencode[Q&(1<<R.lenbits)-1],Dt=Zt>>>24,se=Zt>>>16&255,le=Zt&65535,!(Dt<=K);){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(le<16)Q>>>=Dt,K-=Dt,R.lens[R.have++]=le;else{if(le===16){for(Fe=Dt+2;K<Fe;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(Q>>>=Dt,K-=Dt,R.have===0){q.msg="invalid bit length repeat",R.mode=St;break}Gt=R.lens[R.have-1],yt=3+(Q&3),Q>>>=2,K-=2}else if(le===17){for(Fe=Dt+3;K<Fe;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}Q>>>=Dt,K-=Dt,Gt=0,yt=3+(Q&7),Q>>>=3,K-=3}else{for(Fe=Dt+7;K<Fe;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}Q>>>=Dt,K-=Dt,Gt=0,yt=11+(Q&127),Q>>>=7,K-=7}if(R.have+yt>R.nlen+R.ndist){q.msg="invalid bit length repeat",R.mode=St;break}for(;yt--;)R.lens[R.have++]=Gt}}if(R.mode===St)break;if(R.lens[256]===0){q.msg="invalid code -- missing end-of-block",R.mode=St;break}if(R.lenbits=9,Te={bits:R.lenbits},de=F(h,R.lens,0,R.nlen,R.lencode,0,R.work,Te),R.lenbits=Te.bits,de){q.msg="invalid literal/lengths set",R.mode=St;break}if(R.distbits=6,R.distcode=R.distdyn,Te={bits:R.distbits},de=F(I,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,Te),R.distbits=Te.bits,de){q.msg="invalid distances set",R.mode=St;break}if(R.mode=qt,ct===C)break t;case qt:R.mode=Pt;case Pt:if(ft>=6&&te>=258){q.next_out=pe,q.avail_out=te,q.next_in=ut,q.avail_in=ft,R.hold=Q,R.bits=K,_(q,Wt),pe=q.next_out,jt=q.output,te=q.avail_out,ut=q.next_in,lt=q.input,ft=q.avail_in,Q=R.hold,K=R.bits,R.mode===H&&(R.back=-1);break}for(R.back=0;Zt=R.lencode[Q&(1<<R.lenbits)-1],Dt=Zt>>>24,se=Zt>>>16&255,le=Zt&65535,!(Dt<=K);){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(se&&(se&240)===0){for(ae=Dt,hi=se,$e=le;Zt=R.lencode[$e+((Q&(1<<ae+hi)-1)>>ae)],Dt=Zt>>>24,se=Zt>>>16&255,le=Zt&65535,!(ae+Dt<=K);){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}Q>>>=ae,K-=ae,R.back+=ae}if(Q>>>=Dt,K-=Dt,R.back+=Dt,R.length=le,se===0){R.mode=it;break}if(se&32){R.back=-1,R.mode=H;break}if(se&64){q.msg="invalid literal/length code",R.mode=St;break}R.extra=se&15,R.mode=ne;case ne:if(R.extra){for(Fe=R.extra;K<Fe;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}R.length+=Q&(1<<R.extra)-1,Q>>>=R.extra,K-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=L;case L:for(;Zt=R.distcode[Q&(1<<R.distbits)-1],Dt=Zt>>>24,se=Zt>>>16&255,le=Zt&65535,!(Dt<=K);){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if((se&240)===0){for(ae=Dt,hi=se,$e=le;Zt=R.distcode[$e+((Q&(1<<ae+hi)-1)>>ae)],Dt=Zt>>>24,se=Zt>>>16&255,le=Zt&65535,!(ae+Dt<=K);){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}Q>>>=ae,K-=ae,R.back+=ae}if(Q>>>=Dt,K-=Dt,R.back+=Dt,se&64){q.msg="invalid distance code",R.mode=St;break}R.offset=le,R.extra=se&15,R.mode=D;case D:if(R.extra){for(Fe=R.extra;K<Fe;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}R.offset+=Q&(1<<R.extra)-1,Q>>>=R.extra,K-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){q.msg="invalid distance too far back",R.mode=St;break}R.mode=$;case $:if(te===0)break t;if(yt=Wt-te,R.offset>yt){if(yt=R.offset-yt,yt>R.whave&&R.sane){q.msg="invalid distance too far back",R.mode=St;break}yt>R.wnext?(yt-=R.wnext,Qe=R.wsize-yt):Qe=R.wnext-yt,yt>R.length&&(yt=R.length),Ue=R.window}else Ue=jt,Qe=pe-R.offset,yt=R.length;yt>te&&(yt=te),te-=yt,R.length-=yt;do jt[pe++]=Ue[Qe++];while(--yt);R.length===0&&(R.mode=Pt);break;case it:if(te===0)break t;jt[pe++]=R.length,te--,R.mode=Pt;break;case gt:if(R.wrap){for(;K<32;){if(ft===0)break t;ft--,Q|=lt[ut++]<<K,K+=8}if(Wt-=te,q.total_out+=Wt,R.total+=Wt,Wt&&(q.adler=R.check=R.flags?v(R.check,jt,Wt,pe-Wt):m(R.check,jt,Wt,pe-Wt)),Wt=te,(R.flags?Q:O(Q))!==R.check){q.msg="incorrect data check",R.mode=St;break}Q=0,K=0}R.mode=at;case at:if(R.wrap&&R.flags){for(;K<32;){if(ft===0)break t;ft--,Q+=lt[ut++]<<K,K+=8}if(Q!==(R.total&4294967295)){q.msg="incorrect length check",R.mode=St;break}Q=0,K=0}R.mode=It;case It:de=M;break t;case St:de=Z;break t;case Qt:return j;case he:default:return J}return q.next_out=pe,q.avail_out=te,q.next_in=ut,q.avail_in=ft,R.hold=Q,R.bits=K,(R.wsize||Wt!==q.avail_out&&R.mode<St&&(R.mode<gt||ct!==y))&&Je(q,q.output,q.next_out,Wt-q.avail_out)?(R.mode=Qt,j):(li-=q.avail_in,Wt-=q.avail_out,q.total_in+=li,q.total_out+=Wt,R.total+=Wt,R.wrap&&Wt&&(q.adler=R.check=R.flags?v(R.check,jt,Wt,q.next_out-Wt):m(R.check,jt,Wt,q.next_out-Wt)),q.data_type=R.bits+(R.last?64:0)+(R.mode===H?128:0)+(R.mode===qt||R.mode===ht?256:0),(li===0&&Wt===0||ct===y)&&de===T&&(de=bt),de)}function hr(q){if(!q||!q.state)return J;var ct=q.state;return ct.window&&(ct.window=null),q.state=null,T}function pr(q,ct){var R;return!q||!q.state||(R=q.state,(R.wrap&2)===0)?J:(R.head=ct,ct.done=!1,T)}function dr(q,ct){var R=ct.length,lt,jt,ut;return!q||!q.state||(lt=q.state,lt.wrap!==0&&lt.mode!==Kt)?J:lt.mode===Kt&&(jt=1,jt=m(jt,ct,R,0),jt!==lt.check)?Z:(ut=Je(q,ct,R,R),ut?(lt.mode=Qt,j):(lt.havedict=1,T))}s.inflateReset=tt,s.inflateReset2=Tt,s.inflateResetKeep=G,s.inflateInit=zt,s.inflateInit2=Bt,s.inflate=Ke,s.inflateEnd=hr,s.inflateGetHeader=pr,s.inflateSetDictionary=dr,s.inflateInfo="pako inflate (from Nodeca project)"},function(p,s){"use strict";var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(v){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var F=_.shift();if(!!F){if(typeof F!="object")throw new TypeError(F+"must be non-object");for(var w in F)F.hasOwnProperty(w)&&(v[w]=F[w])}}return v},s.shrinkBuf=function(v,_){return v.length===_?v:v.subarray?v.subarray(0,_):(v.length=_,v)};var f={arraySet:function(v,_,F,w,h){if(_.subarray&&v.subarray){v.set(_.subarray(F,F+w),h);return}for(var I=0;I<w;I++)v[h+I]=_[F+I]},flattenChunks:function(v){var _,F,w,h,I,y;for(w=0,_=0,F=v.length;_<F;_++)w+=v[_].length;for(y=new Uint8Array(w),h=0,_=0,F=v.length;_<F;_++)I=v[_],y.set(I,h),h+=I.length;return y}},m={arraySet:function(v,_,F,w,h){for(var I=0;I<w;I++)v[h+I]=_[F+I]},flattenChunks:function(v){return[].concat.apply([],v)}};s.setTyped=function(v){v?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,f)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,m))},s.setTyped(u)},function(p,s){"use strict";function u(f,m,v,_){for(var F=f&65535|0,w=f>>>16&65535|0,h=0;v!==0;){h=v>2e3?2e3:v,v-=h;do F=F+m[_++]|0,w=w+F|0;while(--h);F%=65521,w%=65521}return F|w<<16|0}p.exports=u},function(p,s){"use strict";function u(){for(var v,_=[],F=0;F<256;F++){v=F;for(var w=0;w<8;w++)v=v&1?3988292384^v>>>1:v>>>1;_[F]=v}return _}var f=u();function m(v,_,F,w){var h=f,I=w+F;v^=-1;for(var y=w;y<I;y++)v=v>>>8^h[(v^_[y])&255];return v^-1}p.exports=m},function(p,s){"use strict";var u=30,f=12;p.exports=function(v,_){var F,w,h,I,y,A,C,T,M,U,J,Z,j,bt,ot,xt,mt,W,nt,dt,At,vt,Mt,Ot,Ft;F=v.state,w=v.next_in,Ot=v.input,h=w+(v.avail_in-5),I=v.next_out,Ft=v.output,y=I-(_-v.avail_out),A=I+(v.avail_out-257),C=F.dmax,T=F.wsize,M=F.whave,U=F.wnext,J=F.window,Z=F.hold,j=F.bits,bt=F.lencode,ot=F.distcode,xt=(1<<F.lenbits)-1,mt=(1<<F.distbits)-1;t:do{j<15&&(Z+=Ot[w++]<<j,j+=8,Z+=Ot[w++]<<j,j+=8),W=bt[Z&xt];e:for(;;){if(nt=W>>>24,Z>>>=nt,j-=nt,nt=W>>>16&255,nt===0)Ft[I++]=W&65535;else if(nt&16){dt=W&65535,nt&=15,nt&&(j<nt&&(Z+=Ot[w++]<<j,j+=8),dt+=Z&(1<<nt)-1,Z>>>=nt,j-=nt),j<15&&(Z+=Ot[w++]<<j,j+=8,Z+=Ot[w++]<<j,j+=8),W=ot[Z&mt];i:for(;;){if(nt=W>>>24,Z>>>=nt,j-=nt,nt=W>>>16&255,nt&16){if(At=W&65535,nt&=15,j<nt&&(Z+=Ot[w++]<<j,j+=8,j<nt&&(Z+=Ot[w++]<<j,j+=8)),At+=Z&(1<<nt)-1,At>C){v.msg="invalid distance too far back",F.mode=u;break t}if(Z>>>=nt,j-=nt,nt=I-y,At>nt){if(nt=At-nt,nt>M&&F.sane){v.msg="invalid distance too far back",F.mode=u;break t}if(vt=0,Mt=J,U===0){if(vt+=T-nt,nt<dt){dt-=nt;do Ft[I++]=J[vt++];while(--nt);vt=I-At,Mt=Ft}}else if(U<nt){if(vt+=T+U-nt,nt-=U,nt<dt){dt-=nt;do Ft[I++]=J[vt++];while(--nt);if(vt=0,U<dt){nt=U,dt-=nt;do Ft[I++]=J[vt++];while(--nt);vt=I-At,Mt=Ft}}}else if(vt+=U-nt,nt<dt){dt-=nt;do Ft[I++]=J[vt++];while(--nt);vt=I-At,Mt=Ft}for(;dt>2;)Ft[I++]=Mt[vt++],Ft[I++]=Mt[vt++],Ft[I++]=Mt[vt++],dt-=3;dt&&(Ft[I++]=Mt[vt++],dt>1&&(Ft[I++]=Mt[vt++]))}else{vt=I-At;do Ft[I++]=Ft[vt++],Ft[I++]=Ft[vt++],Ft[I++]=Ft[vt++],dt-=3;while(dt>2);dt&&(Ft[I++]=Ft[vt++],dt>1&&(Ft[I++]=Ft[vt++]))}}else if((nt&64)===0){W=ot[(W&65535)+(Z&(1<<nt)-1)];continue i}else{v.msg="invalid distance code",F.mode=u;break t}break}}else if((nt&64)===0){W=bt[(W&65535)+(Z&(1<<nt)-1)];continue e}else if(nt&32){F.mode=f;break t}else{v.msg="invalid literal/length code",F.mode=u;break t}break}}while(w<h&&I<A);dt=j>>3,w-=dt,j-=dt<<3,Z&=(1<<j)-1,v.next_in=w,v.next_out=I,v.avail_in=w<h?5+(h-w):5-(w-h),v.avail_out=I<A?257+(A-I):257-(I-A),F.hold=Z,F.bits=j}},function(p,s,u){"use strict";var f=u(33),m=15,v=852,_=592,F=0,w=1,h=2,I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(M,U,J,Z,j,bt,ot,xt){var mt=xt.bits,W=0,nt=0,dt=0,At=0,vt=0,Mt=0,Ot=0,Ft=0,Kt=0,H=0,V,et,ht,Nt,Et,kt=null,Lt=0,qt,Pt=new f.Buf16(m+1),ne=new f.Buf16(m+1),L=null,D=0,$,it,gt;for(W=0;W<=m;W++)Pt[W]=0;for(nt=0;nt<Z;nt++)Pt[U[J+nt]]++;for(vt=mt,At=m;At>=1&&Pt[At]===0;At--);if(vt>At&&(vt=At),At===0)return j[bt++]=1<<24|64<<16|0,j[bt++]=1<<24|64<<16|0,xt.bits=1,0;for(dt=1;dt<At&&Pt[dt]===0;dt++);for(vt<dt&&(vt=dt),Ft=1,W=1;W<=m;W++)if(Ft<<=1,Ft-=Pt[W],Ft<0)return-1;if(Ft>0&&(M===F||At!==1))return-1;for(ne[1]=0,W=1;W<m;W++)ne[W+1]=ne[W]+Pt[W];for(nt=0;nt<Z;nt++)U[J+nt]!==0&&(ot[ne[U[J+nt]]++]=nt);if(M===F?(kt=L=ot,qt=19):M===w?(kt=I,Lt-=257,L=y,D-=257,qt=256):(kt=A,L=C,qt=-1),H=0,nt=0,W=dt,Et=bt,Mt=vt,Ot=0,ht=-1,Kt=1<<vt,Nt=Kt-1,M===w&&Kt>v||M===h&&Kt>_)return 1;for(;;){$=W-Ot,ot[nt]<qt?(it=0,gt=ot[nt]):ot[nt]>qt?(it=L[D+ot[nt]],gt=kt[Lt+ot[nt]]):(it=32+64,gt=0),V=1<<W-Ot,et=1<<Mt,dt=et;do et-=V,j[Et+(H>>Ot)+et]=$<<24|it<<16|gt|0;while(et!==0);for(V=1<<W-1;H&V;)V>>=1;if(V!==0?(H&=V-1,H+=V):H=0,nt++,--Pt[W]===0){if(W===At)break;W=U[J+ot[nt]]}if(W>vt&&(H&Nt)!==ht){for(Ot===0&&(Ot=vt),Et+=dt,Mt=W-Ot,Ft=1<<Mt;Mt+Ot<At&&(Ft-=Pt[Mt+Ot],!(Ft<=0));)Mt++,Ft<<=1;if(Kt+=1<<Mt,M===w&&Kt>v||M===h&&Kt>_)return 1;ht=H&Nt,j[ht]=vt<<24|Mt<<16|Et-bt|0}}return H!==0&&(j[Et+H]=W-Ot<<24|64<<16|0),xt.bits=vt,0}},function(p,s,u){"use strict";var f=u(33),m=!0,v=!0;try{String.fromCharCode.apply(null,[0])}catch{m=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{v=!1}for(var _=new f.Buf8(256),F=0;F<256;F++)_[F]=F>=252?6:F>=248?5:F>=240?4:F>=224?3:F>=192?2:1;_[254]=_[254]=1,s.string2buf=function(h){var I,y,A,C,T,M=h.length,U=0;for(C=0;C<M;C++)y=h.charCodeAt(C),(y&64512)===55296&&C+1<M&&(A=h.charCodeAt(C+1),(A&64512)===56320&&(y=65536+(y-55296<<10)+(A-56320),C++)),U+=y<128?1:y<2048?2:y<65536?3:4;for(I=new f.Buf8(U),T=0,C=0;T<U;C++)y=h.charCodeAt(C),(y&64512)===55296&&C+1<M&&(A=h.charCodeAt(C+1),(A&64512)===56320&&(y=65536+(y-55296<<10)+(A-56320),C++)),y<128?I[T++]=y:y<2048?(I[T++]=192|y>>>6,I[T++]=128|y&63):y<65536?(I[T++]=224|y>>>12,I[T++]=128|y>>>6&63,I[T++]=128|y&63):(I[T++]=240|y>>>18,I[T++]=128|y>>>12&63,I[T++]=128|y>>>6&63,I[T++]=128|y&63);return I};function w(h,I){if(I<65537&&(h.subarray&&v||!h.subarray&&m))return String.fromCharCode.apply(null,f.shrinkBuf(h,I));for(var y="",A=0;A<I;A++)y+=String.fromCharCode(h[A]);return y}s.buf2binstring=function(h){return w(h,h.length)},s.binstring2buf=function(h){for(var I=new f.Buf8(h.length),y=0,A=I.length;y<A;y++)I[y]=h.charCodeAt(y);return I},s.buf2string=function(h,I){var y,A,C,T,M=I||h.length,U=new Array(M*2);for(A=0,y=0;y<M;){if(C=h[y++],C<128){U[A++]=C;continue}if(T=_[C],T>4){U[A++]=65533,y+=T-1;continue}for(C&=T===2?31:T===3?15:7;T>1&&y<M;)C=C<<6|h[y++]&63,T--;if(T>1){U[A++]=65533;continue}C<65536?U[A++]=C:(C-=65536,U[A++]=55296|C>>10&1023,U[A++]=56320|C&1023)}return w(U,A)},s.utf8border=function(h,I){var y;for(I=I||h.length,I>h.length&&(I=h.length),y=I-1;y>=0&&(h[y]&192)===128;)y--;return y<0||y===0?I:y+_[h[y]]>I?y:I}},function(p,s){"use strict";p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(p,s){"use strict";p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(p,s){"use strict";function u(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}p.exports=u},function(p,s){"use strict";function u(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}p.exports=u}])})});var bo=Ei(ur=>{"use strict";ur.byteLength=yu;ur.toByteArray=mu;ur.fromByteArray=Su;var Be=[],ke=[],du=typeof Uint8Array<"u"?Uint8Array:Array,Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ui=0,xo=Lr.length;ui<xo;++ui)Be[ui]=Lr[ui],ke[Lr.charCodeAt(ui)]=ui;var ui,xo;ke["-".charCodeAt(0)]=62;ke["_".charCodeAt(0)]=63;function Fo(p){var s=p.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=p.indexOf("=");u===-1&&(u=s);var f=u===s?0:4-u%4;return[u,f]}function yu(p){var s=Fo(p),u=s[0],f=s[1];return(u+f)*3/4-f}function gu(p,s,u){return(s+u)*3/4-u}function mu(p){var s,u=Fo(p),f=u[0],m=u[1],v=new du(gu(p,f,m)),_=0,F=m>0?f-4:f,w;for(w=0;w<F;w+=4)s=ke[p.charCodeAt(w)]<<18|ke[p.charCodeAt(w+1)]<<12|ke[p.charCodeAt(w+2)]<<6|ke[p.charCodeAt(w+3)],v[_++]=s>>16&255,v[_++]=s>>8&255,v[_++]=s&255;return m===2&&(s=ke[p.charCodeAt(w)]<<2|ke[p.charCodeAt(w+1)]>>4,v[_++]=s&255),m===1&&(s=ke[p.charCodeAt(w)]<<10|ke[p.charCodeAt(w+1)]<<4|ke[p.charCodeAt(w+2)]>>2,v[_++]=s>>8&255,v[_++]=s&255),v}function vu(p){return Be[p>>18&63]+Be[p>>12&63]+Be[p>>6&63]+Be[p&63]}function wu(p,s,u){for(var f,m=[],v=s;v<u;v+=3)f=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(p[v+2]&255),m.push(vu(f));return m.join("")}function Su(p){for(var s,u=p.length,f=u%3,m=[],v=16383,_=0,F=u-f;_<F;_+=v)m.push(wu(p,_,_+v>F?F:_+v));return f===1?(s=p[u-1],m.push(Be[s>>2]+Be[s<<4&63]+"==")):f===2&&(s=(p[u-2]<<8)+p[u-1],m.push(Be[s>>10]+Be[s>>4&63]+Be[s<<2&63]+"=")),m.join("")}});var Io=Ei(Dr=>{Dr.read=function(p,s,u,f,m){var v,_,F=m*8-f-1,w=(1<<F)-1,h=w>>1,I=-7,y=u?m-1:0,A=u?-1:1,C=p[s+y];for(y+=A,v=C&(1<<-I)-1,C>>=-I,I+=F;I>0;v=v*256+p[s+y],y+=A,I-=8);for(_=v&(1<<-I)-1,v>>=-I,I+=f;I>0;_=_*256+p[s+y],y+=A,I-=8);if(v===0)v=1-h;else{if(v===w)return _?NaN:(C?-1:1)*(1/0);_=_+Math.pow(2,f),v=v-h}return(C?-1:1)*_*Math.pow(2,v-f)};Dr.write=function(p,s,u,f,m,v){var _,F,w,h=v*8-m-1,I=(1<<h)-1,y=I>>1,A=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=f?0:v-1,T=f?1:-1,M=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(F=isNaN(s)?1:0,_=I):(_=Math.floor(Math.log(s)/Math.LN2),s*(w=Math.pow(2,-_))<1&&(_--,w*=2),_+y>=1?s+=A/w:s+=A*Math.pow(2,1-y),s*w>=2&&(_++,w/=2),_+y>=I?(F=0,_=I):_+y>=1?(F=(s*w-1)*Math.pow(2,m),_=_+y):(F=s*Math.pow(2,y-1)*Math.pow(2,m),_=0));m>=8;p[u+C]=F&255,C+=T,F/=256,m-=8);for(_=_<<m|F,h+=m;h>0;p[u+C]=_&255,C+=T,_/=256,h-=8);p[u+C-T]|=M*128}});var Ho=Ei(Ii=>{"use strict";var Cr=bo(),Fi=Io(),ko=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ii.Buffer=X;Ii.SlowBuffer=Iu;Ii.INSPECT_MAX_BYTES=50;var cr=2147483647;Ii.kMaxLength=cr;X.TYPED_ARRAY_SUPPORT=Eu();!X.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Eu(){try{let p=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(p,s),p.foo()===42}catch{return!1}}Object.defineProperty(X.prototype,"parent",{enumerable:!0,get:function(){if(!!X.isBuffer(this))return this.buffer}});Object.defineProperty(X.prototype,"offset",{enumerable:!0,get:function(){if(!!X.isBuffer(this))return this.byteOffset}});function Ve(p){if(p>cr)throw new RangeError('The value "'+p+'" is invalid for option "size"');let s=new Uint8Array(p);return Object.setPrototypeOf(s,X.prototype),s}function X(p,s,u){if(typeof p=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Pr(p)}return Oo(p,s,u)}X.poolSize=8192;function Oo(p,s,u){if(typeof p=="string")return xu(p,s);if(ArrayBuffer.isView(p))return Fu(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Me(p,ArrayBuffer)||p&&Me(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Me(p,SharedArrayBuffer)||p&&Me(p.buffer,SharedArrayBuffer)))return Mr(p,s,u);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let f=p.valueOf&&p.valueOf();if(f!=null&&f!==p)return X.from(f,s,u);let m=bu(p);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return X.from(p[Symbol.toPrimitive]("string"),s,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}X.from=function(p,s,u){return Oo(p,s,u)};Object.setPrototypeOf(X.prototype,Uint8Array.prototype);Object.setPrototypeOf(X,Uint8Array);function Ao(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function _u(p,s,u){return Ao(p),p<=0?Ve(p):s!==void 0?typeof u=="string"?Ve(p).fill(s,u):Ve(p).fill(s):Ve(p)}X.alloc=function(p,s,u){return _u(p,s,u)};function Pr(p){return Ao(p),Ve(p<0?0:zr(p)|0)}X.allocUnsafe=function(p){return Pr(p)};X.allocUnsafeSlow=function(p){return Pr(p)};function xu(p,s){if((typeof s!="string"||s==="")&&(s="utf8"),!X.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let u=Lo(p,s)|0,f=Ve(u),m=f.write(p,s);return m!==u&&(f=f.slice(0,m)),f}function Br(p){let s=p.length<0?0:zr(p.length)|0,u=Ve(s);for(let f=0;f<s;f+=1)u[f]=p[f]&255;return u}function Fu(p){if(Me(p,Uint8Array)){let s=new Uint8Array(p);return Mr(s.buffer,s.byteOffset,s.byteLength)}return Br(p)}function Mr(p,s,u){if(s<0||p.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<s+(u||0))throw new RangeError('"length" is outside of buffer bounds');let f;return s===void 0&&u===void 0?f=new Uint8Array(p):u===void 0?f=new Uint8Array(p,s):f=new Uint8Array(p,s,u),Object.setPrototypeOf(f,X.prototype),f}function bu(p){if(X.isBuffer(p)){let s=zr(p.length)|0,u=Ve(s);return u.length===0||p.copy(u,0,0,s),u}if(p.length!==void 0)return typeof p.length!="number"||Wr(p.length)?Ve(0):Br(p);if(p.type==="Buffer"&&Array.isArray(p.data))return Br(p.data)}function zr(p){if(p>=cr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cr.toString(16)+" bytes");return p|0}function Iu(p){return+p!=p&&(p=0),X.alloc(+p)}X.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==X.prototype};X.compare=function(s,u){if(Me(s,Uint8Array)&&(s=X.from(s,s.offset,s.byteLength)),Me(u,Uint8Array)&&(u=X.from(u,u.offset,u.byteLength)),!X.isBuffer(s)||!X.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let f=s.length,m=u.length;for(let v=0,_=Math.min(f,m);v<_;++v)if(s[v]!==u[v]){f=s[v],m=u[v];break}return f<m?-1:m<f?1:0};X.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};X.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return X.alloc(0);let f;if(u===void 0)for(u=0,f=0;f<s.length;++f)u+=s[f].length;let m=X.allocUnsafe(u),v=0;for(f=0;f<s.length;++f){let _=s[f];if(Me(_,Uint8Array))v+_.length>m.length?(X.isBuffer(_)||(_=X.from(_)),_.copy(m,v)):Uint8Array.prototype.set.call(m,_,v);else if(X.isBuffer(_))_.copy(m,v);else throw new TypeError('"list" argument must be an Array of Buffers');v+=_.length}return m};function Lo(p,s){if(X.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Me(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);let u=p.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&u===0)return 0;let m=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Ur(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Wo(p).length;default:if(m)return f?-1:Ur(p).length;s=(""+s).toLowerCase(),m=!0}}X.byteLength=Lo;function ku(p,s,u){let f=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(p||(p="utf8");;)switch(p){case"hex":return Mu(this,s,u);case"utf8":case"utf-8":return Co(this,s,u);case"ascii":return Cu(this,s,u);case"latin1":case"binary":return Bu(this,s,u);case"base64":return Lu(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Uu(this,s,u);default:if(f)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),f=!0}}X.prototype._isBuffer=!0;function ci(p,s,u){let f=p[s];p[s]=p[u],p[u]=f}X.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)ci(this,u,u+1);return this};X.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)ci(this,u,u+3),ci(this,u+1,u+2);return this};X.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)ci(this,u,u+7),ci(this,u+1,u+6),ci(this,u+2,u+5),ci(this,u+3,u+4);return this};X.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?Co(this,0,s):ku.apply(this,arguments)};X.prototype.toLocaleString=X.prototype.toString;X.prototype.equals=function(s){if(!X.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:X.compare(this,s)===0};X.prototype.inspect=function(){let s="",u=Ii.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"};ko&&(X.prototype[ko]=X.prototype.inspect);X.prototype.compare=function(s,u,f,m,v){if(Me(s,Uint8Array)&&(s=X.from(s,s.offset,s.byteLength)),!X.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),f===void 0&&(f=s?s.length:0),m===void 0&&(m=0),v===void 0&&(v=this.length),u<0||f>s.length||m<0||v>this.length)throw new RangeError("out of range index");if(m>=v&&u>=f)return 0;if(m>=v)return-1;if(u>=f)return 1;if(u>>>=0,f>>>=0,m>>>=0,v>>>=0,this===s)return 0;let _=v-m,F=f-u,w=Math.min(_,F),h=this.slice(m,v),I=s.slice(u,f);for(let y=0;y<w;++y)if(h[y]!==I[y]){_=h[y],F=I[y];break}return _<F?-1:F<_?1:0};function Do(p,s,u,f,m){if(p.length===0)return-1;if(typeof u=="string"?(f=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,Wr(u)&&(u=m?0:p.length-1),u<0&&(u=p.length+u),u>=p.length){if(m)return-1;u=p.length-1}else if(u<0)if(m)u=0;else return-1;if(typeof s=="string"&&(s=X.from(s,f)),X.isBuffer(s))return s.length===0?-1:Ro(p,s,u,f,m);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(p,s,u):Uint8Array.prototype.lastIndexOf.call(p,s,u):Ro(p,[s],u,f,m);throw new TypeError("val must be string, number or Buffer")}function Ro(p,s,u,f,m){let v=1,_=p.length,F=s.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(p.length<2||s.length<2)return-1;v=2,_/=2,F/=2,u/=2}function w(I,y){return v===1?I[y]:I.readUInt16BE(y*v)}let h;if(m){let I=-1;for(h=u;h<_;h++)if(w(p,h)===w(s,I===-1?0:h-I)){if(I===-1&&(I=h),h-I+1===F)return I*v}else I!==-1&&(h-=h-I),I=-1}else for(u+F>_&&(u=_-F),h=u;h>=0;h--){let I=!0;for(let y=0;y<F;y++)if(w(p,h+y)!==w(s,y)){I=!1;break}if(I)return h}return-1}X.prototype.includes=function(s,u,f){return this.indexOf(s,u,f)!==-1};X.prototype.indexOf=function(s,u,f){return Do(this,s,u,f,!0)};X.prototype.lastIndexOf=function(s,u,f){return Do(this,s,u,f,!1)};function Ru(p,s,u,f){u=Number(u)||0;let m=p.length-u;f?(f=Number(f),f>m&&(f=m)):f=m;let v=s.length;f>v/2&&(f=v/2);let _;for(_=0;_<f;++_){let F=parseInt(s.substr(_*2,2),16);if(Wr(F))return _;p[u+_]=F}return _}function Nu(p,s,u,f){return fr(Ur(s,p.length-u),p,u,f)}function Tu(p,s,u,f){return fr(Wu(s),p,u,f)}function Ou(p,s,u,f){return fr(Wo(s),p,u,f)}function Au(p,s,u,f){return fr(Hu(s,p.length-u),p,u,f)}X.prototype.write=function(s,u,f,m){if(u===void 0)m="utf8",f=this.length,u=0;else if(f===void 0&&typeof u=="string")m=u,f=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(f)?(f=f>>>0,m===void 0&&(m="utf8")):(m=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let v=this.length-u;if((f===void 0||f>v)&&(f=v),s.length>0&&(f<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let _=!1;for(;;)switch(m){case"hex":return Ru(this,s,u,f);case"utf8":case"utf-8":return Nu(this,s,u,f);case"ascii":case"latin1":case"binary":return Tu(this,s,u,f);case"base64":return Ou(this,s,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Au(this,s,u,f);default:if(_)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),_=!0}};X.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lu(p,s,u){return s===0&&u===p.length?Cr.fromByteArray(p):Cr.fromByteArray(p.slice(s,u))}function Co(p,s,u){u=Math.min(p.length,u);let f=[],m=s;for(;m<u;){let v=p[m],_=null,F=v>239?4:v>223?3:v>191?2:1;if(m+F<=u){let w,h,I,y;switch(F){case 1:v<128&&(_=v);break;case 2:w=p[m+1],(w&192)===128&&(y=(v&31)<<6|w&63,y>127&&(_=y));break;case 3:w=p[m+1],h=p[m+2],(w&192)===128&&(h&192)===128&&(y=(v&15)<<12|(w&63)<<6|h&63,y>2047&&(y<55296||y>57343)&&(_=y));break;case 4:w=p[m+1],h=p[m+2],I=p[m+3],(w&192)===128&&(h&192)===128&&(I&192)===128&&(y=(v&15)<<18|(w&63)<<12|(h&63)<<6|I&63,y>65535&&y<1114112&&(_=y))}}_===null?(_=65533,F=1):_>65535&&(_-=65536,f.push(_>>>10&1023|55296),_=56320|_&1023),f.push(_),m+=F}return Du(f)}var No=4096;function Du(p){let s=p.length;if(s<=No)return String.fromCharCode.apply(String,p);let u="",f=0;for(;f<s;)u+=String.fromCharCode.apply(String,p.slice(f,f+=No));return u}function Cu(p,s,u){let f="";u=Math.min(p.length,u);for(let m=s;m<u;++m)f+=String.fromCharCode(p[m]&127);return f}function Bu(p,s,u){let f="";u=Math.min(p.length,u);for(let m=s;m<u;++m)f+=String.fromCharCode(p[m]);return f}function Mu(p,s,u){let f=p.length;(!s||s<0)&&(s=0),(!u||u<0||u>f)&&(u=f);let m="";for(let v=s;v<u;++v)m+=Vu[p[v]];return m}function Uu(p,s,u){let f=p.slice(s,u),m="";for(let v=0;v<f.length-1;v+=2)m+=String.fromCharCode(f[v]+f[v+1]*256);return m}X.prototype.slice=function(s,u){let f=this.length;s=~~s,u=u===void 0?f:~~u,s<0?(s+=f,s<0&&(s=0)):s>f&&(s=f),u<0?(u+=f,u<0&&(u=0)):u>f&&(u=f),u<s&&(u=s);let m=this.subarray(s,u);return Object.setPrototypeOf(m,X.prototype),m};function ue(p,s,u){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+s>u)throw new RangeError("Trying to access beyond buffer length")}X.prototype.readUintLE=X.prototype.readUIntLE=function(s,u,f){s=s>>>0,u=u>>>0,f||ue(s,u,this.length);let m=this[s],v=1,_=0;for(;++_<u&&(v*=256);)m+=this[s+_]*v;return m};X.prototype.readUintBE=X.prototype.readUIntBE=function(s,u,f){s=s>>>0,u=u>>>0,f||ue(s,u,this.length);let m=this[s+--u],v=1;for(;u>0&&(v*=256);)m+=this[s+--u]*v;return m};X.prototype.readUint8=X.prototype.readUInt8=function(s,u){return s=s>>>0,u||ue(s,1,this.length),this[s]};X.prototype.readUint16LE=X.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||ue(s,2,this.length),this[s]|this[s+1]<<8};X.prototype.readUint16BE=X.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||ue(s,2,this.length),this[s]<<8|this[s+1]};X.prototype.readUint32LE=X.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||ue(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216};X.prototype.readUint32BE=X.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||ue(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])};X.prototype.readBigUInt64LE=Ye(function(s){s=s>>>0,bi(s,"offset");let u=this[s],f=this[s+7];(u===void 0||f===void 0)&&Wi(s,this.length-8);let m=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,v=this[++s]+this[++s]*2**8+this[++s]*2**16+f*2**24;return BigInt(m)+(BigInt(v)<<BigInt(32))});X.prototype.readBigUInt64BE=Ye(function(s){s=s>>>0,bi(s,"offset");let u=this[s],f=this[s+7];(u===void 0||f===void 0)&&Wi(s,this.length-8);let m=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],v=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+f;return(BigInt(m)<<BigInt(32))+BigInt(v)});X.prototype.readIntLE=function(s,u,f){s=s>>>0,u=u>>>0,f||ue(s,u,this.length);let m=this[s],v=1,_=0;for(;++_<u&&(v*=256);)m+=this[s+_]*v;return v*=128,m>=v&&(m-=Math.pow(2,8*u)),m};X.prototype.readIntBE=function(s,u,f){s=s>>>0,u=u>>>0,f||ue(s,u,this.length);let m=u,v=1,_=this[s+--m];for(;m>0&&(v*=256);)_+=this[s+--m]*v;return v*=128,_>=v&&(_-=Math.pow(2,8*u)),_};X.prototype.readInt8=function(s,u){return s=s>>>0,u||ue(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]};X.prototype.readInt16LE=function(s,u){s=s>>>0,u||ue(s,2,this.length);let f=this[s]|this[s+1]<<8;return f&32768?f|4294901760:f};X.prototype.readInt16BE=function(s,u){s=s>>>0,u||ue(s,2,this.length);let f=this[s+1]|this[s]<<8;return f&32768?f|4294901760:f};X.prototype.readInt32LE=function(s,u){return s=s>>>0,u||ue(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24};X.prototype.readInt32BE=function(s,u){return s=s>>>0,u||ue(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]};X.prototype.readBigInt64LE=Ye(function(s){s=s>>>0,bi(s,"offset");let u=this[s],f=this[s+7];(u===void 0||f===void 0)&&Wi(s,this.length-8);let m=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(f<<24);return(BigInt(m)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)});X.prototype.readBigInt64BE=Ye(function(s){s=s>>>0,bi(s,"offset");let u=this[s],f=this[s+7];(u===void 0||f===void 0)&&Wi(s,this.length-8);let m=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(m)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+f)});X.prototype.readFloatLE=function(s,u){return s=s>>>0,u||ue(s,4,this.length),Fi.read(this,s,!0,23,4)};X.prototype.readFloatBE=function(s,u){return s=s>>>0,u||ue(s,4,this.length),Fi.read(this,s,!1,23,4)};X.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||ue(s,8,this.length),Fi.read(this,s,!0,52,8)};X.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||ue(s,8,this.length),Fi.read(this,s,!1,52,8)};function we(p,s,u,f,m,v){if(!X.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>m||s<v)throw new RangeError('"value" argument is out of bounds');if(u+f>p.length)throw new RangeError("Index out of range")}X.prototype.writeUintLE=X.prototype.writeUIntLE=function(s,u,f,m){if(s=+s,u=u>>>0,f=f>>>0,!m){let F=Math.pow(2,8*f)-1;we(this,s,u,f,F,0)}let v=1,_=0;for(this[u]=s&255;++_<f&&(v*=256);)this[u+_]=s/v&255;return u+f};X.prototype.writeUintBE=X.prototype.writeUIntBE=function(s,u,f,m){if(s=+s,u=u>>>0,f=f>>>0,!m){let F=Math.pow(2,8*f)-1;we(this,s,u,f,F,0)}let v=f-1,_=1;for(this[u+v]=s&255;--v>=0&&(_*=256);)this[u+v]=s/_&255;return u+f};X.prototype.writeUint8=X.prototype.writeUInt8=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,1,255,0),this[u]=s&255,u+1};X.prototype.writeUint16LE=X.prototype.writeUInt16LE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2};X.prototype.writeUint16BE=X.prototype.writeUInt16BE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2};X.prototype.writeUint32LE=X.prototype.writeUInt32LE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4};X.prototype.writeUint32BE=X.prototype.writeUInt32BE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function Bo(p,s,u,f,m){jo(s,f,m,p,u,7);let v=Number(s&BigInt(4294967295));p[u++]=v,v=v>>8,p[u++]=v,v=v>>8,p[u++]=v,v=v>>8,p[u++]=v;let _=Number(s>>BigInt(32)&BigInt(4294967295));return p[u++]=_,_=_>>8,p[u++]=_,_=_>>8,p[u++]=_,_=_>>8,p[u++]=_,u}function Mo(p,s,u,f,m){jo(s,f,m,p,u,7);let v=Number(s&BigInt(4294967295));p[u+7]=v,v=v>>8,p[u+6]=v,v=v>>8,p[u+5]=v,v=v>>8,p[u+4]=v;let _=Number(s>>BigInt(32)&BigInt(4294967295));return p[u+3]=_,_=_>>8,p[u+2]=_,_=_>>8,p[u+1]=_,_=_>>8,p[u]=_,u+8}X.prototype.writeBigUInt64LE=Ye(function(s,u=0){return Bo(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))});X.prototype.writeBigUInt64BE=Ye(function(s,u=0){return Mo(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))});X.prototype.writeIntLE=function(s,u,f,m){if(s=+s,u=u>>>0,!m){let w=Math.pow(2,8*f-1);we(this,s,u,f,w-1,-w)}let v=0,_=1,F=0;for(this[u]=s&255;++v<f&&(_*=256);)s<0&&F===0&&this[u+v-1]!==0&&(F=1),this[u+v]=(s/_>>0)-F&255;return u+f};X.prototype.writeIntBE=function(s,u,f,m){if(s=+s,u=u>>>0,!m){let w=Math.pow(2,8*f-1);we(this,s,u,f,w-1,-w)}let v=f-1,_=1,F=0;for(this[u+v]=s&255;--v>=0&&(_*=256);)s<0&&F===0&&this[u+v+1]!==0&&(F=1),this[u+v]=(s/_>>0)-F&255;return u+f};X.prototype.writeInt8=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1};X.prototype.writeInt16LE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2};X.prototype.writeInt16BE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2};X.prototype.writeInt32LE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4};X.prototype.writeInt32BE=function(s,u,f){return s=+s,u=u>>>0,f||we(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};X.prototype.writeBigInt64LE=Ye(function(s,u=0){return Bo(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});X.prototype.writeBigInt64BE=Ye(function(s,u=0){return Mo(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Uo(p,s,u,f,m,v){if(u+f>p.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Po(p,s,u,f,m){return s=+s,u=u>>>0,m||Uo(p,s,u,4,34028234663852886e22,-34028234663852886e22),Fi.write(p,s,u,f,23,4),u+4}X.prototype.writeFloatLE=function(s,u,f){return Po(this,s,u,!0,f)};X.prototype.writeFloatBE=function(s,u,f){return Po(this,s,u,!1,f)};function zo(p,s,u,f,m){return s=+s,u=u>>>0,m||Uo(p,s,u,8,17976931348623157e292,-17976931348623157e292),Fi.write(p,s,u,f,52,8),u+8}X.prototype.writeDoubleLE=function(s,u,f){return zo(this,s,u,!0,f)};X.prototype.writeDoubleBE=function(s,u,f){return zo(this,s,u,!1,f)};X.prototype.copy=function(s,u,f,m){if(!X.isBuffer(s))throw new TypeError("argument should be a Buffer");if(f||(f=0),!m&&m!==0&&(m=this.length),u>=s.length&&(u=s.length),u||(u=0),m>0&&m<f&&(m=f),m===f||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),s.length-u<m-f&&(m=s.length-u+f);let v=m-f;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,f,m):Uint8Array.prototype.set.call(s,this.subarray(f,m),u),v};X.prototype.fill=function(s,u,f,m){if(typeof s=="string"){if(typeof u=="string"?(m=u,u=0,f=this.length):typeof f=="string"&&(m=f,f=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!X.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(s.length===1){let _=s.charCodeAt(0);(m==="utf8"&&_<128||m==="latin1")&&(s=_)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<f)throw new RangeError("Out of range index");if(f<=u)return this;u=u>>>0,f=f===void 0?this.length:f>>>0,s||(s=0);let v;if(typeof s=="number")for(v=u;v<f;++v)this[v]=s;else{let _=X.isBuffer(s)?s:X.from(s,m),F=_.length;if(F===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(v=0;v<f-u;++v)this[v+u]=_[v%F]}return this};var xi={};function jr(p,s,u){xi[p]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}jr("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);jr("ERR_INVALID_ARG_TYPE",function(p,s){return`The "${p}" argument must be of type number. Received type ${typeof s}`},TypeError);jr("ERR_OUT_OF_RANGE",function(p,s,u){let f=`The value of "${p}" is out of range.`,m=u;return Number.isInteger(u)&&Math.abs(u)>2**32?m=To(String(u)):typeof u=="bigint"&&(m=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(m=To(m)),m+="n"),f+=` It must be ${s}. Received ${m}`,f},RangeError);function To(p){let s="",u=p.length,f=p[0]==="-"?1:0;for(;u>=f+4;u-=3)s=`_${p.slice(u-3,u)}${s}`;return`${p.slice(0,u)}${s}`}function Pu(p,s,u){bi(s,"offset"),(p[s]===void 0||p[s+u]===void 0)&&Wi(s,p.length-(u+1))}function jo(p,s,u,f,m,v){if(p>u||p<s){let _=typeof s=="bigint"?"n":"",F;throw v>3?s===0||s===BigInt(0)?F=`>= 0${_} and < 2${_} ** ${(v+1)*8}${_}`:F=`>= -(2${_} ** ${(v+1)*8-1}${_}) and < 2 ** ${(v+1)*8-1}${_}`:F=`>= ${s}${_} and <= ${u}${_}`,new xi.ERR_OUT_OF_RANGE("value",F,p)}Pu(f,m,v)}function bi(p,s){if(typeof p!="number")throw new xi.ERR_INVALID_ARG_TYPE(s,"number",p)}function Wi(p,s,u){throw Math.floor(p)!==p?(bi(p,u),new xi.ERR_OUT_OF_RANGE(u||"offset","an integer",p)):s<0?new xi.ERR_BUFFER_OUT_OF_BOUNDS:new xi.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${s}`,p)}var zu=/[^+/0-9A-Za-z-_]/g;function ju(p){if(p=p.split("=")[0],p=p.trim().replace(zu,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function Ur(p,s){s=s||1/0;let u,f=p.length,m=null,v=[];for(let _=0;_<f;++_){if(u=p.charCodeAt(_),u>55295&&u<57344){if(!m){if(u>56319){(s-=3)>-1&&v.push(239,191,189);continue}else if(_+1===f){(s-=3)>-1&&v.push(239,191,189);continue}m=u;continue}if(u<56320){(s-=3)>-1&&v.push(239,191,189),m=u;continue}u=(m-55296<<10|u-56320)+65536}else m&&(s-=3)>-1&&v.push(239,191,189);if(m=null,u<128){if((s-=1)<0)break;v.push(u)}else if(u<2048){if((s-=2)<0)break;v.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;v.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;v.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return v}function Wu(p){let s=[];for(let u=0;u<p.length;++u)s.push(p.charCodeAt(u)&255);return s}function Hu(p,s){let u,f,m,v=[];for(let _=0;_<p.length&&!((s-=2)<0);++_)u=p.charCodeAt(_),f=u>>8,m=u%256,v.push(m),v.push(f);return v}function Wo(p){return Cr.toByteArray(ju(p))}function fr(p,s,u,f){let m;for(m=0;m<f&&!(m+u>=s.length||m>=p.length);++m)s[m+u]=p[m];return m}function Me(p,s){return p instanceof s||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===s.name}function Wr(p){return p!==p}var Vu=function(){let p="0123456789abcdef",s=new Array(256);for(let u=0;u<16;++u){let f=u*16;for(let m=0;m<16;++m)s[f+m]=p[u]+p[m]}return s}();function Ye(p){return typeof BigInt>"u"?qu:p}function qu(){throw new Error("BigInt not supported")}});var Ko=Ei((Rc,Ju)=>{Ju.exports=""});var Qo=Ei((Lc,Qu)=>{Qu.exports=`\r
\r
\r
<!--\r
\r
<ImageOrVid><Result watched image>\r
<Menu>\r
<Result Spectrogram> <Compared Spectrogram> (can overlay)\r
<Res2>               <Comp2>\r
    ...                 ...\r
\r
todo:\r
\r
Concise menu, finish file loading\r
Result list + comparison\r
Result saving/loading files\r
mediarecorder on canvas result too for vod\r
webworkers probably good idea for processing image on secondary canvases\r
\r
frame buffering stuff cuz graphs\r
\r
\r
-->\r
\r
        <div id="pickerDiv" style="position: relative; display:flex; align-items:center;" title="Source Image or Video. Click in two places to create a snippet on the right then click Analyze when the spectrogram is in view."> <!-- We want the source canvas to maintain the source image/video's aspect ratio so it looks correct, the capture can be stretched otherwise-->\r
            <div id="sourcedeets" style="position:absolute; z-index:4; color:white; font-size:10px; top:0px; right:0px;"></div>\r
            <img src="" style="position: absolute; z-index:1;" ></img>\r
            <video src="" style="position: absolute; display:none; z-index:2;" ></video>\r
            <canvas id="picker" style="position: absolute; z-index:3;" ></canvas>\r
        </div>\r
        <div id="captureDiv" title="Capture View">\r
            <div style="position:absolute; z-index:5; color:white; font-size:10px;  right:0px;" id="capturedeets"></div>\r
            <canvas id="capture" style="height:100%; width:100%;" height="100%" width="100%"></canvas>\r
            <canvas id="capturegraph" style="position:absolute; width:100%; height:100px; z-index:5; bottom:0px;"></canvas>\r
        </div>\r
        \r
        <button id="toggleMenu" style="display:none;">Toggle Menu</button>\r
\r
        <div id="menu" title="Source controls">\r
            <button id="snip" title="Capture and Analyze Spectrogram?">Analyze \u{1F4BB}</button>\r
            <span id="videomenu" style="display:none;">\r
                <button id="showgraph" title="Show live spectrogram? May cause slowdown.">\u{1F4C8}</button>\r
                <button id="record" title="Record MP4 of capture? (graph not included)">\u{1F534}</button>\r
            </span>\r
            <button id="webcam">Use Camera \u{1F3A5}</button>\r
            <button id="fileinput">Upload File \u{1F4E5}</button>\r
            <button id="useurl">Use URL \u{1F310}</button>\r
            <button style="float:right;" id="help" title="Help!">\u2753</button>\r
            <span id="urlmenu">\r
                <br>\r
                <button id="image">Use Image \u{1F5BC}\uFE0F</button>\r
                <span id="imgmenu">\r
                    <span style="color:white;">Preloaded Images:</span>\r
                    <select id="imgselect"></select>\r
                </span>\r
                <input type="url" id="urlinput" placeholder="Image or Video File URL"></input>\r
                <span style="color:white;">File type:</span>\r
                <select id="urlselect">\r
                    <option value="img" selected>Image</option>\r
                    <option value="video">Video</option>\r
                </select>\r
                <button id="seturl">Set URL</button>\r
            </span>\r
            <br>\r
            <div id="instructions" style="color:white; display:none;">\r
                Instructions: Click to draw a rectangle around the portion of the image or video you want to snip, \r
                then click Analyze to create a downloadable spectrogram you can compare with other results!\r
            </div>\r
            <br>\r
        <hr>\r
            </div>\r
        <div  id="compare" style="overflow-y:scroll;" title="Compare spectrogram results directly.">\r
            <span>Mix & Compare</span>\r
            <div id="comparelist">\r
                <table style="height:100%; width:100%; font-size:10px;">\r
                    <tr>\r
                        <td><span>Sample 1<button id="sample1csv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="sample1"height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                    <tr>\r
                        <td><span>Sample 2<button id="sample2csv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="sample2"height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                    <tr>\r
                        <td colspan="2"><span>Difference: Sample 2 - Sample 1<button id="s2-s1csv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="s2-s1"height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                    <tr>\r
                        <td colspan="2"><span>Baseline<button id="baselinecsv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="baseline"height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                    <tr>\r
                        <td><span>A1: Baseline - Sample 1 (absorbance)<button id="a1csv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="b-s1" height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                    <tr>\r
                        <td><span>A2: Baseline - Sample 2 (absorbance)<button id="a2csv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="b-s2" height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                    <tr>\r
                        <td colspan="2"><span>Difference: A2 - A1<button id="d2-d1csv" title='Save CSV?'>\u{1F4C4}</button></span>\r
                            <canvas id="d2-d1" height="300px" width="300px"></canvas>\r
                        </td>\r
                    </tr>\r
                </table>\r
            </div>\r
        </div>\r
        <div id="captured" style="overflow-y:scroll;" title="All captures made this session.">\r
            <span>Captures</span>\r
            <div id="capturelist">\r
            </div>\r
        </div>\r
        <div id="saved" style="overflow-y:scroll; overflow-x:hidden;" title="Captures that can be restored from cache.">\r
            <span>Saved</span>\r
            <div id="savedlist">\r
            </div>\r
        </div>`});var zi=class{constructor(s=this.onOpen,u=null,f=null){this.onOpen=s,this.notes=[{idx:0,text:"comment"}],u!==null&&document.getElementById(u).addEventListener("click",this.saveCSV),f!==null&&document.getElementById(f).addEventListener("click",this.openCSV)}processArraysForCSV(s=["1|2|3","3|2|1"],u="|",f="a,b,c",m=!1){let v=f+`
`,_=0;return s.forEach((F,w)=>{s[w]==="string"&&u!==","?v+=F.split(u).join(","):csvData+=F.join(","),m===!0&&this.notes[_].idx===w&&(F+=this.notes[_].text,_++),F.indexOf(`
`)<0&&(v+=`
`)}),v}static saveCSV(s=`a,b,c
1,2,3
3,2,1
`,u=new Date().toISOString()){var f=document.createElement("a");f.href="data:text/csv;charset=utf-8,"+encodeURI(s),f.target="_blank",u!==""?f.download=u+".csv":f.download=Date().toISOString()+".csv",f.click()}static openCSV(s=",",u=(f,m,v)=>v){var f=document.createElement("input");f.accept=".csv",f.type="file",f.onchange=m=>{var v=m.target.files[0],_=new FileReader;_.onload=F=>{var w=F.target.result,h=w.split(`
`);let I=[];var y=[];h.pop(),h.forEach((A,C)=>{if(C==0)I=A.split(s);else{var T=A.split(s);y.push(T)}}),u(y,I,f.value),f.value=""},_.readAsText(v)},f.click()}static openCSVRaw(s=(u,f)=>f){var u=document.createElement("input");u.accept=".csv",u.type="file",u.onchange=f=>{var m=f.target.files[0],v=new FileReader;v.onload=_=>{var F=_.target.result;s(F,u.value),u.value=""},v.readAsText(m)},u.click()}onOpen(s=[],u=[]){console.log("CSV Opened!",u,s)}};var ai=vo(wo()),So=!1,Ar=ai.BFSRequire("fs"),fc=ai.BFSRequire("buffer").Buffer,Eo=async(p=["data","projects","extensions","settings","plugins"],s=()=>{},u=()=>{})=>So?!0:new Promise(f=>{let m=Ar.getRootFS();ai.FileSystem.IndexedDB.Create({},(v,_)=>{if(v)throw v;if(!_)throw u(),new Error("Error creating BrowserFS");ai.initialize(_);let F=[];p.forEach(async w=>{F.push(pu(Ar,w))}),Promise.all(F).then(w=>{s(),So=!0,f(!0)})})});var _o=async(p,s,u="data",f=m=>{})=>new Promise(m=>{Ar.writeFile("/"+u+"/"+p,s,v=>{if(v)throw v;f(s),m(!0)})});var _i={},pu=async(p,s)=>new Promise(u=>{_i[s]==="exists"||_i[s]==="created"?u():p.exists(`/${s}`,f=>{f?(_i[s]="exists",console.log(`/${s} exists!`),u()):_i[s]==="creating"?(console.log(s+" is still being created."),u()):(console.log("creating "+s),_i[s]="creating",p.mkdir(s,m=>{if(m)throw m;_i[s]="created",setTimeout(u,500)}))})});var Hr=vo(Ho());var Vr={getImageData:function(p){var s=p.width,u=p.height,f=p.getContext("2d").getImageData(0,0,s,u);return f},toArrayBuffer:function(p){var s=canvas.width,u=canvas.height,f=s*4,m=new Uint32Array(p.data.buffer),v=Math.floor((32*s+31)/32)*4,_=v*u,F=122+_,w=new ArrayBuffer(F),h=new DataView(w),I=0,y,A=0,C,T=0,M,U;for(J(19778),Z(F),I+=4,Z(122),Z(108),Z(s),Z(-u>>>0),J(1),J(32),Z(3),Z(_),Z(2835),Z(2835),I+=8,Z(16711680),Z(65280),Z(255),Z(4278190080),Z(1466527264);A<u;){for(C=122+A*v,y=0;y<f;)U=m[T++],M=U>>>24,h.setUint32(C+y,U<<8|M),y+=4;A++}return w;function J(j){h.setUint16(I,j,!0),I+=2}function Z(j){h.setUint32(I,j,!0),I+=4}},toBlob:function(p){return new Blob([this.toArrayBuffer(this.getImageData(p))],{type:"image/bmp"})},ImageDatatoBlob:function(p){return new Blob([this.toArrayBuffer(p)],{type:"image/bmp"})},toDataURL:function(p){for(var s=new Uint8Array(this.toArrayBuffer(this.getImageData(p))),u="",f=0,m=s.length;f<m;)u+=String.fromCharCode(s[f++]);return"data:image/bmp;base64,"+Hr.Buffer.from(u,"base64").toString("ascii")},ImageDatatoDataURL:function(p){for(var s=new Uint8Array(this.toArrayBuffer(p)),u="",f=0,m=s.length;f<m;)u+=String.fromCharCode(s[f++]);return"data:image/bmp;base64,"+Hr.Buffer.from(u,"base64").toString("ascii")}};function Hi(p,s,u,f,m=0,v=0){if(p.naturalWidth)return{x:p.naturalWidth*(u-m)/s.width,y:p.naturalHeight*(f-v)/s.height};if(p.videoWidth)return{x:p.videoWidth*(u-m)/s.width,y:p.videoHeight*(f-v)/s.height};if(p.width)return{x:p.width*(u-m)/s.width,y:p.height*(f-v)/s.height}}function qr(p){let s=Array.from(p.data),u=[],f=[],m=[],v=[],_=[],F=0;for(let M=0;M<s.length;M+=4)M/4%p.width===0&&(F=0),f[F]?(f[F]+=parseFloat(s[M]+s[M+1]+s[M+2]),m[F]+=parseFloat(s[M]),v[F]+=parseFloat(s[M+1]),_[F]+=parseFloat(s[M+2])):(f[F]=parseFloat(s[M]+s[M+1]+s[M+2]),m[F]=parseFloat(s[M]),v[F]=parseFloat(s[M+1]),_[F]=parseFloat(s[M+2])),F++;function w(M,U=Math.max(...M)){return U||(U=Math.max(...M)),M.map(J=>J/U)}let h=Math.max(...f);f=w(f,h),m=w(m,h),v=w(v,h),_=w(_,h),u=f.map((M,U)=>({i:f[U],r:m[U],g:v[U],b:_[U]}));let I=Math.max(...u.map(M=>M.i)),y=Math.max(...u.map(M=>M.r)),A=Math.max(...u.map(M=>M.b)),C=Math.max(...u.map(M=>M.g)),T=Math.max(y,A,C);return{bitmap:p,width:p.width,height:p.height,bitarr:s,xrgbintensities:u,xintmax:I,xrintmax:y,xbintmax:A,xgintmax:C,xrgbmax:T}}async function Vo(p,s){let u=Object.assign({},p);delete u.bitmap;let f=JSON.stringify(u);return await _o(s,f,"processed")}function qo(p,s,u){return new ImageData(Uint8ClampedArray.from(p),s,u)}function Ge(p,s,u,f,m=0,v=0,_=p.canvas.width,F=p.canvas.height){p.fillStyle="black",p.lineWidth=1,u||(u=Math.max(...s.map(A=>A.i))),f||(f=Math.min(...s.map(A=>A.i))),f>0&&(f=0),p.strokeStyle="gray",p.beginPath();let w=F*(1-(0-f)/(u-f));p.moveTo(0,w),p.lineTo(_,w),p.stroke();let h={xrgbintensities:s,xintmax:u,xintmin:f},I=h.xrgbintensities.length,y=_/I;return p.strokeStyle="ghostwhite",p.beginPath(),h.xrgbintensities.forEach((A,C)=>{C===0?p.moveTo(m,v+F*(1-(A.i-f)/(h.xintmax-h.xintmin))):p.lineTo(m+C*y,v+F*(1-(A.i-f)/(h.xintmax-h.xintmin)))}),p.stroke(),p.strokeStyle="tomato",p.lineWidth=1,p.beginPath(),h.xrgbintensities.forEach((A,C)=>{C===0?p.moveTo(m,v+F*(1-(A.r-f)/(h.xintmax-h.xintmin))):p.lineTo(m+C*y,v+F*(1-(A.r-f)/(h.xintmax-h.xintmin)))}),p.stroke(),p.strokeStyle="#00b8f5",p.beginPath(),h.xrgbintensities.forEach((A,C)=>{C===0?p.moveTo(m,v+F*(1-(A.b-f)/(h.xintmax-h.xintmin))):p.lineTo(m+C*y,v+F*(1-(A.b-f)/(h.xintmax-h.xintmin)))}),p.stroke(),p.strokeStyle="chartreuse",p.beginPath(),h.xrgbintensities.forEach((A,C)=>{C===0?p.moveTo(m,v+F*(1-(A.g-f)/(h.xintmax-h.xintmin))):p.lineTo(m+C*y,v+F*(1-(A.g-f)/(h.xintmax-h.xintmin)))}),p.stroke(),h}function Zr(p,s,u=0,f=0,m=s.width,v=s.height,_=0,F=0,w=p.canvas.width,h=p.canvas.height){return p.drawImage(s,u,f,m,v,_,F,w,h)}function Zo(p,s=30,u=Zu,f=null){let m=p.captureStream(s),v=new MediaRecorder(m),_=[];return v.ondataavailable=function(F){_.push(F.data)},v.onstop=function(F){let w=new Blob(_,{type:"video/mp4"});_=[];let h=URL.createObjectURL(w);u(h)},f&&(v.onstart=F=>{setTimeout(()=>{try{v.stop()}catch{}},f*1e3)}),v}function Zu(p,s=new Date().toISOString()){var u=document.createElement("a");u.href=p,u.target="_blank",s!==""?u.download=s+".mp4":u.download=new Date().toISOString()+".mp4",u.click()}function Xo(p){var s=new DataView(p),u={};u.fileheader={},u.fileheader.bfType=s.getUint16(0,!0),u.fileheader.bfSize=s.getUint32(2,!0),u.fileheader.bfReserved1=s.getUint16(6,!0),u.fileheader.bfReserved2=s.getUint16(8,!0),u.fileheader.bfOffBits=s.getUint32(10,!0),u.infoheader={},u.infoheader.biSize=s.getUint32(14,!0),u.infoheader.biWidth=s.getUint32(18,!0),u.infoheader.biHeight=s.getUint32(22,!0),u.infoheader.biPlanes=s.getUint16(26,!0),u.infoheader.biBitCount=s.getUint16(28,!0),u.infoheader.biCompression=s.getUint32(30,!0),u.infoheader.biSizeImage=s.getUint32(34,!0),u.infoheader.biXPelsPerMeter=s.getUint32(38,!0),u.infoheader.biYPelsPerMeter=s.getUint32(42,!0),u.infoheader.biClrUsed=s.getUint32(46,!0),u.infoheader.biClrImportant=s.getUint32(50,!0);var f=u.fileheader.bfOffBits;return u.stride=Math.floor((u.infoheader.biBitCount*u.infoheader.biWidth+31)/32)*4,u.pixels=new Uint8Array(p,f),u}function Yo(p){canvas=document.createElement("canvas");var s=canvas.getContext("2d"),u=p.infoheader.biWidth,f=p.infoheader.biHeight;canvas.width=u,canvas.height=f;for(var m=s.createImageData(u,f),v=m.data,_=p.pixels,F=p.stride,w=0;w<f;++w)for(var h=0;h<u;++h){var I=(h+u*(f-w))*4,y=h*3+F*w;v[I]=_[y+2],v[I+1]=_[y+1],v[I+2]=_[y],v[I+3]=255}return s.putImageData(m,0,0),canvas.toDataURL("image/png")}function qe(p,s){let u=`x,r,g,b,i
`,f="";p.forEach((v,_)=>{f+=`${_},${v.r},${v.g},${v.b},${v.i}
`});let m=u+f;zi.saveCSV(m,s+"_"+new Date().toISOString())}var lr=class extends HTMLElement{template=s=>`<div> Custom Fragment Props: ${JSON.stringify(s)} </div>`;props={test:!0};useShadow=!1;oncreate=void 0;onresize=void 0;ondelete=void 0;onchanged=void 0;FRAGMENT=void 0;attachedShadow=!1;obsAttributes=["props","options","onchanged","onresize","ondelete","oncreate","template"];get observedAttributes(){return this.obsAttributes}get obsAttributes(){return this.obsAttributes}set obsAttributes(s){typeof s=="string"?this.obsAttributes.push(s):Array.isArray(s)&&(this.obsAttributes=s)}static get tag(){return this.name.toLowerCase()+"-"}static addElement(s=this.tag,u=this,f=void 0){Xu(u,s,f)}attributeChangedCallback(s,u,f){if(s==="onchanged"){let m=f;if(typeof m=="string"&&(m=ki(m)),typeof m=="function"){this.onchanged=m,this.state.data.props=this.props,this.state.unsubscribeTrigger("props"),this.state.subscribeTrigger("props",this.onchanged);let v=new CustomEvent("changed",{detail:{props:this.props}});this.state.subscribeTrigger("props",()=>{this.dispatchEvent(v)})}}else if(s==="onresize"){let m=f;if(typeof m=="string"&&(m=ki(m)),typeof m=="function"){if(this.ONRESIZE)try{window.removeEventListener("resize",this.ONRESIZE)}catch{}this.ONRESIZE=v=>{this.onresize(this.props)},this.onresize=m,window.addEventListener("resize",this.ONRESIZE)}}else if(s==="ondelete"){let m=f;typeof m=="string"&&(m=ki(m)),typeof m=="function"&&(this.ondelete=()=>{this.ONRESIZE&&window.removeEventListener("resize",this.ONRESIZE),this.state.unsubscribeTrigger("props"),m&&m(this.props)})}else if(s==="oncreate"){let m=f;typeof m=="string"&&(m=ki(m)),typeof m=="function"&&(this.oncreate=m)}else if(s==="props"){let m=f;typeof m=="string"&&(m=JSON.parse(m)),Object.assign(this.props,m),this.state.setState({props:this.props})}else if(s==="template"){let m=f;this.template=options.template,typeof m=="function"?this.templateString=this.template(this.props):this.templateString=m,this.render(this.props);let v=new CustomEvent("created",{detail:{props:this.props}});this.dispatchEvent(v)}else{let m=f;if(s.includes("eval_"))s=s.split("_"),s.shift(),s=s.join(),m=ki(f);else if(typeof f=="string")try{m=JSON.parse(f)}catch{m=f}this[s]=m,s!=="props"&&(this.props[s]=m)}}connectedCallback(){let s=this.getAttribute("props");typeof s=="string"&&(s=JSON.parse(s)),Object.assign(this.props,s),this.state.setState({props:this.props}),Array.from(this.attributes).forEach(_=>{let F=_.name,w=_.value;if(F.includes("eval_"))F=F.split("_"),F.shift(),F=F.join(),w=ki(_.value);else if(typeof _.value=="string")try{w=JSON.parse(_.value)}catch{w=_.value}this[F]||Object.defineProperties(this,_,{value:w,writable:!0,get(){return this[F]},set(h){this.setAttribute(F,h)}}),this[F]=w,F!=="props"&&(this.props[F]=w),this.obsAttributes.push(F)});let u=new CustomEvent("resized",{detail:{props:this.props}}),f=new CustomEvent("changed",{detail:{props:this.props}}),m=new CustomEvent("deleted",{detail:{props:this.props}}),v=new CustomEvent("created",{detail:{props:this.props}});if(this.render(this.props),this.dispatchEvent(v),this.state.subscribeTrigger("props",()=>{this.dispatchEvent(f)}),typeof this.onresize=="function"){if(this.ONRESIZE)try{window.removeEventListener("resize",this.ONRESIZE)}catch{}this.ONRESIZE=_=>{this.onresize(this.props),this.dispatchEvent(u)},window.addEventListener("resize",this.ONRESIZE)}if(typeof this.ondelete=="function"){let _=this.ondelete;this.ondelete=(F=this.props)=>{this.ONRESIZE&&window.removeEventListener("resize",this.ONRESIZE),this.state.unsubscribeTrigger("props"),this.dispatchEvent(m),_(F)}}typeof this.onchanged=="function"&&(this.state.data.props=this.props,this.state.subscribeTrigger("props",this.onchanged))}constructor(){super()}delete=()=>{this.remove(),typeof this.ondelete=="function"&&this.ondelete(this.props)};render=(s=this.props)=>{typeof this.template=="function"?this.templateString=this.template(s):this.templateString=this.template;let u=document.createElement("template");u.innerHTML=this.templateString;let f=u.content;this.FRAGMENT&&(this.useShadow?this.shadowRoot.removeChild(this.FRAGMENT):this.removeChild(this.FRAGMENT)),this.useShadow?(this.attachedShadow||this.attachShadow({mode:"open"}),this.shadowRoot.prepend(f),this.FRAGMENT=this.shadowRoot.childNodes[0]):this.prepend(f),this.FRAGMENT=this.childNodes[0],this.oncreate&&this.oncreate(s)};state={pushToState:{},data:{},triggers:{},setState(s){if(Object.assign(this.pushToState,s),Object.keys(this.triggers).length>0)for(let u of Object.getOwnPropertyNames(this.triggers))this.pushToState[u]&&(this.data[u]=this.pushToState[u],delete this.pushToState[u],this.triggers[u].forEach(f=>{f.onchanged(this.data[u])}));return this.pushToState},subscribeTrigger(s,u=f=>{}){if(s){this.triggers[s]||(this.triggers[s]=[]);let f=this.triggers[s].length;return this.triggers[s].push({idx:f,onchanged:u}),this.triggers[s].length-1}else return},unsubscribeTrigger(s,u){let f,m=this.triggers[s];if(m)if(!u)delete this.triggers[s];else return m.find(_=>{if(_.idx===u)return!0})&&m.splice(f,1),!0},subscribeTriggerOnce(s=void 0,u=f=>{}){let f,m=v=>{u(v),this.unsubscribeTrigger(s,f)};f=this.subscribeTrigger(s,m)}};get props(){return this.props}set props(s={}){this.setAttribute("props",s)}get template(){return this.template}set template(s){this.setAttribute("template",s)}get render(){return this.render}get delete(){return this.delete}get state(){return this.state}get onchanged(){return this.onchanged}set onchanged(s){this.setAttribute("onchanged",s)}get onresize(){return this.props}set onresize(s){this.setAttribute("onresize",s)}get ondelete(){return this.props}set ondelete(s){this.setAttribute("ondelete",s)}get oncreate(){return this.oncreate}set oncreate(s){this.setAttribute("oncreated",s)}};function Xu(p,s,u=null){try{u?s?window.customElements.define(s,p,{extends:u}):window.customElements.define(p.name.toLowerCase()+"-",p,{extends:u}):s?window.customElements.define(s,p):window.customElements.define(p.name.toLowerCase()+"-",p)}catch{}}function _c(p=""){return p+Math.floor(Math.random()*1e15)}function ki(method){let getFunctionBody=p=>p.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=p=>{let s=p.indexOf(")");return p.slice(0,p.indexOf("{",s)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;try{if(newFuncHead.includes("function ")){let p=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(p,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let p=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(p,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else try{newFunc=eval(newFuncHead+newFuncBody+"}")}catch(err){newFunc=eval(method)}}catch(p){}return newFunc}var Jo={pushToState:{},data:{},triggers:{},setState(p){Object.assign(this.data,p);for(let s of Object.getOwnPropertyNames(p))this.triggers[s]&&this.triggers[s].forEach(u=>u.onchange(this.data[s]));return this.data},subscribeTrigger(p,s=u=>{}){if(p){this.triggers[p]||(this.triggers[p]=[]);let u=this.triggers[p].length;return this.triggers[p].push({idx:u,onchange:s}),this.triggers[p].length-1}else return},unsubscribeTrigger(p,s){let u,f=this.triggers[p];if(f)if(!s)delete this.triggers[p];else return f.find(v=>{if(v.idx===s)return!0})&&f.splice(u,1),!0},subscribeTriggerOnce(p=void 0,s=u=>{}){let u,f=m=>{s(m),this.unsubscribeTrigger(p,u)};u=this.subscribeTrigger(p,f)}},Go=class{state=Jo;nodes=new Map;nNodes=0;constructor(){}convertChildrenToNodes(s){s.convertChildrenToNodes(s)}addNode(s={}){return new xe(s,void 0,this)}getNode(s){return this.nodes.get(s)}run(s,u,f){if(typeof s=="string"&&(s=this.nodes.get(s)),s)return s.run(u,s,f)}runNode=this.run;removeTree(s){if(typeof s=="string"&&(s=this.nodes.get(s)),s){let u=function(f){f.children&&(Array.isArray(f.children)?f.children.forEach(m=>{m.stopNode&&m.stopNode(),m.tag&&this.nodes.get(m.tag)&&this.nodes.delete(m.tag),this.nodes.forEach(v=>{v.nodes.get(m.tag)&&v.nodes.delete(m.tag)}),u(m)}):typeof f.children=="object"&&(f.stopNode&&f.stopNode(),f.tag&&this.nodes.get(f.tag)&&this.nodes.delete(f.tag),this.nodes.forEach(m=>{m.nodes.get(f.tag)&&m.nodes.delete(f.tag)}),u(f)))};s.stopNode&&s.stopNode(),s.tag&&(this.nodes.delete(s.tag),this.nodes.forEach(f=>{f.nodes.get(s.tag)&&f.nodes.delete(s.tag)}),u(s))}}removeNode(s){typeof s=="string"&&(s=this.nodes.get(s)),s?.tag&&this.nodes.delete(s.tag),s?.tag&&this.nodes.get(s.tag)&&(this.nodes.delete(s.tag),this.nodes.forEach(u=>{u.nodes.get(s.tag)&&u.nodes.delete(s.tag)}))}appendNode(s={},u){u.addChildren(s)}async callParent(s,u,f=s,m){if(s?.parent)return await s.callParent(u,s.parent,f,m)}async callChildren(s,u,f=s,m,v){if(s?.children)return await s.callChildren(u,f,m,v)}subscribe(s,u=f=>{}){return this.state.subscribeTrigger(s,u)}unsubscribe(s,u){this.state.unsubscribeTrigger(s,u)}subscribeNode(s,u){return this.state.subscribeTrigger(s.tag,f=>{this.run(u,f,this)})}create(s=(m,v,_,F)=>{},u,f){return Yu(s,u,f,this)}print(s,u=!0){if(typeof s=="object"&&s.operator)return s.print(s,u)}reconstruct(s="{}"){let u=Xr(s);u&&this.addNode(u)}},xe=class{tag;parent;children;graph;state=Jo;nodes=new Map;ANIMATE="animate";LOOP="loop";looper=void 0;animation=void 0;constructor(s={},u,f){!s.tag&&f?s.tag=`node${f.nNodes}`:s.tag||(s.tag=`node${Math.floor(Math.random()*1e10)}`),Object.assign(this,s),this.parent=u,this.graph=f,f&&(f.nNodes++,f.nodes.set(s.tag,this)),this.children&&this.convertChildrenToNodes(this)}operator(s,u=this,f,m){return s}runOp(s,u=this,f,m){let v=u.operator(s,u,f,m);return v instanceof Promise?v.then(_=>(this.state.setState({[u.tag]:_}),_)):this.state.setState({[u.tag]:v}),v}runNode(s,u,f){if(typeof s=="string"&&(s=this.nodes.get(s)),s)return s.run(u,s,f)}run(s,u=this,f){if(typeof u=="string"){let m;if(this.graph&&(m=this.graph.nodes.get(u)),m||(m=this.nodes.get(u)),u=m,!u)return}if(!(u.children&&u.forward||u.parent&&u.backward||u.repeat||u.delay||u.frame||u.recursive||u.operator.constructor.name==="AsyncFunction")){let m=u.runOp(u,s,f);return u.animate&&!u.isAnimating&&this.runAnimation(this.animation,s,u,f),typeof u.loop=="number"&&!u.isLooping&&this.runLoop(this.looper,s,u,f),m}return new Promise(async m=>{if(u){let v=(F,w,h=0)=>new Promise(async I=>{h++;let y=await F.runOp(w,F,f,h);if(typeof F.repeat=="number"){for(;h<F.repeat;){if(F.delay){setTimeout(async()=>{I(await v(F,w,h))},F.delay);break}else if(F.frame&&requestAnimationFrame){requestAnimationFrame(async()=>{I(await v(F,w,h))});break}else y=await F.runOp(w,F,f,h);h++}if(h===F.repeat){I(y);return}}else if(typeof F.recursive=="number"){for(;h<F.recursive;){if(F.delay){setTimeout(async()=>{I(await v(F,y,h))},F.delay);break}else if(F.frame&&requestAnimationFrame){requestAnimationFrame(async()=>{I(await v(F,y,h))});break}else y=await F.runOp(y,F,f,h);h++}if(h===F.recursive){I(y);return}}else{I(y);return}}),_=async()=>{let F=await v(u,s);if(u.backward&&u.parent&&await this.runNode(u.parent,F,u),u.children&&u.forward)if(Array.isArray(u.children))for(let w=0;w<u.children.length;w++)await this.runNode(u.children[w],F,u);else await this.runNode(u.children,F,u);return u.animate&&!u.isAnimating&&this.runAnimation(this.animation,s,u,f),typeof u.loop=="number"&&!u.isLooping&&this.runLoop(this.looper,s,u,f),F};u.delay?setTimeout(async()=>{m(await _())},u.delay):u.frame&&requestAnimationFrame?requestAnimationFrame(async()=>{m(await _())}):m(await _())}else m(void 0)})}runAnimation(s=this.animation,u,f=this,m){if(this.animation=s,s||(this.animation=this.operator),f.animate&&!f.isAnimating){f.isAnimating=!0;let v=async()=>{if(f.isAnimating){let _=await this.animation(u,f,m,this.ANIMATE);if(this.tag&&typeof _<"u"&&(this.state.setState({[this.tag]:_}),f.backward&&f.parent&&await this.runNode(f.parent,_,f),f.children&&f.forward))if(Array.isArray(f.children))for(let F=0;F<f.children.length;F++)await this.runNode(f.children[F],_,f);else await this.runNode(f.children,_,f);requestAnimationFrame(async()=>{await v()})}};requestAnimationFrame(v)}}runLoop(s=this.looper,u,f=this,m){if(this.looper=s,s||(this.looper=this.operator),typeof f.loop=="number"&&!f.isLooping){f.isLooping=!0;let v=async()=>{if(f.looping){let _=await this.looper(u,f,m);if(this.tag&&typeof _<"u"&&(this.state.setState({[this.tag]:_}),f.backward&&f.parent&&await this.runNode(f.parent,_,f),f.children&&f.forward))if(Array.isArray(f.children))for(let F=0;F<f.children.length;F++)await this.runNode(f.children[F],_,f);else await this.runNode(f.children,_,f);setTimeout(async()=>{await v()},f.loop)}}}}setOperator(s=function(f,m=this,v,_){return f}){this.operator=s}setParent(s){this.parent=s}setChildren(s){this.children=s}removeTree(s){if(typeof s=="string"&&(s=this.nodes.get(s)),s){let u=function(f){f.children&&(Array.isArray(f.children)?f.children.forEach(m=>{m.stopNode&&m.stopNode(),m.tag&&this.nodes.get(m.tag)&&this.nodes.delete(m.tag),this.nodes.forEach(v=>{v.nodes.get(m.tag)&&v.nodes.delete(m.tag)}),u(m)}):typeof f.children=="object"&&(f.stopNode&&f.stopNode(),f.tag&&this.nodes.get(f.tag)&&this.nodes.delete(f.tag),this.nodes.forEach(m=>{m.nodes.get(f.tag)&&m.nodes.delete(f.tag)}),u(f)))};s.stopNode&&s.stopNode(),s.tag&&(this.nodes.delete(s.tag),this.nodes.forEach(f=>{f.nodes.get(s.tag)&&f.nodes.delete(s.tag)}),u(s),this.graph&&this.graph.nodes.removeTree(s))}}addNode(s={}){let u=new xe(s,this,this.graph);return this.nodes.set(convertedtag,u),this.graph&&this.graph.nodes.set(u.tag,u),u}removeNode(s){typeof s=="string"&&(s=this.nodes.get(s)),s?.tag&&this.nodes.delete(s.tag),s?.tag&&this.nodes.get(s.tag)&&(this.nodes.delete(s.tag),this.graph&&this.graph.nodes.delete(s.tag),this.nodes.forEach(u=>{u.nodes.get(s.tag)&&u.nodes.delete(s.tag)}))}appendNode(s,u=this){typeof s=="string"&&(s=this.nodes.get(s)),s&&u.addChildren(s)}getNode(s){return this.nodes.get(s)}stopLooping(s=this){s.isLooping=!1}stopAnimating(s=this){s.isAnimating=!1}stopNode(s=this){s.stopAnimating(s),s.stopLooping(s)}addChildren(s){this.children||(this.children=[]),Array.isArray(this.children)?Array.isArray(s)?(this.children.push(...s),s.forEach(u=>{typeof u=="object"&&u.tag&&(this.nodes.set(u.tag,u),this.graph&&this.graph.nodes.set(u.tag,u))})):(this.children.push(s),typeof s=="object"&&s.tag&&(this.nodes.set(s.tag,s),this.graph&&this.graph.nodes.set(s.tag,s))):(this.children=[s],typeof s=="object"&&s.tag&&(this.nodes.set(s.tag,s),this.graph&&this.graph.nodes.set(s.tag,s)))}convertChildrenToNodes(s=this){if(s.children?.name==="GraphNode")this.graph?.nodes.get(s.tag)||this.graph.nodes.set(s.tag,s),this.nodes.get(s.tag)||this.nodes.set(s.tag,s);else if(Array.isArray(s.children))for(let u=0;u<s.children.length;u++)if(s.children[u].name==="GraphNode"){this.graph?.nodes.get(s.children[u].tag)||this.graph.nodes.set(s.children[u].tag,s.children[u]),this.nodes.get(s.children[u].tag)||this.nodes.set(s.children[u].tag,s.children[u]);continue}else typeof s.children[u]=="object"?(s.children[u]=new xe(s.children[u],s,this.graph),this.nodes.set(s.children[u].tag,s.children[u]),this.convertChildrenToNodes(s.children[u])):typeof s.children[u]=="string"&&(this.graph&&(s.children[u]=this.graph.getNode(s.children[u]),this.nodes.get(s.children[u].tag)||this.nodes.set(s.children[u].tag,s.children[u])),s.children[u]||(s.children[u]=this.nodes.get(s.children[u])));else typeof s.children=="object"?(s.children=new xe(s.children,s,this.graph),this.nodes.set(s.children.tag,s.children),this.convertChildrenToNodes(s.children)):typeof s.children=="string"&&(this.graph&&(s.children=this.graph.getNode(s.children),this.nodes.get(s.children.tag)||this.nodes.set(s.children.tag,s.children)),s.children||(s.children=this.nodes.get(s.children)));return s.children}async callParent(s,u=this,f){if(typeof this.parent?.operator=="function")return await this.parent.runOp(s,this.parent,u,f)}async callChildren(s,u=this,f,m){let v;if(Array.isArray(this.children))if(m)v=await this.children[m]?.runOp(s,this.children[m],u,f);else{v=[];for(let _=0;_<this.children.length;_++)v.push(await this.children[_]?.runOp(s,this.children[_],u,f))}else this.children&&(v=await this.children.runOp(s,this.children,u,f));return v}setProps(s={}){Object.assign(this,s)}subscribe(s=f=>{},u=this.tag){return typeof s=="object"?this.subscribeNode(s):this.state.subscribeTrigger(u,s)}unsubscribe(s,u=this.tag){this.state.unsubscribeTrigger(u,s)}subscribeNode(s,u=this.tag){return this.state.subscribeTrigger(u,f=>{this.runNode(s,f,this)})}print(s=this,u=!0,f=[]){let m=new xe;f.push(s.tag);let v={tag:s.tag,operator:s.operator.toString()};s.parent&&(v.parent=s.parent.tag),s.children&&(Array.isArray(s.children)?s.children=s.children.map(_=>typeof _=="string"?_:f.includes(_.tag)?_.tag:u?_.print(_,u,f):_.tag):typeof s.children=="object"?(u||(v.children=[s.children.tag]),f.includes(s.children.tag)?v.children=[s.children.tag]:v.children=[s.children.print(s.children,u,f)]):typeof s.children=="string"&&(v.children=[s.children]));for(let _ in s)_==="parent"||_==="children"||typeof m[_]>"u"&&(typeof s[_]=="function"?v[_]=s[_].toString():typeof s[_]=="object"?v[_]=JSON.stringifyWithCircularRefs(s[_]):v[_]=s[_]);return JSON.stringify(v)}reconstruct(s="{}"){let u=Xr(s);u&&this.addNode(u)}};function Yu(p,s,u,f){return typeof u=="object"?(u.operator=p,new xe(u,s,f)):new xe({operator:p},s,f)}function Ic(p="{}",s,u){let f=Xr(p);if(f)return new xe(f,s,u)}function Xr(p="{}"){try{let u=function(f){for(let m in f)if(typeof f[m]=="string"){let v=Gu(f[m]);typeof v=="function"&&(f[m]=v)}else typeof f[m]=="object"&&u(f[m]);return f},s=JSON.parse(p);return u(s)}catch(s){console.error(s);return}}JSON.stringifyWithCircularRefs===void 0&&(JSON.stringifyWithCircularRefs=function(){let p=new Map,s=[],u=["this"];function f(){p.clear(),s.length=0,u.length=1}function m(_,F){var w=s.length-1,h=s[w];if(typeof h=="object")if(h[_]===F||w===0)u.push(_),s.push(F.pushed);else for(;w-->=0;){if(h=s[w],typeof h=="object"&&h[_]===F){w+=2,s.length=w,u.length=w,--w,s[w]=F,u[w]=_;break}w--}}function v(_,F){if(F!=null&&typeof F=="object"){_&&m(_,F);let w=p.get(F);if(w)return"[Circular Reference]"+w;p.set(F,u.join("."))}return F}return function(F,w){try{return s.push(F),JSON.stringify(F,v,w)}finally{f()}}}());function Gu(method=""){let getFunctionBody=p=>p.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=p=>{let s=p.indexOf(")");return p.slice(0,p.indexOf("{",s)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;if(newFuncHead.includes("function ")){let p=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(p,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let p=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(p,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else newFunc=eval(newFuncHead+newFuncBody+"}");return newFunc}var Ku=Ko(),Vi=class extends lr{props={operator:(s,u,f,m)=>(console.log(s),s),forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};input_delay=1;template=Ku;render=(s=this.props)=>{typeof this.template=="function"?this.templateString=this.template(s):this.templateString=this.template;let u=document.createElement("template");u.innerHTML=this.templateString;let f=u.content;this.fragment&&this.removeChild(this.fragment),this.fragment=f,this.appendChild(f),this.setupNode(this.props),this.props.input&&setTimeout(async()=>{this.props.node.runNode(this.props.node,this.props.input,this.props.graph)},this.input_delay),this.oncreate&&this.oncreate(s)};setupNode(s){let u=this.parentNode;if(u.props?.operator&&u.props?.node&&(s.parent=u.props.node),!s.graph){for(;!u.props?.nodes&&!(u.constructor.name==="HTMLBodyElement"||u.constructor.name==="HTMLHeadElement"||u.constructor.name==="HTMLHtmlElement"||u.constructor.name==="HTMLDocument");)u=u.parentNode;u.props?.nodes&&(s.graph=u.props.graph,s.input_delay=u.props.input_delay)}this.id&&!s.tag&&(s.tag=this.id),s.graph&&!s.node&&s.tag?s.node=s.graph.nodes.get(s.tag):s.graph&&typeof s.node=="string"&&(s.node=s.graph.nodes.get(s.node)),s.node||(s.node=new xe(s,s.parent,s.graph)),s.tag=s.node.tag,this.id||(this.id=s.tag),s.parent&&s.parent.addChildren(s.node)}};Vi.addElement("graph-node");var $u=Qo(),Yr=class extends Vi{bitmap;bitslice;canvas;ctx;offscreen;offscreenctx;capture;capturectx;capturegraph;capturegraphctx;graphVideoSnip=!1;img;video;imgselect;captures={};loaded={};imgfiles={"Test Image":"src/assets/spectrum_full.png","Spectrum 1":"src/assets/spectrum1.png","Spectrum 2":"src/assets/spectrum2.jpg",Shrimp:"src/assets/shrimp.jpg","Chicken Fat":"src/assets/chickenfat.png","Chicken Breast":"src/assets/chickenbreast.png","Brown Beer Bottle":"src/assets/brownbeerbottle.png"};comparing={sample1:void 0,sample2:void 0,baseline:void 0,s2_s1:void 0,a1:void 0,a2:void 0,a2_a1:void 0};template=$u;props={picking:0,picked:{x0:void 0,x1:void 0,y0:void 0,y1:void 0},imgpicked:{x0:void 0,x1:void 0,y0:void 0,y1:void 0},running:!1,mode:"img",animation:(s,u,f,m)=>{},operator:(s,u,f,m)=>{},forward:!0,backward:!1,children:void 0,parent:void 0,delay:!1,repeat:!1,recursive:!1,animate:!1,loop:void 0,tag:void 0,input:void 0,graph:void 0,node:void 0};oncreate=s=>{this.canvas=this.querySelector("#picker"),this.pickerDiv=this.querySelector("#pickerDiv"),this.captureDiv=this.querySelector("#captureDiv"),this.imgmenu=this.querySelector("#imgmenu"),this.videomenu=this.querySelector("#videomenu"),this.urlmenu=this.querySelector("#urlmenu"),this.imgselect=this.querySelector("#imgselect"),this.select=this.querySelector("#imgselect"),this.capture=this.querySelector("#capture"),this.capturectx=this.capture.getContext("2d"),this.capturegraph=this.querySelector("#capturegraph"),this.capturegraphctx=this.capturegraph.getContext("2d"),this.menu=this.querySelector("#menu"),this.toggleMenu=this.querySelector("#toggleMenu");for(let f in this.imgfiles){let m=`<option value="${this.imgfiles[f]}">${f}</option>`;this.imgselect.insertAdjacentHTML("beforeend",m)}this.imgselect.options[0].selected=!0,this.imgselect.oninput=this.useImage,this.querySelector("#useurl").onclick=()=>{this.urlmenu.style.display=="none"?this.urlmenu.style.display="":this.urlmenu.style.display="none"},this.querySelector("#help").onclick=()=>{let f=this.querySelector("#instructions");f.style.display=="none"?f.style.display="":f.style.display="none"},this.querySelector("#showgraph").onclick=()=>{this.graphVideoSnip=!this.graphVideoSnip},this.img=this.querySelector("img"),this.img.addEventListener("load",f=>{this.props.mode="img",this.imgmenu.style.display="",this.videomenu.style.display="none",this.urlmenu.style.display="none",this.querySelector("#sourcedeets").innerHTML=`Source Resolution: ${this.img.naturalWidth}x${this.img.naturalHeight}`,this.onresize()}),this.video=this.querySelector("video"),this.video.addEventListener("canplay",f=>{this.props.mode="video",this.imgmenu.style.display="none",this.videomenu.style.display="",this.urlmenu.style.display="none",this.querySelector("#sourcedeets").innerHTML=`Source Resolution: ${this.video.videoWidth}x${this.video.videoHeight}`,this.onresize()}),this.toggleMenu.onclick=()=>{this.menu.style.display==="none"?this.menu.style.display="":this.menu.style.display="none"},this.querySelector("#fileinput").onchange=this.handleFileInput,this.querySelector("#snip").onclick=f=>{this.props.picked.y1&&this.props.picked.x1&&this.canvasCapture(f)};let u=()=>{if(this.props.mode==="video"&&this.props.picked.y1&&this.props.picked.x1){this.props.running=!0;let f=Zo(this.capture);this.querySelector("#record").innerHTML="\u{1F7E5}",this.querySelector("#record").onclick=()=>{this.props.running=!1,f.stop(),this.querySelector("#record").innerHTML="\u{1F534}",this.querySelector("#record").onclick=u},f.start()}};this.querySelector("#record").onclick=u,this.select.onchange=f=>{},this.querySelector("#webcam").onclick=this.useWebcam,this.querySelector("#image").onclick=this.useImage,this.querySelector("#seturl").onclick=()=>{this.querySelector("#urlselect").value==img?this.inputImgUrl():this.inputVideoSrc()},this.querySelector("#fileinput").onclick=this.loadFile,s.canvas=this.canvas,s.context?s.context=this.canvas.getContext(s.context):s.context=this.canvas.getContext("2d"),this.context=s.context,this.ctx=this.context,s.ctx=this.context,this.offscreen=new OffscreenCanvas(this.canvas.width,this.canvas.height),this.offscreenctx=this.offscreen.getContext("2d"),this.canvas.onclick=this.canvasClicked,setTimeout(()=>{s.animate&&s.node.runAnimation()},10);try{this.useImage()}catch(f){console.error(f)}this.img.width=0,setTimeout(()=>{this.onresize()},50)};onresize=s=>{let u,f=this.pickerDiv.clientWidth;this.props.mode==="img"?(u=this.img.naturalHeight/this.img.naturalWidth,this.correctForRatio(this.img,f,this.pickerDiv.clientHeight,u)):this.props.mode==="video"&&(u=this.video.videoHeight/this.video.videoWidth,this.correctForRatio(this.video,f,this.pickerDiv.clientHeight,u)),this.canvas&&(this.props.mode==="img"&&this.img?.naturalWidth>0?this.correctForRatio(this.canvas,f,this.pickerDiv.clientHeight,u):this.props.mode==="video"&&this.video&&this.video?.videoWidth>0?this.correctForRatio(this.canvas,f,this.pickerDiv.clientHeight,u):(this.canvas.width=this.canvas.parentNode.clientWidth,this.canvas.height=this.canvas.parentNode.clientHeight,this.canvas.style.width=this.canvas.parentNode.clientWidth,this.canvas.style.height=this.canvas.parentNode.clientHeight))};useWebcam=()=>{this.props.running=!1,this.img.style.display="none",this.video.src&&(this.graphVideoSnip=!1,this.capturegraphctx.clearRect(0,0,this.capturegraph.width,this.capturegraph.height),this.video.pause(),this.video.src=""),this.video.style.display="",navigator.getUserMedia&&navigator.getUserMedia({audio:!1,video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]}},s=>{this.video.srcObject=s,this.video.play(),this.props.mode="video"},console.error)};useImage=()=>{this.props.running=!1,this.video.src&&(this.graphVideoSnip=!1,this.capturegraphctx.clearRect(0,0,this.capturegraph.width,this.capturegraph.height),this.video.pause(),this.video.src="",this.video.style.display="none"),this.img.src=this.select.options[this.select.selectedIndex].value,this.img.style.display="",this.props.mode="img",this.onresize()};inputImgUrl(){this.props.running=!1;let s=this.querySelector("#urlinput").value;s&&(this.video.src&&(this.graphVideoSnip=!1,this.capturegraphctx.clearRect(0,0,this.capturegraph.width,this.capturegraph.height),this.video.pause(),this.video.src="",this.video.style.display="none"),this.img.src=s,this.img.style.display="",this.props.mode="img",this.onresize())}inputVideoSrc(){this.props.running=!1,this.img.style.display="none",this.video.style.display="";let s=this.querySelector("#urlinput").value;s&&(this.video.src&&(this.graphVideoSnip=!1,this.capturegraphctx.clearRect(0,0,this.capturegraph.width,this.capturegraph.height),this.video.pause(),this.video.src=""),this.video.src=s,this.video.play(),this.props.mode="video",this.onresize())}loadFile=()=>{var s=document.createElement("input");s.accept=".mp4,.png,.bmp,.jpg",s.type="file",s.onchange=u=>{let f=u.target.files[0],m=URL.createObjectURL(f);if(this.loaded[s.value]=m,this.video.src&&(this.graphVideoSnip=!1,this.capturegraphctx.clearRect(0,0,this.capturegraph.width,this.capturegraph.height),this.video.pause(),this.video.src="",this.video.style.display="none"),s.value.endsWith(".mp4"))this.props.mode="video",this.video.src=m,this.video.play();else if(this.props.mode="img",s.value.endsWith(".bmp")){var v=new FileReader;v.onload=_=>{var F=_.target.result,w=Xo(F);let h=Yo(w);this.img.src=h},v.readAsArrayBuffer(f)}else this.img.src=m},s.click()};drawCircle(s,u,f,m="green",v=5,_="#003300",F=this.ctx){F.beginPath(),F.arc(s,u,f,0,2*Math.PI,!1),F.fillStyle=m,F.fill(),F.lineWidth=v,F.strokeStyle=_,F.closePath(),F.stroke()}drawLine(s={x:0,y:0},u={x:1,y:1},f=5,m="#003300",v=this.ctx){v.beginPath(),v.lineWidth=f,v.strokeStyle=m,v.moveTo(s.x,s.y),v.lineTo(u.x,u.y),v.stroke()}canvasClicked=s=>{if(this.props.running=!1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.props.picking===0){this.props.picked.x0=s.pageX-this.canvas.offsetLeft,this.props.picked.y0=s.pageY-this.canvas.offsetTop,this.props.picked.x1=void 0,this.props.picked.y1=void 0;let u;this.props.mode==="img"?u=Hi(this.img,this.canvas,this.props.picked.x0,this.props.picked.y0):this.props.mode==="video"&&(u=Hi(this.video,this.canvas,this.props.picked.x0,this.props.picked.y0)),this.props.imgpicked.x0=u.x,this.props.imgpicked.y0=u.y,this.props.imgpicked.x1=void 0,this.props.imgpicked.y1=void 0,this.drawCircle(this.props.picked.x0,this.props.picked.y0,2.5,"orange",1,"orange"),this.props.picking=1}else{this.props.picked.x1=s.pageX-this.canvas.offsetLeft,this.props.picked.y1=s.pageY-this.canvas.offsetTop;let u;if(this.props.mode==="img"?u=Hi(this.img,this.canvas,this.props.picked.x1,this.props.picked.y1):this.props.mode==="video"&&(u=Hi(this.video,this.canvas,this.props.picked.x1,this.props.picked.y1)),this.props.imgpicked.x1=u.x,this.props.imgpicked.y1=u.y,this.props.picked.x1<this.props.picked.x0){let f=this.props.picked.x1;this.props.picked.x1=this.props.picked.x0,this.props.picked.x0=f,f=this.props.imgpicked.x1,this.props.imgpicked.x1=this.props.imgpicked.x0,this.props.imgpicked.x0=f}if(this.props.picked.y1<this.props.picked.y0){let f=this.props.picked.y1;this.props.picked.y1=this.props.picked.y0,this.props.picked.y0=f,f=this.props.imgpicked.y1,this.props.imgpicked.y1=this.props.imgpicked.y0,this.props.imgpicked.y0=f}this.props.picking=0,this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.strokeStyle="orange",this.ctx.rect(this.props.picked.x0,this.props.picked.y0,Math.abs(this.props.picked.x1-this.props.picked.x0),Math.abs(this.props.picked.y1-this.props.picked.y0)),this.ctx.stroke(),this.querySelector("#capturedeets").innerHTML=`Snip Resolution (actual): ${Math.round(Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0))}x${Math.round(Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0))}`,this.capture.width=this.captureDiv.clientWidth,this.capture.height=this.captureDiv.clientHeight,this.props.mode==="video"?this.continuousCapture(this.video):Zr(this.capturectx,this.img,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),0,0,this.capture.width,this.capture.height)}};async continuousCapture(s){if(this.props.imgpicked.x1&&this.props.imgpicked.x0&&this.props.imgpicked.y1&&this.props.imgpicked.y0){if(this.capturectx.drawImage(s,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0),0,0,this.capture.width,this.capture.height),this.graphVideoSnip){let u=this.capturectx.getImageData(0,0,this.capture.width,this.capture.height),f=qr(u);Ge(this.capturectx,f.xrgbintensities,f.xintmax)}setTimeout(()=>{requestAnimationFrame(async()=>{this.continuousCapture(s)})},33.3333)}}processCapture=s=>{let u=this.createBitmapCanvasWithMenu(s,this.querySelector("#capturelist"),"100%");u.timestamp&&(this.captures[u.timestamp]=u)};canvasCapture(s){if(this.props.mode==="img"){if(!this.img.src)return;createImageBitmap(this.img,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0)).then(this.processCapture)}else if(this.props.mode==="video"){if(!this.video.src)return;createImageBitmap(this.video,this.props.imgpicked.x0,this.props.imgpicked.y0,Math.abs(this.props.imgpicked.x1-this.props.imgpicked.x0),Math.abs(this.props.imgpicked.y1-this.props.imgpicked.y0)).then(this.processCapture)}}correctForRatio=(s,u,f,m)=>{u*m>f?(s.height=f,s.width=s.height/m):(s.width=u,s.height=s.width*m)};async createBitmapCanvasWithMenu(s,u,f="320px",m="180px"){let v="30%",_="54%";if(!m.includes("%")){let w=`${m[m.length-2]}${m[m.length-1]}`;m=m.substring(0,m.length-2),v=.3*parseFloat(m)+w,console.log(v),_=.54*parseFloat(m)+w}let F=`
        <div style='width:${f}; max-height:${m}; border: 1px solid white; border-radius:3px; padding:2px;'>
            <span style='height:6%;'>
                <input id='title' type='text' placeholder='Name/Tag' style='padding:4px; font-size:8px; width:15%;'>
                <button id='savepng' title='Save PNG?' style='font-size:8px;'>\u{1F5BC}\uFE0F(png)</button>
                <button id='savecsv' title='Save CSV?' style='font-size:8px;'>\u{1F4C4}(csv)</button>
                <button id='savebmp' title='Save BMP?' style='font-size:8px;'>\u{1F5BC}\uFE0F(bmp)</button>
                <button id='backup' title='Backup (cache)?' style='font-size:8px;'>\u{1F4CB}
                </button><button  title='Close?' id='X' style='font-size:8px; float:right;'>\u274C</button>
                <button id='toggledisplay' title='Toggle display?' style='font-size:8px; float:right;'>\u{1F453}</button>
                <button id='setsample2' title='Compare as Sample 2' style='font-size:8px; float:right;'>S2</button>
                <button id='setsample1' title='Compare as Sample 1' style='font-size:8px; float:right;'>S1</button>
                <button id='setbaseline' title='Compare as Baseline' style='font-size:8px; float:right;'>B</button>
            </span><br>
            <canvas id='capturecanvas' style='width:100%; max-height:${v};'></canvas>
            <canvas id='graphcanvas' style='width:100%; height:${_}; background-color:black;'></canvas>
        </div><br>`;if(typeof u=="string"&&(u=document.getElementById(u)),u){u.insertAdjacentHTML("afterbegin",F);let w=document.querySelector("#capturecanvas");w.width=s.width,w.height=s.height;let h=w.getContext("2d");h.drawImage(s,0,0);let I=document.querySelector("#title"),y=h.getImageData(0,0,w.width,w.height),A=document.querySelector("#graphcanvas");A.width=w.width,A.height=w.height;let C=qr(y);Ge(A.getContext("2d"),C.xrgbintensities,C.xintmax);let T={node:w.parentNode,parentNode:u,width:s.width,height:s.height,canvas:w,graph:A,input:I,timestamp:Date.now(),mapped:C};return u.querySelector("#setsample1").onclick=()=>{this.addBitmapComparison(C,I.value,1,w)},u.querySelector("#setsample2").onclick=()=>{this.addBitmapComparison(C,I.value,2,w)},u.querySelector("#setbaseline").onclick=()=>{this.addBitmapComparison(C,I.value,3,w)},u.querySelector("#toggledisplay").onclick=()=>{w.style.display==""&&A.style.display==""?w.style.display="none":w.style.display=="none"?(w.style.display="",A.style.display="none"):A.style.display=="none"&&(A.style.display="")},u.querySelector("#backup").onclick=()=>{Vo(T.mapped,I.value+"_"+new Date().toISOString())},u.querySelector("#savepng").onclick=()=>{let M=new OffscreenCanvas(T.mapped.bitmap.width,T.mapped.bitmap.height);M.getContext("2d").drawImage(s,0,0);let U=new FileReader;U.addEventListener("load",function(){var J=document.createElement("a");J.href=U.result,J.target="_blank",I.value!==""?J.download=I.value+"_"+new Date().toISOString()+".png":J.download=new Date().toISOString()+".png",J.click()},!1),M.convertToBlob({type:"image/png"}).then(J=>{U.readAsDataURL(J)})},u.querySelector("#savebmp").onclick=()=>{let M=Vr.ImageDatatoDataURL(qo(T.mapped.bitarr,T.mapped.width,T.mapped.height));var U=document.createElement("a");U.href=M,U.target="_blank",I.value!==""?U.download=I.value+"_"+new Date().toISOString()+".bmp":U.download=new Date().toISOString()+".bmp",U.click()},u.querySelector("#savecsv").onclick=()=>{qe(T.mapped.xrgbintensities,I.value)},u.querySelector("#X").onclick=()=>{w.parentNode.parentNode.removeChild(w.parentNode)},T}return F}async addBitmapComparison(s,u=new Date().toISOString(),f=1,m=void 0){if(f!==1&&f!==2&&f!==3)return;let v;u||(u=new Date().toISOString()),f===1?(v=this.querySelector("#sample1"),this.comparing.sample1=s,this.querySelector("#sample1csv").onclick=()=>{qe(s.xrgbintensities,"Sample1_"+u)}):f===2?(v=this.querySelector("#sample2"),this.comparing.sample2=s,this.querySelector("#sample2csv").onclick=()=>{qe(s.xrgbintensities,"Sample2_"+u)}):f===3&&(v=this.querySelector("#baseline"),this.comparing.baseline=s,this.querySelector("#baselinecsv").onclick=()=>{qe(s.xrgbintensities,"Baseline_"+u)}),v.height=v.clientHeight,v.width=v.clientWidth;let _=v.getContext("2d");if(m&&Zr(_,m),Ge(_,s.xrgbintensities,s.xintmax),(f===1||f===2)&&this.comparing.sample1&&this.comparing.sample2){let F=this.querySelector("#s2-s1");F.height=F.clientHeight,F.width=F.clientWidth,this.comparing.s2_s1=this.comparing.sample2.xrgbintensities.map((w,h)=>this.comparing.sample1.xrgbintensities[h]?{r:w.r-this.comparing.sample1.xrgbintensities[h].r,g:w.g-this.comparing.sample1.xrgbintensities[h].g,b:w.b-this.comparing.sample1.xrgbintensities[h].b,i:w.i-this.comparing.sample1.xrgbintensities[h].i}:w),this.querySelector("#s2-s1csv").onclick=()=>{qe(xrgbintensities,"Difference_Sample1_vs_"+u)},Ge(F.getContext("2d"),this.comparing.s2_s1)}if((f===1||f===3)&&this.comparing.sample1&&this.comparing.baseline){let F=this.querySelector("#b-s1");F.height=F.clientHeight,F.width=F.clientWidth,this.comparing.a1=this.comparing.baseline.xrgbintensities.map((w,h)=>this.comparing.sample1.xrgbintensities[h]?{r:w.r-this.comparing.sample1.xrgbintensities[h].r,g:w.g-this.comparing.sample1.xrgbintensities[h].g,b:w.b-this.comparing.sample1.xrgbintensities[h].b,i:w.i-this.comparing.sample1.xrgbintensities[h].i}:w),this.querySelector("#a1csv").onclick=()=>{qe(xrgbintensities,"BaselineCorrected_"+u)},Ge(F.getContext("2d"),this.comparing.a1)}if((f===2||f===3)&&this.comparing.sample2&&this.comparing.baseline){let F=this.querySelector("#b-s2");F.height=F.clientHeight,F.width=F.clientWidth,this.comparing.a2=this.comparing.baseline.xrgbintensities.map((w,h)=>this.comparing.sample2.xrgbintensities[h]?{r:w.r-this.comparing.sample2.xrgbintensities[h].r,g:w.g-this.comparing.sample2.xrgbintensities[h].g,b:w.b-this.comparing.sample2.xrgbintensities[h].b,i:w.i-this.comparing.sample2.xrgbintensities[h].i}:w),this.querySelector("#a2csv").onclick=()=>{qe(xrgbintensities,"BaselineCorrected_"+u)},Ge(F.getContext("2d"),this.comparing.a2)}if(this.comparing.sample1&&this.comparing.sample2&&this.comparing.baseline){let F=this.querySelector("#d2-d1");F.height=F.clientHeight,F.width=F.clientWidth,this.comparing.d2_d1=this.comparing.a2.map((w,h)=>this.comparing.a1[h]?{r:w.r-this.comparing.a1[h].r,g:w.g-this.comparing.a1[h].g,b:w.b-this.comparing.a1[h].b,i:w.i-this.comparing.a1[h].i}:w),this.querySelector("#d2-d1csv").onclick=()=>{qe(xrgbintensities,"D2minusD1_"+u)},Ge(F.getContext("2d"),this.comparing.d2_d1)}return v}};Yr.addElement("spectrometer-node");Eo(["processed"]);var tc=document.createElement("spectrometer-node");document.body.appendChild(tc);})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/
/*! canvas-to-bmp version 1.0 ALPHA https://stackoverflow.com/questions/29652307/canvas-unable-to-generate-bmp-image-dataurl-in-chrome
    (c) 2015 Ken "Epistemex" Fyrstenberg, modified by Josh Brewster 2022
    MIT License (this header required)
*/
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */

        </script>
      </body>
    